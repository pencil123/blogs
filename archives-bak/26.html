
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>sort 排序 | 青春部落    </title>
    <meta name="keywords"  content="" />
    <meta name="description"  content="" />
    <link rel="stylesheet" type="text/css" media="all" href="https://cn-blogs.cn/wp-content/themes/pencilone/style.css" />
    <link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="pingback" href="https://cn-blogs.cn/xmlrpc.php">
    <link id="favicon" href="/favicon.ico" rel="icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="青春部落 &raquo; sort 排序评论Feed" href="https://cn-blogs.cn/archives/26.html/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/cn-blogs.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.1"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56794,8205,9794,65039],[55358,56794,8203,9794,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='https://api.w.org/' href='https://cn-blogs.cn/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://cn-blogs.cn/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://cn-blogs.cn/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='cut 截取' href='https://cn-blogs.cn/archives/24.html' />
<link rel='next' title='tr 文本字符替换' href='https://cn-blogs.cn/archives/28.html' />
<meta name="generator" content="WordPress 4.9.1" />
<link rel="canonical" href="https://cn-blogs.cn/archives/26.html" />
<link rel='shortlink' href='https://cn-blogs.cn/?p=26' />
<link rel="alternate" type="application/json+oembed" href="https://cn-blogs.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcn-blogs.cn%2Farchives%2F26.html" />
<link rel="alternate" type="text/xml+oembed" href="https://cn-blogs.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcn-blogs.cn%2Farchives%2F26.html&#038;format=xml" />
<link rel="icon" href="https://cn-blogs.cn/wp-content/uploads/2018/03/cropped-logo-32x32.png" sizes="32x32" />
<link rel="icon" href="https://cn-blogs.cn/wp-content/uploads/2018/03/cropped-logo-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://cn-blogs.cn/wp-content/uploads/2018/03/cropped-logo-180x180.png" />
<meta name="msapplication-TileImage" content="https://cn-blogs.cn/wp-content/uploads/2018/03/cropped-logo-270x270.png" />

<meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">


</head>

<body class="post-template-default single single-post postid-26 single-format-standard">
<header class="navbar">
<div class="container">
    <div class="navbar-brand">
        <img src="/logo.png" width="73" height="88">
        <div>
        <h1 class="title2 is-3 navbar-item">
            <a href="https://cn-blogs.cn/" rel="home">青春部落</a>
        </h1>
        <p class="has-text-right">
            <a href="/">记录生活的足迹</a>
        </p>
        </div>
    </div>
    <div class="navbar-menu is-active">
    <div class="navbar-end">
    <div class="tabs is-right">
    <a class="navbar-item" href="/pages/index.html">索引</a>
    <a class="navbar-item" href="/about">About</a>
    </div>
    </div>
    </div>
</div>
</header>


<main class="container">
        <article class="article margin-top20">

        <!-- 文章分类和上一篇\下一篇 -->
        <div class="box columns">
            <!-- 文章分类 -->
            <div class="column is-two-fifth">
                <div class="categproe-name">分类：</div>
                <ul class="post-categories">
	<li><a href="https://cn-blogs.cn/archives/category/kernel/shell" rel="category tag">Shell 壳</a></li></ul>            </div>
            <!-- 文章分类结束 -->

            <!-- 上一篇和下一篇 -->
            <div class="column is-two-fifth is-offset-5">
                
	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://cn-blogs.cn/archives/24.html" rel="prev">上一篇：cut 截取</a></div><div class="nav-next"><a href="https://cn-blogs.cn/archives/28.html" rel="next">下一篇：tr 文本字符替换</a></div></div>
	</nav>            </div>
            <!-- 上一篇和下一篇结束 -->
        </div>

        <!-- 文章信息 -->
        <!-- 文章标题 -->
        <div class="title is-3 has-text-centered">
            sort 排序        </div>
        <!-- 文章标题结束 -->

        <!-- 文章作者、发布时间、更新时间 -->
        <div class="subtitle is-5 has-text-centered">
            <span class="entry-author"><a href="https://cn-blogs.cn/archives/author/admin" title="由admin发布" rel="author">admin</a></span>
            <span class="entry-date">2015/08/13</span>
            <span class="update is-hidden">2018-01-11</span>
        </div>
        <!-- 文章作者、发布时间、更新时间结束 -->

        <!-- 文章内容 -->
        <div class="content article-body">
            <div class="content">
                <p>sort是Linux命令，主要用于排序文件、对已排序的文件进行合并，并检查文件以确定它们是否已排序。<br />
语法<br />
sort [ -A ] [ -b ] [ -c ] [ -d ] [ -f ] [ -i ] [ -m] [ -n ] [ -r ] [ -u ] [ -o OutFile ] [ -t Character ] [ -T Directory ] [ -y [ Kilobytes ] ] [ -z RecordSize ] [ [ + [ FSkip ] [ .CSkip ] [ b ] [ d ] [ f ] [ i ] [ n ] [ r ] ] [ &#8211; [ FSkip ] [ .CSkip ] [ b ] [ d ] [ f ] [ i ] [ n ] [ r ] ] ] &#8230; [ -k KeyDefinition ] &#8230; [ File &#8230; ]<br />
描述<br />
sort 命令对 File 参数指定的文件中的行排序，并将结果写到标准输出。如果 File 参数指定多个文件，那么 sort 命令将这些文件连接起来，并当作一个文件进行排序。</p>
<p><strong>-n ：使用『纯数字』进行排序(默认是以文字型态来排序的)；</strong><br />
<strong>-r ：反向排序；</strong><br />
<strong>-u ：就是 uniq ，相同的数据中，仅出现一行代表；</strong><br />
<strong>-t ：分隔符，默认是用 [tab] 键来分隔；</strong><br />
<strong>-k ：以那个区间 (field) 来进行排序的意思</strong><br />
<strong>-f ：忽略大小写的差异，例如 A 与 a 视为编码相同；</strong><br />
<strong>-b ：忽略最前面的空格符部分；</strong></p>
<p>/etc/passwd 内容是以 : 来分隔的，我想以第三栏来排序，该如何<br />
[root@www ~]# cat /etc/passwd | sort -t &#8216;:&#8217; -k 3<br />
默认是以字符串来排序的，如果想要使用数字排序：<br />
cat /etc/passwd | sort -t &#8216;:&#8217; -k 3n<br />
默认是升序排序，如果要倒序排序，如下<br />
cat /etc/passwd | sort -t &#8216;:&#8217; -k 3nr<br />
如果要对/etc/passwd,先以第六个域的第2个字符到第4个字符进行正向排序，再基于第一个域进行反向排序。<br />
cat /etc/passwd | sort -t&#8217;:&#8217; -k 6.2,6.4 -k 1r<br />
查看/etc/passwd有多少个shell:对/etc/passwd的第七个域进行排序，然后去重:<br />
cat /etc/passwd | sort -t&#8217;:&#8217; -k 7 -u</p>
<div><b>-（减号）代替文件名指定标准输入。如果您不指定任何文件名，那么该命令对标准输入排序。</b></div>
<div><b>可以使用 -o 标志指定输出文件。</b><br />
如果不指定任何标志，sort 命令基于当前语言环境的整理顺序对输入文件的所有行排序。</div>
<div></div>
<div><b>示例</b><br />
排序fruits<br />
1. 要在 LC_ALL、LC_COLLATE 或 LANG环境变量设置为 En_US 的情况下排序 fruits 文件，请输入：<br />
LANG=En_US sort fruits<br />
此命令序列显示以升序词典顺序排序的 fruits 文件的内容。每一列的字符，包括空格、数字和特殊字符都经一一比较。例如，如果 fruits 文件包含文本：<br />
<b>banana<br />
orange<br />
Persimmon<br />
apple<br />
%%banana<br />
apple<br />
ORANGE</b><br />
sort 命令显示:<br />
%%banana<br />
ORANGE<br />
Persimmon<br />
apple<br />
apple<br />
banana<br />
orange<br />
<u><i>在 ASCII 整理序列中，%（百分号）在大写字母前，大写字母在小写字母前。如果您当前的语言环境指定 ASCII 之外的字符集，结果可能不同。</i></u><br />
<b>顺序排序</b><br />
sort -d fruits<br />
此命令序列排序和显示 fruits 文件的内容，并且只比较字母、数字和空格。如果 fruits 文件与示例 1 相同，那么 sort 命令显示：<br />
ORANGE<br />
Persimmon<br />
apple<br />
apple<br />
%%banana<br />
banana<br />
orange<br />
<u><i>-d 标志忽略 %（百分号）字符，因为它不是个字母、数字或空格。（即 %%banana 被 banana 取代）。</i></u><br />
字母分组<br />
要将包含大写字母和具有类似小写行的特殊字符行分组，请输入：<br />
<b>sort -d -f fruits</b><br />
-d 标志忽略特殊字符，-f 标志忽略大小写差异。将 LC_ALL、LC_COLLATE 或 LANG 环境变量设置为 C 的情况下，fruits 文件的输出结果变为：<br />
apple<br />
apple<br />
%%banana<br />
banana<br />
ORANGE<br />
orange<br />
Persimmon<br />
排序<br />
sort -d -f -u fruits<br />
<b>-u 标志告诉 sort 命令除去重复的行，使文件中的每一行唯一。此命令序列显示：</b><br />
apple<br />
%%banana<br />
orange<br />
Persimmon<br />
不仅除去重复的 apple，而且也除去了 banana 和 ORANGE。除去这些是因为 -d 标志忽略 %% 这个特殊字符，-f 标志忽略大小写差异。<br />
实例<br />
sort -u +0 -d -f +0 fruits<br />
输入 +0 -d -f 完成的排序与示例 3 中 -d -f 的排序类型相同，<b>+0 进行另一项比较以区分不一样的行。这防止 -u 标志将它们除去。</b><br />
示例 1 所示的 fruits 文件中，添加的 +0 将 %%banana 与 banana 及 ORANGE 与 orange 区分开来。然而，apple 的两个实例是相同的，所以其中之一被删除。<br />
apple<br />
%%banana<br />
banana<br />
ORANGE<br />
orange<br />
Persimmon<br />
<b>字符</b><br />
<b>sort -t: +1 vegetables</b><br />
此命令序列排序 vegetables 文件，对每一行上第一个冒号后的文本进行比较。<b>+1 告诉 sort 命令忽略第一字段，从第二字段的开始到该行的结束进行比较。-t: 标志告诉 sort 命令冒号分隔字段。</b>如果 vegetables 包含：<br />
yams:104<br />
turnips:8<br />
potatoes:15<br />
carrots:104<br />
green beans:32<br />
radishes:5<br />
lettuce:15<br />
那么，将 LC_ALL、LC_COLLATE 或 LANG 环境变量设置为 C 的情况下，sort 命令将显示：<br />
carrots:104<br />
yams:104<br />
lettuce:15<br />
potatoes:15<br />
green beans:32<br />
radishes:5<br />
turnips:8<br />
注意数字没有按照数字排序。当用字典式分类从左至右比较每一个字符时出现这种情况。换句话说，3 在 5 之前，所以 32 在 5 之前。<br />
排序数字<br />
<b>sort -t: +1 -n vegetables</b><br />
此命令序列按照第二个字段对 vegetables 文件进行数字排序。如果 vegetables 文件与示例 6 中的相同，那么 sort 命令将显示：<br />
radishes:5<br />
turnips:8<br />
lettuce:15<br />
potatoes:15<br />
green beans:32<br />
carrots:104<br />
yams:104<br />
8. 要对多个字段排序，请输入：<br />
sort -t: +1 -2 -n +0 -1 -r vegetables<br />
或<br />
sort -t: -k2,2 n -k1,1 r vegetables<br />
此命令序列对第二字段（+1 -2 -n）进行数字排序。在这个顺序中，它以逆字母顺序（+0 -1 -r）对第一字段排序。将 LC_ALL、LC_COLLATE 或 LANG 环境变量设置为 C 的情况下，输出将类似于：<br />
radishes:5<br />
turnips:8<br />
potatoes:15<br />
lettuce:15<br />
green beans:32<br />
yams:104<br />
carrots:104<br />
此命令按数字顺序对行排序。当两行数字相同时，它们以逆字母顺序出现。<br />
原始文件<br />
sort -o vegetables vegetables<br />
此命令序列将排序输出存入 vegetables 文件（ -o vegetables）。<br />
文件<br />
/usr/bin/sort 包含 sor排序函数</div>
<div></div>
<div><b>关键字</b><br />
排序关键字是输入行的一部分，由字段号和列号指定。字段是输入行的组成部分，由字段分隔符分隔。缺省字段分隔符是由一个或多个连续空格字符组成的序列。使用 -t 标志可指定不同的字段分隔符。在 C 语言和英语语言环境下，制表符和空格字符都是空格符。<br />
使用排序关键字时，sort 命令首先根据第一个排序关键字的内容对所有行排序。然后，根据第二个排序关键字的内容，对所有第一个排序关键字相同的行排序，如此进行下去。按照排序关键字在命令行中出现的顺序给它们编号。如果两行对所有排序关键字的排序都相同，则对全部行依据当前语言环境的整理顺序进行比较。<br />
对字段中的列进行编号时，缺省字段分隔符中的空格符将作为后继字段计数。前导空格不计作第一字段的一部分，-t 标志指定的字段分隔符将不作为字段的一部分计数。可使用 -b 标志忽略前导空格符。<br />
可使用下列两种方法定义排序关键字：<br />
* -k KeyDefinition<br />
* FSkip.CSkip（废弃版本）。<br />
<b>使用 -k 标志定义排序关键字</b><br />
-k KeyDefinition 标志采用下列形式：<br />
-k [ FStart [ .CStart ] ] [ Modifier ] [ , [ FEnd [ .CEnd ] ][ Modifier ] ]<br />
排序关键字包括所有以 FStart变量指定的字段和 CStart 变量指定的列开头的及以 FEnd 变量指定的字段和 CEnd 变量指定的列结束的字符。如果不指定 Fend，就假定行的最后一个字符。如果不指定 CEnd，就假定 FEnd 字段的最后一个字符。KeyDefinition 变量中的任何字段号或列号都可以省略。缺省值为：<br />
<b>FStart 行开头<br />
CStart 字段第一列<br />
FEnd 行结束<br />
CEnd 字段最后一列</b><br />
如果字段间有任意空格，sort 就把它们看作分隔的字段。<br />
Modifier变量的值可以是字母 b、d、f、i、n 或 r 中的一个或多个。修饰符仅应用于它们连接的字段定义，与同一字母的标志有同样的效果。修饰符字母 b 仅应用于其连接的字段定义的末尾。例如：<br />
-k 3.2b,3r<br />
指定排序关键字，从第三字段的第二非空格列开始并扩展至第三字段结束，对这个关键字的排序以逆向整理顺序完成。如果 FStart 变量和 CStart 变量在命令行末尾以外或在 FEnd 变量和 CEnd 变量之后，那么该排序关键字被忽略。<br />
排序关键字也可用下列方式指定：<br />
[+[FSkip1] [.CSkip1] [Modifier] ] [-[FSkip2] [.CSkip2] [Modifier]]<br />
+FSkip1 变量指定跳过的字段数以到达排序关键字第一字段，+CSkip 变量指定在该字段中跳过的列数以到达排序关键字第一个字符。-FSkip 变量指定跳过的字段数以到达排序关键字后的第一个字符，-CSkip 变量指定在该字段中跳过的列数。可以省略任何要跳过的字段和列。缺省值为：<br />
<b>FSkip1 行开头<br />
CSkip1 零<br />
FSkip2 行结束<br />
CSkip2 零</b><br />
Modifier 变量指定的修改量与 -k 标志关键字排序定义中的相同。<br />
因为 +FSkip1.CSkip1 变量指定到达排序关键字前要跳过多少字段和列，所以这些变量指定的字段号和列号通常比排序关键字本身的字段号和列号小 1。例如：<br />
+2.1b -3r<br />
指定排序关键字，从第三字段的第二非空格列开始并扩展至第三字段结束，对这个关键字的排序以逆向整理顺序完成。语句 +2.1b 指定跳过两个字段，然后跳过前导空格和另一列。如果 +FSkip1.CSkip1 变量在命令行末尾以外或在 -FSkip2.CSkip2 变量之后，则忽略该排序关键字。<br />
注：一行的最大字段数为 10。<br />
标志<br />
注：在任何排序关键字定义前出现的 -b、-d、-f、-i、-n 或 -r 标志应用于所有排序关键字。-b、-d、-f、-i、-n 或 -r 标志都不能单独出现在 -k KeyDefinition 之后；如果它们作为修饰符连接 KeyDefinition 变量，那么就只应用于连接排序关键字。如果这些标志之一跟随在 +Fskip.Cskip 或 -Fskip.Cskip 排序关键字定义后，那么该标志只能用于此排序关键字。<br />
-A 使用 ASCII 整理顺序代替当前语言环境的整理顺序在逐字节的基础上排序。<br />
-b 忽略前导空格和制表符，找出字段的第一或最后列。<br />
-c 检查输入是否已按照标志中指定的排序规则进行排序。如果输入文件排序不正确，就返回一个非零值。<br />
-d 使用字典顺序排序。比较中仅考虑字母、数字和空格。<br />
-f 比较前将所有小写字母改成大写字母。<br />
-i 比较中忽略所有非打印字符。<br />
-k KeyDefinition 指定排序关键字。KeyDefinition 选项的格式为：<br />
[ FStart [ .CStart ] ] [ Modifier ] [ , [ FEnd [ .CEnd ] ][ Modifier ] ]<br />
排序关键字包括所有以 FStart 变量指定的字段和 CStart 变量指定的列开头的字符及以 FEnd 变量指定的字段和 CEnd 变量指定的列结束的字符。Modifier 变量的值可以是 b、d、f、i、n 或 r。 修饰符与同一字母的标志等价。<br />
-m 只合并多个输入文件；假设输入文件已经排序。<br />
-n 按算术值对数字字段排序。数字字段可包含前导空格、可选减号、十进制数字、千分位分隔符和可选基数符。对包含任何非数字字符的字段进行数字排序会出现无法预知的结果。<br />
-o OutFile 将输出指向OutFile参数指定的文件，而不是标准输出。OutFile 参数值可以与 File 参数值相同。<br />
-r 颠倒指定排序的顺序。<br />
-t Character 指定 Character 为单一的字段分隔符。<br />
-u 禁止按照排序关键字和选项的所有等同排序（每一组行中一行除外）。<br />
-T Directory 将创建的所有临时文件放入 Directory 参数指定的目录中。<br />
-y[Kilobytes] 用 Kilobytes 参数指定的主存储的千字节数启动 sort 命令，并根据需要增加存储量。（如果 Kilobytes 参数指定的值小于最小存储站点或大于最大存储站点，就以这个最小存储站点或最大存储站点取代）。如果省略 -y 标志，sort 命令以缺省的存储大小启动。-y0 标志用最小存储启动，而 -y 标志（不带 Kilobytes 值）用最大存储启动。sort 命令使用的存储量显著地影响性能。以大存储量对小文件排序将很浪费。<br />
-z RecordSize 如果正在排序的任一行大于缺省的缓冲区大小，要防止出现异常终止。指定 -c 或 -m 标志时，省略排序阶段，使用系统的缺省缓冲大小。如果已排序行超出这一大小，排序异常终止。-z 选项指定排序阶段最长行的记录，因而可在合并阶段分配足够的缓冲区。RecordSize 必须指明等于或大于要合并的最长行的字节值。<br />
退出状态<br />
该命令返回以下出口值：<br />
0 所有输入文件成功输出，或指定了 -c 且正确排序了输入文件。<br />
1 在 -c 选项下，文件没有按指定排序，或如果指定 -c 和 -u 选项，找到了两个具有相同关键字的输入行。<br />
&gt;1 发生错误。</div>
            </div>
        </div>
        <!-- 文章内容结束 -->
    </article>


</main><!-- .content-area -->

<div class="footer">
    <div class="container">

<div class="has-text-centered">
Copyright©2015-20178 cn-blogs.cn. All Rights Reserved. 鲁ICP备18001334号-2
</div>
    </div>
  </div>

</body>
</html>
