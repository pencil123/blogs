<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>第25章MySQL性能模式</title>
<link rel="stylesheet" href="./images/mvl.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2">
<link rel="start" href="/mysql-5.7-google-zh/index.html" title="{书名}">
<link rel="up" href="/mysql-5.7-google-zh/performance-schema.html" title="">
<link rel="prev" href="/mysql-5.7-google-zh/information-schema.html" title="第24章INFORMATION_SCHEMA表">
<link rel="next" href="/mysql-5.7-google-zh/sys-schema.html" title="第26章MySQL sys模式">
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./images/translateelement.css"></head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tbody><tr>
<th colspan="3" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25章MySQL性能模式</font></font></th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/information-schema.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a>&nbsp;</td>
<th width="60%" align="center"></th>
<td width="20%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/sys-schema.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
</tbody></table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="performance-schema"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25章MySQL性能模式</font></font></h1>

</div>

</div>

</div>
<div class="toc">
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></b></p><dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-quick-start"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.1性能架构快速入门</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-build-configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.2性能模式构建配置</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-startup-configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.3性能模式启动配置</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-runtime-configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4性能模式运行时配置</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.1性能模式事件时序</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.2性能模式事件过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.3事件预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.4通过仪器进行预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-object-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.5按对象预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-thread-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.6通过线程预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.7消费者预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.8消费者配置示例</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering-names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.9用于过滤操作的命名工具或消费者</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrumentation-checking"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.10确定仪器是什么</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-queries"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.5性能模式查询</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.6性能架构仪器命名约定</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-monitoring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.7性能模式状态监视</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-atom-molecule-events"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.8性能模式原子和分子事件</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.9性能架构语句摘要</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-table-characteristics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.10性能模式一般表特征</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-table-descriptions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11性能模式表说明</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-table-index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.1性能模式表索引</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-setup-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2性能架构设置表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instance-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3性能模式实例表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-wait-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4性能模式等待事件表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-stage-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5性能模式阶段事件表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6性能架构语句事件表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-transaction-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7性能模式事务表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8性能模式连接表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-attribute-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.9性能架构连接属性表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-user-variable-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.10性能模式用户变量表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-replication-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11性能模式复制表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-lock-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.12性能模式锁定表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.13性能模式系统变量表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.14性能模式状态变量表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15性能模式摘要表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-miscellaneous-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16性能架构杂项表</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-option-variable-reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.12性能模式选项和变量引用</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.13性能架构命令选项</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.14性能模式系统变量</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.15性能模式状态变量</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-memory-model"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.16性能模式内存分配模型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-and-plugins"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.17性能模式和插件</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.18使用性能模式诊断问题</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-query-profiling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.18.1使用性能模式查询性能分析</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-variable-table-migration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.19迁移到性能模式系统和状态变量表</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140527974964592"></a><a class="indexterm" name="idm140527974963552"></a><a class="indexterm" name="idm140527974962464"></a><a class="indexterm" name="idm140527974960976"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    MySQL性能模式是用于监视MySQL服务器执行的低级别功能。</font><font style="vertical-align: inherit;">性能模式具有以下特征：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式提供了一种在运行时检查服务器内部执行的方法。</font><font style="vertical-align: inherit;">它使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html" title="第25章MySQL性能模式"><code class="literal">PERFORMANCE_SCHEMA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎和</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库实施。</font><font style="vertical-align: inherit;">性能模式主要关注性能数据。</font><font style="vertical-align: inherit;">这与</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于检查元数据的元素不同。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能架构监视服务器事件。</font><font style="vertical-align: inherit;">一个
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是指服务器需要花费时间的任何事情，并且已经过检测，以便可以收集时间信息。</font><font style="vertical-align: inherit;">通常，事件可以是函数调用，等待操作系统，SQL语句执行的阶段（例如解析或排序），或者整个语句或一组语句。</font><font style="vertical-align: inherit;">事件集合提供了有关服务器和多个存储引擎的同步调用（如互斥锁）文件和表I / O，表锁等信息的访问权限。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能架构事件不同于写入服务器的二进制日志（描述数据修改）和事件调度器事件（这是一种存储程序）的事件。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式事件特定于MySQL服务器的给定实例。</font><font style="vertical-align: inherit;">性能架构表被视为服务器本地，并且对其进行的更改不会被复制或写入二进制日志。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        时事可用，以及事件历史和总结。</font><font style="vertical-align: inherit;">这使您可以确定执行仪表活动的次数以及他们花费了多少时间。</font><font style="vertical-align: inherit;">事件信息可用于显示特定线程的活动，或与特定对象（如互斥锁或文件）关联的活动。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html" title="第25章MySQL性能模式"><code class="literal">PERFORMANCE_SCHEMA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎使用收集事件数据</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检测点</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务器的源代码。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        收集的事件存储在</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库的</font><font style="vertical-align: inherit;">表中
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些表可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        像其他表一样的语句</font><font style="vertical-align: inherit;">来查询</font><font style="vertical-align: inherit;">。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过SQL语句</font><font style="vertical-align: inherit;">更新</font><font style="vertical-align: inherit;">数据库中的</font><font style="vertical-align: inherit;">表来动态修改性能模式配置</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">配置更改会立即影响数据收集。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能架构中的表是不使用持久磁盘存储的内存表。</font><font style="vertical-align: inherit;">内容在服务器启动时重新填充，并在服务器关闭时丢弃。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        监控可在MySQL支持的所有平台上使用。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可能存在一些限制：定时器的类型可能因平台而异。</font><font style="vertical-align: inherit;">适用于存储引擎的工具可能不适用于所有存储引擎。</font><font style="vertical-align: inherit;">每个第三方引擎的仪表是引擎维护者的责任。</font><font style="vertical-align: inherit;">另见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#performance-schema-restrictions" title="C.8对性能模式的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.8节“对性能模式的限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        数据收集是通过修改服务器源代码来添加检测来实现的。</font><font style="vertical-align: inherit;">不同于其他功能（如复制或事件计划程序），与性能架构不存在单独的线程关联。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    性能架构旨在提供有关服务器执行的有用信息，同时对服务器性能影响最小。</font><font style="vertical-align: inherit;">实施遵循以下这些设计目标：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        激活性能模式不会导致服务器行为发生变化。</font><font style="vertical-align: inherit;">例如，它不会导致线程调度发生更改，也不会导致查询执行计划（如图所示
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#explain" title="13.8.2 EXPLAIN语法"><code class="literal">EXPLAIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）发生更改。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        服务器监控持续不间断地进行，而且开销很小。</font><font style="vertical-align: inherit;">激活性能模式不会导致服务器不可用。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        解析器没有改变。</font><font style="vertical-align: inherit;">没有新的关键字或陈述。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        即使性能模式在内部失效，服务器代码的执行也会正常进行。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果在最初收集事件期间或稍后收集事件时执行处理之间进行选择，则优先考虑加快收集速度。</font><font style="vertical-align: inherit;">这是因为收集正在进行，而检索是按需提供的，可能永远不会发生。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        很容易添加新的检测点。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        仪器版本化。</font><font style="vertical-align: inherit;">如果检测实现发生变化，则以前检测到的代码将继续工作。</font><font style="vertical-align: inherit;">这有利于第三方插件的开发人员，因为不需要升级每个插件以与最新的性能模式更改保持同步。
</font></font></p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p>
      <a class="indexterm" name="idm140527974928976"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

      MySQL </font></font><code class="literal">sys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式是一组对象，可以方便地访问由性能模式收集的数据。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">sys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式是默认安装的。</font><font style="vertical-align: inherit;">有关使用说明，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/sys-schema.html" title="第26章MySQL sys模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第26章</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL sys模式</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-quick-start"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.1性能架构快速入门</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节简要介绍了性能模式，并给出了如何使用它的示例。</font><font style="vertical-align: inherit;">有关其他示例，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-examples" title="25.18使用性能模式诊断问题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.18节“使用性能模式诊断问题”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式默认启用。</font><font style="vertical-align: inherit;">要明确启用或禁用它，请启动服务器，将
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema"><code class="literal">performance_schema</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量设置为适当的值。</font><font style="vertical-align: inherit;">例如，在你的</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用这些行
       </font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema = ON</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当服务器启动时，它会看到
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema"><code class="literal">performance_schema</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并尝试初始化性能模式。</font><font style="vertical-align: inherit;">要验证成功的初始化，请使用以下语句：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW VARIABLES LIKE 'performance_schema';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">变量名| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">ON |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      值的</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意思是性能模式已成功初始化并可以使用。</font><font style="vertical-align: inherit;">值
       </font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着发生了一些错误。</font><font style="vertical-align: inherit;">检查服务器错误日志以获取有关错误的信息。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式被实现为存储引擎。</font><font style="vertical-align: inherit;">如果此引擎可用（您应该已经检查过），则应该看到它
       </font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">表格或</font><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">的输出中显示
       </font></font><code class="literal">SUPPORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">：
    </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#engines-table" title="24.6 INFORMATION_SCHEMA引擎表"><code class="literal">INFORMATION_SCHEMA.ENGINES</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-engines" title="13.7.5.16 SHOW ENGINES语法"><code class="literal">SHOW ENGINES</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.ENGINES</code></strong>
       <strong class="userinput"><code>WHERE ENGINE='PERFORMANCE_SCHEMA'\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      ENGINE：PERFORMANCE_SCHEMA</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     支持：是</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     评论：性能模式</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
交易：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          XA：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SAVEPOINTS：NO</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW ENGINES\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      引擎：PERFORMANCE_SCHEMA</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     支持：是</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     评论：性能模式</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
交易：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          XA：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  保存点：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html" title="第25章MySQL性能模式"><code class="literal">PERFORMANCE_SCHEMA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎上的表进行操作</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      数据库。</font><font style="vertical-align: inherit;">您可以创建</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认数据库，以便对其表的引用不需要使用数据库名称进行限定：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>USE performance_schema;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本章中的许多示例都假定
       </font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为默认数据库。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能架构表存储在
       </font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库中。</font><font style="vertical-align: inherit;">通过从</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库中</font><font style="vertical-align: inherit;">选择</font><font style="vertical-align: inherit;">或通过使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show" title="13.7.5 SHOW语法"><code class="literal">SHOW</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">，可以获得关于此数据库及其表的结构的信息，如同任何其他数据库一样
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，使用以下任一语句查看存在哪些性能模式表：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES</code></strong>
       <strong class="userinput"><code>WHERE TABLE_SCHEMA = 'performance_schema';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">账户|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">cond_instances |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_by_account_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_by_host_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_by_thread_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_by_user_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_global_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">file_instances |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">file_summary_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">file_summary_by_instance |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">host_cache |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">主机|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_by_account_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_by_host_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_by_thread_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_by_user_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_global_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">metadata_locks |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">mutex_instances |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">objects_summary_global_by_type |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_timers |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">replication_connection_configuration |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">replication_connection_status |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">replication_applier_configuration |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">replication_applier_status |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">replication_applier_status_by_coordinator |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">replication_applier_status_by_worker |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">rwlock_instances |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">session_account_connect_attrs |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">session_connect_attrs |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_actors |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_consumers |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_instruments |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_objects |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_timers |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">socket_instances |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">socket_summary_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">socket_summary_by_instance |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">table_handles |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">table_io_waits_summary_by_index_usage |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">table_io_waits_summary_by_table |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">table_lock_waits_summary_by_table |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">线程|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">用户|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW TABLES FROM performance_schema;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Tables_in_performance_schema |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">账户|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">cond_instances |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式表的数量随着时间的推移而增加，因为其他仪器的实施进行。
    </font></font></p><p><font style="vertical-align: inherit;"></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font><font style="vertical-align: inherit;">
      的名称</font><font style="vertical-align: inherit;">是小写字母，其中的表格名称也是小写字母。</font><font style="vertical-align: inherit;">查询应以小写字母指定名称。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要查看各个表的结构，请使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-create-table" title="13.7.5.10 SHOW CREATE TABLE语法"><code class="literal">SHOW CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW CREATE TABLE setup_consumers\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       表：setup_consumers</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建表：CREATE TABLE`setup_consumers`（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `NAME` varchar（64）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `ENABLED`枚举（'YES'，'NO'）不为NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  PRIMARY KEY（`NAME`）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = PERFORMANCE_SCHEMA DEFAULT CHARSET = utf8</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      表格结构也可以通过从诸如表格中选择
       </font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#columns-table" title="24.4 INFORMATION_SCHEMA COLUMNS表"><code class="literal">INFORMATION_SCHEMA.COLUMNS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或通过使用类似的语句来获得</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-columns" title="13.7.5.5 SHOW COLUMNS语法"><code class="literal">SHOW
      COLUMNS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库中的</font><font style="vertical-align: inherit;">
      表</font><font style="vertical-align: inherit;">可以根据其中的信息类型进行分组：当前事件，事件历史记录和摘要，对象实例以及设置（配置）信息。</font><font style="vertical-align: inherit;">以下示例说明这些表的几种用法。</font><font style="vertical-align: inherit;">有关每个组中表的详细信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-table-descriptions" title="25.11性能模式表说明"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11节“性能模式表说明”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      最初，并非所有工具和消费者都已启用，因此性能架构不会收集所有事件。</font><font style="vertical-align: inherit;">要打开所有这些并启用事件计时，请执行两条语句（行计数可能因MySQL版本而异）：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments SET ENABLED = 'YES', TIMED = 'YES';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，560行受影响（0.04秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_consumers SET ENABLED = 'YES';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，10行受影响（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要查看服务器目前在做什么，请检查
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。</font><font style="vertical-align: inherit;">它包含每个线程显示每个线程最近监视的事件的一行：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM events_waits_current\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            THREAD_ID：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             EVENT_ID：5523</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         END_EVENT_ID：5523</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           EVENT_NAME：wait / synch / mutex / mysys / THR_LOCK :: mutex</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               SOURCE：thr_lock.c：525</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          TIMER_START：201660494489586</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            TIMER_END：201660494576112</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           TIMER_WAIT：86526</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                SPINS：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        OBJECT_SCHEMA：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          OBJECT_NAME：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           INDEX_NAME：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          OBJECT_TYPE：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_INSTANCE_BEGIN：142270668</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     NESTING_EVENT_ID：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   NESTING_EVENT_TYPE：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            操作：锁定</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NUMBER_OF_BYTES：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                旗帜：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      此事件表明线程0正在等待86,526皮秒以获取
       </font><font style="vertical-align: inherit;">子系统中的</font></font><code class="literal">THR_LOCK::mutex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个互斥锁
       </font></font><code class="literal">mysys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">前几列提供了以下信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          ID列指示事件来自哪个线程和事件编号。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示已检测到的内容并</font></font><code class="literal">SOURCE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示哪个源文件包含已检测的代码。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计时器列显示事件何时开始和停止以及需要多长时间。</font><font style="vertical-align: inherit;">如果事件仍在进行中，则
           </font><font style="vertical-align: inherit;">
          值</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">计时器值是近似值，以皮秒表示。</font><font style="vertical-align: inherit;">有关定时器和事件时间收集的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能架构事件时序”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      历史表包含与当前事件表相同类型的行，但具有更多行并显示服务器</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是
       </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前</font></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">所做的事情</font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">。</font></span></span><span class="quote"><font style="vertical-align: inherit;">”</font></span><font style="vertical-align: inherit;">在
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表分别包含每线程最近的10个事件和最近10,000个事件。</font><font style="vertical-align: inherit;">例如，要查看线程13生成的最近事件的信息，请执行以下操作：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EVENT_ID, EVENT_NAME, TIMER_WAIT</code></strong>
       <strong class="userinput"><code>FROM events_waits_history WHERE THREAD_ID = 13</code></strong>
       <strong class="userinput"><code>ORDER BY EVENT_ID;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + -------------------------------------- --- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">EVENT_ID | </font><font style="vertical-align: inherit;">EVENT_NAME | </font><font style="vertical-align: inherit;">TIMER_WAIT |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + -------------------------------------- --- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">86 | </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK :: mutex | </font><font style="vertical-align: inherit;">686322 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">87 | </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_malloc | </font><font style="vertical-align: inherit;">320535 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">88 | </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_malloc | </font><font style="vertical-align: inherit;">339390 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">89 | </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_malloc | </font><font style="vertical-align: inherit;">377100 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">90 | </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_plugin | </font><font style="vertical-align: inherit;">614673 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">91 | </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_open | </font><font style="vertical-align: inherit;">659925 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">92 | </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / THD :: LOCK_thd_data | </font><font style="vertical-align: inherit;">494001 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">93 | </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_malloc | </font><font style="vertical-align: inherit;">222489 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">94 | </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_malloc | </font><font style="vertical-align: inherit;">214947 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">95 | </font><font style="vertical-align: inherit;">等待/同步/互斥/ mysys / LOCK_alarm | </font><font style="vertical-align: inherit;">312993 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + -------------------------------------- --- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当新事件被添加到历史记录表中时，如果表格已满，旧的事件将被丢弃。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      汇总表提供了所有事件的汇总信息。</font><font style="vertical-align: inherit;">该组中的表格以不同方式总结事件数据。</font><font style="vertical-align: inherit;">要查看哪些工具执行次数最多或花费了最长的等待时间，请对</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">或
       </font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      上的表格进行</font><font style="vertical-align: inherit;">排序
       </font><font style="vertical-align: inherit;">，分别对应于a
       </font><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">
      值，</font><font style="vertical-align: inherit;">并对</font><font style="vertical-align: inherit;">所有事件进行计算：
    </font></font><code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"></font><code class="literal">COUNT(*)</code><font style="vertical-align: inherit;"></font><code class="literal">SUM(TIMER_WAIT)</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EVENT_NAME, COUNT_STAR</code></strong>
       <strong class="userinput"><code>FROM events_waits_summary_global_by_event_name</code></strong>
       <strong class="userinput"><code>ORDER BY COUNT_STAR DESC LIMIT 10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">EVENT_NAME | </font><font style="vertical-align: inherit;">COUNT_STAR |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_malloc | </font><font style="vertical-align: inherit;">6419 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/ io /文件/ sql / FRM | </font><font style="vertical-align: inherit;">452 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_plugin | </font><font style="vertical-align: inherit;">337 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_open | </font><font style="vertical-align: inherit;">187 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/同步/互斥/ mysys / LOCK_alarm | </font><font style="vertical-align: inherit;">147 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / THD :: LOCK_thd_data | </font><font style="vertical-align: inherit;">115 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / myisam / kfile | </font><font style="vertical-align: inherit;">102 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_system_variables | </font><font style="vertical-align: inherit;">89 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK :: mutex | </font><font style="vertical-align: inherit;">89 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_open | </font><font style="vertical-align: inherit;">88 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + ------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EVENT_NAME, SUM_TIMER_WAIT</code></strong>
       <strong class="userinput"><code>FROM events_waits_summary_global_by_event_name</code></strong>
       <strong class="userinput"><code>ORDER BY SUM_TIMER_WAIT DESC LIMIT 10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">EVENT_NAME | </font><font style="vertical-align: inherit;">SUM_TIMER_WAIT |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/ io / file / sql / MYSQL_LOG | </font><font style="vertical-align: inherit;">1599816582 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / mysys / THR_LOCK_malloc | </font><font style="vertical-align: inherit;">1530083250 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / binlog_index | </font><font style="vertical-align: inherit;">1385291934 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/ io /文件/ sql / FRM | </font><font style="vertical-align: inherit;">1292823243 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / myisam / kfile | </font><font style="vertical-align: inherit;">411193611 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / myisam / dfile | </font><font style="vertical-align: inherit;">322401645 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/同步/互斥/ mysys / LOCK_alarm | </font><font style="vertical-align: inherit;">145126935 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / casetest | </font><font style="vertical-align: inherit;">104324715 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_plugin | </font><font style="vertical-align: inherit;">86027823 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / pid | </font><font style="vertical-align: inherit;">72591750 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些结果表明，</font></font><code class="literal">THR_LOCK_malloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      互斥</font><font style="vertical-align: inherit;">量在使用频率和线程等待尝试获取它的时间量方面</font><font style="vertical-align: inherit;">都是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">热门</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">THR_LOCK_malloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">互斥仅用于调试版本。</font><font style="vertical-align: inherit;">在生产建设中，它并不热，因为它不存在。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      实例表文档记录了什么类型的对象。</font><font style="vertical-align: inherit;">检测对象在被服务器使用时产生事件。</font><font style="vertical-align: inherit;">这些表格提供事件名称和解释性说明或状态信息。</font><font style="vertical-align: inherit;">例如，该
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了文件I / O操作及其相关文件的工具实例：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM file_instances\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 FILE_NAME：/opt/mysql-log/60500/binlog.000007</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EVENT_NAME：wait / io / file / sql / binlog</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPEN_COUNT：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 2. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 FILE_NAME：/opt/mysql/60500/data/mysql/tables_priv.MYI</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EVENT_NAME：wait / io / file / myisam / kfile</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPEN_COUNT：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 3. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 FILE_NAME：/opt/mysql/60500/data/mysql/columns_priv.MYI</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EVENT_NAME：wait / io / file / myisam / kfile</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPEN_COUNT：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      设置表用于配置和显示监视特征。</font><font style="vertical-align: inherit;">例如，
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出可以收集事件的一组仪器并显示其中哪些已启用：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / end | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /执行| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / init | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / insert | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / load | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / grant | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/ sql / check | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/ sql / flush | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_read_lock | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_system_variables | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_lock_db | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_manager | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOCK_grant | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOGGER :: LOCK_logger | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOCK_sys_init_connect | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/同步/ rwlock / sql / LOCK_sys_init_slave | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/ io / file / sql / binlog | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / binlog_index | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / casetest | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / dbopt | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要了解如何解释仪器名称，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能架构仪器命名约定”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要控制是否为仪器收集事件，请将其
       </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值设为</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments SET ENABLED = 'NO'</code></strong>
       <strong class="userinput"><code>WHERE NAME = 'wait/synch/mutex/sql/LOCK_mysql_create_db';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式使用收集的事件来更新</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库中的</font><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">，这些</font><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">充当
       </font><font style="vertical-align: inherit;">事件信息的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了可用消费者以及哪些已启用：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement_digest | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要控制性能模式是否将消费者维护为事件信息的目的地，请设置其
       </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关设置表以及如何使用它们控制事件收集的更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering" title="25.4.2性能模式事件过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.2节“性能模式事件过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有一些杂项表不属于任何以前的组。</font><font style="vertical-align: inherit;">例如，
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出可用的事件定时器及其特性。</font><font style="vertical-align: inherit;">有关定时器的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能架构事件时序”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-build-configuration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.2性能模式构建配置</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式是强制性的，并且始终编译。可以排除性能模式检测的某些部分。</font><font style="vertical-align: inherit;">例如，要排除阶段和语句检测，请执行以下操作：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>cmake . \</code></strong>
        <strong class="userinput"><code>-DDISABLE_PSI_STAGE=1 \</code></strong>
        <strong class="userinput"><code>-DDISABLE_PSI_STATEMENT=1</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关更多信息，请参见</font><a class="xref" href="/mysql-5.7-google-zh/installing.html#source-configuration-options" title="2.9.4 MySQL源配置选项"><font style="vertical-align: inherit;">第2.9.4节“MySQL源代码配置选项”</font></a><font style="vertical-align: inherit;">中对</font><span class="command"><strong><font style="vertical-align: inherit;">CMake</font></strong></span><font style="vertical-align: inherit;">选项
       </font><font style="vertical-align: inherit;">的描述
       </font><font style="vertical-align: inherit;">。
    </font></font><code class="literal">DISABLE_PSI_<em class="replaceable"><code>XXX</code></em></code>
      <span class="command"><strong><font style="vertical-align: inherit;"></font></strong></span><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/installing.html#source-configuration-options" title="2.9.4 MySQL源配置选项"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您在先前的配置中没有配置Performance Schema（或者使用可能不包含所有当前表的旧版本性能模式）安装MySQL，</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql-upgrade" title="4.4.7 mysql_upgrade  - 检查并升级MySQL表"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在启动服务器后</font><font style="vertical-align: inherit;">运行</font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql-upgrade" title="4.4.7 mysql_upgrade  - 检查并升级MySQL表"><span class="command"><strong><font style="vertical-align: inherit;">mysql_upgrade</font></strong></span></a><font style="vertical-align: inherit;">以确保
       </font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库存在全部当前表。</font><font style="vertical-align: inherit;">然后重新启动服务器。</font><font style="vertical-align: inherit;">您需要执行此操作的一个迹象是错误日志中存在以下消息：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[错误]本地表'performance_schema'。'events_waits_history'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结构错误</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[错误]本地表'performance_schema'。'events_waits_history_long'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结构错误</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要验证服务器是否构建有性能模式支持，请检查其帮助输出。</font><font style="vertical-align: inherit;">如果性能模式可用，则输出将提及以名称开头的几个变量</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqld --verbose --help</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  --performance_schema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                      启用性能架构。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  --performance_schema_events_waits_history_long_size =＃</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                      events_waits_history_long中的行数。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您还可以连接到服务器，并</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html" title="第25章MySQL性能模式"><code class="literal">PERFORMANCE_SCHEMA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下位置的输出中</font><font style="vertical-align: inherit;">查找命名</font><font style="vertical-align: inherit;">存储引擎</font><font style="vertical-align: inherit;">的行</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-engines" title="13.7.5.16 SHOW ENGINES语法"><code class="literal">SHOW ENGINES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW ENGINES\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      引擎：PERFORMANCE_SCHEMA</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     支持：是</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     评论：性能模式</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
交易：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          XA：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  保存点：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果性能架构未在构建时配置到服务器中</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html" title="第25章MySQL性能模式"><code class="literal">PERFORMANCE_SCHEMA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则输出中不会出现</font><font style="vertical-align: inherit;">行
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-engines" title="13.7.5.16 SHOW ENGINES语法"><code class="literal">SHOW ENGINES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可能会看到</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从输出中列出</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-databases" title="13.7.5.14 SHOW DATABASES语法"><code class="literal">SHOW DATABASES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但它没有表格，您将无法使用它。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html" title="第25章MySQL性能模式"><code class="literal">PERFORMANCE_SCHEMA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的
       </font><font style="vertical-align: inherit;">
      一行代表</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-engines" title="13.7.5.16 SHOW ENGINES语法"><code class="literal">SHOW ENGINES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能模式可用，而不是启用。</font><font style="vertical-align: inherit;">要启用它，您必须在服务器启动时这样做，如下一节所述。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-startup-configuration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.3性能模式启动配置</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要使用MySQL性能架构，必须在服务器启动时启用它以启用事件收集。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      假设性能模式可用，则默认启用。</font><font style="vertical-align: inherit;">要明确启用或禁用它，请启动服务器，将</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema"><code class="literal">performance_schema</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      变量设置为适当的值。</font><font style="vertical-align: inherit;">例如，在你的</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用这些行</font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema = ON</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果在性能模式初始化期间服务器无法分配任何内部缓冲区，则性能模式将自行禁用并设置
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema"><code class="literal">performance_schema</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
       </font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且服务器在没有检测的情况下运行。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式还允许在服务器启动时进行仪器和消费者配置。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要在服务器启动时控制仪器，请使用以下格式的选项：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--performance-schema-instrument =' </font></font><em class="replaceable"><code>instrument_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><em class="replaceable"><code>value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这里</font></font><em class="replaceable"><code>instrument_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个工具名称</font></font><code class="literal">wait/synch/mutex/sql/LOCK_open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且</font></font><em class="replaceable"><code>value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是以下值之一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：禁用仪器
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：启用和计时仪器
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">COUNTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：启用和计数（而不是时间）仪器
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      每个
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-instrument"><code class="option">--performance-schema-instrument</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      选项只能指定一个乐器名称，但可以给出该选项的多个实例来配置多个乐器。</font><font style="vertical-align: inherit;">此外，仪器名称中允许使用图案来配置与图案匹配的仪器。</font><font style="vertical-align: inherit;">要将所有条件同步化仪器配置为启用和计数，请使用此选项：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--performance-架构仪器= '等待/同步/ COND /％=计数'
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要禁用所有仪器，请使用此选项：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--performance-架构仪器= '（％）= OFF'
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      例外：</font></font><code class="literal">memory/performance_schema/%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      仪器内置并且在启动时无法禁用。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      无论顺序如何，较长的乐器名称字符串优先于较短的乐段名称。</font><font style="vertical-align: inherit;">有关指定模式以选择仪器的信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering-names" title="25.4.9用于过滤操作的命名工具或消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.9节“为过滤操作命名仪器或消费者”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      无法识别的乐器名称将被忽略。</font><font style="vertical-align: inherit;">稍后安装的插件可能会创建仪器，此时可以识别并配置该名称。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要在服务器启动时控制使用者，请使用以下格式的选项：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--performance-schema-consumer- </font></font><em class="replaceable"><code>consumer_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font><em class="replaceable"><code>value</code></em>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这里</font></font><em class="replaceable"><code>consumer_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个消费者名字</font></font><code class="literal">events_waits_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且
       </font></font><em class="replaceable"><code>value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是以下值之一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：不要为消费者收集事件
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：收集消费者的事件
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      例如，要启用</font></font><code class="literal">events_waits_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用者，请使用以下选项：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--performance-架构消费者的事件，等待历史= ON
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通过检查</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">可以找到允许的消费者姓名
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">模式是不允许的。</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中的消费者名称</font><font style="vertical-align: inherit;">使用下划线，但对于在启动时设置的</font><font style="vertical-align: inherit;">消费者，名称中的
       </font><font style="vertical-align: inherit;">破折号和下划线是等同的。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式包括几个提供配置信息的系统变量：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW VARIABLES LIKE 'perf%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">变量名| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">ON |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_accounts_size | </font><font style="vertical-align: inherit;">100 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_digests_size | </font><font style="vertical-align: inherit;">200 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_stages_history_long_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_stages_history_size | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_statements_history_long_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_statements_history_size | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_waits_history_long_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_waits_history_size | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_hosts_size | </font><font style="vertical-align: inherit;">100 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_cond_classes | </font><font style="vertical-align: inherit;">80 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_cond_instances | </font><font style="vertical-align: inherit;">1000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema"><code class="literal">performance_schema</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量是</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示性能模式是启用还是禁用。</font><font style="vertical-align: inherit;">其他变量指示表大小（行数）或内存分配值。
</font></font></p><a class="indexterm" name="idm140527974726848"></a><a class="indexterm" name="idm140527974725360"></a>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在启用性能模式的情况下，性能模式实例的数量可能会在很大程度上影响服务器内存占用量。</font><font style="vertical-align: inherit;">性能模式会自动调整很多参数以仅在需要时使用内存; </font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-memory-model" title="25.16性能模式内存分配模型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.16节“性能模式内存分配模型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要更改Performance Schema系统变量的值，请在服务器启动时进行设置。</font><font style="vertical-align: inherit;">例如，将以下行放在
       </font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中以更改等待事件的历史记录表的大小：
    </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_events_waits_history_size = 20</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_events_waits_history_long_size = 15000</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果未明确设置，性能模式会在服务器启动时自动调整其几个参数的值。</font><font style="vertical-align: inherit;">例如，它以这种方式调整控制事件等待表大小的参数。</font><font style="vertical-align: inherit;">性能模式将增量分配内存，将其内存使用量扩展到实际的服务器负载，而不是在服务器启动期间分配所需的全部内存。</font><font style="vertical-align: inherit;">因此，根本不需要设置许多尺寸参数。</font><font style="vertical-align: inherit;">要查看哪些参数是自动调整或自动调整的，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqld" title="4.3.1 mysqld  -  MySQL服务器"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqld --verbose --help</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并检查选项描述，或参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variables" title="25.14性能模式系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.14节“性能模式系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于未在服务器启动时设置的每个自动化参数（或设置为-1），性能模式会根据以下系统值的值确定如何设置其值，这些值被视为</font><font style="vertical-align: inherit;">关于您拥有的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置你的MySQL服务器：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX_CONNECTIONS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
open_files_limit</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
table_definition_cache</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
table_open_cache</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要覆盖给定参数的自动调整大小或自动调整大小，请在启动时将其设置为除-1之外的值。</font><font style="vertical-align: inherit;">在这种情况下，性能模式会为其指定指定的值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在运行时，</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-variables" title="13.7.5.39 SHOW VARIABLES语法"><code class="literal">SHOW VARIABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示自动设置参数的实际值。</font><font style="vertical-align: inherit;">自动标定的参数显示值为-1。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果性能模式被禁用，其自动调整和自动调整参数保持设置为-1并
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-variables" title="13.7.5.39 SHOW VARIABLES语法"><code class="literal">SHOW VARIABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示-1。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-runtime-configuration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4性能模式运行时配置</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.1性能模式事件时序</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.2性能模式事件过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.3事件预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.4通过仪器进行预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-object-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.5按对象预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-thread-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.6通过线程预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.7消费者预过滤</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.8消费者配置示例</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering-names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.9用于过滤操作的命名工具或消费者</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrumentation-checking"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.10确定仪器是什么</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      特定性能模式功能可以在运行时启用，以控制发生哪种类型的事件收集。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能架构设置表包含有关监视配置的信息：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES</code></strong>
       <strong class="userinput"><code>WHERE TABLE_SCHEMA = 'performance_schema'</code></strong>
       <strong class="userinput"><code>AND TABLE_NAME LIKE 'setup%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_actors |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_consumers |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_instruments |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_objects |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">setup_timers |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您可以检查这些表的内容以获取有关性能模式监视特征的信息。</font><font style="vertical-align: inherit;">如果您有</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_update"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限，则可以通过修改设置表来更改“性能架构”操作，以影响监视的发生。</font><font style="vertical-align: inherit;">有关这些表的更多详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-setup-tables" title="25.11.2性能架构设置表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.2节“性能架构设置表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要查看选择了哪些事件定时器，请查询
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_timers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">闲置| </font><font style="vertical-align: inherit;">MICROSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待| </font><font style="vertical-align: inherit;">CYCLE |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">阶段| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">交易| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值表示定时器适用的仪器类型，并</font></font><code class="literal">TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      指示适用于这些仪器的定时器。</font><font style="vertical-align: inherit;">计时器适用于其名称以与该</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">匹配的组件开始的仪器</font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要更改计时器，请更新该</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">例如，要使用</font></font><code class="literal">NANOSECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计时器的
       </font></font><code class="literal">wait</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计时器：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>UPDATE setup_timers SET TIMER_NAME = 'NANOSECOND'</code></strong>
       <strong class="userinput"><code>WHERE NAME = 'wait';</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT * FROM setup_timers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">闲置| </font><font style="vertical-align: inherit;">MICROSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">阶段| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">交易| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关定时器的讨论，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能架构事件时序”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出可以收集该事件的手段和类型哪个事件信息实际上被收集，分别消费者。</font><font style="vertical-align: inherit;">其他设置表可以进一步修改监控配置。
      </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering" title="25.4.2性能模式事件过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.2节“性能模式事件过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">讨论了如何修改这些表以影响事件收集。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果有必须在运行时使用SQL语句进行性能架构配置更改，并且希望每次服务器启动时这些更改生效，请将这些语句放入文件中并使用该</font><font style="vertical-align: inherit;">
      选项</font><font style="vertical-align: inherit;">启动服务器
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您有多个监控配置，每个监控配置都适合产生不同类型的监控（如临时服务器健康监控，事件调查，应用程序行为故障排除等），则此策略也很有用。</font><font style="vertical-align: inherit;">将每个监视配置的语句放入它们自己的文件中，并</font><font style="vertical-align: inherit;">在启动服务器时</font><font style="vertical-align: inherit;">指定相应的文件作为
       </font><font style="vertical-align: inherit;">参数。
</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#option_mysqld_init-file"><code class="option">--init-file=<em class="replaceable"><code>file_name</code></em></code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#option_mysqld_init-file"><code class="option">--init-file</code></a><font style="vertical-align: inherit;"></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-timing"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.1性能模式事件时序</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过添加到服务器源代码的工具来收集事件。</font><font style="vertical-align: inherit;">仪器时间事件，这是性能模式如何提供事件花费多长时间的想法。</font><font style="vertical-align: inherit;">也可以配置仪器不收集时间信息。</font><font style="vertical-align: inherit;">本节讨论可用的定时器及其特性，以及如何在事件中表示定时值。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="performance-schema-timers"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构定时器</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          两个性能架构表提供计时器信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 列出可用的计时器及其特性。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 指示哪些定时器用于哪些仪器。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个定时器行</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          必须参考其中一个定时器
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          定时器在精度和开销方面有所不同。</font><font style="vertical-align: inherit;">要查看可用的定时器及其特性，请查看
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM performance_timers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------- + ----------------- -  + ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TIMER_NAME | </font><font style="vertical-align: inherit;">TIMER_FREQUENCY | </font><font style="vertical-align: inherit;">TIMER_RESOLUTION | </font><font style="vertical-align: inherit;">TIMER_OVERHEAD |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------- + ----------------- -  + ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CYCLE | </font><font style="vertical-align: inherit;">2389029850 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">72 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NANOSECOND | </font><font style="vertical-align: inherit;">1000000000 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">112 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MICROSECOND | </font><font style="vertical-align: inherit;">1000000 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">136 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MILLISECOND | </font><font style="vertical-align: inherit;">1036 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">168 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TICK | </font><font style="vertical-align: inherit;">105 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">2416 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------- + ----------------- -  + ---------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果与给定定时器名称关联的值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该定时器在您的平台上不受支持。</font><font style="vertical-align: inherit;">不包含的行</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          指示您可以使用哪些定时器
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些列有这些意义：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列显示可用定时器的名称。</font></font><code class="literal">CYCLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指的是基于CPU（处理器）周期计数器的计时器。</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用</font><font style="vertical-align: inherit;">的计时器</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是其他列中</font><font style="vertical-align: inherit;">没有</font><font style="vertical-align: inherit;">的计时器
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果与给定定时器名称关联的值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该定时器在您的平台上不受支持。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_FREQUENCY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示每秒定时器单元的数量。</font><font style="vertical-align: inherit;">对于循环定时器，频率通常与CPU速度有关。</font><font style="vertical-align: inherit;">显示的值是在具有2.4GHz处理器的系统上获得的。</font><font style="vertical-align: inherit;">其他计时器基于固定的秒数。</font><font style="vertical-align: inherit;">因为
               </font></font><code class="literal">TICK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，频率可能因平台而异（例如，一些使用100个滴答/秒，其他1000个滴答/秒）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_RESOLUTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示计时器值一次增加的计时器单元的数量。</font><font style="vertical-align: inherit;">如果定时器的分辨率为10，则其值每次增加10。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_OVERHEAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是用给定定时器获得一个定时的最小开销周期数。</font><font style="vertical-align: inherit;">每个事件的开销是显示值的两倍，因为定时器在事件的开始和结束时被调用。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查看哪些定时器正在生效或更改定时器，请访问该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_timers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">闲置| </font><font style="vertical-align: inherit;">MICROSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待| </font><font style="vertical-align: inherit;">CYCLE |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">阶段| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">交易| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>UPDATE setup_timers SET TIMER_NAME = 'MICROSECOND'</code></strong>
       <strong class="userinput"><code>WHERE NAME = 'idle';</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT * FROM setup_timers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">闲置| </font><font style="vertical-align: inherit;">MICROSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待| </font><font style="vertical-align: inherit;">CYCLE |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">阶段| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">交易| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          默认情况下，性能模式使用适用于每种仪器类型的最佳计时器，但您可以选择不同的计时器。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要花时间等待事件，最重要的标准是降低开销，但可能会降低定时器精度，因此使用</font></font><code class="literal">CYCLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定时器是最好的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          语句（或阶段）执行的时间通常比执行单个等待所花费的时间大一个数量级。</font><font style="vertical-align: inherit;">对于时间报表来说，最重要的标准是要有一个精确的度量，它不受处理器频率变化的影响，所以使用不基于周期的计时器是最好的。</font><font style="vertical-align: inherit;">语句的默认计时器是</font></font><code class="literal">NANOSECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">额外的
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开销</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与之相比
          </font></font><code class="literal">CYCLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定时器并不重要，因为通过调用定时器两次（一次当语句开始时，一次结束时）导致的开销比执行语句本身的CPU时间少了几个数量级。</font><font style="vertical-align: inherit;">使用</font></font><code class="literal">CYCLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计时器在这里没有好处，只有缺点。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          循环计数器提供的精度取决于处理器速度。</font><font style="vertical-align: inherit;">如果处理器的运行频率为1 GHz（十亿次/秒）或更高，则周期计数器的精度将达到亚纳秒级。</font><font style="vertical-align: inherit;">使用循环计数器比获取实际时间要便宜得多。</font><font style="vertical-align: inherit;">例如，标准</font></font><code class="literal">gettimeofday()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数可能需要数百个周期，这对于每秒可能发生数千次或数百万次数据收集而言是不可接受的开销。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          循环计数器也有缺点：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              最终用户希望看到时钟单位的时间，例如几分之一秒。</font><font style="vertical-align: inherit;">从循环转换为秒的分数可能会很昂贵。</font><font style="vertical-align: inherit;">出于这个原因，转换是一个快速和相当粗略的乘法操作。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              处理器周期速率可能会发生变化，例如笔记本电脑进入省电模式时或CPU速度减慢以减少热量产生时。</font><font style="vertical-align: inherit;">如果处理器的周期率波动，从周期到实时单位的转换会出现错误。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              循环计数器可能不可靠或不可用，具体取决于处理器或操作系统。</font><font style="vertical-align: inherit;">例如，在Pentium上，指令是
               </font></font><code class="literal">RDTSC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（汇编语言而不是C指令），理论上操作系统可以阻止用户模式程序使用它。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一些与无序执行或多处理器同步有关的处理器细节可能会导致计数器看起来很快或很慢，最多可达1000个周期。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL在x386（Windows，macOS，Linux，Solaris和其他Unix版本），PowerPC和IA-64上使用循环计数器。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-timing-in-events"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构计时器在事件中的表示</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          存储当前事件和历史事件的性能架构表中的行有三列来表示时间信息：</font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示事件何时开始和结束，并</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示事件持续时间。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表有一</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列用于指示要收集事件的工具。</font><font style="vertical-align: inherit;">该表格还有一
           </font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列用于指示哪些工具是计时的。</font><font style="vertical-align: inherit;">如果仪器未启用，则不会生成事件。</font><font style="vertical-align: inherit;">如果启用了仪器不能定时，通过仪器产生的事件都</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对
           </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定时器的值。</font><font style="vertical-align: inherit;">这反过来会导致在计算汇总表中的汇总时间值（总和，最小值，最大值和平均值）时忽略这些值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在内部，事件内部的时间以事件定时开始时定时器生效的单位存储。</font><font style="vertical-align: inherit;">为了在从性能模式表中检索事件时显示，时间以皮秒（十亿分之一秒）显示，以将它们归一化为标准单位，而不管选择了哪个计时器。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格的</font><font style="vertical-align: inherit;">修改</font><font style="vertical-align: inherit;">会立即影响监控。</font><font style="vertical-align: inherit;">正在进行的事件可能会在开始时间使用原始计时器，在结束时间使用新计时器。</font><font style="vertical-align: inherit;">要在更改计时器后避免不可预知的结果，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置性能模式统计信息。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计时器基准（</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）发生在服务器启动期间的性能模式初始化。
          </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件中的值代表自基线以来的皮秒。</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值是以皮秒为单位的持续时间。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          事件中的皮秒值是近似值。</font><font style="vertical-align: inherit;">他们的准确性受制于从一个单位转换到另一个单位时常见的错误形式。</font><font style="vertical-align: inherit;">如果使用</font></font><code class="literal">CYCLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          定时器并且处理器速率变化，则可能存在漂移。</font><font style="vertical-align: inherit;">由于这些原因，</font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将事件</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值视为服务器启动后所用时间的准确度量</font><font style="vertical-align: inherit;">是不合理的
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">另一方面，</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">条款中</font><font style="vertical-align: inherit;">使用</font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font><code class="literal">ORDER
          BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用开始时间或持续时间来排列事件</font><font style="vertical-align: inherit;">是合理的
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          事件中皮秒的选择而不是像微秒这样的值具有性能基础。</font><font style="vertical-align: inherit;">一个实现目标是以统一的时间单位显示结果，而不管计时器。</font><font style="vertical-align: inherit;">在理想的世界里，这个时间单位看起来像是一个挂钟单位，并且相当精确; </font><font style="vertical-align: inherit;">换句话说，微秒。</font><font style="vertical-align: inherit;">但是要将周期或纳秒转换为微秒，就必须为每个仪器执行一次除法。</font><font style="vertical-align: inherit;">分部在很多平台上都很昂贵。</font><font style="vertical-align: inherit;">乘法并不昂贵，所以这就是使用的。</font><font style="vertical-align: inherit;">因此，时间单位是最高可能的整数倍</font></font><code class="literal">TIMER_FREQUENCY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值，使用足够大的乘数来确保没有严重的精度损失。</font><font style="vertical-align: inherit;">结果是时间单位是
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">皮秒”。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个精度是虚假的，但是这个决定可以使开销最小化。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当等待，阶段，陈述或交易事件正在执行时，相应的当前事件表显示当前事件时间信息：
        </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">events_waits_current</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_stages_current</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_statements_current</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_transactions_current</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了确定尚未完成的事件已经运行了多长时间，计时器列的设置如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 被填充。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 填充当前计时器值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已填充到目前为止所用的时间（</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          尚未完成的事件具有
           </font></font><code class="literal">END_EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要评估迄今为止发生的事件所用的时间，请使用该</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">因此，为了确定尚未完成并且</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          迄今为止</font><font style="vertical-align: inherit;">采用的时间超过</font><font style="vertical-align: inherit;">皮秒的</font><font style="vertical-align: inherit;">事件</font><font style="vertical-align: inherit;">，监视应用程序可以在查询中使用此表达式：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WHERE END_EVENT_ID是NULL和TIMER_WAIT&gt; </font></font><em class="replaceable"><code>N</code></em>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如刚才所述的事件识别假设相应的文书</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并
           </font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和相关消费者被启用。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-filtering"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.2性能模式事件过滤</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140527974586368"></a><a class="indexterm" name="idm140527974584880"></a><a class="indexterm" name="idm140527974583392"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事件以生产者/消费者的方式进行处理：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            仪表化代码是事件的来源，并产生要收集的事件。</font><font style="vertical-align: inherit;">该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了可以收集事件的仪器，无论它们是否启用，（对于启用的仪器）是否收集时间信息：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_read_lock | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_system_variables | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_lock_db | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_manager | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表提供了事件生产控制的最基本形式。</font><font style="vertical-align: inherit;">为了根据被监视对象或线程的类型进一步细化事件生成，可以使用其他表，如
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering" title="25.4.3事件预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.3节“事件预过滤”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            性能架构表是事件和消耗事件的目标。</font><font style="vertical-align: inherit;">该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了可以发送事件信息的消费者的类型以及是否启用了这些消费者：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement_digest | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        过滤可以在性能监控的不同阶段完成：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预过滤。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这是通过修改性能模式配置完成的，以便只从生产者收集某些类型的事件，并且收集的事件仅更新特定的消费者。</font><font style="vertical-align: inherit;">为此，请启用或禁用乐器或消费者。</font><font style="vertical-align: inherit;">预过滤由Performance Schema完成，并具有适用于所有用户的全局效果。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用预过滤的原因：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                减少开销。</font><font style="vertical-align: inherit;">即使启用了所有仪器，性能架构的开销也应该是最小的，但也许您希望进一步降低它。</font><font style="vertical-align: inherit;">或者你不关心定时事件，并且想要禁用定时代码以消除定时开销。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                为了避免在当前事件或历史记录表中填入您不感兴趣的事件。</font><font style="vertical-align: inherit;">对于启用的乐器类型，</font><font style="vertical-align: inherit;">预过滤</font><font style="vertical-align: inherit;">在这些表格中</font><font style="vertical-align: inherit;">留下了更多的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以用于行的实例。</font><font style="vertical-align: inherit;">如果仅启用具有预过滤的文件工具，则不会为非文件工具收集行。</font><font style="vertical-align: inherit;">通过后置过滤，可收集非文件事件，从而为文件事件留下更少的行。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                避免维护某些类型的事件表。</font><font style="vertical-align: inherit;">如果您禁用了使用者，则服务器不会为该使用者维护目的地。</font><font style="vertical-align: inherit;">例如，如果您不关心事件历史记录，则可以禁用历史记录表使用者以提高性能。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后过滤。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这涉及</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在查询中</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">从性能模式表中选择信息</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">子句，以指定要查看哪些可用事件。</font><font style="vertical-align: inherit;">后过滤是在每个用户的基础上执行的，因为个人用户选择哪些可用事件感兴趣。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用后期过滤的原因：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                为了避免为个人用户做出关于哪些事件信息感兴趣的决定。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                使用性能模式来调查性能问题时，使用预过滤强加的限制事先未知。
</font></font></p></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下部分提供有关预过滤的更多详细信息，并提供过滤操作中命名工具或使用者的指导。</font><font style="vertical-align: inherit;">有关编写查询以检索信息（后过滤）的信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-queries" title="25.5性能模式查询"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.5节“性能架构查询”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-pre-filtering"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.3事件预过滤</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        预过滤由Performance Schema完成，并具有适用于所有用户的全局效果。</font><font style="vertical-align: inherit;">预过滤可以应用于事件处理的生产者或消费者阶段：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要在生产者阶段配置预过滤，可以使用几个表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示哪些仪器可用。</font><font style="vertical-align: inherit;">无论其他生产相关设置表的内容如何，​​此表中禁用的仪器都不会生成事件。</font><font style="vertical-align: inherit;">本表中启用的仪器允许产生事件，但须受其他表格的内容限制。
              </font></font></p></li><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 控制性能架构是否监视特定的表和存储的程序对象。
              </font></font></p></li><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 指示是否为每个服务器线程启用监视。
              </font></font></p></li><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 确定新前景线程的初始监视状态。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要在消费阶段配置预过滤，请修改
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。</font><font style="vertical-align: inherit;">这决定了事件发送的目的地。
            </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也暗含影响事件的产生。</font><font style="vertical-align: inherit;">如果给定的事件不会被发送到任何目标（即不会被使用），则性能模式不会生成它。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        任何这些表的修改都会立即影响监控，但有一些例外情况：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">某些仪器的修改
             </font><font style="vertical-align: inherit;">仅在服务器启动时有效; </font><font style="vertical-align: inherit;">在运行时更改它们不起作用。</font><font style="vertical-align: inherit;">这主要影响服务器中的互斥锁，条件和rwlocks，尽管可能有其他工具确实如此。</font><font style="vertical-align: inherit;">这个限制从MySQL 5.7.12开始取消。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表的</font><font style="vertical-align: inherit;">修改
             </font><font style="vertical-align: inherit;">仅影响修改后创建的前台线程，不影响现有线程。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当您更改监控配置时，性能架构不会刷新历史记录表。</font><font style="vertical-align: inherit;">已收集的事件仍保留在当前事件和历史记录表中，直至被新事件取代。</font><font style="vertical-align: inherit;">如果您禁用了乐器，您可能需要等待一段时间，然后才能将新事件替换为它们的事件。</font><font style="vertical-align: inherit;">或者，使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清空历史记录表。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在进行工具更改后，可能需要截断汇总表。</font><font style="vertical-align: inherit;">通常，效果是将摘要列重置为0或</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不删除行。</font><font style="vertical-align: inherit;">这使您可以清除收集的值并重新启动聚合。</font><font style="vertical-align: inherit;">例如，在做出运行时配置更改后，这可能很有用。</font><font style="vertical-align: inherit;">此截断行为的例外情况在个别摘要表部分中注明。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下各节介绍如何使用特定的表来控制Performance Schema预过滤。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-instrument-filtering"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.4通过仪器进行预过滤</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了可用仪器：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / end | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /执行| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / init | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / insert | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / load | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / grant | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/ sql / check | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/ sql / flush | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_read_lock | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_system_variables | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_lock_db | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_manager | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOCK_grant | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOGGER :: LOCK_logger | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOCK_sys_init_connect | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/同步/ rwlock / sql / LOCK_sys_init_slave | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/ io / file / sql / binlog | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / binlog_index | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / casetest | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / dbopt | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要控制是否启用乐器，请将其</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">设置
         </font><font style="vertical-align: inherit;">为</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要配置是否收集已启用乐器的时间信息，请将其
         </font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值设为</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件计时”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">列影响性能模式表内容
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对大多数</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行的</font><font style="vertical-align: inherit;">修改
         </font><font style="vertical-align: inherit;">会立即影响监控。</font><font style="vertical-align: inherit;">对于某些仪器，修改仅在服务器启动时有效; </font><font style="vertical-align: inherit;">在运行时更改它们不起作用。</font><font style="vertical-align: inherit;">这主要影响服务器中的互斥锁，条件和rwlocks，尽管可能有其他工具确实如此。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表提供了事件生产控制的最基本形式。</font><font style="vertical-align: inherit;">为了根据被监视对象或线程的类型进一步细化事件生成，可以使用其他表，如</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering" title="25.4.3事件预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.3节“事件预过滤”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例演示了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">上可能的操作
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">与其他预过滤操作一样，这些更改会影响所有用户。</font><font style="vertical-align: inherit;">其中一些查询使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        操作符和模式匹配工具名称。</font><font style="vertical-align: inherit;">有关指定模式以选择仪器的更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering-names" title="25.4.9用于过滤操作的命名工具或消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.9节“为过滤操作命名仪器或消费者”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用所有乐器：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments SET ENABLED = 'NO';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            现在不会收集任何活动。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用所有文件，将它们添加到当前一组禁用的乐器中：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments SET ENABLED = 'NO'</code></strong>
       <strong class="userinput"><code>WHERE NAME LIKE 'wait/io/file/%';</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            仅禁用文件工具，启用所有其他工具：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments</code></strong>
       <strong class="userinput"><code>SET ENABLED = IF(NAME LIKE 'wait/io/file/%', 'NO', 'YES');</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用</font></font><code class="literal">mysys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库中</font><font style="vertical-align: inherit;">除了那些工具以外的所有工具
             </font><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments</code></strong>
       <strong class="userinput"><code>SET ENABLED = CASE WHEN NAME LIKE '%/mysys/%' THEN 'YES' ELSE 'NO' END;</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用特定的乐器：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments SET ENABLED = 'NO'</code></strong>
       <strong class="userinput"><code>WHERE NAME = 'wait/synch/mutex/mysys/TMPDIR_mutex';</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要切换乐器的状态，请</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻转</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
            其</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments</code></strong>
       <strong class="userinput"><code>SET ENABLED = IF(ENABLED = 'YES', 'NO', 'YES')</code></strong>
       <strong class="userinput"><code>WHERE NAME = 'wait/synch/mutex/mysys/TMPDIR_mutex';</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用所有事件的计时：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments SET TIMED = 'NO';</code></strong>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-object-filtering"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.5按对象预过滤</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表控制性能架构是否监视特定的表和存储的程序对象。</font><font style="vertical-align: inherit;">最初的
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容如下所示：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_objects;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + -------------------- + ------------- + --------- ------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">OBJECT_TYPE | </font><font style="vertical-align: inherit;">OBJECT_SCHEMA | </font><font style="vertical-align: inherit;">OBJECT_NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + -------------------- + ------------- + --------- ------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + -------------------- + ------------- + --------- ------- + +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表格的</font><font style="vertical-align: inherit;">修改</font><font style="vertical-align: inherit;">会立即影响对象监视。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列指示行所适用的对象的类型。</font></font><code class="literal">TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        过滤会影响表I / O事件（</font></font><code class="literal">wait/io/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器）和表锁定事件（</font></font><code class="literal">wait/lock/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器）。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
         </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列应包含文本模式或对象的名称，或</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以匹配任何名称。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列指示是否监视匹配对象，并</font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示是否收集定时信息。</font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件计时”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font><font style="vertical-align: inherit;">设置
         </font><font style="vertical-align: inherit;">列影响性能模式表内容
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        缺省对象配置的效果是仪器除了那些在所有对象</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论内容如何，​​数据库中的</font><font style="vertical-align: inherit;">表格
         </font><font style="vertical-align: inherit;">都不会被检测到
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;该行</font></font><code class="literal">information_schema.%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅</font><font style="vertical-align: inherit;">用于
         </font><font style="vertical-align: inherit;">使该默认值显式化。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当性能模式检查匹配时
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它会首先尝试查找更多特定的匹配项。</font><font style="vertical-align: inherit;">对于匹配给定的行，
         </font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能模式按以下顺序检查行：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            行与
             </font><font style="vertical-align: inherit;">
            和
             </font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">OBJECT_SCHEMA='<em class="replaceable"><code>literal</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">OBJECT_NAME='<em class="replaceable"><code>literal</code></em>'</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            行与
             </font><font style="vertical-align: inherit;">
            和</font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">OBJECT_SCHEMA='<em class="replaceable"><code>literal</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">OBJECT_NAME='%'</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            行与</font></font><code class="literal">OBJECT_SCHEMA='%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">OBJECT_NAME='%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，有一张桌子</font></font><code class="literal">db1.t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，性能架构看起来</font></font><code class="literal">TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行的匹配</font></font><code class="literal">'db1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'t1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后</font></font><code class="literal">'db1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的顺序匹配发生很重要，因为不同的匹配</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的行可以有不同的</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于与表格相关的事件，性能模式将内容</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
         </font><font style="vertical-align: inherit;">结合起来</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以确定是否启用仪器以及是否启用启用的仪器：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于匹配一排桌子
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，桌子仪器产生的事件仅
             </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这两个
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个表中</font><font style="vertical-align: inherit;">
            的</font><font style="vertical-align: inherit;">值是合并的，所以只有在两个值都是时才会收集定时信息</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于存储程序对象，性能架构的需要
         </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从列直接</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        排。</font><font style="vertical-align: inherit;">没有价值观与价值观的结合
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含以下</font></font><code class="literal">TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于行
         </font></font><code class="literal">db1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">db2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
         </font></font><code class="literal">db3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ ------------- + --------------- + ------------- + ----- ---- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">OBJECT_TYPE | </font><font style="vertical-align: inherit;">OBJECT_SCHEMA | </font><font style="vertical-align: inherit;">OBJECT_NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------------- + ------------- + ----- ---- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">db1 | </font><font style="vertical-align: inherit;">t1 | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">db1 | </font><font style="vertical-align: inherit;">t2 | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">db2 | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">db3 | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------------- + ------------- + ----- ---- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果与对象相关的乐器
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的
         </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则不监视该对象的事件。</font><font style="vertical-align: inherit;">如果该
         </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为，则</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值进行
         </font><font style="vertical-align: inherit;">事件监视
         </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">db1.t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 事件受到监控
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">db1.t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 事件不受监控
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">db2.t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 事件受到监控
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">db3.t4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 事件不受监控
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">db4.t5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 事件受到监控
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        类似的逻辑适用于组合</font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        来自</font><font style="vertical-align: inherit;">表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        和</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">以确定是否收集事件定时信息。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果持久表和临时表具有相同的名称，则对两</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行的</font><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">方式相同。</font><font style="vertical-align: inherit;">无法为一个表启用监视，但不能启用另一个表。</font><font style="vertical-align: inherit;">但是，每个表格都是分开安装的。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-thread-filtering"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.6通过线程预过滤</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表为每个服务器线程包含一行。</font><font style="vertical-align: inherit;">每行包含有关线程的信息，并指示是否启用监视。</font><font style="vertical-align: inherit;">对于性能模式来监控线程，这些事情必须是真实的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
            的</font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">threads.INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列必须是
             </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            只对从</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中启用的仪器生成的线程事件进行监视
             </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表还为每个服务器线程指示是否执行历史事件日志记录。</font><font style="vertical-align: inherit;">这包括等待，阶段，语句和事务事件，并影响对这些表的日志记录：
      </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">events_waits_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_waits_history_long</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_stages_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_stages_history_long</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_statements_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_statements_history_long</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_transactions_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
events_transactions_history_long</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于发生历史事件记录，这些事情必须是真实的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须启用表中</font><font style="vertical-align: inherit;">
            与历史相关的适当消费者
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，等待事件记录在
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表需要相应的
             </font></font><code class="literal">events_waits_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">events_waits_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者是
             </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">threads.HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列必须是
             </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            日志记录仅针对从</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中启用的仪器生成的线程事件发生
             </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于前台线程（来自客户端连接），</font><font style="vertical-align: inherit;">表行中的</font><font style="vertical-align: inherit;">列</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
         </font><font style="vertical-align: inherit;">的初始值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由与线程关联的用户帐户是否匹配</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中的任何行确定</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些值来自</font><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">表行的</font><font style="vertical-align: inherit;">列</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于后台线程，没有关联的用户。
        </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在默认情况下并
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有意见。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        最初的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容如下所示：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_actors;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HOST | </font><font style="vertical-align: inherit;">USER | </font><font style="vertical-align: inherit;">ROLE | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">历史|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列应包含文本的主机或用户名，或
         </font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以匹配任何名称。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列表示是否使能仪器和历史事件记录进行匹配螺纹，受试者先前所描述的其他条件。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当性能模式检查每个新前景线程的匹配时</font></font><code class="literal">setup_actors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它会首先尝试查找更多特定的匹配项，并使用
         </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列（</font></font><code class="literal">ROLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未使用）：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            行与
             </font><font style="vertical-align: inherit;">
            和
             </font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">USER='<em class="replaceable"><code>literal</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">HOST='<em class="replaceable"><code>literal</code></em>'</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            行与
             </font><font style="vertical-align: inherit;">
            和</font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">USER='<em class="replaceable"><code>literal</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">HOST='%'</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            行与</font></font><code class="literal">USER='%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">HOST='<em class="replaceable"><code>literal</code></em>'</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            行与</font></font><code class="literal">USER='%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">HOST='%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的顺序匹配发生很重要，因为不同的匹配</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的行可以有不同的</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值。</font><font style="vertical-align: inherit;">这使得仪表和历史事件日志记录可以根据以下列</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列值</font><font style="vertical-align: inherit;">针对主机，用户或帐户（用户和主机组合）选择性地应用</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当最佳匹配是连续的时候
             </font></font><code class="literal">ENABLED=YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">值就变成了
             </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当最佳匹配是连续的时候
             </font></font><code class="literal">HISTORY=YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">值就变成了
             </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当最佳匹配是连续的时候
             </font></font><code class="literal">ENABLED=NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">值就变成了
             </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当最佳匹配是连续的时候
             </font></font><code class="literal">HISTORY=NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">值就变成了
             </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有找到匹配，则</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            与</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该线程值成为
             </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列中</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的行可以被设置为</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        彼此独立的。</font><font style="vertical-align: inherit;">这意味着您可以独立于是否收集历史事件来启用检测。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，为所有新的前台线程启用监视和历史事件收集，因为该
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表最初包含一行以及</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两者
         </font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要执行更多有限的匹配（例如仅启用某些前景线程的监视），您必须更改此行，因为它匹配任何连接，并为更多特定</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组合</font><font style="vertical-align: inherit;">添加行
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设你修改
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_actors SET ENABLED ='NO'，HISTORY ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE HOST ='％'和USER ='％';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO setup_actors（HOST，USER，ROLE，ENABLED，HISTORY）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VALUES（ '本地主机'， '乔'， '％'， 'YES'， 'YES'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO setup_actors（HOST，USER，ROLE，ENABLED，HISTORY）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VALUES（ 'hosta.example.com'， '乔'， '％'， 'YES'， '否'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO setup_actors（HOST，USER，ROLE，ENABLED，HISTORY）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VALUES（ '％'， 'SAM'， '％'， '否'， 'YES'）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句将默认匹配更改为禁用检测和历史事件收集。</font><font style="vertical-align: inherit;">这些</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句为更具体的匹配添加行。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        现在，性能模式确定如何</font><font style="vertical-align: inherit;">
        为新连接线程</font><font style="vertical-align: inherit;">设置
         </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，如下所示：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><code class="literal">joe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从本地主机连接，则连接匹配第一个插入的行。</font><font style="vertical-align: inherit;">在
             </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
             </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该线程值成为
             </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><code class="literal">joe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接来自
             </font></font><code class="literal">hosta.example.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则连接与第二个插入的行匹配。</font><font style="vertical-align: inherit;">在</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该线程值变为</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值变为
             </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><code class="literal">joe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从任何其他主机连接，则不匹配。</font><font style="vertical-align: inherit;">在</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
             </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该线程值成为
             </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><code class="literal">sam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从任何主机连接，连接匹配第三个插入的行。</font><font style="vertical-align: inherit;">在
             </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该线程值变为
             </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            值变为</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于任何其他连接，带有</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
             </font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">的行
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该行目前已经
             </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            设置</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所以
             </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
             </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为线程值成为
             </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表的</font><font style="vertical-align: inherit;">修改</font><font style="vertical-align: inherit;">仅影响修改后创建的前台线程，不影响现有线程。</font><font style="vertical-align: inherit;">要影响现有的线程，请修改</font><font style="vertical-align: inherit;">表格行</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-consumer-filtering"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.7消费者预过滤</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了可用的消费者类型以及哪些已启用：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement_digest | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        修改</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格以影响用户阶段的预过滤并确定发送事件的目标。</font><font style="vertical-align: inherit;">要启用或禁用消费者，请将其</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值设为
         </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格的</font><font style="vertical-align: inherit;">修改
         </font><font style="vertical-align: inherit;">会立即影响监控。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您禁用了使用者，则服务器不会为该使用者维护目的地。</font><font style="vertical-align: inherit;">例如，如果您不关心历史事件信息，请禁用历史使用者：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_consumers</code></strong>
       <strong class="userinput"><code>SET ENABLED = 'NO' WHERE NAME LIKE '%history%';</code></strong>
</pre><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
        的消费者设置
         </font><font style="vertical-align: inherit;">形成了从较高层到较低层的层次结构。</font><font style="vertical-align: inherit;">以下原则适用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            除非性能模式检查消费者并启用消费者，否则与消费者相关联的目的地不会收到任何事件。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            消费者仅在所有依赖消费者（如果有）的消费者都被启用时才被检查。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果消费者没有被选中，或者被选中但被禁用，那么依赖它的其他消费者不被选中。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            依赖消费者可能有自己的依赖消费者。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果事件不会发送到任何目标，则性能架构不会生成它。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下列表描述了可用的消费者价值。</font><font style="vertical-align: inherit;">有关几种典型用户配置及其对仪器的影响的讨论，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations" title="25.4.8消费者配置示例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.8节“用户配置示例”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering-global-thread" title="全球和线程消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球和线程消费者</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering-wait-event" title="等待事件消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待事件消费者</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering-stage-event" title="舞台活动消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台活动消费者</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering-statement-event" title="声明事件消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明事件消费者</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering-transaction-event" title="交易事件消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易事件消费者</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering-statement-digest" title="声明摘要消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要消费者</font></font></a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-filtering-global-thread"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球和线程消费者</font></font></h4>

</div>

</div>

</div>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最高级别的消费者。</font><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则禁用全局仪器。</font><font style="vertical-align: inherit;">所有其他设置都是较低级别的，不会被检查; </font><font style="vertical-align: inherit;">它们所设置的并不重要。</font><font style="vertical-align: inherit;">没有全局或每个线程信息被维护，并且在当前事件或事件历史表中没有收集个别事件。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则性能模式维护全局状态的信息并检查
               </font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用者。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅在</font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font><font style="vertical-align: inherit;">时才被检查</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，如果
               </font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则禁用特定于线程的检测，并忽略所有较低级别的设置。</font><font style="vertical-align: inherit;">每个线程不会维护任何信息，并且当前事件或事件历史记录表中不会收集单个事件。</font><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，性能模式会维护线程特定的信息并检查
               </font><font style="vertical-align: inherit;">
              消费者。
</font></font><code class="literal">events_<em class="replaceable"><code>xxx</code></em>_current</code><font style="vertical-align: inherit;"></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-filtering-wait-event"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待事件消费者</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些消费者既需要
           </font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要
           </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则将无法检查。</font><font style="vertical-align: inherit;">如果选中，他们的行为如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_waits_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，禁用收集表中的各个等待事件
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它启用等待事件收集和性能模式检查
               </font></font><code class="literal">events_waits_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">events_waits_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_waits_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">event_waits_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，
               </font><font style="vertical-align: inherit;">则不检查
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，
               </font></font><code class="literal">events_waits_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用或启用在等待事件的收集
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_waits_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">event_waits_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，
               </font><font style="vertical-align: inherit;">则不检查</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，
               </font></font><code class="literal">events_waits_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用或启用在等待事件的收集
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-filtering-stage-event"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台活动消费者</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些消费者既需要
           </font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要
           </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则将无法检查。</font><font style="vertical-align: inherit;">如果选中，他们的行为如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_stages_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中单个舞台事件的收集
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它使舞台事件收集和性能架构检查
               </font></font><code class="literal">events_stages_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">events_stages_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者的青睐。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_stages_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">event_stages_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，
               </font><font style="vertical-align: inherit;">则不检查
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，将</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">收集舞台事件</font><font style="vertical-align: inherit;">的
               </font></font><code class="literal">events_stages_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用或启用它们
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_stages_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">event_stages_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，
               </font><font style="vertical-align: inherit;">则不检查</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，将</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">
              表中</font><font style="vertical-align: inherit;">收集舞台事件</font><font style="vertical-align: inherit;">的
               </font></font><code class="literal">events_stages_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用或启用它们
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-filtering-statement-event"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明事件消费者</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些消费者既需要
           </font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要
           </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则将无法检查。</font><font style="vertical-align: inherit;">如果选中，他们的行为如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_statements_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表</font><font style="vertical-align: inherit;">中单个语句事件的收集
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它使语句事件收集和性能架构检查
               </font></font><code class="literal">events_statements_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">events_statements_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              消费者的青睐。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_statements_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">events_statements_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，
               </font><font style="vertical-align: inherit;">则不检查</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，将</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">
              表</font><font style="vertical-align: inherit;">中声明事件</font><font style="vertical-align: inherit;">的
               </font></font><code class="literal">events_statements_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用或启用它们
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_statements_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">events_statements_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，
               </font><font style="vertical-align: inherit;">则不检查</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，将</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">
              表</font><font style="vertical-align: inherit;">中声明事件</font><font style="vertical-align: inherit;">的
               </font></font><code class="literal">events_statements_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用或启用它们
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-filtering-transaction-event"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易事件消费者</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些消费者既需要
           </font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要
           </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则将无法检查。</font><font style="vertical-align: inherit;">如果选中，他们的行为如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_transactions_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表</font><font style="vertical-align: inherit;">中单个事务事件的收集
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它启用事务处理事件收集和性能模式检查
               </font></font><code class="literal">events_transactions_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">events_transactions_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用者。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_transactions_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">events_transactions_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是，</font><font style="vertical-align: inherit;">则不检查</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，
               </font></font><code class="literal">events_transactions_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用或启用在交易活动的集合
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">events_transactions_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">events_transactions_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是，</font><font style="vertical-align: inherit;">则不检查</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，
               </font></font><code class="literal">events_transactions_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              禁用或启用在交易活动的集合
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-filtering-statement-digest"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要消费者</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">statements_digest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者要求
           </font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
           </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者不进行检查。</font><font style="vertical-align: inherit;">不依赖于语句事件使用者，因此您可以获取每个摘要的统计信息，而无需收集统计信息
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这在开销方面是有利的。</font><font style="vertical-align: inherit;">相反，你可以在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有摘要的情况下</font><font style="vertical-align: inherit;">得到详细的陈述
           </font><font style="vertical-align: inherit;">（</font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">DIGEST_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列将是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句摘要的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息，请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;">第25.9节“性能模式语句摘要”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-consumer-configurations"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.8消费者配置示例</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
        的消费者设置
         </font><font style="vertical-align: inherit;">形成了从较高层到较低层的层次结构。</font><font style="vertical-align: inherit;">以下讨论描述消费者如何工作，显示消费者设置从高到低逐步启用的特定配置及其效果。</font><font style="vertical-align: inherit;">显示的消费者价值具有代表性。</font><font style="vertical-align: inherit;">这里描述的一般原则适用于其他可能可用的消费者价值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        配置描述按照功能和开销的增加顺序进行。</font><font style="vertical-align: inherit;">如果您不需要通过启用较低级别设置提供的信息，请禁用它们，并且Performance Schema将代表您执行较少的代码，并且您将获得的信息较少以供筛选。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格包含以下值的层次结构：
      </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">global_instrumentation</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 thread_instrumentation</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   events_waits_current</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_waits_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_waits_history_long</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   events_stages_current</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_stages_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_stages_history_long</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   events_statements_current</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_statements_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_statements_history_long</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   events_transactions_current</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_transactions_history</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     events_transactions_history_long</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 statements_digest</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在消费者层次结构中，等待，阶段，陈述和交易的消费者都处于同一水平。</font><font style="vertical-align: inherit;">这与事件嵌套层次结构不同，对于这些嵌套层次结构，嵌套在事件事件中的嵌套在事件事件中的事件嵌套在等待事件中。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果给定的消费者设置是</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则性能架构会禁用与消费者关联的工具并忽略所有较低级别的设置。</font><font style="vertical-align: inherit;">如果给定的设置是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则性能架构会启用与其关联的检测，并检查下一个最低级别的设置。</font><font style="vertical-align: inherit;">有关每位消费者规则的说明，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering" title="25.4.7消费者预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.7节“消费者预先过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，如果</font></font><code class="literal">global_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用，</font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则选中。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用，
         </font><font style="vertical-align: inherit;">
        则检查消费者。</font><font style="vertical-align: inherit;">如果这些
         </font><font style="vertical-align: inherit;">被启用，
         </font><font style="vertical-align: inherit;">并且
         </font><font style="vertical-align: inherit;">被检查。
      </font></font><code class="literal">events_<em class="replaceable"><code>xxx</code></em>_current</code><font style="vertical-align: inherit;"></font><code class="literal">events_waits_current</code><font style="vertical-align: inherit;"></font><code class="literal">events_waits_history</code><font style="vertical-align: inherit;"></font><code class="literal">events_waits_history_long</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下每个配置描述都指示了性能模式检查哪些设置元素以及它维护哪些输出表（即，它收集哪些表信息）。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations-no-instrumentation" title="没有仪器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有仪器</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations-global-instrumentation-only" title="仅限全球仪器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅限全球仪器</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations-global-and-thread-instrumentation-only" title="仅限全局和线程工具"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅限全局和线程工具</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations-global-thread-and-current-event-instrumentation" title="全局，线程和当前事件检测"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局，线程和当前事件检测</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-configurations-global-thread-current-event-and-event-history-instrumentation" title="全局，线程，当前事件和事件历史仪表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局，线程，当前事件和事件历史仪表</font></font></a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-configurations-no-instrumentation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有仪器</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          服务器配置状态：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这种配置中，没有任何工具可用。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检查设置元素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，消费者</font></font><code class="literal">global_instrumentation</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          输出表保持：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              没有
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-configurations-global-instrumentation-only"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅限全球仪器</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          服务器配置状态：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这种配置中，仪器只能维护全局状态。</font><font style="vertical-align: inherit;">每线程检测被禁用。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相对于上述配置，检​​查了其他设置元素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，消费者</font></font><code class="literal">thread_instrumentation</code>
            </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a>
            </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a>
            </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相对于上述配置，保留了其他输出表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#cond-instances-table" title="25.11.3.1 cond_instances表"><code class="literal">cond_instances</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_event_name</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_instance</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_event_name</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#objects-summary-global-by-type-table" title="25.11.15.5对象等待汇总表"><code class="literal">objects_summary_global_by_type</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-lock-waits-summary-by-table-table" title="25.11.15.7.3 table_lock_waits_summary_by_table表"><code class="literal">table_lock_waits_summary_by_table</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-index-usage-table" title="25.11.15.7.2 table_io_waits_summary_by_index_usage表"><code class="literal">table_io_waits_summary_by_index_usage</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_by_instance</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_global_by_event_name</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_global_by_event_name</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_global_by_event_name</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_global_by_event_name</code></a>
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-configurations-global-and-thread-instrumentation-only"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅限全局和线程工具</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          服务器配置状态：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这种配置中，仪器是全局和每个线程维护的。</font><font style="vertical-align: inherit;">在当前事件或事件历史表中没有收集个别事件。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相对于上述配置，检​​查了其他设置元素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，消费者
               </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">为
               </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">，
              </font></font><code class="literal">events_<em class="replaceable"><code>xxx</code></em>_current</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"></font><code class="literal">waits</code><font style="vertical-align: inherit;"></font><code class="literal">stages</code><font style="vertical-align: inherit;"></font><code class="literal">statements</code><font style="vertical-align: inherit;"></font><code class="literal">transactions</code>
            </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a>
            </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              柱 </font></font><code class="literal">threads.instrumented</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相对于上述配置，保留了其他输出表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_<em class="replaceable"><code>xxx</code></em>_summary_by_<em class="replaceable"><code>yyy</code></em>_by_event_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">waits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">stages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">并且
               </font></font><em class="replaceable"><code>yyy</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
               </font></font><code class="literal">thread</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">account</code>
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-configurations-global-thread-and-current-event-instrumentation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局，线程和当前事件检测</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          服务器配置状态：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这种配置中，仪器是全局和每个线程维护的。</font><font style="vertical-align: inherit;">个别事件收集在当前事件表中，但不包含在事件历史记录表中。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相对于上述配置，检​​查了其他设置元素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              消费者
               </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">为
               </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">，
              </font></font><code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"></font><code class="literal">waits</code><font style="vertical-align: inherit;"></font><code class="literal">stages</code><font style="vertical-align: inherit;"></font><code class="literal">statements</code><font style="vertical-align: inherit;"></font><code class="literal">transactions</code>
            </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              消费者
               </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">为
               </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">，
              </font></font><code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history_long</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"></font><code class="literal">waits</code><font style="vertical-align: inherit;"></font><code class="literal">stages</code><font style="vertical-align: inherit;"></font><code class="literal">statements</code><font style="vertical-align: inherit;"></font><code class="literal">transactions</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相对于上述配置，保留了其他输出表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_<em class="replaceable"><code>xxx</code></em>_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">waits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">stages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">transactions</code>
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="performance-schema-consumer-configurations-global-thread-current-event-and-event-history-instrumentation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局，线程，当前事件和事件历史仪表</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          上述配置不收集历史事件，因为
           </font><font style="vertical-align: inherit;">
          和
           </font><font style="vertical-align: inherit;">
          消费者都被禁止。</font><font style="vertical-align: inherit;">这些消费者可以单独启用或一起启用以收集每个线程，全局或两者的事件历史记录。
        </font></font><code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history</code><font style="vertical-align: inherit;"></font><code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history_long</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此配置收集每个线程的事件历史记录，但不是全局的：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为此配置维护的事件历史记录表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">waits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">stages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">transactions</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此配置全局收集事件历史记录，但不是每个线程：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为此配置维护的事件历史记录表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">waits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">stages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">transactions</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此配置收集每个线程和全局的事件历史记录：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为此配置维护的事件历史记录表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">waits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">stages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">transactions</code>
            </p></li><li class="listitem"><p>
              <code class="literal">events_<em class="replaceable"><code>xxx</code></em>_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">waits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">stages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">transactions</code>
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-filtering-names"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.9用于过滤操作的命名工具或消费者</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为过滤操作提供的名称可以根据需要具体或一般。</font><font style="vertical-align: inherit;">要表示一个乐器或消费者，请完整指定其名称：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments</code></strong>
       <strong class="userinput"><code>SET ENABLED = 'NO'</code></strong>
       <strong class="userinput"><code>WHERE NAME = 'wait/synch/mutex/myisammrg/MYRG_INFO::mutex';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_consumers</code></strong>
       <strong class="userinput"><code>SET ENABLED = 'NO' WHERE NAME = 'events_waits_current';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要指定一组工具或消费者，请使用与组成员匹配的模式：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments</code></strong>
       <strong class="userinput"><code>SET ENABLED = 'NO'</code></strong>
       <strong class="userinput"><code>WHERE NAME LIKE 'wait/synch/mutex/%';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_consumers</code></strong>
       <strong class="userinput"><code>SET ENABLED = 'NO' WHERE NAME LIKE '%history%';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果你使用一个模式，应该选择它，以便它匹配所有感兴趣的项目，而不是其他项目。</font><font style="vertical-align: inherit;">例如，要选择所有文件I / O工具，最好使用包含整个工具名称前缀的模式：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...名称如'wait / io / file /％';
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一种模式</font></font><code class="literal">'%/file/%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将与</font></font><code class="literal">'/file/'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        名称</font><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">任何位置</font><font style="vertical-align: inherit;">的组件相匹配的其他乐器匹配</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这种模式更不适合，
         </font></font><code class="literal">'%file%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它可以将仪器与</font></font><code class="literal">'file'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称中的任何位置进行</font><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">，例如
         </font></font><code class="literal">wait/synch/mutex/innodb/file_open_mutex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要检查某个模式匹配的仪器或使用者名称，请执行一个简单的测试：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NAME FROM setup_instruments WHERE NAME LIKE '<em class="replaceable"><code>pattern</code></em>';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NAME FROM setup_consumers WHERE NAME LIKE '<em class="replaceable"><code>pattern</code></em>';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关支持的名称类型的信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能架构仪器命名约定”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-instrumentation-checking"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4.10确定仪器是什么</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        总是可以通过检查</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">来确定性能模式包含哪些工具
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，要查看为</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎安装了</font><font style="vertical-align: inherit;">哪些与文件相关的事件</font><font style="vertical-align: inherit;">，请使用以下查询：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments WHERE NAME LIKE 'wait/io/file/innodb/%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / innodb / innodb_data_file | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / innodb / innodb_log_file | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / innodb / innodb_temp_file | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- + --------- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本文档中未详细说明所安装的设备，原因如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            所装备的是服务器代码。</font><font style="vertical-align: inherit;">对此代码的更改经常发生，这也会影响到一组仪器。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列出所有的文书是不现实的，因为其中有数百个。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如前所述，可以通过查询</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">来查找</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些信息始终是您的MySQL版本的最新信息，还包括您可能已安装但不属于核心服务器的插装插件的检测工具，并可供自动工具使用。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-queries"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.5性能模式查询</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      预过滤限制收集哪些事件信息并且独立于任何特定用户。</font><font style="vertical-align: inherit;">相比之下，个人用户通过使用具有适当</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">的查询来执行后过滤，所述查询</font><font style="vertical-align: inherit;">限制了在应用预过滤之后从可用事件中选择哪些事件信息。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering" title="25.4.3事件预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.3节“事件预过滤”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，一个例子展示了如何对文件进行预过滤。</font><font style="vertical-align: inherit;">如果事件表包含文件和非文件信息，则后过滤是另一种仅用于查看文件事件信息的方式。</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为查询</font><font style="vertical-align: inherit;">添加一个
       </font><font style="vertical-align: inherit;">子句以适当地限制事件选择：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT THREAD_ID, NUMBER_OF_BYTES</code></strong>
       <strong class="userinput"><code>FROM events_waits_history</code></strong>
       <strong class="userinput"><code>WHERE EVENT_NAME LIKE 'wait/io/file/%'</code></strong>
       <strong class="userinput"><code>AND NUMBER_OF_BYTES IS NOT NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">THREAD_ID | </font><font style="vertical-align: inherit;">NUMBER_OF_BYTES |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">11 | </font><font style="vertical-align: inherit;">66 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">11 | </font><font style="vertical-align: inherit;">47 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">11 | </font><font style="vertical-align: inherit;">139 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">24 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">834 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + ----------------- +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-instrument-naming"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.6性能架构仪器命名约定</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      仪器名称由一系列由</font></font><code class="literal">'/'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">分隔的组件组成</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">示例名称：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待/ IO /文件/ MyISAM数据/日志</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/ IO /文件/ MYSYS /字符集</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/锁/表/ SQL /处理器</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/同步/湿/ MYSYS / COND_alarm</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/同步/湿/ SQL / BINLOG :: update_cond</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/同步/互斥/ MYSYS / BITMAP_mutex</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/同步/互斥/ SQL / LOCK_delete</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/同步/ rwlock中/ SQL / Query_cache_query ::锁</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
stage / sql / closing表</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
stage / sql /排序结果</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
声明/ COM /执行</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
声明/ COM /查询</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
声明/ SQL / CREATE_TABLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
声明/ SQL / lock_tables</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      仪器名称空间具有树状结构。</font><font style="vertical-align: inherit;">仪器名称的组成部分从左到右提供了从更一般到更具体的进展。</font><font style="vertical-align: inherit;">名称所含组件的数量取决于仪器的类型。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      名称中给定组件的解释取决于其左侧的组件。</font><font style="vertical-align: inherit;">例如，
       </font></font><code class="literal">myisam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出现在以下两个名称中，但</font></font><code class="literal">myisam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个名称与文件I / O有关，而第二个名称与同步工具有关：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待/ IO /文件/ MyISAM数据/日志</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待/同步/湿/ MyISAM数据/ MI_SORT_INFO :: COND</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      仪器名称由性能模式实现定义的结构的前缀和实现仪器代码的开发人员定义的后缀组成。</font><font style="vertical-align: inherit;">仪器前缀的顶层组件指示仪器的类型。</font><font style="vertical-align: inherit;">该组件还确定</font></font><code class="literal">setup_timers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中的哪个事件计时器</font><font style="vertical-align: inherit;">适用于该仪器。</font><font style="vertical-align: inherit;">对于仪器名称的前缀部分，顶层指示仪器的类型。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      仪器名称的后缀部分来自仪器本身的代码。</font><font style="vertical-align: inherit;">后缀可能包括这些级别：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一种主要成分名（一服务器模块，例如
           </font></font><code class="literal">myisam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">innodb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">mysys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code class="literal">sql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或插件名称。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          代码中变量的名称，格式
           </font></font><em class="replaceable"><code>XXX</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（全局变量）或
           </font><font style="vertical-align: inherit;">
          （</font><font style="vertical-align: inherit;">类中
           </font><font style="vertical-align: inherit;">的成员</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">例如：
           </font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">。
</font></font><code class="literal"><em class="replaceable"><code>CCC</code></em>::<em class="replaceable"><code>MMM</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>MMM</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>CCC</code></em><font style="vertical-align: inherit;"></font><code class="literal">COND_thread_cache</code><font style="vertical-align: inherit;"></font><code class="literal">THR_LOCK_myisam</code><font style="vertical-align: inherit;"></font><code class="literal">BINLOG::LOCK_index</code><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-top-level-instrument-components" title="顶级仪器组件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顶级仪器组件</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-idle-instrument-components" title="空闲仪器组件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空闲仪器组件</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-memory-instrument-components" title="内存仪器组件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存仪器组件</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-stage-instrument-components" title="舞台仪器组件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台仪器组件</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-instrument-components" title="报表仪器组件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报表仪器组件</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-wait-instrument-components" title="等待乐器组件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待乐器组件</font></font></a></p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="performance-schema-top-level-instrument-components"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顶级仪器组件</font></font></h3>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">idle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：仪表化闲置事件。</font><font style="vertical-align: inherit;">该仪器没有其他组件。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：仪器化的记忆事件。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">stage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：乐器舞台事件。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">statement</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：一个仪表化的陈述事件。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">transaction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：检测到的交易事件。</font><font style="vertical-align: inherit;">该仪器没有其他组件。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">wait</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：仪表等待事件。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="performance-schema-idle-instrument-components"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空闲仪器组件</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">idle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具用于空闲事件，性能模式按照</font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><font style="vertical-align: inherit;">第25.11.3.5节“socket_instances表”中</font></a></font><code class="literal">socket_instances.STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        列中</font><font style="vertical-align: inherit;">的描述进行生成</font><font style="vertical-align: inherit;">。
</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="performance-schema-memory-instrument-components"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存仪器组件</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        大多数内存检测默认是禁用的，并且可以在启动时启用或禁用，或者在运行时通过更新</font><font style="vertical-align: inherit;">表中</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关仪器</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列来
         </font><font style="vertical-align: inherit;">动态启用或禁用</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">记忆乐器具有表格的名称，
         </font><font style="vertical-align: inherit;">
        其中</font><font style="vertical-align: inherit;">是诸如</font><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">的值
         </font><font style="vertical-align: inherit;">，并且
         </font><font style="vertical-align: inherit;">是乐器细节。
      </font></font><code class="literal">memory/<em class="replaceable"><code>code_area</code></em>/<em class="replaceable"><code>instrument_name</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>code_area</code></em><font style="vertical-align: inherit;"></font><code class="literal">sql</code><font style="vertical-align: inherit;"></font><code class="literal">myisam</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>instrument_name</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用前缀命名的工具会
         </font></font><code class="literal">memory/performance_schema/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暴露性能模式中为内部缓冲区分配了多少内存。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">memory/performance_schema/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        仪器是建立在，始终处于启用状态，并且不能在启动或运行时被禁用。</font><font style="vertical-align: inherit;">内置存储器只能在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表格</font><font style="vertical-align: inherit;">中显示
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-memory-model" title="25.16性能模式内存分配模型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.16节“性能模式内存分配模型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="performance-schema-stage-instrument-components"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台仪器组件</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        舞台乐器具有形式的名称
         </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">是诸如</font><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">的值
         </font><font style="vertical-align: inherit;">，并且
         </font><font style="vertical-align: inherit;">指示语句处理的阶段，例如</font><font style="vertical-align: inherit;">
        或</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">阶段对应</font><font style="vertical-align: inherit;">于</font><font style="vertical-align: inherit;">
        表格中</font><font style="vertical-align: inherit;">显示</font><font style="vertical-align: inherit;">或
         </font><font style="vertical-align: inherit;">显示的线程状态</font><font style="vertical-align: inherit;">。
</font></font><code class="literal">stage/<em class="replaceable"><code>code_area</code></em>/<em class="replaceable"><code>stage_name</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>code_area</code></em><font style="vertical-align: inherit;"></font><code class="literal">sql</code><font style="vertical-align: inherit;"></font><code class="literal">myisam</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>stage_name</code></em><font style="vertical-align: inherit;"></font><code class="literal">Sorting result</code><font style="vertical-align: inherit;"></font><code class="literal">Sending data</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW
        PROCESSLIST</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="performance-schema-statement-instrument-components"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报表仪器组件</font></font></h3>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">statement/abstract/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：语句操作的抽象工具。</font><font style="vertical-align: inherit;">抽象工具在声明分类的早期阶段使用，然后才知道确切的声明类型，然后在知道类型时将其更改为更具体的声明工具。</font><font style="vertical-align: inherit;">有关此过程的说明，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables" title="25.11.6性能架构语句事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6节“性能架构语句事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">statement/com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：一个仪表化的命令操作。</font><font style="vertical-align: inherit;">这些名称与</font><font style="vertical-align: inherit;">
            操作</font><font style="vertical-align: inherit;">相对应
             </font><font style="vertical-align: inherit;">（参见</font><font style="vertical-align: inherit;">头文件和</font><font style="vertical-align: inherit;">。例如，</font><font style="vertical-align: inherit;">和
             </font><font style="vertical-align: inherit;">仪器对应于</font><font style="vertical-align: inherit;">和
             </font><font style="vertical-align: inherit;">命令。
          </font></font><code class="literal">COM_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><code class="filename">mysql_com.h</code><font style="vertical-align: inherit;"></font><code class="filename">sql/sql_parse.cc</code><font style="vertical-align: inherit;"></font><code class="literal">statement/com/Connect</code><font style="vertical-align: inherit;"></font><code class="literal">statement/com/Init DB</code><font style="vertical-align: inherit;"></font><code class="literal">COM_CONNECT</code><font style="vertical-align: inherit;"></font><code class="literal">COM_INIT_DB</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
            <code class="literal">statement/scheduler/event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：跟踪事件调度程序执行的所有事件的单个工具。</font><font style="vertical-align: inherit;">当预定的事件开始执行时，该仪器开始起作用。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">statement/sp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：由存储程序执行的仪表化内部指令。</font><font style="vertical-align: inherit;">例如，
             </font></font><code class="literal">statement/sp/cfetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">statement/sp/freturn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">乐器都使用光标获取和函数返回指令。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">statement/sql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：检测到的SQL语句操作。</font><font style="vertical-align: inherit;">例如，
             </font></font><code class="literal">statement/sql/create_db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">statement/sql/select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具用于</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-database" title="13.1.11 CREATE DATABASE语法"><code class="literal">CREATE DATABASE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="performance-schema-wait-instrument-components"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待乐器组件</font></font></h3>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">wait/io</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            仪器化的I / O操作。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">wait/io/file</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                仪表化的文件I / O操作。</font><font style="vertical-align: inherit;">对于文件，等待是等待文件操作完成的时间（例如，呼叫</font></font><code class="literal">fwrite()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">由于缓存，磁盘上的物理文件I / O可能不会在此调用中发生。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">wait/io/socket</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                仪器化的套接字操作。</font><font style="vertical-align: inherit;">套接字工具具有表单的名称
                 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">服务器为其支持的每个网络协议都有一个监听套接字。</font><font style="vertical-align: inherit;">与用于TCP / IP或Unix套接字文件连接的侦听套接字相关的工具</font><font style="vertical-align: inherit;">分别</font><font style="vertical-align: inherit;">具有
                 </font><font style="vertical-align: inherit;">值
                 </font><font style="vertical-align: inherit;">or或
                 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当侦听套接字检测到连接时，服务器将连接传输到由单独线程管理的新套接字。</font><font style="vertical-align: inherit;">新连接线程的仪器的</font><font style="vertical-align: inherit;">
                值为</font><font style="vertical-align: inherit;">。
              </font></font><code class="literal">wait/io/socket/sql/<em class="replaceable"><code>socket_type</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>socket_type</code></em><font style="vertical-align: inherit;"></font><code class="literal">server_tcpip_socket</code><font style="vertical-align: inherit;"></font><code class="literal">server_unix_socket</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>socket_type</code></em><font style="vertical-align: inherit;"></font><code class="literal">client_connection</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
                <code class="literal">wait/io/table</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                仪表化I / O操作。</font><font style="vertical-align: inherit;">这些包括对持久基表或临时表的行级访问。</font><font style="vertical-align: inherit;">影响行的操作是读取，插入，更新和删除。</font><font style="vertical-align: inherit;">对于视图，等待与视图引用的基表关联。
              </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                与大多数等待不同，表I / O等待可以包含其他等待。</font><font style="vertical-align: inherit;">例如，表I / O可能包含文件I / O或内存操作。</font><font style="vertical-align: inherit;">因此，
                 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于表I / O等待通常有两行。</font><font style="vertical-align: inherit;">有关更多信息，请参见
                 </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-atom-molecule-events" title="25.8性能模式原子和分子事件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.8节“性能模式原子和分子事件”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
              </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                某些行操作可能会导致多个表I / O等待。</font><font style="vertical-align: inherit;">例如，插入可能会激活导致更新的触发器。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
            <code class="literal">wait/lock</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            仪表锁定操作。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">wait/lock/table</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                仪表化表锁定操作。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">wait/lock/metadata/sql/mdl</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                仪表化的元数据锁定操作。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
            <code class="literal">wait/synch</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个仪表化的同步对象。</font><font style="vertical-align: inherit;">对于同步对象，</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间包括尝试获取对象上的锁定时阻塞的时间量（如果有）。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">wait/synch/cond</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                一个线程使用一个条件向其他线程发出他们正在等待的事情已经发生。</font><font style="vertical-align: inherit;">如果一个线程正在等待某个条件，它可以唤醒并继续执行。</font><font style="vertical-align: inherit;">如果有几个线程正在等待，他们都可以醒来并争夺他们正在等待的资源。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">wait/synch/mutex</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                一个互斥对象，用于允许访问资源（例如一段可执行代码），同时阻止其他线程访问资源。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">wait/synch/rwlock</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                甲</font></font><a class="link" href="/mysql-5.7-google-zh/glossary.html#glos_rw_lock" title="RW-锁"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">读/写锁</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                用于锁定特定的变量进行访问，同时防止其使用由其他线程对象。</font><font style="vertical-align: inherit;">共享读锁可以由多个线程同时获取。</font><font style="vertical-align: inherit;">一次只能有一个线程获取独占写锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">wait/synch/sxlock</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                共享独占（SX）锁是一种
                 </font></font><a class="link" href="/mysql-5.7-google-zh/glossary.html#glos_rw_lock" title="RW-锁"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rwlock</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">锁对象，它提供对公共资源的写入访问权限，同时允许其他线程进行不一致的读取。
                </font></font><code class="literal">sxlocks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化并发性并提高读写工作负载的可伸缩性。
</font></font></p></li></ul>
</div>
</li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-status-monitoring"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.7性能模式状态监视</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有几个状态变量与性能模式相关联：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW STATUS LIKE 'perf%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">变量名| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_accounts_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_cond_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_cond_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_digest_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_file_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_file_handles_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_file_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_hosts_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_locker_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_memory_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_metadata_lock_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_mutex_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_mutex_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_nested_statement_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_program_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_rwlock_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_rwlock_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_session_connect_attrs_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_socket_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_socket_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_stage_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_statement_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_table_handles_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_table_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_thread_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_thread_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_users_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +  - ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式状态变量提供有关由于内存限制而无法加载或创建的检测的信息。</font><font style="vertical-align: inherit;">这些变量的名称有几种形式：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">Performance_schema_<em class="replaceable"><code>xxx</code></em>_classes_lost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表示</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法加载</font><font style="vertical-align: inherit;">多少种类型的文书
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">Performance_schema_<em class="replaceable"><code>xxx</code></em>_instances_lost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          指示</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法创建</font><font style="vertical-align: inherit;">多少个对象类型的实例
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">Performance_schema_<em class="replaceable"><code>xxx</code></em>_handles_lost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          指示</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法打开</font><font style="vertical-align: inherit;">多少个对象类型的实例
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">Performance_schema_locker_lost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示有多少事件</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">丢失</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或未记录。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      例如，如果在服务器源中检测到互斥量，但服务器无法在运行时为该检测分配内存，则会增量
      </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_classes_lost"><code class="literal">Performance_schema_mutex_classes_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">互斥锁仍作为同步对象（即服务器继续正常工作），但不会收集其性能数据。</font><font style="vertical-align: inherit;">如果可以分配仪器，则可以使用它来初始化已插装的互斥实例。</font><font style="vertical-align: inherit;">对于单例互斥体，如全局互斥体，将只有一个实例。</font><font style="vertical-align: inherit;">其他互斥锁每个连接都有一个实例，或者各个缓存和数据缓冲区中的每个页面都有一个实例，所以实例的数量随时间而变化。</font><font style="vertical-align: inherit;">增加最大连接数或某些缓冲区的最大大小将增加一次可能分配的最大实例数。</font><font style="vertical-align: inherit;">如果服务器无法创建给定的检测互斥体实例，则会递增
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_instances_lost"><code class="literal">Performance_schema_mutex_instances_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      假设以下条件成立：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          服务器启动时带有
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes"><code class="option">--performance_schema_max_mutex_classes=200</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          选件，因此可以容纳200个互斥体仪器。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          已经装载了150个互斥体仪器。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          名为的插件</font></font><code class="literal">plugin_a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含40个互斥体乐器。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该名称</font></font><code class="literal">plugin_b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含20个互斥体乐器。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      服务器为插件分配互斥工具，具体取决于它们需要的数量和可用的数量，如以下语句顺序所示：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装PLUGIN plugin_a
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      服务器现在有150 + 40 = 190个互斥体仪器。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNINSTALL PLUGIN plugin_a;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      服务器仍然有190个乐器。</font><font style="vertical-align: inherit;">插件代码生成的所有历史数据仍然可用，但不收集仪器的新事件。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装插件plugin_a;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      服务器检测到已经定义了40个仪器，因此不会创建新仪器，并且之前分配的内部存储器缓冲区将被重新使用。</font><font style="vertical-align: inherit;">服务器仍然有190个乐器。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INSTALL PLUGIN plugin_b;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      服务器为200-190 = 10个仪器（在本例中为互斥体类）提供空间，并且该插件包含20个新仪器。</font><font style="vertical-align: inherit;">10个仪器被加载，10个被丢弃或
       </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">丢失”。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_classes_lost"><code class="literal">Performance_schema_mutex_classes_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      指示仪表（互斥类）丢失的数目：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW STATUS LIKE "perf%mutex_classes_lost";</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">变量名| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_mutex_classes_lost | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.10秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      仪器仍然工作并收集（部分）数据
       </font></font><code class="literal">plugin_b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当服务器无法创建互斥体工具时，会出现以下结果：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          仪器没有行插入到
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中。
        </font></font></p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_classes_lost"><code class="literal">Performance_schema_mutex_classes_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          增加1。
        </font></font></p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_instances_lost"><code class="literal">Performance_schema_mutex_instances_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不会改变。</font><font style="vertical-align: inherit;">（当互斥体仪器未创建时，它不能用于稍后创建检测互斥体实例。）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      刚才描述的模式适用于所有类型的工具，而不仅仅是互斥体。
    </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_classes_lost"><code class="literal">Performance_schema_mutex_classes_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在两种情况下，可能会发生大于0的</font><font style="vertical-align: inherit;">
      值
       </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了节省几个字节的内存，你可以启动服务器
           </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">小于默认值。</font><font style="vertical-align: inherit;">默认值被选择为足以加载MySQL发行版中提供的所有插件，但如果某些插件永远不会加载，则可以减少此值。</font><font style="vertical-align: inherit;">例如，您可以选择不加载发行版中的某些存储引擎。
        </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes"><code class="option">--performance_schema_max_mutex_classes=<em class="replaceable"><code>N</code></em></code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您加载一个插入性能模式的第三方插件，但在启动服务器时不要求插件的插装内存要求。</font><font style="vertical-align: inherit;">由于它来自第三方，因此此引擎的仪器内存消耗不在所选的默认值中计算
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes"><code class="literal">performance_schema_max_mutex_classes</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果服务器没有足够的资源用于插件的工具，并且没有明确分配更多的使用
           </font><font style="vertical-align: inherit;">，则加载插件会导致工具不足。
</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes"><code class="option">--performance_schema_max_mutex_classes=<em class="replaceable"><code>N</code></em></code></a><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果选择的值
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes"><code class="literal">performance_schema_max_mutex_classes</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      太小，则在错误日志中不报告错误，并且在运行时没有错误。</font><font style="vertical-align: inherit;">但是，</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font><font style="vertical-align: inherit;">中表的内容
       </font><font style="vertical-align: inherit;">将会错过事件。</font><font style="vertical-align: inherit;">该
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_classes_lost"><code class="literal">Performance_schema_mutex_classes_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      状态变量是唯一明显的迹象表明，一些事件因未能创建仪器内部下降。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果仪器没有丢失，那么性能模式就是已知的，并且在测量实例时使用。</font><font style="vertical-align: inherit;">例如，表中
       </font></font><code class="literal">wait/synch/mutex/sql/LOCK_delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个互斥体工具的名称
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在代码（in </font></font><code class="literal">THD::LOCK_delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中</font><font style="vertical-align: inherit;">创建互斥体时使用此单个仪器，
       </font><font style="vertical-align: inherit;">但在服务器运行时需要多个互斥体实例。</font><font style="vertical-align: inherit;">在这种情况下，
       </font></font><code class="literal">LOCK_delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个连接是一个互斥体（</font></font><code class="literal">THD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），所以如果服务器有1000个连接，则有1000个线程和1000个
       </font></font><code class="literal">LOCK_delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">互补实例（</font></font><code class="literal">THD::LOCK_delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果服务器没有足够的空间容纳所有这些1000个互补的互斥体（实例），则使用检测来创建一些互斥体，并且一些互斥体是在没有检测的情况下创建的。</font><font style="vertical-align: inherit;">如果服务器只能创建800个实例，则会丢失200个实例。</font><font style="vertical-align: inherit;">服务器继续运行，但增加
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_instances_lost"><code class="literal">Performance_schema_mutex_instances_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      200，表示无法创建实例。
    </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_instances_lost"><code class="literal">Performance_schema_mutex_instances_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当代码在运行时初始化比分配的更多互斥量时，可能会发生大于0的
       </font><font style="vertical-align: inherit;">
      值
       </font><font style="vertical-align: inherit;">。
    </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_instances"><code class="option">--performance_schema_max_mutex_instances=<em class="replaceable"><code>N</code></em></code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      底线是，如果
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-status" title="13.7.5.35 SHOW STATUS语法"><code class="literal">SHOW STATUS LIKE
      'perf%'</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说什么都没有丢失（所有值都为零），则性能模式数据是准确的并且可以依赖。</font><font style="vertical-align: inherit;">如果丢失了某些数据，则数据不完整，并且由于所使用的内存数量不足，性能模式无法记录所有内容。</font><font style="vertical-align: inherit;">在这种情况下，具体
       </font><font style="vertical-align: inherit;">
      变量表示问题区域。
    </font></font><code class="literal">Performance_schema_<em class="replaceable"><code>xxx</code></em>_lost</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在某些情况下可能会导致故意的仪器不足。</font><font style="vertical-align: inherit;">例如，如果您不关心文件I / O的性能数据，则可以启动服务器，并将与文件I / O相关的所有性能模式参数设置为0.没有内存将分配给与文件相关的类，实例，或句柄，并且所有文件事件都将丢失。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-engine" title="13.7.5.15 SHOW ENGINE语法"><code class="literal">SHOW ENGINE
      PERFORMANCE_SCHEMA STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查绩效模式的代码的内部操作：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW ENGINE PERFORMANCE_SCHEMA STATUS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 3. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  类型：performance_schema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  名称：events_waits_history.size</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状态：76</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 4. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  类型：performance_schema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  名称：events_waits_history.count</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状态：10000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 5. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  类型：performance_schema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  名称：events_waits_history.memory</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状态：760000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 57. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  类型：performance_schema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  名称：performance_schema.memory</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状态：26459600</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      此声明旨在帮助DBA了解不同性能模式选项对内存要求的影响。</font><font style="vertical-align: inherit;">有关字段含义的说明，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-engine" title="13.7.5.15 SHOW ENGINE语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.7.5.15节“SHOW ENGINE语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-atom-molecule-events"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.8性能模式原子和分子事件</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于表I / O事件，通常有两行
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是一行。</font><font style="vertical-align: inherit;">例如，行提取可能会导致像这样的行：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第＃EVENT_NAME行TIMER_START TIMER_END</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
---- ---------- ----------- ---------</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   1 wait / io / file / myisam / dfile 10001 10002</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   2等待/ io / table / sql / handler 10000 NULL</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      行提取会导致读取文件。</font><font style="vertical-align: inherit;">在该示例中，表I / O提取事件在文件I / O事件之前开始但尚未完成（其</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为
       </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">文件I / O事件
       </font><font style="vertical-align: inherit;">在表I / O事件中</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌套</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      发生这种情况的原因是，与其他</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原子</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待事件（例如互斥锁或文件I / O）不同，表I / O事件是
       </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分子</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并包括（与其他事件重叠）。</font><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，表I / O事件通常有两行：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一行用于最近的表I / O等待事件
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          最近一次任何类型的等待事件的一行
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通常情况下，但并非总是如此，在</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何形式的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待事件从表I / O事件不同。</font><font style="vertical-align: inherit;">随着每个子事件完成，它从中消失
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这一点上，直到下一个子事件开始，表I / O等待也是最近的任何一种等待。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-statement-digests"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.9性能架构语句摘要</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL服务器能够维护语句摘要信息。</font><font style="vertical-align: inherit;">摘要过程将每个SQL语句转换为规范化形式（语句摘要），并根据规范化结果计算MD5哈希值（摘要哈希值）。</font><font style="vertical-align: inherit;">规范化允许类似的语句进行分组和汇总，以公开关于服务器正在执行的语句类型以及它们发生的频率的信息。</font><font style="vertical-align: inherit;">本节介绍语句消解如何发生以及如何有用。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      无论性能模式是否可用，解析器中都会发生摘要，以便其他服务器组件（如MySQL Enterprise Firewall和查询重写插件）可以访问语句摘要。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-digests-general" title="声明摘要一般概念"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要一般概念</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-digests-performance-schema" title="性能模式中的语句摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能模式中的语句摘要</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-digests-memory-use" title="声明摘要记忆使用"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要记忆使用</font></font></a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="statement-digests-general"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要一般概念</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当解析器接收到一条SQL语句时，如果需要该摘要，它将计算语句摘要，如果满足以下任一条件，则该语句为真：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            性能架构摘要检测已启用
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL企业防火墙已启用
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查询重写插件已启用
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        所述</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量值决定了可用于计算归一化的语句消化的最大字节数。</font><font style="vertical-align: inherit;">一旦在摘要计算过程中使用了大量空间，就会发生截断：不会收集来自解析语句的其他令牌，也不会收集其摘要值。</font><font style="vertical-align: inherit;">仅在解析令牌的许多字节产生相同的规范化语句摘要之后才会有差异，并且如果进行比较或汇总为摘要统计信息，则认为它们是相同的。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在计算了规范化语句之后，从中计算MD5哈希值。</font><font style="vertical-align: inherit;">此外：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果启用MySQL企业防火墙，则会调用它，并且计算出的摘要可用。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果启用了任何查询重写插件，则会调用它，并且可以使用语句摘要和摘要值。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果性能模式启用了摘要检测，则会生成规范化语句摘要的副本，为其分配最大
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            字节数。</font><font style="vertical-align: inherit;">因此，如果
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            小于
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则副本相对于原始被截断。</font><font style="vertical-align: inherit;">规范化语句摘要的副本与从原始规范化语句计算出的MD5哈希值一起存储在适当的性能模式表中。</font><font style="vertical-align: inherit;">（如果性能模式相对于原始数据截断了规范化语句摘要的副本，则不会重新计算MD5哈希值。）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        语句规范化将语句文本转换为更标准化的摘要字符串表示形式，该表示形式保留了通用语句结构，同时删除了对结构不重要的信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对象标识符（如数据库和表名称）将被保留。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            文字值被转换为参数标记。</font><font style="vertical-align: inherit;">规范化语句不保留诸如名称，密码，日期等信息。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            评论被删除并且空白被调整。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        考虑这些陈述：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM orders WHERE customer_id = 10 AND quantity&gt; 20</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT * FROM orders where customer_id = 20 AND quantity&gt; 100</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了规范化这些语句，解析器通过替换数据值</font></font><code class="literal">?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并调整空格。</font><font style="vertical-align: inherit;">这两个陈述产生相同的标准化形式，因此被认为是
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM orders where customer_id =？</font><font style="vertical-align: inherit;">AND数量&gt;？
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        规范化语句包含的信息较少，但仍是原始语句的代表。</font><font style="vertical-align: inherit;">其他具有不同数据值的类似语句具有相同的标准化形式。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        现在考虑这些陈述：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM customers where customer_id = 1000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT * FROM orders where customer_id = 1000</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在这种情况下，标准化语句因对象标识符的不同而不同：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM customers where customer_id =？</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT * FROM orders where customer_id =？</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果规范化生成的语句超出了摘要缓冲区中的可用空间（由其决定
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），则会发生截断，并且文本以</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结尾</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">仅在</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后面出现的部分不同的长标准化语句</font><font style="vertical-align: inherit;">被认为是相同的。</font><font style="vertical-align: inherit;">考虑这些陈述：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM mytable WHERE cola = 10 AND colb = 20</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT * FROM mytable WHERE cola = 10 AND colc = 20</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果临界值恰好在这之后
         </font></font><code class="literal">AND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，那么这两个语句都有这种标准化形式：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM mytable WHERE cola =？</font><font style="vertical-align: inherit;">AND ...
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在这种情况下，第二列名称中的差异会丢失，并且两个语句都被视为相同。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="statement-digests-performance-schema"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能模式中的语句摘要</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在性能模式中，语句摘要涉及这些组件：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
            的</font></font><code class="literal">statements_digest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制性能模式是否维护摘要信息。</font><font style="vertical-align: inherit;">请参阅
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering-statement-digest" title="声明摘要消费者"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句摘要使用者</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语句事件表（</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）具有用于存储规范化语句摘要和相应的摘要MD5哈希值的列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">DIGEST_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是规范化语句摘要的文本。</font><font style="vertical-align: inherit;">这是原始标准化语句的副本，计算为最大
                 </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                字节数，并根据需要进一步截断为
                 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                字节。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是从原始规范化语句计算的摘要MD5哈希值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables" title="25.11.6性能架构语句事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6节“性能架构语句事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            汇总表提供汇总声明摘要信息。</font><font style="vertical-align: inherit;">此表汇总了每个报表</font></font><code class="literal">SCHEMA_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组合的</font><font style="vertical-align: inherit;">报表信息</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">性能模式使用MD5哈希值进行聚合，因为它们计算速度快，并具有有利于最小化冲突的统计分布。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.3节“语句汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        语句事件表还有一个</font></font><code class="literal">SQL_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含原始SQL语句</font><font style="vertical-align: inherit;">的
         </font><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">语句显示的最大可用空间默认为1024字节。</font><font style="vertical-align: inherit;">要更改此值，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_sql_text_length"><code class="literal">performance_schema_max_sql_text_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在服务器启动时</font><font style="vertical-align: inherit;">设置
         </font><font style="vertical-align: inherit;">系统变量。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        系统变量决定了可用于摘要值存储在性能模式的最大字节数。</font><font style="vertical-align: inherit;">但是，由于语句组件（如关键字和文字值）的内部编码，语句摘要的显示长度可能比可用缓冲区大小更长。</font><font style="vertical-align: inherit;">因此，从</font></font><code class="literal">DIGEST_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句事件表列中</font><font style="vertical-align: inherit;">选择</font><font style="vertical-align: inherit;">的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值</font><font style="vertical-align: inherit;">可能会超出该
         </font><font style="vertical-align: inherit;">值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        汇总表提供了服务器执行的语句的概况。</font><font style="vertical-align: inherit;">它显示了应用程序正在执行的语句和频率。</font><font style="vertical-align: inherit;">应用程序开发人员可以将此信息与表中的其他信息一起使用，以评估应用程序的性能特征。</font><font style="vertical-align: inherit;">例如，显示等待时间，锁定时间或索引使用的表列可能会突出显示效率低下的查询类型。</font><font style="vertical-align: inherit;">这使开发人员能够深入了解应用程序的哪些部分需要注意。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        汇总表具有固定的大小。</font><font style="vertical-align: inherit;">默认情况下，性能模式会估算启动时要使用的大小。</font><font style="vertical-align: inherit;">要明确指定表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size"><code class="literal">performance_schema_digests_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在服务器启动时</font><font style="vertical-align: inherit;">设置
         </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">如果表格已满，那么Performance Schema会将具有</font></font><code class="literal">SCHEMA_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值不匹配表中具有</font></font><code class="literal">SCHEMA_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为</font><font style="vertical-align: inherit;">的特殊行中的现有值的</font><font style="vertical-align: inherit;">语句组合
         </font><font style="vertical-align: inherit;">在一起</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这允许统计所有的陈述。</font><font style="vertical-align: inherit;">但是，如果特殊行占执行语句的很大比例，则可能需要增加汇总表大小
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size"><code class="literal">performance_schema_digests_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="statement-digests-memory-use"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要记忆使用</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于生成仅在最后才会有所不同的非常长的语句的应用程序，增加
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以计算区分不同语句的摘要，否则这些语句会汇总为相同的摘要。</font><font style="vertical-align: inherit;">相反，递减
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会导致服务器投入较少的内存来消化存储，但会增加聚合到相同摘要的较长语句的可能性。</font><font style="vertical-align: inherit;">管理员应该记住，较大的值会导致相应增加的内存需求，尤其是对于涉及大量同时会话（服务器</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个会话</font><font style="vertical-align: inherit;">分配</font><font style="vertical-align: inherit;">字节数）的</font><font style="vertical-align: inherit;">工作负载
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如前所述，解析器计算的规范化语句摘要被限制为最大
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节数，而存储在性能模式中的规范化语句摘要则使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字节。</font><font style="vertical-align: inherit;">下面的内存使用事项适用于相关的相对值
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                除性能模式以外的服务器组件使用占用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                字节的</font><font style="vertical-align: inherit;">标准化语句摘要
                 </font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                性能模式不会进一步截断它存储的规范化语句摘要，但会分配比</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个摘要的字节</font><font style="vertical-align: inherit;">更多的内存
                 </font><font style="vertical-align: inherit;">，这是不必要的。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                除性能模式以外的服务器组件使用占用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                字节的</font><font style="vertical-align: inherit;">标准化语句摘要
                 </font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                性能模式不会进一步截断它存储的规范化语句摘要，并分配与</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个摘要字节</font><font style="vertical-align: inherit;">相同数量的内存
                 </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大于
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                除性能模式以外的服务器组件使用占用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                字节的</font><font style="vertical-align: inherit;">标准化语句摘要
                 </font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                性能模式进一步截断它存储的规范化语句摘要，并分配比</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个摘要字节</font><font style="vertical-align: inherit;">更少的内存
                 </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        由于性能模式语句事件表可能会存储许多摘要，所以设置得
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        小于</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        管理员可以平衡这些因素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            需要在性能模式之外为服务器组件提供长规格化的语句摘要
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            许多并发会话，每个会话都分配摘要计算内存
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在存储许多语句摘要时，需要通过Performance Schema语句事件表来限制内存消耗
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要评估用于SQL语句存储和摘要计算的内存量，请使用该
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-engine" title="13.7.5.15 SHOW ENGINE语法"><code class="literal">SHOW ENGINE
        PERFORMANCE_SCHEMA STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句或监视这些工具：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NAME FROM setup_instruments</code></strong>
       <strong class="userinput"><code>WHERE NAME LIKE '%.sqltext';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">内存/ performance_schema / events_statements_history.sqltext |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">内存/ performance_schema / events_statements_current.sqltext |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory / performance_schema / events_statements_history_long.sqltext |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NAME FROM setup_instruments</code></strong>
       <strong class="userinput"><code>WHERE NAME LIKE 'memory/performance_schema/%.tokens';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">内存/ performance_schema / events_statements_history.tokens |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">内存/ performance_schema / events_statements_current.tokens |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">内存/ performance_schema / events_statements_summary_by_digest.tokens |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">内存/ performance_schema / events_statements_history_long.tokens |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------------- +</font></font><font></font>
</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-table-characteristics"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.10性能模式一般表特征</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font><font style="vertical-align: inherit;">
      的名称</font><font style="vertical-align: inherit;">是小写字母，其中的表格名称也是小写字母。</font><font style="vertical-align: inherit;">查询应以小写字母指定名称。
    </font></font></p><a class="indexterm" name="idm140527973554896"></a><a class="indexterm" name="idm140527973553392"></a><p><font style="vertical-align: inherit;"></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库中的</font><font style="vertical-align: inherit;">
      许多表</font><font style="vertical-align: inherit;">是只读的，不能修改：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>TRUNCATE TABLE setup_instruments;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1683（HY000）：无效的performance_schema用法。</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      某些设置表中的列可以修改以影响性能模式操作; </font><font style="vertical-align: inherit;">有些还允许插入或删除行。</font><font style="vertical-align: inherit;">允许截断清除收集的事件，因此</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于包含这些类型信息的表格，例如以前缀名称命名的表格</font></font><code class="literal">events_waits_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      汇总表可以被截断</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE
      TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通常，效果是将摘要列重置为0或</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不删除行。</font><font style="vertical-align: inherit;">这使您可以清除收集的值并重新启动聚合。</font><font style="vertical-align: inherit;">例如，在做出运行时配置更改后，这可能很有用。</font><font style="vertical-align: inherit;">此截断行为的例外情况在个别摘要表部分中注明。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      特权与其他数据库和表一样：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要从</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中</font><font style="vertical-align: inherit;">检索</font><font style="vertical-align: inherit;">，您必须具有该</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_select"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          特权。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要更改那些可以修改的列，您必须拥有该</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_update"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要截断可被截断的表，您必须具有该
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_drop"><code class="literal">DROP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由于对性能架构表只应用了一组有限的特权，因此尝试将</font></font><code class="literal">GRANT ALL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其用作授予数据库或表leval权限的简写时会失败，并显示以下错误：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>GRANT ALL ON performance_schema.*</code></strong>
       <strong class="userinput"><code>TO 'u1'@'localhost';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1044（42000）：拒绝访问用户'root'@'localhost'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
到数据库'performance_schema'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>GRANT ALL ON performance_schema.setup_instruments</code></strong>
       <strong class="userinput"><code>TO 'u2'@'localhost';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1044（42000）：拒绝访问用户'root'@'localhost'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
到数据库'performance_schema'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      相反，请准确授予所需的权限：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>GRANT SELECT ON performance_schema.*</code></strong>
       <strong class="userinput"><code>TO 'u1'@'localhost';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.03秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>GRANT SELECT, UPDATE ON performance_schema.setup_instruments</code></strong>
       <strong class="userinput"><code>TO 'u2'@'localhost';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.02秒）</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-table-descriptions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11性能模式表说明</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-table-index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.1性能模式表索引</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-setup-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2性能架构设置表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instance-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3性能模式实例表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-wait-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4性能模式等待事件表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-stage-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5性能模式阶段事件表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6性能架构语句事件表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-transaction-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7性能模式事务表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8性能模式连接表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-attribute-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.9性能架构连接属性表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-user-variable-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.10性能模式用户变量表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-replication-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11性能模式复制表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-lock-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.12性能模式锁定表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.13性能模式系统变量表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.14性能模式状态变量表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15性能模式摘要表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-miscellaneous-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16性能架构杂项表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库中的</font><font style="vertical-align: inherit;">
      表格</font><font style="vertical-align: inherit;">可以按如下方式分组：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          设置表。</font><font style="vertical-align: inherit;">这些表格用于配置和显示监控特性。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          时事表。</font><font style="vertical-align: inherit;">该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含每个线程的最新事件。</font><font style="vertical-align: inherit;">其他类似的表格包含不同级别的事件层次结构中的当前事件：</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于舞台事件，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于语句事件和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于事务事件。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          历史表。</font><font style="vertical-align: inherit;">这些表具有与当前事件表相同的结构，但包含更多行。</font><font style="vertical-align: inherit;">例如，对于等待事件，</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格包含每个线程最近的10个事件。
          </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含最近的10,000个事件。</font><font style="vertical-align: inherit;">其他类似的表存在阶段，陈述和交易历史。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要更改历史记录表的大小，请在服务器启动时设置相应的系统变量。</font><font style="vertical-align: inherit;">例如，要设置等待事件历史记录表的大小，请设置
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_size"><code class="literal">performance_schema_events_waits_history_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_long_size"><code class="literal">performance_schema_events_waits_history_long_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          汇总表。</font><font style="vertical-align: inherit;">这些表格包含聚集在各组事件上的信息，包括从历史记录表格中丢弃的信息。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          实例表。</font><font style="vertical-align: inherit;">这些表格记录了什么类型的对象被检测。</font><font style="vertical-align: inherit;">检测对象在被服务器使用时产生事件。</font><font style="vertical-align: inherit;">这些表格提供事件名称和解释性说明或状态信息。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          杂项表。</font><font style="vertical-align: inherit;">这些不属于任何其他表组。
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-table-index"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.1性能模式表索引</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        下表列出了每个性能模式表，并提供了每个性能模式表的简要说明。
</font></font></p>
<div class="table">
<a name="performance-schema-tables-table"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表25.1性能架构表</font></font></b></p>
<div class="table-contents">
<table summary="Performance Schema tables and what information they contain."><colgroup><col width="55%"><col width="45%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表名称</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个客户帐户的连接统计</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#cond-instances-table" title="25.11.3.1 cond_instances表"><code class="literal">cond_instances</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同步对象实例</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前的赛事</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程的最近阶段事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近的整个舞台事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_account_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个帐户和事件名称分阶段事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_host_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个主机名和事件名称分级事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_thread_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台等待每个线程和事件名称</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_user_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个用户名和事件名称分阶段事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_global_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台等待每个事件名称</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前声明事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程的最新语句事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近的声明事件整体</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_account_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个帐户和事件名称的声明事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个模式和摘要值的语句事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_host_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个主机名和事件名称的语句事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_program</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个存储程序的语句事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_thread_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程和事件名称的语句事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_user_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个用户名和事件名称的语句事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_global_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个事件名称的语句事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前交易事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程的最新事务事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总体上最近的交易事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_account_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个帐户和事件名称的交易事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_host_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个主机名和事件名称的事务事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_thread_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程和事件名称的事务事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_user_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个用户名和事件名称的事务事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_global_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个事件名称的事务事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前的等待事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程的最新等待事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总体上最近的等待事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_account_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待每个帐户和事件名称的事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_host_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个主机名和事件名称等待事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_by_instance</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个实例等待事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_by_thread_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程和事件名称等待事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_user_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待每个用户名和事件名称的事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_global_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个事件名称等待事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件实例</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个事件名称的文件事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_instance</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个文件实例的文件事件</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">global_status</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局状态变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">global_variables</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局系统变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自内部主机缓存的信息</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个客户端主机名的连接统计</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_account_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个帐户和事件名称的内存操作</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_host_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个主机和事件名称的内存操作</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_thread_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程和事件名称的内存操作</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_user_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个用户的内存操作和事件名称</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个事件名称的全局内存操作</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据锁定和锁定请求</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">互斥锁同步对象实例</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#objects-summary-global-by-type-table" title="25.11.15.5对象等待汇总表"><code class="literal">objects_summary_global_by_type</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象摘要</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哪些事件计时器可用</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">准备好的语句实例和统计信息</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-configuration-table" title="25.11.11.3 replication_applier_configuration表"><code class="literal">replication_applier_configuration</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从站上的事务处理器的配置参数</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-table" title="25.11.11.4 replication_applier_status表"><code class="literal">replication_applier_status</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从站上的事务处理器的当前状态</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL或协调器线程应用程序状态</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table" title="25.11.11.6 replication_applier_status_by_worker表"><code class="literal">replication_applier_status_by_worker</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作线程应用程序状态（空，除非从属线程是多线程的）</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于连接到主设备的配置参数</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与主站连接的当前状态</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">锁定同步对象实例</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-account-connect-attrs-table" title="25.11.9.1 session_account_connect_attrs表"><code class="literal">session_account_connect_attrs</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个当前会话的连接属性</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-connect-attrs-table" title="25.11.9.2 session_connect_attrs表"><code class="literal">session_connect_attrs</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有会话的连接属性</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前会话的状态变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前会话的系统变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何初始化新前台线程的监视</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以存储事件信息的消费者</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以收集事件的仪器化对象类</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该监视哪些对象</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前事件计时器</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">活动连接实例</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_event_name</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">套接字等待和每个事件名称的I / O</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_instance</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">套接字等待和每个实例的I / O</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_account</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个帐户的会话状态变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_host</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个主机名称的会话状态变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">status_by_thread</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个会话的会话状态变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_user</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个用户名的会话状态变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表锁和锁请求</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-index-usage-table" title="25.11.15.7.2 table_io_waits_summary_by_index_usage表"><code class="literal">table_io_waits_summary_by_index_usage</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表I / O等待每个索引</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表I / O每个表等待</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-lock-waits-summary-by-table-table" title="25.11.15.7.3 table_lock_waits_summary_by_table表"><code class="literal">table_lock_waits_summary_by_table</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表锁等待每桌</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关服务器线程的信息</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-user-variable-tables" title="25.11.10性能模式用户变量表"><code class="literal">user_variables_by_thread</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程用户定义的变量</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个客户端用户名的连接统计</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">variables_by_thread</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话系统变量每个会话</font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-setup-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2性能架构设置表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.1 setup_actors表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.2 setup_consumers表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.3 setup_instruments表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.4 setup_objects表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.5 setup_timers表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        安装表提供有关当前仪器的信息，并可以更改监控配置。</font><font style="vertical-align: inherit;">由于这个原因，如果你有这些表格，这些表格中的一些列可以被改变</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_update"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        权限</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用表格而不是单个变量作为设置信息可以在修改性能模式配置时提供高度的灵活性。</font><font style="vertical-align: inherit;">例如，您可以使用具有标准SQL语法的单个语句来同时进行多个配置更改。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些设置表可用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如何初始化新前台线程的监视
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：可以发送和存储事件信息的目的地
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：可以收集事件的检测对象的类
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：应该监视哪些对象
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当前事件计时器
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="setup-actors-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.1 setup_actors表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527973193520"></a><a class="indexterm" name="idm140527973192032"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含的信息决定是否为新的前台服务器线程（与客户端连接关联的线程）启用监视和历史事件日志记录。</font><font style="vertical-align: inherit;">此表的默认最大大小为100行。</font><font style="vertical-align: inherit;">要更改表格大小，请修改
          </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_actors_size"><code class="literal">performance_schema_setup_actors_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          在服务器启动时</font><font style="vertical-align: inherit;">系统变量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于每个新的前台线程，性能架构都将该线程的用户和主机与</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中的行进行匹配
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果该表中的行匹配，</font><font style="vertical-align: inherit;">则使用</font><font style="vertical-align: inherit;">其</font><font style="vertical-align: inherit;">值</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列值分别设置</font><font style="vertical-align: inherit;">线程</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">表行的</font><font style="vertical-align: inherit;">列</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这使得仪表和历史事件记录可以按照主机，用户或帐户（用户和主机组合）有选择地应用。</font><font style="vertical-align: inherit;">如果不匹配，
           </font><font style="vertical-align: inherit;">
          则线程的列</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列将被设置为</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于后台线程，没有关联的用户。
          </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认和
          </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有意见。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          The的初始内容
          </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">与任何用户和主机组合匹配，因此所有前台线程都默认启用监视和历史事件收集：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_actors;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HOST | </font><font style="vertical-align: inherit;">USER | </font><font style="vertical-align: inherit;">ROLE | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">历史|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关如何使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表影响事件监视的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-thread-filtering" title="25.4.6通过线程预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.6节“按线程预过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表的</font><font style="vertical-align: inherit;">修改</font><font style="vertical-align: inherit;">仅影响修改后创建的前台线程，不影响现有线程。</font><font style="vertical-align: inherit;">要影响现有线程，请修改</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
          </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格行</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">HOST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主机名称。</font><font style="vertical-align: inherit;">这应该是一个字面的名字，或者
               </font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意思是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何主机。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span>
            </p></li><li class="listitem"><p>
              <code class="literal">USER</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用户名。</font><font style="vertical-align: inherit;">这应该是一个字面的名字，或者
               </font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是指</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何用户。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span>
            </p></li><li class="listitem"><p>
              <code class="literal">ROLE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              没用过。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ENABLED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是否为由行匹配的前景线程启用检测。</font><font style="vertical-align: inherit;">值是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">HISTORY</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是否记录与该行匹配的前台线程的历史事件。</font><font style="vertical-align: inherit;">值是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">桌子。</font><font style="vertical-align: inherit;">它删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="setup-consumers-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.2 setup_consumers表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527973143440"></a><a class="indexterm" name="idm140527973141984"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了可以存储和启用事件信息的消费者类型：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">global_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">thread_instrumentation | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement_digest | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          的消费者设置
           </font><font style="vertical-align: inherit;">形成了从较高层到较低层的层次结构。</font><font style="vertical-align: inherit;">有关启用不同用户的效果的详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-consumer-filtering" title="25.4.7消费者预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.7节“用户预过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格的</font><font style="vertical-align: inherit;">修改
           </font><font style="vertical-align: inherit;">会立即影响监控。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              消费者的名字。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ENABLED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              消费者是否启用。</font><font style="vertical-align: inherit;">值是
               </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该列可以修改。</font><font style="vertical-align: inherit;">如果禁用使用者，服务器不会花时间向其添加事件信息。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="setup-instruments-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.3 setup_instruments表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527973120432"></a><a class="indexterm" name="idm140527973118976"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了可以收集事件的检测对象的类别：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / end | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /执行| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / init | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / insert | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / load | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / grant | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/ sql / check | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/ sql / flush | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_read_lock | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_global_system_variables | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_lock_db | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / mutex / sql / LOCK_manager | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOCK_grant | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOGGER :: LOCK_logger | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / synch / rwlock / sql / LOCK_sys_init_connect | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/同步/ rwlock / sql / LOCK_sys_init_slave | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待/ io / file / sql / binlog | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / binlog_index | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / casetest | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / sql / dbopt | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          添加到源代码中的每个工具都为该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">提供了一行</font><font style="vertical-align: inherit;">，即使未执行检测代码也是如此。</font><font style="vertical-align: inherit;">当仪器启用并执行时，将创建仪器实例，这些实例在</font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_instances</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格</font><font style="vertical-align: inherit;">中可见
           </font><font style="vertical-align: inherit;">，如</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          大部分修改
          </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行的</font><font style="vertical-align: inherit;">会立即影响监控。</font><font style="vertical-align: inherit;">对于某些仪器，修改仅在服务器启动时有效; </font><font style="vertical-align: inherit;">在运行时更改它们不起作用。</font><font style="vertical-align: inherit;">这主要影响服务器中的互斥锁，条件和rwlocks，尽管可能有其他工具确实如此。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格在事件过滤中</font><font style="vertical-align: inherit;">的作用的更多信息
           </font><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering" title="25.4.3事件预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.3节“事件过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器名称。</font><font style="vertical-align: inherit;">仪器名称可能有多个部分并形成一个层次结构，如
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能模式仪器命名约定”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">从仪器执行产生的事件具有
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从仪器</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值中</font><font style="vertical-align: inherit;">取得的</font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">（事件并不真正具有</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”，</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是这提供了将事件与仪器相关联的方式。）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ENABLED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器是否启用。</font><font style="vertical-align: inherit;">值是
               </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">禁用的乐器不会产生任何事件。</font><font style="vertical-align: inherit;">此栏可以修改，但设置</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对已经创建的乐器没有影响。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器是否计时。</font><font style="vertical-align: inherit;">值是
               </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此栏可以修改，但设置
               </font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对已经创建的乐器没有影响。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于内存仪器，</font><font style="vertical-align: inherit;">
              由于内存操作没有定时</font><font style="vertical-align: inherit;">，因此</font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列入</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被忽略。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果启用的仪器未定时，则仪器代码已启用，但定时器不启用。</font><font style="vertical-align: inherit;">由仪器产生的事件具有</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计时器值。</font><font style="vertical-align: inherit;">当计算汇总表中的总和，最小值，最大值和平均时间值时，这又会导致这些值被忽略。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="setup-objects-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.4 setup_objects表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527973075520"></a><a class="indexterm" name="idm140527973074032"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表控制性能架构是否监视特定对象。</font><font style="vertical-align: inherit;">此表的默认最大大小为100行。</font><font style="vertical-align: inherit;">要更改表格大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_objects_size"><code class="literal">performance_schema_setup_objects_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">修改
           </font><font style="vertical-align: inherit;">系统变量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          最初的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          内容如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_objects;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + -------------------- + ------------- + --------- ------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">OBJECT_TYPE | </font><font style="vertical-align: inherit;">OBJECT_SCHEMA | </font><font style="vertical-align: inherit;">OBJECT_NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + -------------------- + ------------- + --------- ------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">功能| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">程序| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">mysql | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">information_schema | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TRIGGER | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + -------------------- + ------------- + --------- ------- + +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格的</font><font style="vertical-align: inherit;">修改
           </font><font style="vertical-align: inherit;">会立即影响对象监视。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于列出的对象类型
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，性能模式使用该表来监视它们。</font><font style="vertical-align: inherit;">对象匹配基于</font></font><code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">没有匹配的对象不受监视。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          缺省对象配置的效果是仪器除了那些在所有的表
           </font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论内容如何，​​数据库中的</font><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">都不会被检测到
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;该行</font></font><code class="literal">information_schema.%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅</font><font style="vertical-align: inherit;">用于
           </font><font style="vertical-align: inherit;">使该默认值显式化。）
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当性能模式检查匹配时
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它会首先尝试查找更多特定的匹配项。</font><font style="vertical-align: inherit;">例如，有一张桌子
           </font></font><code class="literal">db1.t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它会寻找一个匹配
           </font></font><code class="literal">'db1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'t1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后
           </font></font><code class="literal">'db1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后
           </font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的顺序匹配发生很重要，因为不同的匹配
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的行可以有不同的</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以使用</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_insert"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_delete"><code class="literal">DELETE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权将</font><font style="vertical-align: inherit;">
          行插入或删除
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于现有行，只有</font><font style="vertical-align: inherit;">具有</font><font style="vertical-align: inherit;">该表特权</font><font style="vertical-align: inherit;">的用户才能修改</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_update"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格在事件过滤中</font><font style="vertical-align: inherit;">的作用的更多信息
           </font><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering" title="25.4.3事件预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.3节“事件过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">OBJECT_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器的类型。</font><font style="vertical-align: inherit;">该值是
               </font></font><code class="literal">'EVENT'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Event Scheduler事件），
               </font></font><code class="literal">'FUNCTION'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（存储函数），
               </font></font><code class="literal">'PROCEDURE'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（存储过程），
               </font></font><code class="literal">'TABLE'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（基本表）或
               </font></font><code class="literal">'TRIGGER'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（触发器）之一。
            </font></font></p><p>
              <code class="literal">TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过滤会影响表I / O事件（</font></font><code class="literal">wait/io/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器）和表锁定事件（</font></font><code class="literal">wait/lock/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_SCHEMA</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含该对象的模式。</font><font style="vertical-align: inherit;">这应该是一个字面名称，或</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意思是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何模式。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span>
            </p></li><li class="listitem"><p>
              <code class="literal">OBJECT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              检测对象的名称。</font><font style="vertical-align: inherit;">这应该是一个字面的名字，或者</font></font><code class="literal">'%'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意思是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何对象。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span>
            </p></li><li class="listitem"><p>
              <code class="literal">ENABLED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是否对该对象的事件进行检测。</font><font style="vertical-align: inherit;">值是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该列可以修改。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该对象的事件是否定时。</font><font style="vertical-align: inherit;">值是
               </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该列可以修改。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">桌子。</font><font style="vertical-align: inherit;">它删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="setup-timers-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.2.5 setup_timers表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527973006848"></a><a class="indexterm" name="idm140527973005360"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表显示当前选定的事件定时器：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_timers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">闲置| </font><font style="vertical-align: inherit;">MICROSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待| </font><font style="vertical-align: inherit;">CYCLE |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">阶段| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">交易| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- ------------- + +</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            从MySQL 5.7.21起，性能模式
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表已被弃用，并且在MySQL 8.0中被删除，就像</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的
             </font></font><code class="literal">TICKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行一样
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">setup_timers.TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值可以更改为选择不同的计时器。</font><font style="vertical-align: inherit;">该值可以是</font></font><code class="literal">performance_timers.TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中的任何值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关事件时序如何发生的解释，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件时序”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格的</font><font style="vertical-align: inherit;">修改</font><font style="vertical-align: inherit;">会立即影响监控。</font><font style="vertical-align: inherit;">正在进行的事件可能会在开始时间使用原始计时器，在结束时间使用新计时器。</font><font style="vertical-align: inherit;">要在更改计时器后避免不可预知的结果，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置性能模式统计信息。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              定时器用于的仪器类型。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              适用于仪器类型的计时器。</font><font style="vertical-align: inherit;">该列可以修改。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-instance-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3性能模式实例表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#cond-instances-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.1 cond_instances表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.2 file_instances表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.3 mutex_instances表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.4 rwlock_instances表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.5 socket_instances表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        实例表文档记录了什么类型的对象。</font><font style="vertical-align: inherit;">他们提供活动名称和解释性说明或状态信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#cond-instances-table" title="25.11.3.1 cond_instances表"><code class="literal">cond_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：条件同步对象实例
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：文件实例
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：互斥体同步对象实例
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：锁定同步对象实例
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：活动连接实例
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些表列出了检测到的同步对象，文件和连接。</font><font style="vertical-align: inherit;">有三种类型的同步对象：</font></font><code class="literal">cond</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">mutex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个实例表都有一个
         </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或一</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列来指示与每一行相关的仪器。</font><font style="vertical-align: inherit;">仪器名称可能有多个部分并形成一个层次结构，如</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能模式仪器命名约定”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><code class="literal">mutex_instances.LOCKED_BY_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
         </font></font><code class="literal">rwlock_instances.WRITE_LOCKED_BY_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列调查性能瓶颈或死锁非常重要的。</font><font style="vertical-align: inherit;">有关如何将其用于此目的的示例，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-examples" title="25.18使用性能模式诊断问题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.18节“使用性能模式诊断问题”</font></font></a>
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="cond-instances-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.1 cond_instances表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527972960064"></a><a class="indexterm" name="idm140527972958608"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#cond-instances-table" title="25.11.3.1 cond_instances表"><code class="literal">cond_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了执行服务器时由性能模式看到的所有条件。</font><font style="vertical-align: inherit;">条件是代码中使用的同步机制来表示发生了特定事件，以便等待此条件的线程可以恢复工作。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当一个线程正在等待某些事情发生时，条件名称是线程正在等待什么的指示，但是没有直接的方法来告诉哪个或哪些其他线程会导致条件发生。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#cond-instances-table" title="25.11.3.1 cond_instances表"><code class="literal">cond_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与条件相关的仪器名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪表状态的记忆中的地址。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#cond-instances-table" title="25.11.3.1 cond_instances表"><code class="literal">cond_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="file-instances-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.2 file_instances表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972944432"></a><a class="indexterm" name="idm140527972942976"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了执行文件I / O检测时由性能模式看到的所有文件。</font><font style="vertical-align: inherit;">如果磁盘上的文件从未打开过，它将不会处于打开状态
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">从磁盘删除文件时，它也从</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">删除
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">FILE_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              文件名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">EVENT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与文件关联的仪器名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OPEN_COUNT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              文件上打开的句柄的计数。</font><font style="vertical-align: inherit;">如果文件已打开然后关闭，则打开文件1次，但
               </font></font><code class="literal">OPEN_COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将为0.要列出服务器当前打开的所有文件，请使用</font></font><code class="literal">WHERE
              OPEN_COUNT &gt; 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-instances-table" title="25.11.3.2 file_instances表"><code class="literal">file_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mutex-instances-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.3 mutex_instances表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972923584"></a><a class="indexterm" name="idm140527972922128"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了执行服务器时由性能模式看到的所有互斥锁。</font><font style="vertical-align: inherit;">互斥锁是代码中使用的同步机制，用于强制在给定时间只有一个线程可以访问某些公共资源。</font><font style="vertical-align: inherit;">据说资源被</font><font style="vertical-align: inherit;">互斥体</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保护</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当两个在服务器上执行的线程（例如，两个用户会话同时执行一个查询）确实需要访问相同的资源（文件，缓冲区或一些数据）时，这两个线程将相互竞争，第一个在互斥锁上获取锁的查询将导致另一个查询等待，直到第一个查询完成并解锁互斥锁。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          据说，持有互斥锁的工作被称为
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键部分</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”，</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且多个查询确实以序列化的方式执行该关键部分（一次一个），这是一个潜在的瓶颈。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与互斥锁关联的仪器名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器化互斥体的内存地址。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOCKED_BY_THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当一个线程目前已锁定的互斥体，
               </font></font><code class="literal">LOCKED_BY_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">锁定的线程，否则</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于代码中检测到的每个互斥锁，性能架构都会提供以下信息。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出了检测点的名称和前缀</font></font><code class="literal">wait/synch/mutex/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当某些代码创建互斥锁时，会将一行添加到
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中。</font><font style="vertical-align: inherit;">该
               </font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列是唯一标识互斥体的属性。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当一个线程试图锁定一个互斥锁时，该
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表显示该线程的一行，表示它正在等待一个互斥锁（在该</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中），并指示等待哪个互斥锁（在该
               </font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当线程成功锁定互斥锁时：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  显示互斥量的等待已完成（在
                   </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中）
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  完成的等待事件被添加到
                   </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  表中
                </font></font></p></li><li class="listitem"><p>
                  <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示互斥体现在由线程拥有（在
                   </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中）。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当一个线程解锁一个互斥锁时，
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示该互斥锁现在没有所有者（该
               </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当一个互斥对象被销毁时，相应的行被从中删除</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过对以下两个表执行查询，监控应用程序或DBA可以检测涉及互斥体的线程之间的瓶颈或死锁：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，看看线程正在等待什么互斥体
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#mutex-instances-table" title="25.11.3.3 mutex_instances表"><code class="literal">mutex_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，看看哪个线程当前拥有一个互斥锁
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="rwlock-instances-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.4 rwlock_instances表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972869920"></a><a class="indexterm" name="idm140527972868464"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表列出</font><font style="vertical-align: inherit;">了执行服务器时由性能模式看到的</font><font style="vertical-align: inherit;">所有</font></font><a class="link" href="/mysql-5.7-google-zh/glossary.html#glos_rw_lock" title="RW-锁"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rwlock</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（读写锁定）实例。</font><font style="vertical-align: inherit;">An </font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是代码中使用的一种同步机制，用于强制在给定时间线程可以访问某些通用资源，遵循特定规则。</font><font style="vertical-align: inherit;">据说资源被
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保护</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了</font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">访问是共享的（许多线程可以同时具有读锁），独占（在给定时间只有一个线程可以具有写锁）或共享独占（线程可以具有写锁而允许不一致由其他线程读取）。</font><font style="vertical-align: inherit;">共享独占访问被称为an
           </font></font><code class="literal">sxlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并优化并发性并提高读写工作负载的可伸缩性。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据请求锁的线程数以及请求的锁的性质，可以在共享模式，独占模式，共享独占模式下授予访问权限，或者根本不授予访问权限，等待其他线程先完成。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与锁相关的仪器名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪表锁内存中的地址。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">WRITE_LOCKED_BY_THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当一个线程当前</font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在独占（写入）模式下</font></font><code class="literal">WRITE_LOCKED_BY_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">锁定时</font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">是
               </font><font style="vertical-align: inherit;">锁定线程的，否则它是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">READ_LOCKED_BY_COUNT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当一个线程当前有一个</font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              被锁定在共享（读）模式时，
               </font></font><code class="literal">READ_LOCKED_BY_COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会增加1.这仅仅是一个计数器，所以它不能直接用来找出哪个线程持有读锁，但可以用它来查看是否存在读一个争论
               </font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并看看有多少读者目前活跃。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过对以下两个表执行查询，监视应用程序或DBA可能会检测到涉及锁的线程之间的一些瓶颈或死锁：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，看看</font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程正在等待
             </font><font style="vertical-align: inherit;">什么</font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，看看当前拥有哪个其他线程
              </font></font><code class="literal">rwlock</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有一个限制：
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#rwlock-instances-table" title="25.11.3.4 rwlock_instances表"><code class="literal">rwlock_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只能用来标识持有写锁的线程，而不能用于持有读锁的线程。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="socket-instances-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.3.5 socket_instances表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972832816"></a><a class="indexterm" name="idm140527972831360"></a><a class="indexterm" name="idm140527972829872"></a><a class="indexterm" name="idm140527972828800"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表提供了到MySQL服务器的活动连接的实时快照。</font><font style="vertical-align: inherit;">该表包含每个TCP / IP或Unix套接字文件连接的一行。</font><font style="vertical-align: inherit;">此表中提供的信息提供了到服务器的活动连接的实时快照。</font><font style="vertical-align: inherit;">（其他信息在套接字汇总表中提供，包括网络活动，如套接字操作和传输和接收的字节数;请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.8节“套接字汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM socket_instances\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           EVENT_NAME：wait / io / socket / sql / server_unix_socket</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_INSTANCE_BEGIN：4316619408</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            THREAD_ID：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            SOCKET_ID：16</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                   IP：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 PORT：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                状态：激活</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 2. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           EVENT_NAME：wait / io / socket / sql / client_connection</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_INSTANCE_BEGIN：4316644608</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            THREAD_ID：21</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            SOCKET_ID：39</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                   IP：127.0.0.1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 端口：55233</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                状态：激活</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 3. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           EVENT_NAME：wait / io / socket / sql / server_tcpip_socket</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_INSTANCE_BEGIN：4316699040</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            THREAD_ID：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            SOCKET_ID：14</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                   IP：0.0.0.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 PORT：50603</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                状态：激活</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          插座仪器具有这种形式的名称，
           </font><font style="vertical-align: inherit;">
          并且是这样使用的：
</font></font><code class="literal">wait/io/socket/sql/<em class="replaceable"><code>socket_type</code></em></code><font style="vertical-align: inherit;"></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              服务器为其支持的每个网络协议都有一个监听套接字。</font><font style="vertical-align: inherit;">与用于TCP / IP或Unix套接字文件连接的侦听套接字相关的工具</font><font style="vertical-align: inherit;">分别</font><font style="vertical-align: inherit;">具有</font></font><em class="replaceable"><code>socket_type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              值</font></font><code class="literal">server_tcpip_socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or或
               </font></font><code class="literal">server_unix_socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当侦听套接字检测到连接时，服务器将连接传输到由单独线程管理的新套接字。</font><font style="vertical-align: inherit;">新连接线程的仪器的</font></font><em class="replaceable"><code>socket_type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为</font></font><code class="literal">client_connection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当连接终止时，</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与其相对应</font><font style="vertical-align: inherit;">的行将
               </font><font style="vertical-align: inherit;">被删除。
</font></font></p></li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">EVENT_NAME</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">wait/io/socket/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生该事件</font><font style="vertical-align: inherit;">
              的</font><font style="vertical-align: inherit;">乐器</font><font style="vertical-align: inherit;">的名称</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">的
               </font><font style="vertical-align: inherit;">值
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">仪器名称可能有多个部分并形成一个层次结构，如
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能模式仪器命名约定”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该列唯一标识套接字。</font><font style="vertical-align: inherit;">该值是内存中对象的地址。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由服务器分配的内部线程标识符。</font><font style="vertical-align: inherit;">每个套接字由单个线程管理，因此每个套接字可映射到可映射到服务器进程的线程。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SOCKET_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              分配给套接字的内部文件句柄。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">IP</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              客户端IP地址。</font><font style="vertical-align: inherit;">该值可以是IPv4或IPv6地址，也可以是空白以指示Unix套接字文件连接。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PORT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              TCP / IP端口号，范围从0到65535。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">STATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              套接字状态，</font></font><code class="literal">IDLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
               </font></font><code class="literal">ACTIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用相应的插座仪器跟踪活动插座的等待时间。</font><font style="vertical-align: inherit;">使用</font></font><code class="literal">idle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器</font><font style="vertical-align: inherit;">跟踪闲置插座的等待时间
               </font><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              套接字在等待来自客户端的请求时处于空闲状态。</font><font style="vertical-align: inherit;">当套接字变为空闲状态时，该行中的事件行将
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跟踪状态为</font></font><code class="literal">ACTIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font><font style="vertical-align: inherit;">的套接字开关
               </font></font><code class="literal">IDLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值保持
               </font></font><code class="literal">wait/io/socket/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但对于仪器定时被挂起。</font><font style="vertical-align: inherit;">相反，</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表中</font><font style="vertical-align: inherit;">会生成</font><font style="vertical-align: inherit;">一个</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为的事件
               </font></font><code class="literal">idle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当收到下一个请求时，
               </font></font><code class="literal">idle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件终止，套接字实例从中切换</font></font><code class="literal">IDLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
               </font></font><code class="literal">ACTIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且套接字设备的定时恢复。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><code class="literal">IP:PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列组合值标识的连接。</font><font style="vertical-align: inherit;">该组合值用于</font><font style="vertical-align: inherit;">
          表格</font><font style="vertical-align: inherit;">的</font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中
           </font><font style="vertical-align: inherit;">，以标识来自哪些套接字事件的连接：
</font></font><code class="literal">events_waits_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于Unix域监听器socket（</font></font><code class="literal">server_unix_socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），端口为0，IP为</font></font><code class="literal">''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于通过Unix域侦听器（</font></font><code class="literal">client_connection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">客户端连接</font><font style="vertical-align: inherit;">，端口为0，IP为</font></font><code class="literal">''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于TCP / IP服务器侦听器套接字（</font></font><code class="literal">server_tcpip_socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），端口始终是主端口（例如3306），并且IP始终为</font></font><code class="literal">0.0.0.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于通过TCP / IP侦听器（</font></font><code class="literal">client_connection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">客户端连接</font><font style="vertical-align: inherit;">，该端口是服务器分配的任何端口，但从不为0. IP是源主机（</font></font><code class="literal">127.0.0.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">::1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地主机）
 </font><font style="vertical-align: inherit;">的IP，</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-wait-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4性能模式等待事件表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4.1 events_waits_current表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4.2 events_waits_history表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4.3 events_waits_history_long表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式工具等待，这是需要时间的事件。</font><font style="vertical-align: inherit;">在事件层次结构中，等待事件嵌套在嵌套在事务事件中嵌套的事件事件中的事件中。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些表存储等待事件：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当前等待事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个线程最近的等待事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：全球最新的等待事件（跨所有线程）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下部分描述了等待事件表。</font><font style="vertical-align: inherit;">还有汇总关于等待事件的信息的汇总表; </font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.1节“等待事件汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="wait-event-configuration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待事件配置</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要控制等待事件的收集，请设置相关仪器和消费者的状态：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含以名称开头的工具
             </font></font><code class="literal">wait</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用这些工具启用或禁用收集等待事件。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含具有与当前和最近的等待事件表名称对应的名称的消费者值。</font><font style="vertical-align: inherit;">使用这些消费者来过滤等待事件的集合。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有些等待仪器默认启用; </font><font style="vertical-align: inherit;">其他人被禁用。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments</code></strong>
       <strong class="userinput"><code>WHERE NAME LIKE 'wait/io/file/innodb%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / innodb / innodb_data_file | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / innodb / innodb_log_file | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / file / innodb / innodb_temp_file | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments WHERE</code></strong>
       <strong class="userinput"><code>NAME LIKE 'wait/io/socket/%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -  + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -  + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / socket / sql / server_tcpip_socket | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / socket / sql / server_unix_socket | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / socket / sql / client_connection | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -  + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        等待消费者在默认情况下被禁用：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers WHERE NAME LIKE '%waits%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在服务器启动时控制等待事件收集，请在</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用以下这些行</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器=“等待/％= ON”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费活动，等待电流= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费活动，等待历史= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费活动，等待历史长= ON</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器=“等待/％= OFF”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费活动，等待电流= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费活动，等待历史= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费活动，等待历史长= OFF</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在运行时控制等待事件收集，请更新
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='YES'，TIMED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='等待/％';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME LIKE'％waits％';</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='NO'，TIMED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='等待/％';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME LIKE'％waits％';</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要仅收集特定的等待事件，请仅启用相应的等待工具。</font><font style="vertical-align: inherit;">要仅为特定等待事件表收集等待事件，请启用等待工具，但只启用与所需表对应的等待消费者。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含一行，其</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为
         </font></font><code class="literal">wait</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待事件计时的单位。</font><font style="vertical-align: inherit;">默认单位是</font></font><code class="literal">CYCLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_timers WHERE NAME = 'wait';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">等待| </font><font style="vertical-align: inherit;">CYCLE |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要更改计时单位，请修改该
         </font></font><code class="literal">TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_timers SET TIMER_NAME ='NANOSECOND'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='等待';</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关配置事件收集的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-startup-configuration" title="25.3性能模式启动配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.3节“性能架构启动配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-runtime-configuration" title="25.4性能模式运行时配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4节“性能架构运行时配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-waits-current-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4.1 events_waits_current表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527972714448"></a><a class="indexterm" name="idm140527972712944"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含当前的等待事件，每个线程显示一行，显示线程最近监视的等待事件的当前状态。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含等待事件行的表
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最基本的。</font><font style="vertical-align: inherit;">其他包含等待事件行的表从逻辑上由当前事件派生而来。</font><font style="vertical-align: inherit;">例如，
           </font><font style="vertical-align: inherit;">表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表是最近的等待事件的集合，直到固定数量的行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关等待事件收集配置的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-wait-tables" title="25.11.4性能模式等待事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.4节“性能架构等待事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与事件关联的线程和事件开始时的线程当前事件编号。</font><font style="vertical-align: inherit;">在
               </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一起唯一标识行值。</font><font style="vertical-align: inherit;">没有两行具有相同的值对。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">END_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当事件开始时</font><font style="vertical-align: inherit;">
              该列被设置为</font><font style="vertical-align: inherit;">，并且当事件结束时更新为线程当前事件编号。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">EVENT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生该事件的乐器的名称。</font><font style="vertical-align: inherit;">这是</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">仪器名称可能有多个部分并形成一个层次结构，如
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能模式仪器命名约定”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SOURCE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含产生事件的检测代码的源文件的名称以及检测发生的文件中的行号。</font><font style="vertical-align: inherit;">这使您可以检查源以确定涉及的代码。</font><font style="vertical-align: inherit;">例如，如果互斥锁或锁被阻塞，您可以检查发生这种情况的上下文。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该事件的时间信息。</font><font style="vertical-align: inherit;">这些值的单位是皮秒（十亿分之一秒）。</font><font style="vertical-align: inherit;">该
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值指示何时事件时间开始和结束。</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是事件流逝的时间（持续时间）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件尚未完成，</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              则为当前计时器值，并且
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是到目前为止所用的时间（</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件是从具有产生仪器
               </font></font><code class="literal">TIMED = NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，定时信息不是收集，并且</font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是所有
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有关皮秒作为事件时间单位和影响时间值的因素的讨论，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件计时”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SPINS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于互斥量来说，旋转轮的数量。</font><font style="vertical-align: inherit;">如果值是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则代码不使用旋转循环或不旋转旋转。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列标识对象</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在执行。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着什么取决于对象类型。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用于同步对象（</font></font><code class="literal">cond</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">mutex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">rwlock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                   </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
                   </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是内存中同步对象的地址。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于文件I / O对象：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
                   </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是文件名。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
                   </font></font><code class="literal">FILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是内存中的地址。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于套接字对象：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">IP:PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">套接字</font><font style="vertical-align: inherit;">的
                   </font><font style="vertical-align: inherit;">值。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是内存中的地址。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于表I / O对象：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是包含该表的模式的名称。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是表名。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
                   </font></font><code class="literal">TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于持久性基表或</font></font><code class="literal">TEMPORARY TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于临时表。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是内存中的地址。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一个</font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值本身没有意义，除了不同的值表示不同的对象。
              </font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用于调试。</font><font style="vertical-align: inherit;">例如，它可以用于</font></font><code class="literal">GROUP
              BY OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看1,000个互斥量（保护例如1,000个页面或数据块）的负载是否均匀分布或者只是遇到几个瓶颈。</font><font style="vertical-align: inherit;">如果您在日志文件或其他调试或性能工具中看到相同的对象地址，这可以帮助您与其他信息来源相关联。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">INDEX_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              所用索引的名称。</font></font><code class="literal">PRIMARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表示表主索引。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              意味着没有使用索引。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NESTING_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件嵌套的事件</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NESTING_EVENT_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              嵌套事件类型。</font><font style="vertical-align: inherit;">值是
               </font></font><code class="literal">TRANSACTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">STAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
               </font></font><code class="literal">WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OPERATION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该类型的操作进行的，例如
               </font></font><code class="literal">lock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">read</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
               </font></font><code class="literal">write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NUMBER_OF_BYTES</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              操作读取或写入的字节数。</font><font style="vertical-align: inherit;">对于表I / O等待（</font></font><code class="literal">wait/io/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器</font><font style="vertical-align: inherit;">事件
               </font><font style="vertical-align: inherit;">），
               </font></font><code class="literal">NUMBER_OF_BYTES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示行数。</font><font style="vertical-align: inherit;">如果该值大于1，则该事件用于批量I / O操作。</font><font style="vertical-align: inherit;">以下讨论描述了反映批处理I / O的专有单行报告和报告之间的差异。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              MySQL使用嵌套循环实现来执行连接。</font><font style="vertical-align: inherit;">性能模式检测的工作是在连接中为每个表提供行数和累计执行时间。</font><font style="vertical-align: inherit;">假设一个连接正在使用一个表连接的顺序执行以下形式的查询
               </font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ... FROM t1 JOIN t2 ON ... JOIN t3 ON ...
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扇出</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是在连接处理期间添加表的行数的增加或减少。</font><font style="vertical-align: inherit;">如果表扇出</font></font><code class="literal">t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大于1，则大部分的行取操作都是针对该表的。</font><font style="vertical-align: inherit;">假设访问加入10行从
               </font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，20行从</font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              每行从</font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并从30行
               </font></font><code class="literal">t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每表中的行
               </font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通过单行报告，仪器化操作的总数为：
            </font></font></p><pre data-lang="clike" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 +（10 * 20）+（10 * 20 * 30）= 6210
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              通过在每次扫描中汇总它们（即，来自</font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">的行的唯一组合），可以实现仪器化操作数量的显着减少
               </font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于批处理I / O报告，性能模式为最内层表的每次扫描生成一个事件，
               </font></font><code class="literal">t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是每行，并且检测到的行操作数减少为：
            </font></font></p><pre data-lang="clike" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 +（10 * 20）+（10 * 20）= 410
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这减少了93％，说明了批量报告策略如何通过减少报告调用数量显着降低表I / O的性能模式开销。</font><font style="vertical-align: inherit;">对于事件计时来说，权衡的准确性较低。</font><font style="vertical-align: inherit;">与在每行报告中进行单独行操作相比，批处理I / O的计时包括用于操作的时间，如连接缓冲，聚合和将行返回给客户端。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              要进行批量I / O报告，这些条件必须是真实的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  查询执行访问查询块的最内层表（对于单表查询，该表被视为最内层）
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  查询执行不会从表中请求单个行（因此，例如，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/optimization.html#jointype_eq_ref"><code class="literal">eq_ref</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问阻止使用批量报告）
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  查询执行不会评估包含表访问表的子查询
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
              <code class="literal">FLAGS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              保留以供将来使用。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">桌子。</font><font style="vertical-align: inherit;">它删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-waits-history-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4.2 events_waits_history表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972588688"></a><a class="indexterm" name="idm140527972587184"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程</font><font style="vertical-align: inherit;">最近的</font><font style="vertical-align: inherit;">等待事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时自动设置</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_size"><code class="literal">performance_schema_events_waits_history_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">等待事件直到它们结束才被添加到表中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.4.1节“events_waits_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关等待事件收集配置的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-wait-tables" title="25.11.4性能模式等待事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.4节“性能架构等待事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-waits-history-long-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.4.3 events_waits_history_long表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972572480"></a><a class="indexterm" name="idm140527972570976"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含最近的</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          等待事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务器启动时自动设置</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_long_size"><code class="literal">performance_schema_events_waits_history_long_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">等待事件直到它们结束才被添加到表中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。</font><font style="vertical-align: inherit;">当线程结束时，它的行将从表中移除。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.4.1节“events_waits_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关等待事件收集配置的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-wait-tables" title="25.11.4性能模式等待事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.4节“性能架构等待事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-stage-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5性能模式阶段事件表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5.1 events_stages_current表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5.2 events_stages_history表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5.3 events_stages_history_long表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式工具阶段是语句执行过程中的步骤，如解析语句，打开表格或执行
         </font></font><code class="literal">filesort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作。</font><font style="vertical-align: inherit;">阶段对应</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW
        PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">于</font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表格中</font><font style="vertical-align: inherit;">显示</font><font style="vertical-align: inherit;">或
         </font><font style="vertical-align: inherit;">显示的线程状态</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当状态值改变时，阶段开始和结束。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在事件层次结构中，等待事件嵌套在嵌套在事务事件中嵌套的事件事件中的事件中。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些表格存储舞台事件：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：现阶段活动
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个线程的最近阶段事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：全球最新的舞台活动（跨所有主题）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下部分描述舞台事件表。</font><font style="vertical-align: inherit;">也有汇总关于舞台事件的信息汇总表; </font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.2节“阶段汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="stage-event-configuration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台事件配置</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要控制舞台事件的收集，请设置相关乐器和消费者的状态：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含以名称开头的工具
             </font></font><code class="literal">stage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用这些工具启用或禁用收集舞台事件。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含使用名称与当前和最近阶段事件表名称相对应的消费者值。</font><font style="vertical-align: inherit;">使用这些消费者来过滤收集的舞台事件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        除了提供声明进度信息的乐器之外，舞台乐器默认是禁用的。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments WHERE NAME RLIKE 'stage/sql/[a-c]';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /创建|后 </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /分配本地表| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / alter table | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /提交alter table到存储引擎| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /更改master | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /检查主版本| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /检查权限| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /检查特权缓存查询| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /检查查询缓存以查询| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /清理| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /结束表| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /连接到master | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /将HEAP转换为MyISAM | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /复制到组表| | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /复制到tmp表| | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / copy到tmp table | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /创建排序索引| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /创建表| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /创建tmp表| | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- + --------- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        提供语句进度信息的舞台事件工具默认启用并定时：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments WHERE</code></strong>
       <strong class="userinput"><code>ENABLED='YES' AND NAME LIKE "stage/%";</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / copy到tmp table | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb / alter table（end）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb / alter table（flush）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb / alter table（insert）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb / alter table（日志应用索引）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb / alter table（日志应用表）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb / alter table（合并排序）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb / alter table（读取PK和内部排序）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / innodb /缓冲池加载| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- + --------- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        阶段消费者默认情况下被禁用：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers WHERE NAME LIKE '%stages%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在服务器启动时控制阶段事件收集，请在</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用类似这样的行</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器=“阶段/％= ON”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件，阶段电流= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件，阶段历史= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件，阶段历史长= ON</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器=“阶段/％= OFF”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件，阶段电流= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件，阶段历史= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件，阶段历史长= OFF</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在运行时控制阶段事件收集，请更新
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='YES'，TIMED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='stage /％';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名称如'％stages％';</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='NO'，TIMED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='stage /％';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名称如'％stages％';</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        仅收集特定的舞台事件，仅启用相应的舞台乐器。</font><font style="vertical-align: inherit;">要仅收集特定舞台事件表的舞台事件，请启用舞台乐器，但仅启用与所需表格对应的舞台使用者。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含一行，其</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为
         </font></font><code class="literal">stage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示舞台事件时间单位。</font><font style="vertical-align: inherit;">默认单位是</font></font><code class="literal">NANOSECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_timers WHERE NAME = 'stage';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">阶段| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要更改计时单位，请修改该
         </font></font><code class="literal">TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_timers SET TIMER_NAME ='MICROSECOND'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='stage';</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关配置事件收集的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-startup-configuration" title="25.3性能模式启动配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.3节“性能架构启动配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-runtime-configuration" title="25.4性能模式运行时配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4节“性能架构运行时配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="stage-event-progress"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台事件进度信息</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        Performance Schema阶段事件表包含两列，它们合起来为每一行提供阶段进度指示器：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为舞台完成的工作单位数量
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：舞台预期的工作单位数量
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        每列是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有为仪器提供进度信息。</font><font style="vertical-align: inherit;">信息的解释（如果可用）完全取决于仪器的实施。</font><font style="vertical-align: inherit;">性能架构表提供了一个容器来存储进度数据，但不对该度量本身​​的语义做任何假设：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            阿</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单位</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个整数度量执行期间随时间增加，如字节，行，文件或表处理的数量。</font><font style="vertical-align: inherit;">用于特定仪器</font><font style="vertical-align: inherit;">的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作单位</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的定义
             </font><font style="vertical-align: inherit;">留给提供数据的仪器代码。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值可以一次增加一个或多个单元，具体取决于所检测的代码。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值可能会在阶段中发生变化，具体取决于仪表代码。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        检测阶段事件进度指示器可以实现以下任何行为：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            没有进展仪器
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这是最典型的情况，没有提供进度数据。</font><font style="vertical-align: inherit;">在</font></font><code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
             </font></font><code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列都是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            无限进步仪器
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            只有</font></font><code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列是有意义的。</font><font style="vertical-align: inherit;">没有提供该</font></font><code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">数据
             </font><font style="vertical-align: inherit;">，该数据显示0。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            通过查询</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">监控会话</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">表格，监控应用程序可以报告迄今为止执行了多少工作，但无法报告该阶段是否接近完成。</font><font style="vertical-align: inherit;">目前，没有阶段如此装备。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有界的进度仪表
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在</font></font><code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
             </font></font><code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列都是有意义的。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这种类型的进度指示器适用于具有定义的完成标准的操作，例如稍后描述的表格复印工具。</font><font style="vertical-align: inherit;">通过查询该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表为监视会话，监视应用程序可以报告多少工作到目前为止已经执行，并且可以通过计算，报告为舞台的整体完成百分比，</font></font><code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/
             </font></font><code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">stage/sql/copy to tmp table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具说明了进展指标的工作方式。</font><font style="vertical-align: inherit;">在执行</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">期间
         </font><font style="vertical-align: inherit;">，使用
         </font></font><code class="literal">stage/sql/copy to tmp table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阶段，并且根据要复制的数据大小，此阶段可能会执行很长时间。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表复制任务具有已定义的终止符（复制所有行），并且</font></font><code class="literal">stage/sql/copy to tmp table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阶段被检测以提供有界的进度信息：使用的工作单元是复制的行数，
         </font></font><code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
         </font></font><code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都是有意义的，它们的比率表示任务完成百分比。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要启用仪器和相关消费者，请执行以下语句：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='stage / sql / copy to tmp table';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在哪里名称像'events_stages_％';</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要查看正在进行的</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER
        TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明</font><font style="vertical-align: inherit;">的进度，请</font><font style="vertical-align: inherit;">从</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">选择
         </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-stages-current-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5.1 events_stages_current表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527972463216"></a><a class="indexterm" name="idm140527972461712"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含当前阶段事件，每个线程一行显示线程最近监控阶段事件的当前状态。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含舞台事件行的表格
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最基本的。</font><font style="vertical-align: inherit;">其他包含舞台事件行的表格是从当前事件逻辑派生而来的。</font><font style="vertical-align: inherit;">例如，
           </font><font style="vertical-align: inherit;">表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表是最近阶段事件的集合，直到固定数量的行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关配置舞台事件集合的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-stage-tables" title="25.11.5性能模式阶段事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.5节“性能架构舞台事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与事件关联的线程和事件开始时的线程当前事件编号。</font><font style="vertical-align: inherit;">在
               </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一起唯一标识行值。</font><font style="vertical-align: inherit;">没有两行具有相同的值对。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">END_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当事件开始时</font><font style="vertical-align: inherit;">
              该列被设置为</font><font style="vertical-align: inherit;">，并且当事件结束时更新为线程当前事件编号。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">EVENT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生该事件的乐器的名称。</font><font style="vertical-align: inherit;">这是</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">仪器名称可能有多个部分并形成一个层次结构，如
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能模式仪器命名约定”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SOURCE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含产生事件的检测代码的源文件的名称以及检测发生的文件中的行号。</font><font style="vertical-align: inherit;">这使您可以检查源以确定涉及的代码。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该事件的时间信息。</font><font style="vertical-align: inherit;">这些值的单位是皮秒（十亿分之一秒）。</font><font style="vertical-align: inherit;">该
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值指示何时事件时间开始和结束。</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是事件流逝的时间（持续时间）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件尚未完成，</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              则为当前计时器值，并且
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是到目前为止所用的时间（</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件是从具有产生仪器
               </font></font><code class="literal">TIMED = NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，定时信息不是收集，并且</font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是所有
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有关皮秒作为事件时间单位和影响时间值的因素的讨论，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件计时”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">WORK_ESTIMATED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些专栏提供阶段进展信息，用于已经实施以产生这种信息的工具。</font></font><code class="literal">WORK_COMPLETED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示该舞台已完成多少个工作单位，并
               </font></font><code class="literal">WORK_ESTIMATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指出该舞台预计有多少工作单位。</font><font style="vertical-align: inherit;">有关更多信息，请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#stage-event-progress" title="舞台事件进度信息"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舞台事件进度信息</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NESTING_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件嵌套的事件</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">舞台事件的嵌套事件通常是一个声明事件。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NESTING_EVENT_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              嵌套事件类型。</font><font style="vertical-align: inherit;">值是
               </font></font><code class="literal">TRANSACTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">STAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
               </font></font><code class="literal">WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">桌子。</font><font style="vertical-align: inherit;">它删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-stages-history-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5.2 events_stages_history表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972405376"></a><a class="indexterm" name="idm140527972403872"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个线程的</font><font style="vertical-align: inherit;">最近</font><font style="vertical-align: inherit;">阶段事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时自动设置</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_size"><code class="literal">performance_schema_events_stages_history_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">舞台事件在结束之前不会添加到表格中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.5.1节“events_stages_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关配置舞台事件集合的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-stage-tables" title="25.11.5性能模式阶段事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.5节“性能架构舞台事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-stages-history-long-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.5.3 events_stages_history_long表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972389152"></a><a class="indexterm" name="idm140527972387648"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含最近的</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          舞台事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务器启动时自动设置</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_long_size"><code class="literal">performance_schema_events_stages_history_long_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">舞台事件在结束之前不会添加到表格中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。</font><font style="vertical-align: inherit;">当线程结束时，它的行将从表中移除。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.5.1节“events_stages_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关配置舞台事件集合的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-stage-tables" title="25.11.5性能模式阶段事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.5节“性能架构舞台事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-statement-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6性能架构语句事件表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.1 events_statements_current表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.2 events_statements_history表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.3 events_statements_history_long表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.4 prepared_statements_instances表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式工具语句执行。</font><font style="vertical-align: inherit;">语句事件发生在事件层次的高级别。</font><font style="vertical-align: inherit;">在事件层次结构中，等待事件嵌套在嵌套在事务事件中嵌套的事件事件中的事件中。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些表存储语句事件：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当前声明事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个线程最近的语句事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：全球最新的声明事件（跨所有线程）
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：准备好的语句实例和统计信息
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下部分描述了语句事件表。</font><font style="vertical-align: inherit;">还有汇总关于陈述事件的信息汇总表; </font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.3节“语句汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="performance-schema-statement-tables-configuration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句事件配置</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要控制陈述事件的收集，请设置相关工具和消费者的状态：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含以名称开头的工具
             </font></font><code class="literal">statement</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用这些工具来启用或禁用语句事件的收集。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含具有与当前和最近的语句事件表名称对应的名称的消费者值以及语句摘要使用者。</font><font style="vertical-align: inherit;">使用这些消费者来过滤语句事件和语句摘要的集合。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        声明工具在默认情况下启用，并且
         </font></font><code class="literal">events_statements_current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">events_statements_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">statements_digest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句消费者是默认启用的：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments WHERE NAME LIKE 'statement/%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- + --- ------ + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- + --- ------ + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / select | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / create_table | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sql / create_index | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / sp / stmt | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/ sp / set | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明/ sp / set_trigger_field | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/调度程序/事件| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明/ com /睡眠| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明/ com / Quit | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / com / Init DB | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">语句/摘要/查询| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / abstract / new_packet | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement / abstract / relay_log | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- + --- ------ + ------- +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers WHERE NAME LIKE '%statements%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_current | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">statement_digest | </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在服务器启动时控制语句事件收集，请在</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用以下这些行</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的仪器=“语句/％= ON”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件陈述电流= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件陈述历史= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件陈述历史长= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费报表消化= ON</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的仪器=“语句/％= OFF”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件陈述电流= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件陈述历史= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构消费者的事件陈述历史长= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费报表消化= OFF</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在运行时控制语句事件收集，请更新
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='YES'，TIMED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME LIKE'statement /％';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名称如'％statements％';</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='NO'，TIMED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME LIKE'statement /％';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名称如'％statements％';</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        仅收集特定的报表事件，只启用相应的报表工具。</font><font style="vertical-align: inherit;">要仅为特定语句事件表收集语句事件，请启用语句工具，但仅启用与所需表对应的语句使用者。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含一行，其</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为
         </font></font><code class="literal">statement</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示语句事件计时单位。</font><font style="vertical-align: inherit;">默认单位是
         </font></font><code class="literal">NANOSECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_timers WHERE NAME = 'statement';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ------------ + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ------------ + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">声明| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ------------ + +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要更改计时单位，请修改该
         </font></font><code class="literal">TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_timers SET TIMER_NAME ='MICROSECOND'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='语句';</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关配置事件收集的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-startup-configuration" title="25.3性能模式启动配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.3节“性能架构启动配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-runtime-configuration" title="25.4性能模式运行时配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4节“性能架构运行时配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="performance-schema-statement-tables-monitoring"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句监控</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        语句监视从服务器在线程上请求活动的那一刻开始，直到所有活动已停止。</font><font style="vertical-align: inherit;">通常，这意味着从服务器从客户端获取第一个数据包到服务器完成发送响应的时间。</font><font style="vertical-align: inherit;">存储程序中的语句与其他语句一样受到监视。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当性能模式处理请求（服务器命令或SQL语句）时，它使用从更一般（或</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抽象</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">阶段进行的仪器名称，</font><font style="vertical-align: inherit;">直到达到最终仪器名称。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        最终仪器名称对应于服务器命令和SQL语句：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            服务器命令对应
             </font><font style="vertical-align: inherit;">
            于</font><font style="vertical-align: inherit;">头文件中</font><font style="vertical-align: inherit;">定义并在其中</font><font style="vertical-align: inherit;">处理的命令</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例子是</font><font style="vertical-align: inherit;">和
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">命令工具的名称以</font><font style="vertical-align: inherit;">例如</font><font style="vertical-align: inherit;">和
             </font><font style="vertical-align: inherit;">开始</font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">COM_<em class="replaceable"><code>xxx</code></em> codes</code><font style="vertical-align: inherit;"></font><code class="filename">mysql_com.h</code><font style="vertical-align: inherit;"></font><code class="filename">sql/sql_parse.cc</code><font style="vertical-align: inherit;"></font><code class="literal">COM_PING</code><font style="vertical-align: inherit;"></font><code class="literal">COM_QUIT</code><font style="vertical-align: inherit;"></font><code class="literal">statement/com</code><font style="vertical-align: inherit;"></font><code class="literal">statement/com/Ping</code><font style="vertical-align: inherit;"></font><code class="literal">statement/com/Quit</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            SQL语句以文本形式表示，如
             </font></font><code class="literal">DELETE FROM t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">SELECT * FROM
            t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">用于SQL语句的工具具有以</font></font><code class="literal">statement/sql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">诸如
             </font></font><code class="literal">statement/sql/delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font><font style="vertical-align: inherit;">开头的名称</font></font><code class="literal">statement/sql/select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        某些最终的仪器名称特定于错误处理：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">statement/com/Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明服务器收到的带外消息。</font><font style="vertical-align: inherit;">它可以用来检测客户端发送的服务器不理解的命令。</font><font style="vertical-align: inherit;">这对于识别错误配置的客户端或使用比服务器更新的MySQL版本或试图攻击服务器的客户端等目的可能会有所帮助。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">statement/sql/error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明无法解析的SQL语句。</font><font style="vertical-align: inherit;">它可以用来检测客户端发送的格式错误的查询。</font><font style="vertical-align: inherit;">无法解析的查询与解析的查询不同，但由于执行期间发生错误而失败。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">SELECT *
            FROM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式不正确，
             </font></font><code class="literal">statement/sql/error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器已被使用。</font><font style="vertical-align: inherit;">相比之下，</font></font><code class="literal">SELECT *</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析却失败并出现</font></font><code class="literal">No tables used</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><code class="literal">statement/sql/select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用该语句事件并包含指示错误性质的信息。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以从以下任何来源获得请求：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为来自客户端的命令或语句请求，它以数据包的形式发送请求
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为从复制从站上的中继日志读取的语句字符串
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为Event Scheduler的事件
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        请求的详细信息最初并不知道，性能模式从抽象到特定仪器名称的顺序依赖于请求的来源。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于从客户端收到的请求：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当服务器在套接字级别检测到一个新数据包时，将以抽象工具名称开始一个新语句
             </font></font><code class="literal">statement/abstract/new_packet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当服务器读取数据包编号时，它知道更多关于接收到的请求的类型，并且性能模式改进了仪器名称。</font><font style="vertical-align: inherit;">例如，如果请求是一个</font></font><code class="literal">COM_PING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据包，那么仪器名称就会变成</font></font><code class="literal">statement/com/Ping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最终名称。</font><font style="vertical-align: inherit;">如果请求是一个
             </font></font><code class="literal">COM_QUERY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据包，则知道它对应于一个SQL语句，但不是特定类型的语句。</font><font style="vertical-align: inherit;">在这种情况下，仪器从一个抽象名称更改为更具体但仍然抽象的名称
             </font></font><code class="literal">statement/abstract/Query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且该请求需要进一步分类。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果请求是语句，则读取语句文本并将其提供给解析器。</font><font style="vertical-align: inherit;">解析后，确切的语句类型是已知的。</font><font style="vertical-align: inherit;">例如，如果请求是一个
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，则性能模式会将仪器名称
             </font></font><code class="literal">statement/abstract/Query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为
             </font></font><code class="literal">statement/sql/insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是最终名称。
</font></font></p></li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于从复制从站上的中继日志中作为语句读取的请求：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            中继日志中的语句以文本形式存储并按照原样读取。</font><font style="vertical-align: inherit;">没有网络协议，所以
             </font></font><code class="literal">statement/abstract/new_packet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不使用仪器。</font><font style="vertical-align: inherit;">相反，最初的工具是
             </font></font><code class="literal">statement/abstract/relay_log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当语句被解析时，确切的语句类型是已知的。</font><font style="vertical-align: inherit;">例如，如果请求是一个
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，则性能模式会将仪器名称
             </font></font><code class="literal">statement/abstract/Query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为
             </font></font><code class="literal">statement/sql/insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是最终名称。
</font></font></p></li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        前面的描述仅适用于基于语句的复制。</font><font style="vertical-align: inherit;">对于基于行的复制，在处理行更改时可以对从属系统执行的表I / O进行检测，但中继日志中的行事件不会显示为离散型语句。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于从事件调度程序收到的请求：
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事件执行使用名称进行检测
         </font></font><code class="literal">statement/scheduler/event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是最后的名字。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在事件主体内执行的语句使用
         </font></font><code class="literal">statement/sql/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称进行检测，而不使用任何先前的抽象工具。</font><font style="vertical-align: inherit;">事件是存储的程序，存储的程序在执行前预先编译到内存中。</font><font style="vertical-align: inherit;">因此，在运行时没有解析，每个语句的类型在执行时都是已知的。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事件主体内执行的语句是子语句。</font><font style="vertical-align: inherit;">例如，如果一个事件执行一个
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，那么事件本身的执行是父母，检测使用
         </font></font><code class="literal">statement/scheduler/event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是孩子使用的</font></font><code class="literal">statement/sql/insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">父/子关系持有</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">间</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">独立的仪器操作。</font><font style="vertical-align: inherit;">这不同于细化发生该序列</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的单个仪器化操作中，从抽象到最终乐器名称。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于为报表收集的统计数据，仅启用</font></font><code class="literal">statement/sql/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于单个报表类型</font><font style="vertical-align: inherit;">的最终</font><font style="vertical-align: inherit;">工具</font><font style="vertical-align: inherit;">是不够的
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">abtract
         </font></font><code class="literal">statement/abstract/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具也必须启用。</font><font style="vertical-align: inherit;">这通常不会成为问题，因为所有的语句工具都是默认启用的。</font><font style="vertical-align: inherit;">但是，选择性启用或禁用声明工具的应用程序必须考虑到禁用抽象工具也会禁用单个声明工具的统计信息收集。</font><font style="vertical-align: inherit;">例如，要收集</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句的</font><font style="vertical-align: inherit;">统计信息</font><font style="vertical-align: inherit;">，
         </font></font><code class="literal">statement/sql/insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须启用，还要</font></font><code class="literal">statement/abstract/new_packet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
        </font></font><code class="literal">statement/abstract/Query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同样，对于需要检测的复制语句，
         </font></font><code class="literal">statement/abstract/relay_log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须启用。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        没有统计数据汇总在抽象工具中，例如
         </font></font><code class="literal">statement/abstract/Query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为没有任何陈述被抽象工具归类为最终陈述名称。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-statements-current-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.1 events_statements_current表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527972257648"></a><a class="indexterm" name="idm140527972256144"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含当前语句事件，每个线程显示一行，显示线程最近监视语句事件的当前状态。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含语句事件行的表
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最基本的。</font><font style="vertical-align: inherit;">其他包含语句事件行的表从逻辑上由当前事件派生而来。</font><font style="vertical-align: inherit;">例如，
           </font><font style="vertical-align: inherit;">
          表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表是最新的语句事件的集合，直到固定数量的行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关配置语句事件集合的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables" title="25.11.6性能架构语句事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6节“性能架构语句事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与事件关联的线程和事件开始时的线程当前事件编号。</font><font style="vertical-align: inherit;">在
               </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一起唯一标识行值。</font><font style="vertical-align: inherit;">没有两行具有相同的值对。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">END_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当事件开始时</font><font style="vertical-align: inherit;">
              该列被设置为</font><font style="vertical-align: inherit;">，并且当事件结束时更新为线程当前事件编号。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">EVENT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              收集事件的仪器的名称。</font><font style="vertical-align: inherit;">这是</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">仪器名称可能有多个部分并形成一个层次结构，如
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能模式仪器命名约定”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于SQL语句，该</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              值最初是</font></font><code class="literal">statement/com/Query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在解析语句之前，然后更改为更合适的值，如
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables" title="25.11.6性能架构语句事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6节“性能架构语句事件表”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SOURCE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含产生事件的检测代码的源文件的名称以及检测发生的文件中的行号。</font><font style="vertical-align: inherit;">这使您可以检查源以确定涉及的代码。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该事件的时间信息。</font><font style="vertical-align: inherit;">这些值的单位是皮秒（十亿分之一秒）。</font><font style="vertical-align: inherit;">该
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值指示何时事件时间开始和结束。</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是事件流逝的时间（持续时间）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件尚未完成，</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              则为当前计时器值，并且
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是到目前为止所用的时间（</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件是从具有产生仪器
               </font></font><code class="literal">TIMED = NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，定时信息不是收集，并且</font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是所有
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有关皮秒作为事件时间单位和影响时间值的因素的讨论，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件计时”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOCK_TIME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              等待桌面锁的时间。</font><font style="vertical-align: inherit;">该值以微秒计算，但标准化为皮秒，以便与其他性能模式计时器进行比较。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SQL_TEXT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SQL语句的文本。</font><font style="vertical-align: inherit;">对于不与SQL语句关联的命令，其值为
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              语句显示的最大可用空间默认为1024个字节。</font><font style="vertical-align: inherit;">要更改此值，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_sql_text_length"><code class="literal">performance_schema_max_sql_text_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在服务器启动时</font><font style="vertical-align: inherit;">设置
               </font><font style="vertical-align: inherit;">系统变量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">DIGEST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              声明摘要MD5值的32个十六进制字符的字符串，或</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">statements_digest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者
               </font></font><code class="literal">no</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句摘要的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息，请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;">第25.9节“性能模式语句摘要”</font></a><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">DIGEST_TEXT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              标准化的声明摘要文本，或
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">statements_digest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者
               </font></font><code class="literal">no</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句摘要的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息，请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;">第25.9节“性能模式语句摘要”</font></a><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              的
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              系统变量决定了可用于摘要值存储的最大字节数。</font><font style="vertical-align: inherit;">但是，由于语句组件（如摘要缓冲区中的关键字和文字值）的编码，语句摘要的显示长度可能比可用缓冲区大小更长。</font><font style="vertical-align: inherit;">因此，从</font></font><code class="literal">DIGEST_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句事件表列中</font><font style="vertical-align: inherit;">选择
               </font><font style="vertical-align: inherit;">的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              值</font><font style="vertical-align: inherit;">可能会超出该
               </font><font style="vertical-align: inherit;">值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CURRENT_SCHEMA</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该语句的默认数据库（
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">OBJECT_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于嵌套语句（存储程序），这些列包含有关父语句的信息。</font><font style="vertical-align: inherit;">否则他们是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              本专栏确定了该陈述。</font><font style="vertical-align: inherit;">该值是内存中对象的地址。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MYSQL_ERRNO</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              语句错误号，来自语句诊断区域。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">RETURNED_SQLSTATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              语句诊断区域中的语句SQLSTATE值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MESSAGE_TEXT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              语句错误消息，来自语句诊断区域。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该声明是否发生错误。</font><font style="vertical-align: inherit;">如果SQLSTATE值以</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （完成）或</font></font><code class="literal">01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（警告）</font><font style="vertical-align: inherit;">开头，则值为0 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">值为1是SQLSTATE的值是别的。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">WARNINGS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              来自陈述诊断区域的警告数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ROWS_AFFECTED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              受该语句影响的行数。</font><font style="vertical-align: inherit;">有关</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受影响</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义的描述</font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">，</font></span></span><font style="vertical-align: inherit;">请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-affected-rows" title="27.8.7.1 mysql_affected_rows（）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第27.8.7.1节“mysql_affected_rows（）”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ROWS_SENT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              语句返回的行数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ROWS_EXAMINED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              语句执行期间从存储引擎读取的行数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CREATED_TMP_DISK_TABLES</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Created_tmp_disk_tables"><code class="literal">Created_tmp_disk_tables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CREATED_TMP_TABLES</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Created_tmp_tables"><code class="literal">Created_tmp_tables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SELECT_FULL_JOIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Select_full_join"><code class="literal">Select_full_join</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SELECT_FULL_RANGE_JOIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Select_full_range_join"><code class="literal">Select_full_range_join</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SELECT_RANGE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Select_range"><code class="literal">Select_range</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SELECT_RANGE_CHECK</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Select_range_check"><code class="literal">Select_range_check</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SELECT_SCAN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Select_scan"><code class="literal">Select_scan</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SORT_MERGE_PASSES</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Sort_merge_passes"><code class="literal">Sort_merge_passes</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SORT_RANGE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Sort_range"><code class="literal">Sort_range</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SORT_ROWS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Sort_rows"><code class="literal">Sort_rows</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SORT_SCAN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              像</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Sort_scan"><code class="literal">Sort_scan</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量一样，但是特定于语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NO_INDEX_USED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              1如果语句执行表扫描而不使用索引，否则为0。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NO_GOOD_INDEX_USED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              1如果服务器发现没有好的索引用于语句，否则为0。</font><font style="vertical-align: inherit;">有关更多信息，请参见</font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#explain-output" title="8.8.2 EXPLAIN输出格式"><font style="vertical-align: inherit;">第8.8.2节“EXPLAIN输出格式”中</font></a><font style="vertical-align: inherit;">值的
               </font><font style="vertical-align: inherit;">输出
               </font></font><code class="literal">Extra</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">说明</font><font style="vertical-align: inherit;">。
            </font></font><code class="literal">EXPLAIN</code><font style="vertical-align: inherit;"></font><code class="literal">Range checked for each record</code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#explain-output" title="8.8.2 EXPLAIN输出格式"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
              <code class="literal">NESTING_EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">NESTING_EVENT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">NESTING_EVENT_LEVEL</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这三列与其他列一起使用，为顶层（非内置）语句和嵌套语句（在存储程序中执行）提供如下信息。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于顶级语句：
            </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OBJECT_TYPE = NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_SCHEMA = NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_NAME = NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NESTING_EVENT_ID = NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NESTING_EVENT_TYPE = NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NESTING_LEVEL = 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于嵌套语句：
            </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OBJECT_TYPE =父语句对象类型</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_SCHEMA =父语句对象模式</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_NAME =父语句对象名称</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NESTING_EVENT_ID =父语句EVENT_ID</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NESTING_EVENT_TYPE ='声明'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NESTING_LEVEL =父语句NESTING_LEVEL加1</font></font><font></font>
</pre></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-statements-history-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.2 events_statements_history表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972112976"></a><a class="indexterm" name="idm140527972111472"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个线程</font><font style="vertical-align: inherit;">最近的</font><font style="vertical-align: inherit;">语句事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务器启动时自动设置</font><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_size"><code class="literal">performance_schema_events_statements_history_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">声明事件在结束之前不会添加到表中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6.1节“events_statements_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关配置语句事件集合的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables" title="25.11.6性能架构语句事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6节“性能架构语句事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-statements-history-long-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.3 events_statements_history_long表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527972096448"></a><a class="indexterm" name="idm140527972094992"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含最新的</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          语句事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务器启动时自动设置</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_long_size"><code class="literal">performance_schema_events_statements_history_long_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">声明事件在结束之前不会添加到表中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。</font><font style="vertical-align: inherit;">当线程结束时，它的行将从表中移除。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6.1节“events_statements_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关配置语句事件集合的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables" title="25.11.6性能架构语句事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6节“性能架构语句事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="prepared-statements-instances-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.6.4 prepared_statements_instances表</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式提供了准备好的语句的工具，对此有两种协议：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              二进制协议。</font><font style="vertical-align: inherit;">这通过MySQL C API访问并映射到底层服务器命令，如下表所示。
</font></font></p>
<div class="informaltable">
<table summary="How the binary protocol accessed through the MySQL C API maps onto underlying server commands."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C API函数</font></font></th>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相应的服务器命令</font></font></th>
                </tr></thead><tbody><tr>
                  <td scope="row"><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-stmt-prepare" title="27.8.11.21 mysql_stmt_prepare（）"><code class="literal">mysql_stmt_prepare()</code></a></td>
                  <td><code class="literal">COM_STMT_PREPARE</code></td>
                </tr><tr>
                  <td scope="row"><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-stmt-execute" title="27.8.11.10 mysql_stmt_execute（）"><code class="literal">mysql_stmt_execute()</code></a></td>
                  <td><code class="literal">COM_STMT_EXECUTE</code></td>
                </tr><tr>
                  <td scope="row"><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-stmt-close" title="27.8.11.6 mysql_stmt_close（）"><code class="literal">mysql_stmt_close()</code></a></td>
                  <td><code class="literal">COM_STMT_CLOSE</code></td>
</tr></tbody></table>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              文本协议。</font><font style="vertical-align: inherit;">这可以使用SQL语句访问，并映射到底层服务器命令上，如下表所示。
</font></font></p>
<div class="informaltable">
<table summary="How the text protocol accessed using SQL statements maps onto underlying server commands."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL语句</font></font></th>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相应的服务器命令</font></font></th>
                </tr></thead><tbody><tr>
                  <td scope="row"><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#prepare" title="13.5.1 PREPARE语法"><code class="literal">PREPARE</code></a></td>
                  <td><code class="literal">SQLCOM_PREPARE</code></td>
                </tr><tr>
                  <td scope="row"><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#execute" title="13.5.2 EXECUTE语法"><code class="literal">EXECUTE</code></a></td>
                  <td><code class="literal">SQLCOM_EXECUTE</code></td>
                </tr><tr>
                  <td scope="row"><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#deallocate-prepare" title="13.5.3 DEALLOCATE PREPARE语法"><code class="literal">DEALLOCATE PREPARE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                    </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#deallocate-prepare" title="13.5.3 DEALLOCATE PREPARE语法"><code class="literal">DROP
                    PREPARE</code></a></td>
                  <td><code class="literal">SQLCOM_DEALLOCATE PREPARE</code></td>
</tr></tbody></table>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能架构准备好的语句仪器涵盖了两种协议。</font><font style="vertical-align: inherit;">以下讨论引用了服务器命令，而不是C API函数或SQL语句。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关准备报表的信息可在
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格中找到。</font><font style="vertical-align: inherit;">此表可以检查服务器中使用的预备语句，并提供有关它们的汇总统计信息。</font><font style="vertical-align: inherit;">要控制此表的大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_prepared_statements_instances"><code class="literal">performance_schema_max_prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          准备好的陈述信息的收集取决于下表中显示的陈述工具。</font><font style="vertical-align: inherit;">这些仪器默认启用。</font><font style="vertical-align: inherit;">要修改它们，请更新
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。
</font></font></p>
<div class="informaltable">
<table summary="Collection of prepared statement information depends on the statement instruments shown in this table."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器命令</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">statement/com/Prepare</code></td>
              <td><code class="literal">COM_STMT_PREPARE</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">statement/com/Execute</code></td>
              <td><code class="literal">COM_STMT_EXECUTE</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">statement/sql/prepare_sql</code></td>
              <td><code class="literal">SQLCOM_PREPARE</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">statement/sql/execute_sql</code></td>
              <td><code class="literal">SQLCOM_EXECUTE</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式管理</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表</font><font style="vertical-align: inherit;">的内容
           </font><font style="vertical-align: inherit;">如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              报表编制
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">COM_STMT_PREPARE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">SQLCOM_PREPARE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令在服务器中创建预备语句。</font><font style="vertical-align: inherit;">如果语句已成功检测，则将新行添加到
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表中。</font><font style="vertical-align: inherit;">如果语句无法检测，则
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_prepared_statements_lost"><code class="literal">Performance_schema_prepared_statements_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              状态变量会增加。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              准备好的语句执行
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对已装备</font><font style="vertical-align: inherit;">的预准备语句实例</font><font style="vertical-align: inherit;">执行</font></font><code class="literal">COM_STMT_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">SQLCOM_PREPARE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令会更新相应的
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表格行。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              编写语句重新分配
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对已装备</font><font style="vertical-align: inherit;">的预准备语句实例</font><font style="vertical-align: inherit;">执行</font></font><code class="literal">COM_STMT_CLOSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">SQLCOM_DEALLOCATE_PREPARE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令将删除相应的
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表格行。</font><font style="vertical-align: inherit;">为避免资源泄漏，即使先前描述的准备好的语句工具被禁用，也会发生删除。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器化预备声明的内存地址。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">STATEMENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由服务器分配的内部语句ID。</font><font style="vertical-align: inherit;">文本和二进制协议都使用语句ID。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">STATEMENT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于二进制协议，这个列是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于文本协议，此列是由用户分配的外部语句名称。</font><font style="vertical-align: inherit;">例如，对于以下SQL语句，准备好的语句的名称是</font></font><code class="literal">stmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从“选择1”中准备stmt;
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">SQL_TEXT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              准备好的语句文本，带有</font></font><code class="literal">?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              占位符标记。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OWNER_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">OWNER_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列表示创建预备语句的事件。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OWNER_OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">OWNER_OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">OWNER_OBJECT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于由客户端会话创建的准备好的语句，这些列是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于由存储程序创建的准备好的语句，这些列指向存储的程序。</font><font style="vertical-align: inherit;">典型的用户错误是忘记取消分配准备好的语句。</font><font style="vertical-align: inherit;">这些列可用于查找泄漏已准备好的语句的存储程序：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT OWNER_OBJECT_TYPE，OWNER_OBJECT_SCHEMA，OWNER_OBJECT_NAME，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
STATEMENT_NAME，SQL_TEXT</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM performance_schema.prepared_statements_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE OWNER_OBJECT_TYPE不为NULL;</font></font><font></font>
</pre></li><li class="listitem"><p>
              <code class="literal">TIMER_PREPARE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              执行语句准备本身的时间。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_REPREPARE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              声明在内部重新发布的次数（参见</font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#statement-caching" title="8.10.4缓存准备好的语句和存储的程序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.10.4节“缓存已准备</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">好的</font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#statement-caching" title="8.10.4缓存准备好的语句和存储的程序"><font style="vertical-align: inherit;">声明和已存储的程序”</font></a><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">重新计算时间统计信息不可用，因为它是作为语句执行的一部分计算的，而不是单独的操作。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_EXECUTE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              执行准备报表的汇总统计数据。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SUM_<em class="replaceable"><code>xxx</code></em></code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              其余
               </font><font style="vertical-align: inherit;">
              列与语句汇总表相同（请参见</font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><font style="vertical-align: inherit;">第25.11.15.3节“语句汇总表”</font></a><font style="vertical-align: inherit;">）。
</font></font><code class="literal">SUM_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格</font><font style="vertical-align: inherit;">的统计信息列
           </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-transaction-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7性能模式事务表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7.1 events_transactions_current表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7.2 events_transactions_history表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7.3 events_transactions_history_long表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式工具交易。</font><font style="vertical-align: inherit;">在事件层次结构中，等待事件嵌套在嵌套在事务事件中嵌套的事件事件中的事件中。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些表存储交易事件：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当前交易事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个线程最近的事务事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：全球最新的事务事件（跨所有线程）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下部分描述事务事件表。</font><font style="vertical-align: inherit;">还有汇总表汇总有关交易事件的信息; </font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.4节“事务摘要表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="performance-schema-transaction-tables-configuration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事务事件配置</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要控制交易事件的收集，请设置相关工具和消费者的状态：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含一个名为的工具</font></font><code class="literal">transaction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用此工具启用或禁用事务事件的收集。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含消费者值，其名称对应于当前和最近的交易事件表名称。</font><font style="vertical-align: inherit;">使用这些消费者来过滤事务事件的集合。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">transaction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器和交易的消费者默认情况下禁用：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments WHERE NAME = 'transaction';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">交易| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_consumers WHERE NAME LIKE '%transactions%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_current | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_history_long | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在服务器启动时控制事务事件收集，请在</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用以下这些行</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器=“交易= ON”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费事件，交易电流= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费事件，交易历史= ON</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费事件，交易历史长= ON</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的仪器=“交易= OFF”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费事件，交易电流= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费事件，交易历史= OFF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构的消费事件，交易历史长= OFF</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在运行时控制事务事件收集，请更新
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='YES'，TIMED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='transaction';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名称如'％transactions％';</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='NO'，TIMED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='transaction';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPDATE setup_consumers SET ENABLED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名称如'％transactions％';</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要仅收集特定事务表的事务事件，请启用该</font></font><code class="literal">transaction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        工具，但仅</font><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">与所需表对应的事务使用者。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中包含一行，其</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为
         </font></font><code class="literal">transaction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易事件计时的单位。</font><font style="vertical-align: inherit;">默认单位是
         </font></font><code class="literal">NANOSECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_timers WHERE NAME = 'transaction';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">TIMER_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">交易| </font><font style="vertical-align: inherit;">NANOSECOND |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要更改计时单位，请修改该
         </font></font><code class="literal">TIMER_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_timers SET TIMER_NAME ='MICROSECOND'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='transaction';</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关配置事件收集的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-startup-configuration" title="25.3性能模式启动配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.3节“性能架构启动配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-runtime-configuration" title="25.4性能模式运行时配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4节“性能架构运行时配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="performance-schema-transaction-tables-transaction-boundaries"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易边界</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL服务器中，事务以这些语句显式启动：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始交易| </font><font style="vertical-align: inherit;">BEGIN | </font><font style="vertical-align: inherit;">XA START | </font><font style="vertical-align: inherit;">XA BEGIN
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事务也隐含地开始。</font><font style="vertical-align: inherit;">例如，当
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用系统变量时，每个语句的开始会启动一个新的事务。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        何时</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被禁用，提交事务之后的第一条语句标志着新事务的开始。</font><font style="vertical-align: inherit;">后续的语句是事务的一部分，直到它被提交。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事务明确以这些语句结束：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COMMIT | </font><font style="vertical-align: inherit;">ROLLBACK | </font><font style="vertical-align: inherit;">XA COMMIT | </font><font style="vertical-align: inherit;">XA ROLLBACK
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过执行DDL语句，锁定语句和服务器管理语句，事务也可以隐式结束。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在下面的讨论中，提及
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">START
        TRANSACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也适用于
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">BEGIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
        START</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
        BEGIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同样，分别引用
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">COMMIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用于</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
        COMMIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
        ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式定义的事务边界类似于服务器的边界。</font><font style="vertical-align: inherit;">事务事件的开始和结束与服务器中的相应状态转换非常匹配：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于显式启动的事务，事务事件在处理</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">START
            TRANSACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">期间启动
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于隐式启动的事务，事务事件从第一个在前一个事务结束后使用事务引擎的语句开始。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于任何事务，无论是显式还是隐式结束，事务事件都会在服务器在处理</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">COMMIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font><font style="vertical-align: inherit;">期间转换出活动事务状态时结束
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这种方法有一些微妙的含义：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在Performance模式，交易事件不完全包括与对应的相关联的声明事件</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">START
            TRANSACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">COMMIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语句。</font><font style="vertical-align: inherit;">事务事件与这些语句之间的时间重叠量很小。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            与非事务性引擎一起工作的语句对连接的事务状态没有影响。</font><font style="vertical-align: inherit;">对于隐式事务，事务事件从使用事务引擎的第一条语句开始。</font><font style="vertical-align: inherit;">这意味着专门用于非事务表的语句会被忽略，甚至会被忽略
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">START
            TRANSACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了说明，请考虑以下情形：
      </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.设置autocommit = OFF;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. CREATE TABLE t1（INT）ENGINE = InnoDB;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.开始交易; </font><font style="vertical-align: inherit;"> - 交易1开始</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.插入t1值（1），（2），（3）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. CREATE TABLE t2（a INT）ENGINE = MyISAM; </font><font style="vertical-align: inherit;"> - 交易1 COMMIT</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                                            - （隐式; DDL强制提交）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6.插入t2值（1），（2），（3）; </font><font style="vertical-align: inherit;"> - 更新非事务表</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. UPDATE t2 SET a = a + 1; </font><font style="vertical-align: inherit;"> -  ... 然后再次</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8.插入t1值（4），（5），（6）; </font><font style="vertical-align: inherit;"> - 写入交易表</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                                            - 交易2开始（隐含）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
9. COMMIT; </font><font style="vertical-align: inherit;"> - 交易2 COMMIT</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从服务器的角度来看，事务1在</font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建</font><font style="vertical-align: inherit;">表时结束</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">事务2直到访问事务表才会启动，尽管对非事务表进行了中间更新。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从性能模式的角度来看，事务2在服务器转换到活动事务状态时启动。</font><font style="vertical-align: inherit;">语句6和7不包含在事务2的边界内，这与服务器如何将事务写入二进制日志一致。
</font></font></p>
<h4><a name="performance-schema-transaction-tables-instrumentation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事务工具</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        三个属性定义交易：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            访问模式（只读，读写）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            隔离级别（</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，等）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            隐式（</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用）或显式（</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了降低事务工具的复杂性并确保收集的事务数据提供完整，有意义的结果，所有事务都独立于访问模式，隔离级别或自动提交模式进行检测。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要选择性地检查交易记录，在交易事件表使用的属性列：
         </font></font><code class="literal">ACCESS_MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">ISOLATION_LEVEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><code class="literal">AUTOCOMMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事务工具的成本可以通过各种方式减少，例如根据用户，帐户，主机或线程（客户端连接）启用或禁用事务工具。
</font></font></p>
<h4><a name="performance-schema-transaction-tables-nested-events"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易和嵌套事件</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        交易事件的父母是发起交易的事件。</font><font style="vertical-align: inherit;">对于明确启动的事务，这包括</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">START
        TRANSACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">COMMIT AND
        CHAIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">对于隐式启动的事务，它是在先前事务结束后使用事务引擎的第一条语句。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一般而言，交易是交易过程中发起的所有事件的顶级父项，包括明确结束交易的声明，例如
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">COMMIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例外情况是隐式结束事务的语句，例如DDL语句，在这种情况下，必须在执行新语句之前提交当前事务。
</font></font></p>
<h4><a name="performance-schema-transaction-tables-stored-programs"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易和存储程序</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事务和存储的程序事件相关如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            存储过程
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            存储过程独立于事务操作。</font><font style="vertical-align: inherit;">存储过程可以在事务中启动，并且事务可以从存储过程中开始或结束。</font><font style="vertical-align: inherit;">如果从事务内部调用，存储过程可以执行强制提交父事务并随后启动新事务的语句。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果存储过程在事务中启动，则该事务是存储过程事件的父项。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果事务由存储过程启动，则存储过程是事务事件的父代。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            存储函数
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            存储的函数受限于导致显式或隐式提交或回滚。</font><font style="vertical-align: inherit;">存储的功能事件可以驻留在父事务事件中。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            触发器
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            触发器作为访问与其关联的表的语句的一部分激活，因此触发器事件的父亲​​始终是激活它的语句。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            触发器不能发出导致事务的显式或隐式提交或回滚的语句。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            计划事件
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            预定事件正文中的语句的执行发生在新的连接中。</font><font style="vertical-align: inherit;">在父事务中嵌套预定事件不适用。
</font></font></p></li></ul>
</div>
<h4><a name="performance-schema-transaction-tables-savepoints"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事务和保存点</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        保存点语句被记录为单独的语句事件。</font><font style="vertical-align: inherit;">交易活动包括独立的计数器
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#savepoint" title="13.3.4 SAVEPOINT，ROLLBACK SAVEPOINT和RELEASE SAVEPOINT语法"><code class="literal">SAVEPOINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#savepoint" title="13.3.4 SAVEPOINT，ROLLBACK SAVEPOINT和RELEASE SAVEPOINT语法"><code class="literal">ROLLBACK TO
        SAVEPOINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#savepoint" title="13.3.4 SAVEPOINT，ROLLBACK SAVEPOINT和RELEASE SAVEPOINT语法"><code class="literal">RELEASE
        SAVEPOINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在交易期间发表的声明。
</font></font></p>
<h4><a name="performance-schema-transaction-tables-errors"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易和错误</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        事务中发生的错误和警告记录在语句事件中，但不记录在相应的事务事件中。</font><font style="vertical-align: inherit;">这包括事务特定的错误和警告，例如非事务表上的回滚或GTID一致性错误。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-transactions-current-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7.1 events_transactions_current表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527971839184"></a><a class="indexterm" name="idm140527971837680"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含当前事务事件，每个线程显示一行，显示线程最近监视的事务事件的当前状态。</font><font style="vertical-align: inherit;">例如：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM events_transactions_current LIMIT 1\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                      THREAD_ID：26</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                       EVENT_ID：7</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                   END_EVENT_ID：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     EVENT_NAME：交易</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          状态：激活</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                         TRX_ID：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                           GTID：3E11FA47-71CA-11E1-9E33-C80AA9429562：56</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            XID：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                       XA_STATE：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                         消息来源：transaction.cc:150</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                    TIMER_START：420833537900000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                      TIMER_END：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     TIMER_WAIT：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                    ACCESS_MODE：读写</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ISOLATION_LEVEL：可重复读取</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                     AUTOCOMMIT：NO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           NUMBER_OF_SAVEPOINTS：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NUMBER_OF_ROLLBACK_TO_SAVEPOINT：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    NUMBER_OF_RELEASE_SAVEPOINT：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          OBJECT_INSTANCE_BEGIN：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               NESTING_EVENT_ID：6</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             NESTING_EVENT_TYPE：STATEMENT</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含事务事件行的表
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最基本的。</font><font style="vertical-align: inherit;">其他包含事务事件行的表从逻辑上来源于当前事件。</font><font style="vertical-align: inherit;">例如，
           </font><font style="vertical-align: inherit;">
          表</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表是最近事务事件的集合，最多为固定行数。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关事务事件收集配置的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-transaction-tables" title="25.11.7性能模式事务表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.7节“性能模式事务表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与事件关联的线程和事件开始时的线程当前事件编号。</font><font style="vertical-align: inherit;">在
               </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一起唯一标识行值。</font><font style="vertical-align: inherit;">没有两行具有相同的值对。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">END_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当事件开始时</font><font style="vertical-align: inherit;">
              该列被设置为</font><font style="vertical-align: inherit;">，并且当事件结束时更新为线程当前事件编号。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">EVENT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              收集事件的仪器的名称。</font><font style="vertical-align: inherit;">这是</font></font><code class="literal">NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">仪器名称可能有多个部分并形成一个层次结构，如
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-instrument-naming" title="25.6性能架构仪器命名约定"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.6节“性能模式仪器命名约定”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">STATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当前的交易状态。</font><font style="vertical-align: inherit;">该值是
               </font></font><code class="literal">ACTIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">START
              TRANSACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">BEGIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），
               </font></font><code class="literal">COMMITTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">COMMIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或</font></font><code class="literal">ROLLED
              BACK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TRX_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              没用过。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">GTID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              所述GTID列包含的值
               </font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_next"><code class="literal">gtid_next</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其可以是一个</font></font><code class="literal">ANONYMOUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AUTOMATIC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或使用的格式的GTID
               </font></font><code class="literal">UUID:NUMBER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于使用
               </font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_next"><code class="literal">gtid_next=AUTOMATIC</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有普通客户端事务的事务，当事务提交并分配实际GTID时，GTID列会更改。</font><font style="vertical-align: inherit;">如果</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_mode"><code class="literal">gtid_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
               </font></font><code class="literal">ON_PERMISSIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则GTID列变为交易的GTID。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">gtid_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
               </font></font><code class="literal">OFF_PERMISSIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则GTID列变为</font></font><code class="literal">ANONYMOUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">XID_FORMAT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">XID_GTRID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
              </font></font><code class="literal">XID_BQUAL</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              XA事务标识符的组件。</font><font style="vertical-align: inherit;">它们具有</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.3.7.1节“XA事务SQL语法”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述的格式</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">XA_STATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              XA交易的状态。</font><font style="vertical-align: inherit;">该值是
               </font></font><code class="literal">ACTIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
              START</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font><code class="literal">IDLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
              END</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font><code class="literal">PREPARED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
              PREPARE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font><code class="literal">ROLLED BACK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
              ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或</font></font><code class="literal">COMMITTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （之后</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
              COMMIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在复制从服务器上，同一个XA事务可以</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在不同线程上以不同状态</font><font style="vertical-align: inherit;">出现在
               </font><font style="vertical-align: inherit;">表中。</font><font style="vertical-align: inherit;">这是因为在XA事务准备好之后，它立即脱离从属应用程序线程，并且可以由从属程序上的任何线程提交或回滚。</font><font style="vertical-align: inherit;">该
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表显示线程上最新监视事务事件的当前状态，并且在线程空闲时不会更新此状态。</font><font style="vertical-align: inherit;">所以XA交易仍然可以显示在
              </font></font><code class="literal">PREPARED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在由另一个线程处理之后，原始的施加器线程的状态。</font><font style="vertical-align: inherit;">要明确确定仍处于</font></font><code class="literal">PREPARED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态且需要恢复的</font><font style="vertical-align: inherit;">XA事务
               </font><font style="vertical-align: inherit;">，请使用该
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#xa-statements" title="13.3.7.1 XA事务SQL语法"><code class="literal">XA
              RECOVER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句而不是Performance Schema事务表。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SOURCE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含产生事件的检测代码的源文件的名称以及检测发生的文件中的行号。</font><font style="vertical-align: inherit;">这使您可以检查源以确定涉及的代码。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该事件的时间信息。</font><font style="vertical-align: inherit;">这些值的单位是皮秒（十亿分之一秒）。</font><font style="vertical-align: inherit;">该
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值指示何时事件时间开始和结束。</font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是事件流逝的时间（持续时间）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件尚未完成，</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              则为当前计时器值，并且
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是到目前为止所用的时间（</font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
               </font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果事件是从具有产生仪器
               </font></font><code class="literal">TIMED = NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，定时信息不是收集，并且</font></font><code class="literal">TIMER_START</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMER_END</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
               </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是所有
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有关皮秒作为事件时间单位和影响时间值的因素的讨论，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件计时”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ACCESS_MODE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              事务访问模式。</font><font style="vertical-align: inherit;">值是</font></font><code class="literal">READ
              ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">READ WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ISOLATION_LEVEL</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              事务隔离级别。</font><font style="vertical-align: inherit;">值是
               </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#isolevel_read-uncommitted"><code class="literal">READ UNCOMMITTED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
               </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">AUTOCOMMIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              交易开始时是否启用自动提交模式。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NUMBER_OF_SAVEPOINTS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">NUMBER_OF_ROLLBACK_TO_SAVEPOINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">NUMBER_OF_RELEASE_SAVEPOINT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              的数量</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#savepoint" title="13.3.4 SAVEPOINT，ROLLBACK SAVEPOINT和RELEASE SAVEPOINT语法"><code class="literal">SAVEPOINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#savepoint" title="13.3.4 SAVEPOINT，ROLLBACK SAVEPOINT和RELEASE SAVEPOINT语法"><code class="literal">ROLLBACK TO
              SAVEPOINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#savepoint" title="13.3.4 SAVEPOINT，ROLLBACK SAVEPOINT和RELEASE SAVEPOINT语法"><code class="literal">RELEASE
              SAVEPOINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在交易期间发表的声明。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              没用过。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NESTING_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件嵌套的事件</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NESTING_EVENT_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              嵌套事件类型。</font><font style="vertical-align: inherit;">值是
               </font></font><code class="literal">TRANSACTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">STAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
               </font></font><code class="literal">WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">TRANSACTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              不会出现，因为事务不能嵌套。）
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-transactions-history-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7.2 events_transactions_history表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971716048"></a><a class="indexterm" name="idm140527971714544"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个线程</font><font style="vertical-align: inherit;">最近的</font><font style="vertical-align: inherit;">事务事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务器启动时自动设置</font><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_size"><code class="literal">performance_schema_events_transactions_history_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">事务处理事件直到它们结束才会添加到表中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.7.1节“events_transactions_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关事务事件收集配置的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-transaction-tables" title="25.11.7性能模式事务表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.7节“性能模式事务表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="events-transactions-history-long-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.7.3 events_transactions_history_long表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971699552"></a><a class="indexterm" name="idm140527971698096"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含最近的</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          事务事件。</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时自动设置</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_long_size"><code class="literal">performance_schema_events_transactions_history_long_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">事务处理事件直到它们结束才会添加到表中。</font><font style="vertical-align: inherit;">随着新事件的添加，如果表格已满，旧的事件将被丢弃。</font><font style="vertical-align: inherit;">当线程结束时，它的行将从表中移除。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有与之相同的结构
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.7.1节“events_transactions_current表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          桌子。</font><font style="vertical-align: inherit;">它删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关事务事件收集配置的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-transaction-tables" title="25.11.7性能模式事务表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.7节“性能模式事务表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-connection-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8性能模式连接表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#accounts-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8.1帐户表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#hosts-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8.2主机表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#users-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8.3用户表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当客户端连接到MySQL服务器时，它在特定用户名和特定主机下进行。</font><font style="vertical-align: inherit;">性能模式提供有关这些连接的统计信息，使用以下表格对每个帐户（用户和主机组合）以及每个用户名和主机名分别进行跟踪：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个客户帐户的连接统计
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个客户端主机名的连接统计信息
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个客户端用户名的连接统计
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接表</font><font style="vertical-align: inherit;">
        中</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帐户</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的含义与</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统数据库中</font><font style="vertical-align: inherit;">MySQL授权表中的含义相似，
         </font><font style="vertical-align: inherit;">因为该术语指的是用户和主机值的组合。</font><font style="vertical-align: inherit;">它们的不同之处在于，对于授权表，帐户的主机部分可以是模式，而对于性能模式表，主机值始终是特定的非模式主机名。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        每个连接表具有</font></font><code class="literal">CURRENT_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        和</font></font><code class="literal">TOTAL_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列来跟踪每连接的电流和总数目</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跟踪值</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其它的统计是根据。</font><font style="vertical-align: inherit;">这些表格在跟踪值中使用的内容有所不同。</font><font style="vertical-align: inherit;">该
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有
         </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列以跟踪每个用户和主机组合的连接。</font><font style="vertical-align: inherit;">所述
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有一个
         </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柱，分别，以跟踪每个用户名和主机名的连接。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式还计算未验证的用户会话的内部线程和线程，使用行
         </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列值为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设客户命名</font></font><code class="literal">user1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并
         </font></font><code class="literal">user2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别从连接一个时间
         </font></font><code class="literal">hosta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">hostb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">性能架构如下跟踪连接：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表有四行，用于
             </font></font><code class="literal">user1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code class="literal">hosta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">user1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code class="literal">hostb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">user2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code class="literal">hosta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">user2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code class="literal">hostb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帐户值，每行每个帐户计算一个连接。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表有两行，对于</font></font><code class="literal">hosta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">hostb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，每个行按每个主机名计数两个连接。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表有两行，对于</font></font><code class="literal">user1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">user2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，每行按用户名计数两个连接。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当客户端连接时，性能模式将使用适用于每个表的跟踪值来确定每个连接表中的哪一行适用。</font><font style="vertical-align: inherit;">如果没有这样的行，则添加一行。</font><font style="vertical-align: inherit;">然后，性能模式将</font><font style="vertical-align: inherit;">在该行中</font><font style="vertical-align: inherit;">增加一
         </font><font style="vertical-align: inherit;">列</font></font><code class="literal">CURRENT_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">TOTAL_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        客户端断开连接时，性能模式会将</font></font><code class="literal">CURRENT_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">递减1，</font><font style="vertical-align: inherit;">并保持</font></font><code class="literal">TOTAL_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列不变。
      </font></font></p><p>
        <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于连接表。</font><font style="vertical-align: inherit;">它有这些影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于没有当前连接的帐户，主机或用户（包含行</font></font><code class="literal">CURRENT_CONNECTIONS
            = 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font><font style="vertical-align: inherit;">行将被删除</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            未清除的行重置为仅计算当前连接：对于具有的行</font></font><code class="literal">CURRENT_CONNECTIONS &gt; 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">TOTAL_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置为
             </font></font><code class="literal">CURRENT_CONNECTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如本节后面所述，隐式截断取决于连接表的摘要表。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能架构维护汇总表，汇总按帐户，主机或用户的各种事件类型的连接统计信息。</font><font style="vertical-align: inherit;">这些表格有
         </font></font><code class="literal">_summary_by_account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">_summary_by_host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">_summary_by_user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在名称中。</font><font style="vertical-align: inherit;">要识别它们，请使用以下查询：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES</code></strong>
       <strong class="userinput"><code>WHERE TABLE_SCHEMA = 'performance_schema'</code></strong>
       <strong class="userinput"><code>AND TABLE_NAME REGEXP '_summary_by_(account|host|user)'</code></strong>
       <strong class="userinput"><code>ORDER BY TABLE_NAME;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TABLE_NAME |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_by_account_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_by_host_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_stages_summary_by_user_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_summary_by_account_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_summary_by_host_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_statements_summary_by_user_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_summary_by_account_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_summary_by_host_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_transactions_summary_by_user_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_summary_by_account_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_summary_by_host_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">events_waits_summary_by_user_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_by_account_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_by_host_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">memory_summary_by_user_by_event_name |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关各个连接汇总表的详细信息，请参阅描述汇总事件类型表的部分：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            等待事件总结：</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.1节“等待事件总结表”</font></font></a>
          </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            舞台事件摘要：
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.2节“舞台汇总表”</font></font></a>
          </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            陈述事件摘要：
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.3节“陈述摘要表”</font></font></a>
          </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            事务事件摘要：
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.4节“事务摘要表”</font></font></a>
          </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            内存事件摘要：
             </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.9节“内存摘要表”</font></font></a>
</p></li></ul>
</div>
<p>
        <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于连接汇总表。</font><font style="vertical-align: inherit;">它删除没有连接的帐户，主机或用户的行，并将其余行中的汇总列重置为零。</font><font style="vertical-align: inherit;">此外，每个由帐户，主机，用户或线程汇总的汇总表都会通过截断它所依赖的连接表而被隐式截断。</font><font style="vertical-align: inherit;">下表描述了连接表截断和隐式截断表之间的关系。
</font></font></p>
<div class="table">
<a name="idm140527971612112"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表25.2连接表截断的隐式影响</font></font></b></p>
<div class="table-contents">
<table summary="Which Performance Schema summary tables are implicity truncated by connection table truncation."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">截断的连接表</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐式截断汇总表</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">accounts</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称包含的表格</font></font><code class="literal">_summary_by_account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">_summary_by_thread</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">hosts</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含名称表</font></font><code class="literal">_summary_by_account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">_summary_by_host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">_summary_by_thread</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">users</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含名称表</font></font><code class="literal">_summary_by_account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">_summary_by_user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">_summary_by_thread</code></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        截断</font></font><code class="literal">_summary_global</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">汇总表也会隐式地截断其对应的连接和线程汇总表。</font><font style="vertical-align: inherit;">例如，截断
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        隐式截断由帐户，主机，用户或线程聚合的等待事件摘要表。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="accounts-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8.1帐户表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527971588544"></a><a class="indexterm" name="idm140527971587056"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含连接到MySQL服务器的每个帐户的一行。</font><font style="vertical-align: inherit;">对于每个帐户，表格会计算当前连接数和总连接数。</font><font style="vertical-align: inherit;">表大小在服务器启动时自动调整大小。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_accounts_size"><code class="literal">performance_schema_accounts_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">要禁用帐户统计信息，请将此变量设置为0。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格包含以下列。</font><font style="vertical-align: inherit;">有关性能模式如何维护此表中的行的说明（包括影响）
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能模式连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">USER</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              连接的客户端用户名。</font><font style="vertical-align: inherit;">这是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对内部线程，或针对未通过身份验证的用户会话。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">HOST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              客户端连接的主机。</font><font style="vertical-align: inherit;">这是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对内部线程，或针对未通过身份验证的用户会话。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CURRENT_CONNECTIONS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              帐户的当前连接数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TOTAL_CONNECTIONS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该帐户的连接总数。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="hosts-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8.2主机表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971567456"></a><a class="indexterm" name="idm140527971565968"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含用于客户端已连接到MySQL服务器的每台主机的一行。</font><font style="vertical-align: inherit;">对于每个主机名称，表格会计算当前连接数和总连接数。</font><font style="vertical-align: inherit;">表大小在服务器启动时自动调整大小。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_hosts_size"><code class="literal">performance_schema_hosts_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">要禁用主机统计信息，请将此变量设置为0。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格包含以下列。</font><font style="vertical-align: inherit;">有关性能模式如何维护此表中的行的说明（包括影响）
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能模式连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">HOST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              客户端连接的主机。</font><font style="vertical-align: inherit;">这是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对内部线程，或针对未通过身份验证的用户会话。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CURRENT_CONNECTIONS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主机的当前连接数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TOTAL_CONNECTIONS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主机的总连接数。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="users-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.8.3用户表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971549264"></a><a class="indexterm" name="idm140527971547776"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含连接到MySQL服务器的每个用户的一行。</font><font style="vertical-align: inherit;">对于每个用户名称，表格会计算当前连接数和总连接数。</font><font style="vertical-align: inherit;">表大小在服务器启动时自动调整大小。</font><font style="vertical-align: inherit;">要显式设置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_users_size"><code class="literal">performance_schema_users_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">要禁用用户统计信息，请将此变量设置为0。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格包含以下列。</font><font style="vertical-align: inherit;">有关性能模式如何维护此表中的行的说明（包括影响）
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能模式连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">USER</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              连接的客户端用户名。</font><font style="vertical-align: inherit;">这是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对内部线程，或针对未通过身份验证的用户会话。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CURRENT_CONNECTIONS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用户的当前连接数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TOTAL_CONNECTIONS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用户的总连接数。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-connection-attribute-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.9性能架构连接属性表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#session-account-connect-attrs-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.9.1 session_account_connect_attrs表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#session-connect-attrs-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.9.2 session_connect_attrs表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        应用程序可以提供键/值对作为在连接时传递给服务器的连接属性。</font><font style="vertical-align: inherit;">对于C API，使用</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-options" title="27.8.7.50 mysql_options（）"><code class="literal">mysql_options()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-options4" title="27.8.7.51 mysql_options4（）"><code class="literal">mysql_options4()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">定义属性集
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">其他MySQL连接器可能会提供它们自己的属性定义方法。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些表格显示属性信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-account-connect-attrs-table" title="25.11.9.1 session_account_connect_attrs表"><code class="literal">session_account_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当前会话的连接属性以及与会话帐户关联的其他会话
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-connect-attrs-table" title="25.11.9.2 session_connect_attrs表"><code class="literal">session_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：所有会话的连接属性
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下划线（</font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">开头的属性名称</font><font style="vertical-align: inherit;">保留供内部使用，不应由应用程序创建。</font><font style="vertical-align: inherit;">这个约定允许MySQL引入新属性而不与应用程序属性相冲突。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在给定连接上可见的连接属性集取决于用于建立连接的平台和MySQL连接器。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><code class="literal">libmysqlclient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端库（在MySQL和MySQL连接器/ C分布提供）设置这些属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">_client_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户端名称（</font></font><code class="literal">libmysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于客户端库）
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_client_version</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户端库版本
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：操作系统（例如
             </font></font><code class="literal">Linux</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">Win64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_pid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户端进程ID
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：机器平台（例如</font></font><code class="literal">x86_64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_thread</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户端线程ID（仅限Windows）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        其他MySQL连接器可以定义它们自己的连接属性。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL Connector / J定义了这些属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">_client_license</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：连接器许可证类型
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_runtime_vendor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：Java运行时环境（JRE）供应商
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_runtime_version</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：Java运行时环境（JRE）版本
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL Connector / Net定义了这些属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">_client_version</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户端库版本
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：操作系统（例如
             </font></font><code class="literal">Linux</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">Win64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_pid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户端进程ID
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：机器平台（例如</font></font><code class="literal">x86_64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_program_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户名称
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">_thread</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：客户端线程ID（仅限Windows）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        PHP定义了取决于编译方式的属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            编译使用</font></font><code class="literal">libmysqlclient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code class="literal">libmysqlclient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面描述</font><font style="vertical-align: inherit;">的标准</font><font style="vertical-align: inherit;">属性
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            编译使用</font></font><code class="literal">mysqlnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：只有
             </font></font><code class="literal">_client_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性，值为
            </font></font><code class="literal">mysqlnd</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        许多MySQL客户端程序设置一个</font></font><code class="literal">program_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值等于客户端名称</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">属性。</font><font style="vertical-align: inherit;">例如，
         </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqladmin" title="4.5.2 mysqladmin  - 用于管理MySQL服务器的客户端"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqladmin</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别</font><font style="vertical-align: inherit;">
        设置</font></font><code class="literal">program_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
         </font></font><code class="literal">mysqladmin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">mysqldump</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一些MySQL客户端程序定义了其他属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog  - 处理二进制日志文件的实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlbinlog</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code class="literal">_client_role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">定义
            </font><font style="vertical-align: inherit;">为
            </font></font><code class="literal">binary_log_listener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            复制从连接定义
             </font></font><code class="literal">program_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
             </font></font><code class="literal">mysqld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">_client_role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如</font></font><code class="literal">binary_log_listener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
             </font></font><code class="literal">_client_replication_channel_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为信道名称。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/storage-engines.html#federated-storage-engine" title="15.8 FEDERATED存储引擎"><code class="literal">FEDERATED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎的连接定义</font></font><code class="literal">program_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
             </font></font><code class="literal">mysqld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">_client_role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
             </font></font><code class="literal">federated_storage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从客户端到服务器传输的连接属性数据量有限制：客户端在连接时间之前施加的固定限制; </font><font style="vertical-align: inherit;">服务器在连接时施加的固定限制; </font><font style="vertical-align: inherit;">以及连接时由性能模式强加的可配置限制。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于使用C API启动的连接，
         </font></font><code class="literal">libmysqlclient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库对客户端的连接属性数据的聚合大小施加64KB的限制：</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-options" title="27.8.7.50 mysql_options（）"><code class="literal">mysql_options()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致超过此限制的</font><font style="vertical-align: inherit;">调用
         </font><font style="vertical-align: inherit;">会产生
         </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_cr_invalid_parameter_no"><code class="literal">CR_INVALID_PARAMETER_NO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误。</font><font style="vertical-align: inherit;">其他MySQL连接器可能会对连接属性数据传输到服务器的数量施加自己的客户端限制。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在服务器端，会发生连接属性数据的这些大小检查：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            服务器对它将接受的连接属性数据的总大小施加64KB的限制。</font><font style="vertical-align: inherit;">如果客户端试图发送超过64KB的属性数据，服务器会拒绝该连接。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于接受的连接，性能模式会根据</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><code class="literal">performance_schema_session_connect_attrs_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量</font><font style="vertical-align: inherit;">的值检查聚合属性大小
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果属性大小超过此值，则会执行以下操作：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                性能模式会截断属性数据并递增
                 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_session_connect_attrs_lost"><code class="literal">Performance_schema_session_connect_attrs_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                状态变量，该状态变量指示发生属性截断的连接数。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_log_error_verbosity"><code class="literal">log_error_verbosity</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                系统变量大于1 </font><font style="vertical-align: inherit;">，性能架构会向错误日志写入消息
                 </font><font style="vertical-align: inherit;">：
              </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[警告]长度的连接属性</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被截断
</font></font></pre></li></ul>
</div>
</li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="session-account-connect-attrs-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.9.1 session_account_connect_attrs表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971446528"></a><a class="indexterm" name="idm140527971445024"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          应用程序可提供键/值连接属性被传递到服务器在连接时，使用</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-options" title="27.8.7.50 mysql_options（）"><code class="literal">mysql_options()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
           </font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-options4" title="27.8.7.51 mysql_options4（）"><code class="literal">mysql_options4()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C API函数。</font><font style="vertical-align: inherit;">有关常见属性的说明，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-attribute-tables" title="25.11.9性能架构连接属性表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.9节“性能架构连接属性表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-account-connect-attrs-table" title="25.11.9.1 session_account_connect_attrs表"><code class="literal">session_account_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表仅包含您自己帐户的会话的连接属性。</font><font style="vertical-align: inherit;">要查看所有会话的连接属性，请查看
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-connect-attrs-table" title="25.11.9.2 session_connect_attrs表"><code class="literal">session_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-account-connect-attrs-table" title="25.11.9.1 session_account_connect_attrs表"><code class="literal">session_account_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表包含这些列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">PROCESSLIST_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              会话的连接标识符。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ATTR_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              属性名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ATTR_VALUE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              属性值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ORDINAL_POSITION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该属性添加到连接属性集的顺序。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-account-connect-attrs-table" title="25.11.9.1 session_account_connect_attrs表"><code class="literal">session_account_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="session-connect-attrs-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.9.2 session_connect_attrs表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971422480"></a><a class="indexterm" name="idm140527971420976"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          应用程序可提供键/值连接属性被传递到服务器在连接时，使用</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-options" title="27.8.7.50 mysql_options（）"><code class="literal">mysql_options()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
           </font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-options4" title="27.8.7.51 mysql_options4（）"><code class="literal">mysql_options4()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C API函数。</font><font style="vertical-align: inherit;">有关常见属性的说明，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-attribute-tables" title="25.11.9性能架构连接属性表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.9节“性能架构连接属性表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-connect-attrs-table" title="25.11.9.2 session_connect_attrs表"><code class="literal">session_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含所有会话的连接属性。</font><font style="vertical-align: inherit;">要查看仅适用于您自己帐户的会话的连接属性，请查看
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-account-connect-attrs-table" title="25.11.9.1 session_account_connect_attrs表"><code class="literal">session_account_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-connect-attrs-table" title="25.11.9.2 session_connect_attrs表"><code class="literal">session_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含这些列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">PROCESSLIST_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              会话的连接标识符。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ATTR_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              属性名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ATTR_VALUE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              属性值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ORDINAL_POSITION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该属性添加到连接属性集的顺序。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#session-connect-attrs-table" title="25.11.9.2 session_connect_attrs表"><code class="literal">session_connect_attrs</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-user-variable-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.10性能模式用户变量表</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971398464"></a><a class="indexterm" name="idm140527971396960"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式提供了一个</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-user-variable-tables" title="25.11.10性能模式用户变量表"><code class="literal">user_variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暴露用户定义变量</font><font style="vertical-align: inherit;">的
         </font><font style="vertical-align: inherit;">表格。</font><font style="vertical-align: inherit;">这些是在特定会话中定义的变量，并包含</font></font><code class="literal">@</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        名称前的字符; </font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#user-variables" title="9.4用户定义的变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.4节“用户定义的变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-user-variable-tables" title="25.11.10性能模式用户变量表"><code class="literal">user_variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含这些列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">THREAD_ID</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            定义变量的会话的线程标识符。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_NAME</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            变量名称，不带前导</font></font><code class="literal">@</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            字符。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_VALUE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            变量值。
</font></font></p></li></ul>
</div>
<p>
        <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-user-variable-tables" title="25.11.10性能模式用户变量表"><code class="literal">user_variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-replication-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11性能模式复制表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.1 replication_connection_configuration表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.2 replication_connection_status表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-configuration-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.3 replication_applier_configuration表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.4 replication_applier_status表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.5 replication_applier_status_by_coordinator表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.6 replication_applier_status_by_worker表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-group-members-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.7 replication_group_members表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#replication-group-member-stats-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.8 replication_group_member_stats表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式提供了公开复制信息的表。</font><font style="vertical-align: inherit;">这与</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">陈述中</font><font style="vertical-align: inherit;">提供的信息相似</font><font style="vertical-align: inherit;">，但以表格形式表示更易于获得，并具有可用性优势：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出对于视觉检查很有用，但对于程序化使用则不是那么重要。</font><font style="vertical-align: inherit;">相反，使用性能模式表，可以使用一般</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询</font><font style="vertical-align: inherit;">来搜索有关从属状态的信息</font><font style="vertical-align: inherit;">，包括复杂</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件，连接等。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查询结果可以保存在表中以供进一步分析，或者分配给变量，从而用于存储过程。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            复制表提供更好的诊断信息。</font><font style="vertical-align: inherit;">对于多线程从操作，
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code class="literal">Last_SQL_Errno</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">Last_SQL_Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">报告所有协调器和工作线程错误
             </font><font style="vertical-align: inherit;">，因此只有最近的那些错误可见并且信息可能会丢失。</font><font style="vertical-align: inherit;">复制表在每个线程的基础上存储错误而不会丢失信息。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            上次看到的事务在每个工作者的基础上在复制表中可见。</font><font style="vertical-align: inherit;">这是不可从的信息</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE
            STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            熟悉Performance Schema接口的开发人员可以通过向表中添加行来扩展复制表以提供附加信息。
</font></font></p></li></ul>
</div>
<h4><a name="idm140527971364928"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制表说明</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式提供了以下与复制相关的表格：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            包含有关从服务器连接到主服务器的信息的表格：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于连接到主站的配置参数
              </font></font></p></li><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：到主站的连接的当前状态
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            包含有关交易应用程序的一般信息（而非线程特定信息）的表格：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-configuration-table" title="25.11.11.3 replication_applier_configuration表"><code class="literal">replication_applier_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从站上的事务处理器的配置参数。
              </font></font></p></li><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-table" title="25.11.11.4 replication_applier_status表"><code class="literal">replication_applier_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从站上的事务处理器的当前状态。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            包含有关负责应用从主站接收的事务的特定线程信息的表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：协调器线程的状态（空，除非从器件是多线程的）。
              </font></font></p></li><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table" title="25.11.11.6 replication_applier_status_by_worker表"><code class="literal">replication_applier_status_by_worker</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果从站是多线程的，则应用程序线程或工作线程的状态。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            包含有关复制组成员信息的表格：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-group-members-table" title="25.11.11.7 replication_group_members表"><code class="literal">replication_group_members</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为组员提供网络和状态信息。
              </font></font></p></li><li class="listitem"><p>
                <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-group-member-stats-table" title="25.11.11.8 replication_group_member_stats表"><code class="literal">replication_group_member_stats</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：提供关于他们参与的组成员和交易的统计信息。
</font></font></p></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下各节更详细地描述了每个复制表，其中包括由其生成的</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列与出现相同信息的复制表列</font><font style="vertical-align: inherit;">之间的对应关系</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对复制表的这部分介绍的其余部分描述了性能模式如何填充它们以及表中哪些字段</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未被表示。
</font></font></p>
<h4><a name="idm140527971337200"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制表生命周期</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能架构如下填充复制表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在执行之前</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#change-master-to" title="13.4.2.1将主设备更改为语法"><code class="literal">CHANGE MASTER
            TO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，表格是空的。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            之后</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#change-master-to" title="13.4.2.1将主设备更改为语法"><code class="literal">CHANGE MASTER TO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，配置参数可以在表格中看到。</font><font style="vertical-align: inherit;">此时，没有活动的从属线程，所以
             </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">SERVICE_STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的值都是
             </font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            之后</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE语法"><code class="literal">START SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">NULL</code> <code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            可以看到</font><font style="vertical-align: inherit;">非</font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">空闲或活动的线程的
             </font></font><code class="literal">SERVICE_STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为
             </font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">连接到主服务器的线程</font></font><code class="literal">CONNECTING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在建立连接时</font><font style="vertical-align: inherit;">具有值</font><font style="vertical-align: inherit;">，并且
             </font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此后只要连接持续。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            之后</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#stop-slave" title="13.4.2.7 STOP SLAVE语法"><code class="literal">STOP SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这些
             </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列变为，
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">SERVICE_STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再存在的线程</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">列的值为</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#stop-slave" title="13.4.2.7 STOP SLAVE语法"><code class="literal">STOP
            SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于错误而导致</font><font style="vertical-align: inherit;">
            表</font><font style="vertical-align: inherit;">或线程死亡</font><font style="vertical-align: inherit;">后保留表</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table" title="25.11.11.6 replication_applier_status_by_worker表"><code class="literal">replication_applier_status_by_worker</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表是仅当从在多线程模式中操作非空。</font><font style="vertical-align: inherit;">也就是说，如果
             </font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_slave_parallel_workers"><code class="literal">slave_parallel_workers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量大于0，则此表在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#start-slave" title="13.4.2.6 START SLAVE语法"><code class="literal">START SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">时填充</font><font style="vertical-align: inherit;">，行数显示工作人员数。
</font></font></p></li></ul>
</div>
<h4><a name="idm140527971310000"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHOW SLAVE STATUS信息不在复制表中</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        Performance Schema复制表中的信息与可用的信息有所不同，
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为这些表面向全局事务标识符（GTID）使用，而不是文件名和位置，它们表示服务器UUID值，而不是服务器ID值。</font><font style="vertical-align: inherit;">由于这些差异，</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能模式复制表中不保留</font><font style="vertical-align: inherit;">多个</font><font style="vertical-align: inherit;">列，或以不同方式表示：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以下字段涉及文件名称和位置，不会保留：
          </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MASTER_LOG_FILE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Read_Master_Log_Pos</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RELAY_LOG_FILE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RELAY_LOG_POS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Relay_Master_Log_File</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exec_Master_Log_Pos</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Until_Condition</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Until_Log_File</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Until_Log_Pos</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">Master_Info_File</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段未保留。</font><font style="vertical-align: inherit;">它指的是</font></font><code class="filename">master.info</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            已经被崩溃安全的从表所取代</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">文件。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以下字段基于
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不是
             </font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_server_uuid"><code class="literal">server_uuid</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也不保留：
          </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Master_Server_Id</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replicate_Ignore_Server_Ids</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">Skip_Counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段基于事件计数，而不是GTID，并且不保留。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些错误字段是</font></font><code class="literal">Last_SQL_Errno</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和的
             </font><font style="vertical-align: inherit;">别名
             </font></font><code class="literal">Last_SQL_Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此它们不会被保留：
          </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Last_Errno</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Last_Error</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在性能模式中，这个错误信息可以在</font><font style="vertical-align: inherit;">
            表格的</font><font style="vertical-align: inherit;">列</font></font><code class="literal">LAST_ERROR_NUMBER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">LAST_ERROR_MESSAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中找到
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table" title="25.11.11.6 replication_applier_status_by_worker表"><code class="literal">replication_applier_status_by_worker</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果从站是多线程的话）。</font><font style="vertical-align: inherit;">这些表提供比从</font></font><code class="literal">Last_Errno</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font><font style="vertical-align: inherit;">可用的更具体的每线程错误信息
             </font></font><code class="literal">Last_Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            提供有关命令行筛选选项信息的字段不会保留：
          </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Replicate_Do_DB</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replicate_Ignore_DB</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replicate_Do_Table</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replicate_Ignore_Table</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replicate_Wild_Do_Table</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replicate_Wild_Ignore_Table</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">Slave_IO_State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">Slave_SQL_Running_State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段不保留。</font><font style="vertical-align: inherit;">如果需要，可以通过使用</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            适当的复制表的</font></font><code class="literal">ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
             </font><font style="vertical-align: inherit;">并将其与</font></font><code class="literal">INFORMATION_SCHEMA</code>
            <a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font></font><code class="literal">STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列结合</font><font style="vertical-align: inherit;">以选择</font><font style="vertical-align: inherit;">后一个表</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">来从进程列表获取这些值</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">Executed_Gtid_Set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段可以显示大量文本的大集合。</font><font style="vertical-align: inherit;">相反，性能架构表显示了当前由从属应用的事务的GTID。</font><font style="vertical-align: inherit;">或者，可以从</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_executed"><code class="literal">gtid_executed</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值中获得一组已执行的GTID
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">Seconds_Behind_Master</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">Relay_Log_Space</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段在待决定状态，并不会保留。
</font></font></p></li></ul>
</div>
<h4><a name="idm140527971271920"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量移至复制表</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从MySQL 5.7.5版本开始，以下状态变量（先前使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-status" title="13.7.5.35 SHOW STATUS语法"><code class="literal">SHOW
        STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的监视器）被移至Perfomance Schema复制表中：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Slave_retried_transactions"><code class="literal">Slave_retried_transactions</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Slave_last_heartbeat"><code class="literal">Slave_last_heartbeat</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Slave_received_heartbeats"><code class="literal">Slave_received_heartbeats</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Slave_heartbeat_period"><code class="literal">Slave_heartbeat_period</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_Slave_running"><code class="literal">Slave_running</code></a>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些状态变量现在仅在使用单个复制通道时才相关，因为它们
         </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报告默认复制通道的状态。</font><font style="vertical-align: inherit;">如果存在多个复制通道，请使用本节中介绍的Performance Schema复制表，该表复制了每个现有复制通道的这些变量。
</font></font></p>
<h4><a name="idm140527971257040"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制频道</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        复制性能模式表的第一列是
         </font></font><code class="literal">CHANNEL_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这使得每个复制通道都能查看表格。</font><font style="vertical-align: inherit;">在非多源复制设置中，存在单个默认复制通道。</font><font style="vertical-align: inherit;">在从属设备上使用多个复制通道时，可以对每个复制通道过滤表以监视特定的复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;"> 
        和</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-multi-source-monitoring" title="16.1.4.3多源复制监视"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第16.1.4.3节“多源复制监视”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-connection-configuration-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.1 replication_connection_configuration表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527971252160"></a><a class="indexterm" name="idm140527971250656"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此表显示从服务器用于连接到主服务器的配置参数。</font><font style="vertical-align: inherit;">存储在表中的参数可以在运行时用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#change-master-to" title="13.4.2.1将主设备更改为语法"><code class="literal">CHANGE MASTER TO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">来更改
           </font><font style="vertical-align: inherit;">，如列说明中所示。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          与</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格</font><font style="vertical-align: inherit;">相比
           </font><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          变化较少。</font><font style="vertical-align: inherit;">它包含定义从站连接到主站并在连接期间保持不变的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值</font><font style="vertical-align: inherit;">，而
           </font><font style="vertical-align: inherit;">包含连接期间更改的值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此行正在显示的复制通道。</font><font style="vertical-align: inherit;">总是有一个默认的复制通道，可以添加更多的复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">HOST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主机与主机连接。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PORT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用于连接到主站的端口。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">CHANGE
              MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">USER</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用于连接到主服务器的帐户的用户名。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NETWORK_INTERFACE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从站绑定的网络接口（如果有的话）。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_BIND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">AUTO_POSITION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              1如果自动定位正在使用中; </font><font style="vertical-align: inherit;">否则为0（</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_AUTO_POSITION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SSL_ALLOWED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SSL_CA_FILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SSL_CA_PATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SSL_CERTIFICATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SSL_CIPHER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">SSL_KEY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SSL_VERIFY_SERVER_CERTIFICATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SSL_CRL_FILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">SSL_CRL_PATH</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列显示从设备连接到主设备时使用的SSL参数（如果有的话）。
            </font></font></p><p>
              <code class="literal">SSL_ALLOWED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 有这些值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">Yes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 如果允许与主站的SSL连接
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">No</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 如果与主站的SSL连接不被允许
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">Ignored</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 如果允许SSL连接但从服务器未启用SSL支持
</font></font></p></li></ul>
</div>
<p>
              <code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于其他SSL列选项：</font></font><code class="literal">MASTER_SSL_CA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MASTER_SSL_CAPATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MASTER_SSL_CERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MASTER_SSL_CIPHER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MASTER_SSL_CRL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MASTER_SSL_CRLPATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MASTER_SSL_KEY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MASTER_SSL_VERIFY_SERVER_CERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CONNECTION_RETRY_INTERVAL</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              连接重试之间的秒数。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_CONNECT_RETRY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CONNECTION_RETRY_COUNT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在连接丢失的情况下，从设备可以尝试重新连接到主设备的次数。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_RETRY_COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">HEARTBEAT_INTERVAL</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从站上的复制心跳间隔（以秒为单位）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TLS_VERSION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主设备上使用的TLS版本。</font><font style="vertical-align: inherit;">有关TLS版本信息，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#encrypted-connection-protocols-ciphers" title="6.4.6加密的连接协议和密码"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.4.6节“加密连接协议和密码”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该列已添加到MySQL 5.7.10中。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列和</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列</font><font style="vertical-align: inherit;">之间的对应关系
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Correspondence between replication_connection_configuration columns and SHOW SLAVE STATUS columns"><colgroup><col width="60%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><code class="literal">replication_connection_configuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
              <th scope="col"><code class="literal">SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">HOST</code></td>
              <td><code class="literal">Master_Host</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">PORT</code></td>
              <td><code class="literal">Master_Port</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">USER</code></td>
              <td><code class="literal">Master_User</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">NETWORK_INTERFACE</code></td>
              <td><code class="literal">Master_Bind</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">AUTO_POSITION</code></td>
              <td><code class="literal">Auto_Position</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_ALLOWED</code></td>
              <td><code class="literal">Master_SSL_Allowed</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_CA_FILE</code></td>
              <td><code class="literal">Master_SSL_CA_File</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_CA_PATH</code></td>
              <td><code class="literal">Master_SSL_CA_Path</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_CERTIFICATE</code></td>
              <td><code class="literal">Master_SSL_Cert</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_CIPHER</code></td>
              <td><code class="literal">Master_SSL_Cipher</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_KEY</code></td>
              <td><code class="literal">Master_SSL_Key</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_VERIFY_SERVER_CERTIFICATE</code></td>
              <td><code class="literal">Master_SSL_Verify_Server_Cert</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_CRL_FILE</code></td>
              <td><code class="literal">Master_SSL_Crl</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SSL_CRL_PATH</code></td>
              <td><code class="literal">Master_SSL_Crlpath</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">CONNECTION_RETRY_INTERVAL</code></td>
              <td><code class="literal">Connect_Retry</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">CONNECTION_RETRY_COUNT</code></td>
              <td><code class="literal">Master_Retry_Count</code></td>
</tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-connection-status-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.2 replication_connection_status表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971123056"></a><a class="indexterm" name="idm140527971121552"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此表显示处理从服务器连接到主服务器的I / O线程的当前状态。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          与</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表</font><font style="vertical-align: inherit;">相比
           </font><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          变化更频繁。</font><font style="vertical-align: inherit;">它包含在连接期间更改的值，而
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-configuration-table" title="25.11.11.1 replication_connection_configuration表"><code class="literal">replication_connection_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含定义从站连接到主站并在连接期间保持不变的值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此行正在显示的复制通道。</font><font style="vertical-align: inherit;">总是有一个默认的复制通道，可以添加更多的复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">GROUP_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果此服务器是组的成员，则显示服务器所属组的名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SOURCE_UUID</code>
            </p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_server_uuid"><code class="literal">server_uuid</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自主人</font><font style="vertical-align: inherit;">
              的</font><font style="vertical-align: inherit;">价值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              I / O线程标识。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SERVICE_STATE</code>
            </p><p>
              <code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（线程存在且处于活动或空闲状态），</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（线程不再存在）或</font></font><code class="literal">CONNECTING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（线程存在并连接到主控制器）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">RECEIVED_TRANSACTION_SET</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              全局事务标识（GTID）的集合对应于此从站收到的所有事务。</font><font style="vertical-align: inherit;">如果GTID未被使用，则为空。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息，</font><font style="vertical-align: inherit;">请参阅
               </font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-gtids-concepts-gtid-sets" title="GTID集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GTID集</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_ERROR_NUMBER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">LAST_ERROR_MESSAGE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              导致I / O线程停止的最新错误的错误号和错误消息。</font><font style="vertical-align: inherit;">错误编号0和空字符串的消息表示</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有错误。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果该
               </font></font><code class="literal">LAST_ERROR_MESSAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值不为空，则错误值也会出现在从站的错误日志中。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              发布</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER语法"><code class="literal">RESET MASTER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#reset-slave" title="13.4.2.4 RESET SLAVE语法"><code class="literal">RESET SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置这些列中显示的值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_ERROR_TIMESTAMP</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">YYMMDD HH:MM:SS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化</font><font style="vertical-align: inherit;">
              的时间戳</font><font style="vertical-align: inherit;">，显示最近发生I / O错误的时间。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_HEARTBEAT_TIMESTAMP</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">YYMMDD HH:MM:SS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">
              的时间戳</font><font style="vertical-align: inherit;">，显示复制从服务器收到最近一次心跳信号的时间。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_RECEIVED_HEARTBEATS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              复制从站自上次重新启动或复位或发出</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句后</font><font style="vertical-align: inherit;">收到的心跳信号总数</font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-connection-status-table" title="25.11.11.2 replication_connection_status表"><code class="literal">replication_connection_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列和</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列</font><font style="vertical-align: inherit;">之间的对应关系
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Correspondence between replication_connection_status columns and SHOW SLAVE STATUS columns"><colgroup><col width="60%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><code class="literal">replication_connection_status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
              <th scope="col"><code class="literal">SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">SOURCE_UUID</code></td>
              <td><code class="literal">Master_UUID</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">THREAD_ID</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">SERVICE_STATE</code></td>
              <td><code class="literal">Slave_IO_Running</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">RECEIVED_TRANSACTION_SET</code></td>
              <td><code class="literal">Retrieved_Gtid_Set</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_NUMBER</code></td>
              <td><code class="literal">Last_IO_Errno</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_MESSAGE</code></td>
              <td><code class="literal">Last_IO_Error</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_TIMESTAMP</code></td>
              <td><code class="literal">Last_IO_Error_Timestamp</code></td>
</tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-applier-configuration-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.3 replication_applier_configuration表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971044880"></a><a class="indexterm" name="idm140527971043424"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此表显示影响从服务器应用事务的配置参数。</font><font style="vertical-align: inherit;">存储在表中的参数可以在运行时用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#change-master-to" title="13.4.2.1将主设备更改为语法"><code class="literal">CHANGE MASTER TO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">来更改
           </font><font style="vertical-align: inherit;">，如列说明中所示。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-configuration-table" title="25.11.11.3 replication_applier_configuration表"><code class="literal">replication_applier_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此行正在显示的复制通道。</font><font style="vertical-align: inherit;">总是有一个默认的复制通道，可以添加更多的复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">DESIRED_DELAY</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从站必须滞后主站的秒数。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">CHANGE MASTER TO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：
               </font></font><code class="literal">MASTER_DELAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-configuration-table" title="25.11.11.3 replication_applier_configuration表"><code class="literal">replication_applier_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-configuration-table" title="25.11.11.3 replication_applier_configuration表"><code class="literal">replication_applier_configuration
          </code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列和</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE
          STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">之间的对应关系
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Correspondence between replication_applier_configuration columns and SHOW SLAVE STATUS columns"><colgroup><col width="60%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><code class="literal">replication_applier_configuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
              <th scope="col"><code class="literal">SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">DESIRED_DELAY</code></td>
              <td><code class="literal">SQL_Delay</code></td>
</tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-applier-status-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.4 replication_applier_status表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527971014576"></a><a class="indexterm" name="idm140527971013072"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该表显示了从服务器上当前的一般事务执行状态。</font><font style="vertical-align: inherit;">该表提供了有关交易应用程序状态的一般方面的信息，这些信息并非特定于任何涉及的线程。</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font><font style="vertical-align: inherit;">提供了线程特定的状态信息
           </font><font style="vertical-align: inherit;">（
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table" title="25.11.11.6 replication_applier_status_by_worker表"><code class="literal">replication_applier_status_by_worker</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果从站是多线程的话）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-table" title="25.11.11.4 replication_applier_status表"><code class="literal">replication_applier_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此行正在显示的复制通道。</font><font style="vertical-align: inherit;">总是有一个默认的复制通道，可以添加更多的复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SERVICE_STATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              显示</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制通道的施加器线程处于活动状态还是空闲状态时，</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表示施加器线程未处于活动状态。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">REMAINING_DELAY</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果从站在等待
               </font></font><code class="literal">DESIRED_DELAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒数后通过主站应用事件，则此字段包含剩余的延迟秒数。</font><font style="vertical-align: inherit;">在其他时候，这个领域是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（该
               </font></font><code class="literal">DESIRED_DELAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值存储在
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-configuration-table" title="25.11.11.3 replication_applier_configuration表"><code class="literal">replication_applier_configuration</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表中。）
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_TRANSACTIONS_RETRIES</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              显示由于从属SQL线程未能应用事务而发生的重试次数。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-table" title="25.11.11.4 replication_applier_status表"><code class="literal">replication_applier_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-table" title="25.11.11.4 replication_applier_status表"><code class="literal">replication_applier_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列和</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列</font><font style="vertical-align: inherit;">之间的对应关系
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Correspondence between replication_applier_status columns and SHOW SLAVE STATUS columns"><colgroup><col width="60%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><code class="literal">replication_applier_status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
              <th scope="col"><code class="literal">SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">SERVICE_STATE</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">REMAINING_DELAY</code></td>
              <td><code class="literal">SQL_Remaining_Delay</code></td>
</tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-applier-status-by-coordinator-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.5 replication_applier_status_by_coordinator表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970972336"></a><a class="indexterm" name="idm140527970970816"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于多线程从站，从站使用多个工作线程和一个协调程序线程来管理它们，该表显示协调程序线程的状态。</font><font style="vertical-align: inherit;">对于单线程从机，这个表是空的。</font><font style="vertical-align: inherit;">对于多线程从机，该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table" title="25.11.11.6 replication_applier_status_by_worker表"><code class="literal">replication_applier_status_by_worker</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表显示工作线程的状态。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此行正在显示的复制通道。</font><font style="vertical-align: inherit;">总是有一个默认的复制通道，可以添加更多的复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SQL /协调程序线程标识。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SERVICE_STATE</code>
            </p><p>
              <code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（线程存在并处于活动状态或空闲状态）或</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（线程不再存在）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_ERROR_NUMBER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">LAST_ERROR_MESSAGE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              导致SQL / Coordinator线程停止的最新错误的错误号和错误消息。</font><font style="vertical-align: inherit;">错误编号为0并且消息是空字符串意味着</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有错误</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果该
               </font></font><code class="literal">LAST_ERROR_MESSAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值不为空，则错误值也会出现在从站的错误日志中。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              发布</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER语法"><code class="literal">RESET MASTER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#reset-slave" title="13.4.2.4 RESET SLAVE语法"><code class="literal">RESET SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置这些列中显示的值。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在</font></font><code class="literal">LAST_ERROR_NUMBER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">LAST_ERROR_MESSAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">显示的所有错误代码和消息
               </font><font style="vertical-align: inherit;">对应于</font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#error-messages-server" title="B.3服务器错误代码和消息"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.3节“服务器错误代码和消息”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出的错误值
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_ERROR_TIMESTAMP</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">YYMMDD HH:MM:SS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化</font><font style="vertical-align: inherit;">
              的时间戳</font><font style="vertical-align: inherit;">，显示最近发生的SQL /协调器错误的时间。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列和</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列</font><font style="vertical-align: inherit;">之间的对应关系
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Correspondence between replication_applier_status_by_coordinator columns and SHOW SLAVE STATUS columns"><colgroup><col width="60%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><code class="literal">replication_applier_status_by_coordinator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
              <th scope="col"><code class="literal">SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">THREAD_ID</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">SERVICE_STATE</code></td>
              <td><code class="literal">Slave_SQL_Running</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_NUMBER</code></td>
              <td><code class="literal">Last_SQL_Errno</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_MESSAGE</code></td>
              <td><code class="literal">Last_SQL_Error</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_TIMESTAMP</code></td>
              <td><code class="literal">Last_SQL_Error_Timestamp</code></td>
</tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-applier-status-by-worker-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.6 replication_applier_status_by_worker表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970914944"></a><a class="indexterm" name="idm140527970913440"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果从站不是多线程的，则此表显示应用程序线程的状态。</font><font style="vertical-align: inherit;">否则，从站使用多个工作线程和一个协调程序线程来管理它们，并且此表显示工作线程的状态。</font><font style="vertical-align: inherit;">对于多线程从站，该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-coordinator-table" title="25.11.11.5 replication_applier_status_by_coordinator表"><code class="literal">replication_applier_status_by_coordinator</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表显示协调器线程的状态。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">replication_applier_status_by_worker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此行正在显示的复制通道。</font><font style="vertical-align: inherit;">总是有一个默认的复制通道，可以添加更多的复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">WORKER_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              工作者标识符（与</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的</font></font><code class="literal">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
               </font><font style="vertical-align: inherit;">相同的值
               </font></font><code class="literal">mysql.slave_worker_info</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">之后
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#stop-slave" title="13.4.2.7 STOP SLAVE语法"><code class="literal">STOP SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列变为
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但
               </font></font><code class="literal">WORKER_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被保留。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              工作线程标识符。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SERVICE_STATE</code>
            </p><p>
              <code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（线程存在并处于活动状态或空闲状态）或</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（线程不再存在）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_SEEN_TRANSACTION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              工人上次看到的交易。</font><font style="vertical-align: inherit;">工作人员不一定应用此交易，因为它可能仍在进行此项交易。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_mode"><code class="literal">gtid_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量值为</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则此
               </font></font><code class="literal">ANONYMOUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列为，表示事务不具有全局事务标识符（GTID），并且仅由文件和位置标识。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_mode"><code class="literal">gtid_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，列值定义如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  如果没有执行事务，则该列为空。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  事务执行完毕后，该列</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_next"><code class="literal">gtid_next</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">立即</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_next"><code class="literal">gtid_next</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置。</font><font style="vertical-align: inherit;">从这一刻起，该列总是显示一个GTID。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  GTID被保留直到下一个事务被执行。</font><font style="vertical-align: inherit;">如果发生错误，则列值是发生错误时工作人员执行的事务的GTID。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  当此工作线程拾取下一个GTID日志事件时，此列将</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_next"><code class="literal">gtid_next</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_next"><code class="literal">gtid_next</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">后立即
                   </font><font style="vertical-align: inherit;">更新
                   </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
              <code class="literal">LAST_ERROR_NUMBER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">LAST_ERROR_MESSAGE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              导致工作线程停止的最新错误的错误号和错误消息。</font><font style="vertical-align: inherit;">错误编号0和空字符串的消息表示</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有错误</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果该
               </font></font><code class="literal">LAST_ERROR_MESSAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值不为空，则错误值也会出现在从站的错误日志中。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              发布</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER语法"><code class="literal">RESET MASTER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#reset-slave" title="13.4.2.4 RESET SLAVE语法"><code class="literal">RESET SLAVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置这些列中显示的值。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在</font></font><code class="literal">LAST_ERROR_NUMBER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">LAST_ERROR_MESSAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">显示的所有错误代码和消息
               </font><font style="vertical-align: inherit;">对应于</font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#error-messages-server" title="B.3服务器错误代码和消息"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.3节“服务器错误代码和消息”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出的错误值
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_ERROR_TIMESTAMP</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">YYMMDD HH:MM:SS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式中</font><font style="vertical-align: inherit;">
              的时间戳</font><font style="vertical-align: inherit;">，显示最近一次工人错误发生的时间。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-applier-status-by-worker-table" title="25.11.11.6 replication_applier_status_by_worker表"><code class="literal">replication_applier_status_by_worker</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了</font></font><code class="literal">replication_applier_status_by_worker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列和</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-slave-status" title="13.7.5.34 SHOW SLAVE STATUS语法"><code class="literal">SHOW SLAVE STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列</font><font style="vertical-align: inherit;">之间的对应关系
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Correspondence between replication_applier_status_by_worker columns and SHOW SLAVE STATUS columns"><colgroup><col width="60%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><code class="literal">replication_applier_status_by_worker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
              <th scope="col"><code class="literal">SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 柱</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">WORKER_ID</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">THREAD_ID</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">SERVICE_STATE</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_SEEN_TRANSACTION</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_NUMBER</code></td>
              <td><code class="literal">Last_SQL_Errno</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_MESSAGE</code></td>
              <td><code class="literal">Last_SQL_Error</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">LAST_ERROR_TIMESTAMP</code></td>
              <td><code class="literal">Last_SQL_Error_Timestamp</code></td>
</tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-group-members-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.7 replication_group_members表</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此表显示复制组成员的网络和状态信息。</font><font style="vertical-align: inherit;">显示的网络地址是用于将客户端连接到组的地址，不应与成员指定的成员内部组通信地址混淆
           </font></font><a class="link" href="/mysql-5.7-google-zh/group-replication.html#sysvar_group_replication_local_address"><code class="literal">group_replication_local_address</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">replication_group_members</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              组复制通道的名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MEMBER_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此会员的标识符; </font><font style="vertical-align: inherit;">与服务器UUID相同。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MEMBER_HOST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此成员的网络地址（主机名或IP地址）。</font><font style="vertical-align: inherit;">取自成员的
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_hostname"><code class="literal">hostname</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MEMBER_PORT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              服务器正在侦听的端口。</font><font style="vertical-align: inherit;">取自成员的</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_port"><code class="literal">port</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MEMBER_STATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此成员的当前状态; </font><font style="vertical-align: inherit;">可以是以下任何一种：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">OFFLINE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：组复制插件已安装，但尚未启动。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">RECOVERING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：服务器已加入正在检索数据的组。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">ONLINE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：成员处于完全运行状态。
</font></font></p></li></ul>
</div>
</li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-group-members-table" title="25.11.11.7 replication_group_members表"><code class="literal">replication_group_members</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-group-member-stats-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.11.8 replication_group_member_stats表</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此表显示MySQL组复制成员的统计信息。</font><font style="vertical-align: inherit;">只有在组复制运行时才会填充它。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">replication_group_member_stats</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">CHANNEL_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              组复制通道的名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">VIEW_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该组的当前视图标识符。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MEMBER_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此会员的标识符; </font><font style="vertical-align: inherit;">与服务器UUID相同。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_TRANSACTIONS_IN_QUEUE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              正在等待认证的交易数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_TRANSACTIONS_CHECKED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此会员已通过认证的交易数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_CONFLICTS_DETECTED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              负面认证的交易数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_TRANSACTIONS_ROWS_VALIDATING</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              可用于认证但未被垃圾收集的事务行数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TRANSACTIONS_COMMITTED_ALL_MEMBERS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一组稳定的团体交易。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_CONFLICT_FREE_TRANSACTION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              最新交易认证无冲突。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#replication-group-member-stats-table" title="25.11.11.8 replication_group_member_stats表"><code class="literal">replication_group_member_stats</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-lock-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.12性能模式锁定表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.12.1 metadata_locks表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.12.2 table_handles表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式通过这些表显示锁信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：持有和请求元数据锁
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：持有和请求表锁
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下各节将更详细地介绍这些表格。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="metadata-locks-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.12.1 metadata_locks表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527970774288"></a><a class="indexterm" name="idm140527970772832"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式通过</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">公开元数据锁定信息</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              已被授予的锁（显示哪些会话拥有哪些当前元数据锁）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              已请求但尚未授予的锁（显示哪些会话正在等待哪些元数据锁）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              锁定已被死锁检测器终止或超时并正在等待请求会话的锁定请求被丢弃的请求
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过此信息，您可以了解会话之间的元数据锁定依赖关系。</font><font style="vertical-align: inherit;">您不仅可以看到会话正在等待哪个锁，而且当前哪个会话持有该锁。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表是只读的，无法更新。</font><font style="vertical-align: inherit;">它默认是自动调整的; </font><font style="vertical-align: inherit;">要配置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_metadata_locks"><code class="literal">performance_schema_max_metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          元数据锁定仪器使用</font></font><code class="literal">wait/lock/metadata/sql/mdl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认禁用</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">仪器。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要在服务器启动时控制元数据锁定工具的状态，请在</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用如下所示的行
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              启用：
            </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器= '等待/锁定/元数据/ SQL / MDL = ON'</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              禁用：
            </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器= '等待/锁定/元数据/ SQL / MDL = OFF'</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要在运行时控制元数据锁定工具状态，请更新</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              启用：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='YES'，TIMED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='wait / lock / metadata / sql / mdl';</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              禁用：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='NO'，TIMED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE NAME ='wait / lock / metadata / sql / mdl';</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表内容如下，使用</font></font><code class="literal">LOCK_STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列来指示每个锁的状态：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当请求并立即获取元数据锁时，</font></font><code class="literal">GRANTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将插入</font><font style="vertical-align: inherit;">状态为的行
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当请求元数据锁并且不立即获取时，将</font></font><code class="literal">PENDING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入</font><font style="vertical-align: inherit;">状态为的行
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当之前请求的元数据锁定被授予时，其行状态将更新为</font></font><code class="literal">GRANTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当元数据锁被释放时，其行被删除。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当一个未决的锁定请求被死锁检测器取消以解除死锁（</font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_lock_deadlock"><code class="literal">ER_LOCK_DEADLOCK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）时，其行状态将从更新</font></font><code class="literal">PENDING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
               </font></font><code class="literal">VICTIM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当挂起的锁定请求超时（</font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_lock_wait_timeout"><code class="literal">ER_LOCK_WAIT_TIMEOUT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）时，其行状态从更新</font></font><code class="literal">PENDING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              为</font></font><code class="literal">TIMEOUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当授予的锁或挂起的锁请求被终止时，其行状态将从</font></font><code class="literal">GRANTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font><font style="vertical-align: inherit;">更新</font></font><code class="literal">PENDING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code class="literal">KILLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">VICTIM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">TIMEOUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">KILLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态值是简短的，并表示锁定行即将被删除。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">PRE_ACQUIRE_NOTIFY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">POST_RELEASE_NOTIFY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态值是短暂的，并表示该元数据锁定subsubsystem的通知感兴趣的存储引擎，而进入锁定获取或离开锁释放操作。</font><font style="vertical-align: inherit;">这些状态值是在MySQL 5.7.11中添加的。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">OBJECT_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在元数据锁定子系统中使用的锁的类型：该值是一个</font></font><code class="literal">GLOBAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">FUNCTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">PROCEDURE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TRIGGER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（当前未用的）， ，
               </font></font><code class="literal">EVENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">COMMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">USER LEVEL LOCK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">TABLESPACE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">LOCKING
              SERVICE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              值</font></font><code class="literal">USER LEVEL LOCK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示使用获取的锁定
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">值
               </font></font><code class="literal">LOCKING SERVICE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示使用</font></font><a class="xref" href="/mysql-5.7-google-zh/extending-mysql.html#locking-service" title="28.3.1锁定服务"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第28.3.1节“锁定服务”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述的锁定服务获取的锁定
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_SCHEMA</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含该对象的模式。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              检测对象的名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仪器化对象的内存地址。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOCK_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              来自元数据锁定子系统的锁定类型。</font><font style="vertical-align: inherit;">值中的一个</font></font><code class="literal">INTENTION_EXCLUSIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SHARED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SHARED_HIGH_PRIO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SHARED_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SHARED_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SHARED_UPGRADABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SHARED_NO_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SHARED_NO_READ_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
               </font></font><code class="literal">EXCLUSIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOCK_DURATION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              来自元数据锁定子系统的锁定持续时间。</font><font style="vertical-align: inherit;">值中的一个</font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TRANSACTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">EXPLICIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该
               </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">TRANSACTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值表示的是在语句或事务结束分别发布，锁具。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">EXPLICIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值表示生存声明或事务结束并明确释放的锁，例如通过获取的全局锁</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#flush-tables-with-read-lock"><code class="literal">FLUSH TABLES WITH READ
              LOCK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOCK_STATUS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              来自元数据锁定子系统的锁定状态。</font><font style="vertical-align: inherit;">值中的一个</font></font><code class="literal">PENDING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">GRANTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">VICTIM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TIMEOUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">KILLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">PRE_ACQUIRE_NOTIFY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
               </font></font><code class="literal">POST_RELEASE_NOTIFY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">性能模式如前所述分配这些值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SOURCE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含产生事件的检测代码的源文件的名称以及检测发生的文件中的行号。</font><font style="vertical-align: inherit;">这使您可以检查源以确定涉及的代码。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OWNER_THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              请求元数据锁定的线程。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OWNER_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              请求元数据锁定的事件。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="table-handles-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.12.2 table_handles表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970670896"></a><a class="indexterm" name="idm140527970669408"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Performance Schema通过</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格显示</font><font style="vertical-align: inherit;">表锁定信息，</font><font style="vertical-align: inherit;">以显示当前对每个打开的表格句柄有效的表格锁定。</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报告表锁仪器记录的内容。</font><font style="vertical-align: inherit;">此信息显示哪个表处理服务器已打开，它们如何锁定以及通过哪些会话。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表是只读的，无法更新。</font><font style="vertical-align: inherit;">它默认是自动调整的; </font><font style="vertical-align: inherit;">要配置表大小，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_handles"><code class="literal">performance_schema_max_table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器启动时</font><font style="vertical-align: inherit;">设置
           </font><font style="vertical-align: inherit;">系统变量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">OBJECT_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表格由句柄打开。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_SCHEMA</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              包含该对象的模式。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              检测对象的名称。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OBJECT_INSTANCE_BEGIN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              内存中的表句柄地址。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OWNER_THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              拥有表格句柄的线程。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">OWNER_EVENT_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              导致表句柄被打开的事件。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">INTERNAL_LOCK</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SQL级别使用的表锁。</font><font style="vertical-align: inherit;">值中的一个
               </font></font><code class="literal">READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">READ WITH SHARED
              LOCKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">READ HIGH PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">READ NO INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">WRITE ALLOW
              WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">WRITE CONCURRENT
              INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">WRITE LOW PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code class="literal">WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关这些锁定类型的信息，请参阅
               </font></font><code class="filename">include/thr_lock.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源文件。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">EXTERNAL_LOCK</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              存储引擎级别使用的表锁。</font><font style="vertical-align: inherit;">值是</font></font><code class="literal">READ EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或之一
               </font></font><code class="literal">WRITE EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-system-variable-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.13性能模式系统变量表</font></font></h3>

</div>

</div>

</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">
          的值
           </font><font style="vertical-align: inherit;">影响这里描述的表中可用的信息。</font><font style="vertical-align: inherit;">有关详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中对该变量的描述</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL服务器维护许多系统变量，指出它如何配置（参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">系统变量信息在这些性能模式表中可用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">global_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：全局系统变量。</font><font style="vertical-align: inherit;">只需要全局值的应用程序应该使用此表。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当前会话的系统变量。</font><font style="vertical-align: inherit;">希望所有系统变量值用于其自己会话的应用程序应使用此表。</font><font style="vertical-align: inherit;">它包含其会话的会话变量以及没有会话副本的全局变量的值。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个活动会话的会话系统变量。</font><font style="vertical-align: inherit;">想要知道特定会话的会话变量值的应用程序应该使用此表。</font><font style="vertical-align: inherit;">它仅包含会话变量，由线程ID标识。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        会话变量表（</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）仅包含活动会话的信息，而不包含终止的会话。
      </font></font></p><p>
        <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Performance Schema系统变量表不受支持。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">global_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表有这些列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">VARIABLE_NAME</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量名称。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_VALUE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量值。</font><font style="vertical-align: inherit;">因为
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">global_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个列包含全局值。</font><font style="vertical-align: inherit;">因为
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个列包含当前会话有效的变量值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">THREAD_ID</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            定义系统变量的会话的线程标识符。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_NAME</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量名称。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_VALUE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            由该</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">命名的会话的会话变量值
             </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表仅包含有关前台线程的系统变量信息。</font><font style="vertical-align: inherit;">如果不是所有线程都由性能模式检测，则此表将丢失一些行。</font><font style="vertical-align: inherit;">在这种情况下，
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_thread_instances_lost"><code class="literal">Performance_schema_thread_instances_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        状态变量将大于零。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-status-variable-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.14性能模式状态变量表</font></font></h3>

</div>

</div>

</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">
          的值
           </font><font style="vertical-align: inherit;">影响这里描述的表中可用的信息。</font><font style="vertical-align: inherit;">有关详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中对该变量的描述</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL服务器维护许多状态变量，提供有关其操作的信息（请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-status-variables" title="5.1.7服务器状态变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.7节“服务器状态变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">状态变量信息在这些性能模式表中可用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">global_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：全局状态变量。</font><font style="vertical-align: inherit;">只需要全局值的应用程序应该使用此表。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当前会话的状态变量。</font><font style="vertical-align: inherit;">希望所有状态变量值用于其自己会话的应用程序应使用此表。</font><font style="vertical-align: inherit;">它包含其会话的会话变量以及没有会话副本的全局变量的值。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">status_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个活动会话的会话状态变量。</font><font style="vertical-align: inherit;">想要知道特定会话的会话变量值的应用程序应该使用此表。</font><font style="vertical-align: inherit;">它仅包含会话变量，由线程ID标识。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        还有汇总表，提供按帐户，主机名和用户名汇总的状态变量信息。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.10节“状态变量汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        会话变量表（</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">status_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）仅包含活动会话的信息，而不包含终止的会话。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能架构收集全局的状态变量的统计数据只适合线程
         </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中。</font><font style="vertical-align: inherit;">无论</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">如何，会话状态变量的统计信息都会被收集</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能模式不会收集</font><font style="vertical-align: inherit;">状态变量表中状态变量的</font><font style="vertical-align: inherit;">统计信息
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要获取全局和每会话语句执行计数</font><font style="vertical-align: inherit;">
        ，分别</font><font style="vertical-align: inherit;">使用
         </font><font style="vertical-align: inherit;">
        和
         </font><font style="vertical-align: inherit;">表。</font><font style="vertical-align: inherit;">例如：
      </font></font><code class="literal">Com_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT EVENT_NAME，COUNT_STAR</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM events_statements_summary_global_by_event_name</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE EVENT_NAME LIKE'statement / sql /％';</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">global_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表有这些列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">VARIABLE_NAME</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            状态变量名称。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_VALUE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            状态变量值。</font><font style="vertical-align: inherit;">因为
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">global_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个列包含全局值。</font><font style="vertical-align: inherit;">因为
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个列包含当前会话的变量值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">status_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含每个活动线程的状态。</font><font style="vertical-align: inherit;">它有这些列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">THREAD_ID</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在其中定义状态变量的会话的线程标识符。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_NAME</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            状态变量名称。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">VARIABLE_VALUE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            由该</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">命名的会话的会话变量值
             </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">status_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表仅包含有关前台线程的状态变量信息。</font><font style="vertical-align: inherit;">如果
         </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_instances"><code class="literal">performance_schema_max_thread_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        系统变量未被自动调整（设置为-1），并且检测到的线程对象的最大允许数量不大于后台线程的数量，则该表将为空。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        性能架构支持</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE
        TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量表如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">global_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：重置线程，帐户，主机和用户状态。</font><font style="vertical-align: inherit;">重置全局状态变量，但服务器不会重置的变量除外。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">： 不支持。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">status_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将所有线程的状态汇总为全局状态和帐户状态，然后重置线程状态。</font><font style="vertical-align: inherit;">如果未收集帐户统计信息，则会话状态将添加到主机和用户状态（如果收集主机和用户状态）。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果帐户，主机和用户的统计数据没有收集
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_accounts_size"><code class="literal">performance_schema_accounts_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_hosts_size"><code class="literal">performance_schema_hosts_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_users_size"><code class="literal">performance_schema_users_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量，分别被设置为0。
</font></font></p></li></ul>
</div>
<p>
        <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#flush-status"><code class="literal">FLUSH STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 将会话状态从所有活动会话添加到全局状态变量，重置所有活动会话的状态，并重置从断开会话聚合的帐户，主机和用户状态值。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15性能模式摘要表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.1等待事件汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.2阶段汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.3语句汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.4交易汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#objects-summary-global-by-type-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.5对象等待汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.6文件I / O汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#table-waits-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.7表I / O和锁等待汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.8套接字汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.9内存汇总表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.10状态变量汇总表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        汇总表提供了终止事件的汇总信息。</font><font style="vertical-align: inherit;">该组中的表格以不同方式总结事件数据。
</font></font></p>
<h4><a name="idm140527970528320"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待事件摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：等待每个帐户和事件名称的事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个主机名和事件名称等待事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：等待每个实例的事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：等待每个线程和事件名称的事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：等待每个用户名和事件名称的事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个事件名称等待事件
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970514816"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阶段摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为每个帐户和事件名称分阶段事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为每个主机名和事件名称分级事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：舞台等待每个线程和事件名称
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个用户名和事件名称的舞台事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：舞台等待每个事件名称
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970503360"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个帐户和事件名称的声明事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个模式和摘要值的语句事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个主机名和事件名称的语句事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_program</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个存储程序的语句事件（存储过程和函数，触发器和事件）
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个线程和事件名称的语句事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个用户名和事件名称的语句事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个事件名称的语句事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：准备好的语句实例和统计信息
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970485376"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个帐户和事件名称的交易事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个主机名和事件名称的事务事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个线程和事件名称的事务事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个用户名和事件名称的事务事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个事件名称的事务事件
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970473664"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象等待摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#objects-summary-global-by-type-table" title="25.11.15.5对象等待汇总表"><code class="literal">objects_summary_global_by_type</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：对象摘要
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970470560"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件I / O摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个事件名称的文件事件
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个文件实例的文件事件
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970465392"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表I / O和锁等待摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-index-usage-table" title="25.11.15.7.2 table_io_waits_summary_by_index_usage表"><code class="literal">table_io_waits_summary_by_index_usage</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：表I / O等待每个索引
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：表I / O每个表等待
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-lock-waits-summary-by-table-table" title="25.11.15.7.3 table_lock_waits_summary_by_table表"><code class="literal">table_lock_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：表锁等待每个表
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970458016"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">套接字摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：套接字等待和每个实例的I / O
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：套接字等待和每个事件名称的I / O
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970452816"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记忆汇总</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个帐户和事件名称的内存操作
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个主机和事件名称的内存操作
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个线程和事件名称的内存操作
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个用户的内存操作和事件名称
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个事件名称的全局内存操作
</font></font></p></li></ul>
</div>
<h4><a name="idm140527970441424"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量摘要</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_account</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个帐户的状态变量
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_host</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个主机名的状态变量
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_user</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：每个用户名称的状态变量
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        每个汇总表都具有分组列，这些列可确定如何对要汇总的数据进行分组，以及包含汇总值的汇总列。</font><font style="vertical-align: inherit;">以类似方式汇总事件的表格通常具有相似的汇总列集合，并且仅在用于确定事件如何汇总的分组列中有所不同。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        汇总表可以被截断
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通常，效果是将摘要列重置为0或
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不删除行。</font><font style="vertical-align: inherit;">这使您可以清除收集的值并重新启动聚合。</font><font style="vertical-align: inherit;">例如，在做出运行时配置更改后，这可能很有用。</font><font style="vertical-align: inherit;">此截断行为的例外情况在个别摘要表部分中注明。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="wait-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.1等待事件汇总表</font></font></h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140527970429408"></a><a class="indexterm" name="idm140527970427920"></a><a class="indexterm" name="idm140527970426400"></a><a class="indexterm" name="idm140527970424880"></a><a class="indexterm" name="idm140527970423360"></a><a class="indexterm" name="idm140527970421856"></a><a class="indexterm" name="idm140527970420352"></a><a class="indexterm" name="idm140527970418832"></a><a class="indexterm" name="idm140527970417312"></a><a class="indexterm" name="idm140527970415792"></a><a class="indexterm" name="idm140527970414272"></a><a class="indexterm" name="idm140527970412752"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护用于收集当前和最近等待事件的表格，并汇总汇总表中的信息。
          </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-wait-tables" title="25.11.4性能模式等待事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.4节“性能模式等待事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述了等待摘要所基于的事件。</font><font style="vertical-align: inherit;">有关等待事件的内容，当前和最近的等待事件表以及如何控制默认情况下禁用的等待事件收集的信息，请参阅此讨论。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例等待事件摘要信息：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM events_waits_summary_global_by_event_name\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 6. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    EVENT_NAME：wait / synch / mutex / sql / BINARY_LOG :: LOCK_index</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    COUNT_STAR：8</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_TIMER_WAIT：2119302</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MIN_TIMER_WAIT：196092</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVG_TIMER_WAIT：264912</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MAX_TIMER_WAIT：569421</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 9. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    EVENT_NAME：wait / synch / mutex / sql / hash_filo :: lock</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    COUNT_STAR：69</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_TIMER_WAIT：16848828</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MIN_TIMER_WAIT：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVG_TIMER_WAIT：244185</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MAX_TIMER_WAIT：735345</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个等待事件摘要表都有一个或多个分组列来指示表格如何聚合事件。</font><font style="vertical-align: inherit;">事件名称是指</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中事件工具的名称
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列。</font><font style="vertical-align: inherit;">每行汇总给定帐户（用户和主机组合）和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定主机和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称和对象的事件。</font><font style="vertical-align: inherit;">如果使用工具创建多个实例，则每个实例都有一个唯一
               </font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，并在此表中分别进行汇总。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定线程和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_waits_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定用户和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称的事件。</font><font style="vertical-align: inherit;">仪器可能用于创建仪器化对象的多个实例。</font><font style="vertical-align: inherit;">例如，如果有为每个连接创建的互斥体的工具，则存在与连接一样多的实例。</font><font style="vertical-align: inherit;">仪器的总结行总结了所有这些情况。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个等待事件汇总表都具有包含汇总值的汇总列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_STAR</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              汇总事件的数量。</font><font style="vertical-align: inherit;">该值包括所有事件，无论是计时还是不计时。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SUM_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              汇总的定时事件的总等待时间。</font><font style="vertical-align: inherit;">此值仅为定时事件计算，因为非定时事件的等待时间为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">其他</font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              值</font><font style="vertical-align: inherit;">也是如此
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MIN_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              汇总的定时事件的最短等待时间。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">AVG_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              汇总的定时事件的平均等待时间。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">MAX_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              汇总的定时事件的最长等待时间。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于等待汇总表。</font><font style="vertical-align: inherit;">它有这些影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于未由帐户，主机或用户汇总的汇总表，截断将汇总列重置为零而不是删除行。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于由帐户，主机或用户聚合的摘要表，截断会删除没有连接的帐户，主机或用户的行，并将其余行的摘要列重置为零。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此外，每个由帐户，主机，用户或线程聚合的等待汇总表都会通过截断它所依赖的连接表来隐式截断，或截断它
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><code class="literal">events_waits_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能架构连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="stage-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.2阶段汇总表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970361808"></a><a class="indexterm" name="idm140527970360288"></a><a class="indexterm" name="idm140527970358768"></a><a class="indexterm" name="idm140527970357248"></a><a class="indexterm" name="idm140527970355728"></a><a class="indexterm" name="idm140527970354208"></a><a class="indexterm" name="idm140527970352688"></a><a class="indexterm" name="idm140527970351168"></a><a class="indexterm" name="idm140527970349648"></a><a class="indexterm" name="idm140527970348128"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护用于收集当前和最近阶段事件的表格，并汇总汇总表中的信息。
          </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-stage-tables" title="25.11.5性能模式阶段事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.5节“性能模式阶段事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述阶段摘要所基于的事件。</font><font style="vertical-align: inherit;">有关阶段事件的内容，当前和最近的阶段事件表以及如何控制阶段事件收集的信息，请参阅该讨论。默认情况下禁用阶段事件收集。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例舞台活动摘要信息：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM events_stages_summary_global_by_event_name\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 5. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    EVENT_NAME：舞台/ sql /检查权限</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    COUNT_STAR：57</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_TIMER_WAIT：26501888880</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MIN_TIMER_WAIT：7317456</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVG_TIMER_WAIT：464945295</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MAX_TIMER_WAIT：12858936792</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 9. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    EVENT_NAME：舞台/ sql /关闭表</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    COUNT_STAR：37</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_TIMER_WAIT：662606568</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MIN_TIMER_WAIT：1593864</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVG_TIMER_WAIT：17907891</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MAX_TIMER_WAIT：437977248</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个阶段摘要表都有一个或多个分组列来指示表格如何聚合事件。</font><font style="vertical-align: inherit;">事件名称是指</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中事件工具的名称
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列。</font><font style="vertical-align: inherit;">每行汇总给定帐户（用户和主机组合）和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定主机和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定线程和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定用户和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称的事件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个阶段汇总表具有包含聚合值这些摘要列：</font></font><code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MIN_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">AVG_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><code class="literal">MAX_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些列类似于等待事件汇总表中相同名称的列（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.1节“等待事件汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），不同之处在于阶段汇总表汇总来自事件</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-current-table" title="25.11.5.1 events_stages_current表"><code class="literal">events_stages_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而非
           </font><font style="vertical-align: inherit;">汇总事件
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于阶段汇总表。</font><font style="vertical-align: inherit;">它有这些影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于未由帐户，主机或用户汇总的汇总表，截断将汇总列重置为零而不是删除行。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于由帐户，主机或用户聚合的摘要表，截断会删除没有连接的帐户，主机或用户的行，并将其余行的摘要列重置为零。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此外，每个由帐户，主机，用户或线程汇总的阶段汇总表都会通过截断它所依赖的连接表或其截断来隐式截断
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#stage-summary-tables" title="25.11.15.2阶段汇总表"><code class="literal">events_stages_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能架构连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="statement-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.3语句汇总表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970307072"></a><a class="indexterm" name="idm140527970305536"></a><a class="indexterm" name="idm140527970304000"></a><a class="indexterm" name="idm140527970302480"></a><a class="indexterm" name="idm140527970300960"></a><a class="indexterm" name="idm140527970299440"></a><a class="indexterm" name="idm140527970297920"></a><a class="indexterm" name="idm140527970296400"></a><a class="indexterm" name="idm140527970294880"></a><a class="indexterm" name="idm140527970293360"></a><a class="indexterm" name="idm140527970291840"></a><a class="indexterm" name="idm140527970290320"></a><a class="indexterm" name="idm140527970288800"></a><a class="indexterm" name="idm140527970287280"></a><a class="indexterm" name="idm140527970285760"></a><a class="indexterm" name="idm140527970284256"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护用于收集当前和最近语句事件的表格，并汇总汇总表中的信息。
          </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-tables" title="25.11.6性能架构语句事件表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.6节“性能模式语句事件表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          描述了语句摘要所基于的事件。</font><font style="vertical-align: inherit;">有关语句事件的内容，当前和最近的语句事件表以及如何控制语句事件收集的信息，请参见该讨论。默认情况下部分禁用语句事件收集。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例语句事件摘要信息：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM events_statements_summary_global_by_event_name\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 EVENT_NAME：statement / sql / select</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 COUNT_STAR：25</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             SUM_TIMER_WAIT：1535983999000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             MIN_TIMER_WAIT：209823000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             AVG_TIMER_WAIT：61439359000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             MAX_TIMER_WAIT：1363397650000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SUM_LOCK_TIME：20186000000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 SUM_ERRORS：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               SUM_WARNINGS：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          SUM_ROWS_AFFECTED：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SUM_ROWS_SENT：388</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          SUM_ROWS_EXAMINED：370</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_CREATED_TMP_DISK_TABLES：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     SUM_CREATED_TMP_TABLES：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       SUM_SELECT_FULL_JOIN：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SUM_SELECT_FULL_RANGE_JOIN：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           SUM_SELECT_RANGE：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     SUM_SELECT_RANGE_CHECK：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            SUM_SELECT_SCAN：6</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      SUM_SORT_MERGE_PASSES：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             SUM_SORT_RANGE：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SUM_SORT_ROWS：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SUM_SORT_SCAN：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          SUM_NO_INDEX_USED：6</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     SUM_NO_GOOD_INDEX_USED：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个语句汇总表都有一个或多个分组列来指示表格如何汇总事件。</font><font style="vertical-align: inherit;">事件名称是指</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中事件工具的名称
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列。</font><font style="vertical-align: inherit;">每行汇总给定帐户（用户和主机组合）和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">SCHEMA_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行总结每个模式和摘要值的事件。</font><font style="vertical-align: inherit;">（该
               </font></font><code class="literal">DIGEST_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列包含相应的规范化语句摘要文本，但既不是分组也不是摘要列。）
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              服务器启动时会自动调整表中的最大行数。</font><font style="vertical-align: inherit;">要明确设置此最大值，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size"><code class="literal">performance_schema_digests_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在服务器启动时</font><font style="vertical-align: inherit;">设置
               </font><font style="vertical-align: inherit;">系统变量。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定主机和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_program</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定存储程序（存储过程或函数，触发器或事件）的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定线程和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定用户和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总了给定预备陈述的事件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个语句汇总表的这些汇总列都包含汇总值（除了注明的例外）：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列类似于等待事件汇总表中相同名称的列（请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.1节“等待事件汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），不同之处在于语句汇总表汇总了事件</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              而非
               </font><font style="vertical-align: inherit;">汇总事件
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表没有这些列。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SUM_<em class="replaceable"><code>xxx</code></em></code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表格中</font><font style="vertical-align: inherit;">
              相应</font></font><em class="replaceable"><code>xxx</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
               </font><font style="vertical-align: inherit;">的聚合
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">SUM_LOCK_TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              并且</font></font><code class="literal">SUM_ERRORS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在声明汇总表列的骨料
               </font></font><code class="literal">LOCK_TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">ERRORS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格包含以下附加摘要列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">FIRST_SEEN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">LAST_SEEN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              指示具有给定摘要值的语句何时首次出现和最近出现的时间戳。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_program</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格包含以下附加摘要列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_STATEMENTS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_STATEMENTS_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_STATEMENTS_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_STATEMENTS_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_STATEMENTS_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有关存储程序执行期间调用的嵌套语句的统计信息。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格包含以下附加摘要列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_EXECUTE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              执行准备报表的汇总统计数据。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于语句汇总表。</font><font style="vertical-align: inherit;">它有这些影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              因为
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它删除了行。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于未由帐户，主机或用户汇总的其他汇总表，截断将汇总列重置为零而不是删除行。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于由帐户，主机或用户聚合的其他汇总表，截断将删除没有连接的帐户，主机或用户的行，并将其余行中的汇总列重置为零。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此外，每个由帐户，主机，用户或线程汇总的语句汇总表都会通过截断它所依赖的连接表或其截断来隐式截断
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能架构连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="statement-summary-tables-aggregation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明摘要汇总规则</font></font></h5>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><code class="literal">statements_digest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用者已启用，则</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在语句完成时按以下方式进行</font><font style="vertical-align: inherit;">聚合
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">聚合基于</font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为语句计算</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果
                 </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                一行已经存在，并且刚刚完成的语句的摘要值，则语句的统计信息将聚合到该行。</font><font style="vertical-align: inherit;">该
                 </font></font><code class="literal">LAST_SEEN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列更新为当前时间。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果没有行具有刚刚完成的语句的摘要值，并且表未满，则会为该语句创建一个新行。</font><font style="vertical-align: inherit;">该
                 </font></font><code class="literal">FIRST_SEEN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                 </font></font><code class="literal">LAST_SEEN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列初始化为当前时间。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果没有行具有刚刚完成的语句的语句摘要值，并且表已满，那么刚刚完成的语句的统计信息将添加到</font><font style="vertical-align: inherit;">带有</font><font style="vertical-align: inherit;">= </font><font style="vertical-align: inherit;">的特殊</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全部捕获</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行中</font><font style="vertical-align: inherit;">，该</font><font style="vertical-align: inherit;">行将
                 </font><font style="vertical-align: inherit;">在必要时创建。</font><font style="vertical-align: inherit;">如果该行已创建，则</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">和
                 </font><font style="vertical-align: inherit;">列将使用当前时间进行初始化。</font><font style="vertical-align: inherit;">否则，该
                 </font><font style="vertical-align: inherit;">列将使用当前时间进行更新。
</font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><code class="literal">FIRST_SEEN</code><font style="vertical-align: inherit;"></font><code class="literal">LAST_SEEN</code><font style="vertical-align: inherit;"></font><code class="literal">LAST_SEEN</code><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            带有</font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=
             </font><font style="vertical-align: inherit;">的行</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保持不变，因为性能模式表由于内存限制而具有最大大小。</font><font style="vertical-align: inherit;">即使汇总表已满，使用常见的</font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">其他</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">存储区</font><font style="vertical-align: inherit;">，</font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行允许不匹配其他行的摘要进行计数
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此行可帮助您评估摘要摘要是否具有代表性：
</font></font><span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                A </font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                具有</font></font><code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示所有摘要的5％的值的</font><font style="vertical-align: inherit;">行</font><font style="vertical-align: inherit;">表明摘要摘要表非常具有代表性; </font><font style="vertical-align: inherit;">其他行覆盖了95％的报表。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                A </font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                具有</font></font><code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表所有摘要的50％的值的</font><font style="vertical-align: inherit;">行</font><font style="vertical-align: inherit;">表明摘要摘要表不是非常具有代表性; </font><font style="vertical-align: inherit;">其他行只覆盖了一半的陈述。</font><font style="vertical-align: inherit;">最有可能的是，DBA应该增加最大表大小，以便更多的</font></font><code class="literal">DIGEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=
                 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行中计数的行将被计​​入更具体的行中。</font><font style="vertical-align: inherit;">为此，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size"><code class="literal">performance_schema_digests_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                在服务器启动时</font><font style="vertical-align: inherit;">将
                 </font><font style="vertical-align: inherit;">系统变量设置为更大的值。</font><font style="vertical-align: inherit;">默认大小是200。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="statement-summary-tables-stored-programs"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储程序仪表行为</font></font></h5>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表中
             </font><font style="vertical-align: inherit;">启用检测的存储程序类型，请</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_program</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            按如下方式维护存储程序的统计信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                首次在服务器中使用时，会为对象添加一行。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                对象被删除时，对象的行将被删除。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                执行时，统计信息会聚合在对象的行中。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            另请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-pre-filtering" title="25.4.3事件预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.3节“事件预过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="transaction-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.4交易汇总表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970158096"></a><a class="indexterm" name="idm140527970156576"></a><a class="indexterm" name="idm140527970155056"></a><a class="indexterm" name="idm140527970153536"></a><a class="indexterm" name="idm140527970152016"></a><a class="indexterm" name="idm140527970150480"></a><a class="indexterm" name="idm140527970148944"></a><a class="indexterm" name="idm140527970147424"></a><a class="indexterm" name="idm140527970145904"></a><a class="indexterm" name="idm140527970144384"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护用于收集当前和最近事务事件的表格，并汇总汇总表中的信息。
          </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-transaction-tables" title="25.11.7性能模式事务表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.7节“性能模式事务表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          描述事务摘要所基于的事件。</font><font style="vertical-align: inherit;">有关事务事件的内容，当前和最近的事务事件表以及如何控制事务处理事件收集的信息，请参见该讨论。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          交易事件摘要信息示例：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM events_transactions_summary_global_by_event_name LIMIT 1\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          EVENT_NAME：交易</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          COUNT_STAR：5</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      SUM_TIMER_WAIT：19550092000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MIN_TIMER_WAIT：2954148000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      AVG_TIMER_WAIT：3910018000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MAX_TIMER_WAIT：5486275000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    COUNT_READ_WRITE：5</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_TIMER_READ_WRITE：19550092000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MIN_TIMER_READ_WRITE：2954148000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVG_TIMER_READ_WRITE：3910018000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MAX_TIMER_READ_WRITE：5486275000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     COUNT_READ_ONLY：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SUM_TIMER_READ_ONLY：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 MIN_TIMER_READ_ONLY：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 AVG_TIMER_READ_ONLY：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 MAX_TIMER_READ_ONLY：0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个事务摘要表都有一个或多个分组列来指示表格如何聚合事件。</font><font style="vertical-align: inherit;">事件名称是指</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中事件工具的名称
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定帐户（用户和主机组合）和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定主机和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定线程和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定用户和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称的事件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个交易汇总表都包含汇总值的汇总列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列类似于等待事件汇总表中相同名称的列（请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.1节“等待事件汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），除了事务汇总表汇总事件</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-current-table" title="25.11.7.1 events_transactions_current表"><code class="literal">events_transactions_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              而非
               </font><font style="vertical-align: inherit;">汇总事件
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些列汇总了读写和只读事务。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_READ_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_READ_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_READ_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_READ_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_READ_WRITE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些</font></font><code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列</font><font style="vertical-align: inherit;">和
               </font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">类似</font><font style="vertical-align: inherit;">，但仅概述读写事务。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_READ_ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_READ_ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_READ_ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_READ_ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_READ_ONLY</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些</font></font><code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列</font><font style="vertical-align: inherit;">和
               </font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">类似</font><font style="vertical-align: inherit;">，但仅总结只读事务。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于交易汇总表。</font><font style="vertical-align: inherit;">它有这些影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于未由帐户，主机或用户汇总的汇总表，截断将汇总列重置为零而不是删除行。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于由帐户，主机或用户聚合的摘要表，截断会删除没有连接的帐户，主机或用户的行，并将其余行的摘要列重置为零。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此外，每个由帐户，主机，用户或线程聚合的事务摘要表都会通过截断它所依赖的连接表来隐式截断，或者截断它
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#transaction-summary-tables" title="25.11.15.4交易汇总表"><code class="literal">events_transactions_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能架构连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="transaction-summary-tables-aggregation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事务汇总规则</font></font></h5>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            事务事件收集不考虑隔离级别，访问模式或自动提交模式。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            读写事务通常比只读事务更占用资源，因此事务总结表包含用于读写和只读事务的单独聚合列。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            资源需求也可能因事务隔离级别而异。</font><font style="vertical-align: inherit;">但是，假设每个服务器只使用一个隔离级别，则不提供按隔离级别的聚合。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="objects-summary-global-by-type-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.5对象等待汇总表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970085040"></a><a class="indexterm" name="idm140527970083536"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#objects-summary-global-by-type-table" title="25.11.15.5对象等待汇总表"><code class="literal">objects_summary_global_by_type</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          聚合对象等待事件</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">表。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例对象等待事件摘要信息：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM objects_summary_global_by_type\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 3. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   OBJECT_TYPE：TABLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 OBJECT_SCHEMA：测试</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   OBJECT_NAME：t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    COUNT_STAR：3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_TIMER_WAIT：263126976</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MIN_TIMER_WAIT：1522272</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVG_TIMER_WAIT：87708678</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MAX_TIMER_WAIT：258428280</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 10. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   OBJECT_TYPE：TABLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 OBJECT_SCHEMA：mysql</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   OBJECT_NAME：用户</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    COUNT_STAR：14</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUM_TIMER_WAIT：365567592</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MIN_TIMER_WAIT：1141704</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVG_TIMER_WAIT：26111769</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MAX_TIMER_WAIT：334783032</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#objects-summary-global-by-type-table" title="25.11.15.5对象等待汇总表"><code class="literal">objects_summary_global_by_type</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表有这些分组列示意表如何聚集事件：</font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每行汇总给定对象的事件。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#objects-summary-global-by-type-table" title="25.11.15.5对象等待汇总表"><code class="literal">objects_summary_global_by_type</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          与</font><font style="vertical-align: inherit;">
          表格</font><font style="vertical-align: inherit;">具有相同的摘要列
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;">第25.11.15.1节“等待事件汇总表”</font></a><font style="vertical-align: inherit;">。
        </font></font><code class="literal">events_waits_summary_by_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于对象摘要表。</font><font style="vertical-align: inherit;">它将摘要列重置为零而不是删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="file-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.6文件I / O汇总表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527970066816"></a><a class="indexterm" name="idm140527970065312"></a><a class="indexterm" name="idm140527970063808"></a><a class="indexterm" name="idm140527970062304"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护汇总关于I / O操作信息的文件I / O汇总表。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例文件I / O事件摘要信息：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM file_summary_by_event_name\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 2. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               EVENT_NAME：wait / io / file / sql / binlog</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               COUNT_STAR：31</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           SUM_TIMER_WAIT：8243784888</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           MIN_TIMER_WAIT：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           AVG_TIMER_WAIT：265928484</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           MAX_TIMER_WAIT：6490658832</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM file_summary_by_instance\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 2. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                FILE_NAME：/var/mysql/share/english/errmsg.sys</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               EVENT_NAME：wait / io / file / sql / ERRMSG</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               EVENT_NAME：wait / io / file / sql / ERRMSG</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    OBJECT_INSTANCE_BEGIN：4686193384</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               COUNT_STAR：5</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           SUM_TIMER_WAIT：13990154448</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           MIN_TIMER_WAIT：26349624</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           AVG_TIMER_WAIT：2798030607</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           MAX_TIMER_WAIT：8150662536</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个文件I / O汇总表都有一个或多个分组列来指示表格如何汇总事件。</font><font style="vertical-align: inherit;">事件名称是指</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中事件工具的名称
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#file-summary-tables" title="25.11.15.6文件I / O汇总表"><code class="literal">file_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有
               </font></font><code class="literal">FILE_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定文件和事件名称的事件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个文件I / O汇总表都包含以下汇总值汇总列。</font><font style="vertical-align: inherit;">一些列更一般，并且其值与更细粒度列的值的总和相同。</font><font style="vertical-align: inherit;">通过这种方式，可以直接使用较高级别的聚合，而无需使用总计较低级别列的用户定义视图。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列汇总所有I / O操作。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MAX_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">SUM_NUMBER_OF_BYTES_READ</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列聚集所有的读操作，其中包括
               </font></font><code class="literal">FGETS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FGETC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">FREAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MAX_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">SUM_NUMBER_OF_BYTES_WRITE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列聚集所有的写操作，其中包括
               </font></font><code class="literal">FPUTS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FPUTC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">FPRINTF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">VFPRINTF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">FWRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">PWRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_MISC</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列聚集所有其他I / O操作，包括</font></font><code class="literal">CREATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">OPEN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">CLOSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">STREAM_OPEN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">STREAM_CLOSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">SEEK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">TELL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FLUSH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">STAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FSTAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">CHSIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">RENAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
               </font></font><code class="literal">SYNC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些操作没有字节计数。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于文件I / O汇总表。</font><font style="vertical-align: inherit;">它将摘要列重置为零而不是删除行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL服务器通过缓存从文件中读取的信息来使用多种技术来避免I / O操作，因此可能导致I / O事件的语句不会被执行。</font><font style="vertical-align: inherit;">您可以通过刷新缓存或重新启动服务器来重置其状态，以确保I / O确实发生。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="table-waits-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.7表I / O和锁等待汇总表</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下各节介绍表I / O和锁等待汇总表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-index-usage-table" title="25.11.15.7.2 table_io_waits_summary_by_index_usage表"><code class="literal">table_io_waits_summary_by_index_usage</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：表I / O等待每个索引
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：表I / O每个表等待
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-lock-waits-summary-by-table-table" title="25.11.15.7.3 table_lock_waits_summary_by_table表"><code class="literal">table_lock_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：表锁等待每个表
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="table-io-waits-summary-by-table-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.7.1 table_io_waits_summary_by_table表</font></font></h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969995984"></a><a class="indexterm" name="idm140527969994528"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表汇总了</font></font><code class="literal">wait/io/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器</font><font style="vertical-align: inherit;">生成的所有表I / O等待事件</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">分组是按桌子。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表有这些分组列示意表如何聚集事件：</font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
             </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些列与</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font><font style="vertical-align: inherit;">含义相同
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">他们标识该行适用的表。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            具有以下汇总值的汇总列。</font><font style="vertical-align: inherit;">如列说明中所示，某些列更一般，并且其值与更细粒度列的值的总和相同。</font><font style="vertical-align: inherit;">例如，聚合所有写入的列将保留聚合插入，更新和删除的相应列的总和。</font><font style="vertical-align: inherit;">通过这种方式，可以直接使用较高级别的聚合，而无需使用总计较低级别列的用户定义视图。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WAIT</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有I / O操作。</font><font style="vertical-align: inherit;">它们与相应的</font><font style="vertical-align: inherit;">
                列</font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的总和相同
                 </font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_READ</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有读取操作。</font><font style="vertical-align: inherit;">它们与相应</font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_FETCH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                列</font><font style="vertical-align: inherit;">的总和相同
                 </font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WRITE</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有写入操作。</font><font style="vertical-align: inherit;">他们是一样的相应的总和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                列。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_FETCH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_FETCH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_FETCH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_FETCH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_FETCH</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有提取操作。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_INSERT</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有插入操作。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_UPDATE</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有更新操作。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_DELETE</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有删除操作。
</font></font></p></li></ul>
</div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于表I / O汇总表。</font><font style="vertical-align: inherit;">它将摘要列重置为零而不是删除行。</font><font style="vertical-align: inherit;">截断此表也会截断
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-index-usage-table" title="25.11.15.7.2 table_io_waits_summary_by_index_usage表"><code class="literal">table_io_waits_summary_by_index_usage</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="table-io-waits-summary-by-index-usage-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.7.2 table_io_waits_summary_by_index_usage表</font></font></h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969938192"></a><a class="indexterm" name="idm140527969936672"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-index-usage-table" title="25.11.15.7.2 table_io_waits_summary_by_index_usage表"><code class="literal">table_io_waits_summary_by_index_usage</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表汇总了</font></font><code class="literal">wait/io/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器</font><font style="vertical-align: inherit;">生成的所有表索引I / O等待事件
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">分组由表索引。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列的
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-index-usage-table" title="25.11.15.7.2 table_io_waits_summary_by_index_usage表"><code class="literal">table_io_waits_summary_by_index_usage</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            几乎相同
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">唯一的区别是附加组列，
             </font></font><code class="literal">INDEX_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它对应于记录表I / O等待事件时使用的索引名称：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                值为</font></font><code class="literal">PRIMARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示表I / O使用主索引。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                值的</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意思是表I / O不使用索引。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                插入值被计入</font></font><code class="literal">INDEX_NAME =
                NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于表I / O汇总表。</font><font style="vertical-align: inherit;">它将摘要列重置为零而不是删除行。</font><font style="vertical-align: inherit;">该表也被表的截断截断
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-io-waits-summary-by-table-table" title="25.11.15.7.1 table_io_waits_summary_by_table表"><code class="literal">table_io_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            。</font><font style="vertical-align: inherit;">更改表的索引结构的DDL操作可能会导致重置每个索引的统计信息。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="table-lock-waits-summary-by-table-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.7.3 table_lock_waits_summary_by_table表</font></font></h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969918912"></a><a class="indexterm" name="idm140527969917456"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-lock-waits-summary-by-table-table" title="25.11.15.7.3 table_lock_waits_summary_by_table表"><code class="literal">table_lock_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表汇总了</font></font><code class="literal">wait/lock/table/sql/handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            仪器</font><font style="vertical-align: inherit;">生成的所有表锁定等待事件</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">分组是按桌子。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该表包含有关内部和外部锁的信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                内部锁对应于SQL层中的锁。</font><font style="vertical-align: inherit;">这目前通过呼叫实现
                 </font></font><code class="literal">thr_lock()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在事件行中，这些锁由</font></font><code class="literal">OPERATION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有以下值之一</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">进行区分
                 </font><font style="vertical-align: inherit;">：
              </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">读取正常</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用共享锁读取</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
读取高优先级</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
阅读没有插入</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写入允许写入</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写并发插入</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写入延迟</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写低优先级</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写正常</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                外部锁对应于存储引擎层中的锁。</font><font style="vertical-align: inherit;">这目前通过呼叫实现
                 </font></font><code class="literal">handler::external_lock()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在事件行中，这些锁由</font></font><code class="literal">OPERATION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有以下值之一</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">进行区分
                 </font><font style="vertical-align: inherit;">：
              </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读外部</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写入外部</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-lock-waits-summary-by-table-table" title="25.11.15.7.3 table_lock_waits_summary_by_table表"><code class="literal">table_lock_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表有这些分组列示意表如何聚集事件：</font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">OBJECT_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
             </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些列与</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-current-table" title="25.11.4.1 events_waits_current表"><code class="literal">events_waits_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font><font style="vertical-align: inherit;">含义相同
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">他们标识该行适用的表。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-lock-waits-summary-by-table-table" title="25.11.15.7.3 table_lock_waits_summary_by_table表"><code class="literal">table_lock_waits_summary_by_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            具有以下汇总值的汇总列。</font><font style="vertical-align: inherit;">如列描述中所示，某些列更一般，并且其值与更细粒度列的值的总和相同。</font><font style="vertical-align: inherit;">例如，聚合所有锁的列保存聚合读取和写入锁的相应列的总和。</font><font style="vertical-align: inherit;">通过这种方式，可以直接使用较高级别的聚合，而无需使用总计较低级别列的用户定义视图。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WAIT</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有锁定操作。</font><font style="vertical-align: inherit;">它们与相应的</font><font style="vertical-align: inherit;">
                列</font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的总和相同
                 </font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_READ</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总了所有读锁操作。</font><font style="vertical-align: inherit;">他们是一样的相应的总和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_READ_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_READ_WITH_SHARED_LOCKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_READ_HIGH_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_READ_NO_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                列。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WRITE</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总所有写锁操作。</font><font style="vertical-align: inherit;">他们是一样的相应的总和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_WRITE_ALLOW_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_WRITE_CONCURRENT_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_WRITE_LOW_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
                 </font></font><code class="literal"><em class="replaceable"><code>xxx</code></em>_WRITE_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                列。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_READ_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_READ_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_READ_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_READ_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_READ_NORMAL</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列聚合内部读取锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_READ_WITH_SHARED_LOCKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_READ_WITH_SHARED_LOCKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_READ_WITH_SHARED_LOCKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_READ_WITH_SHARED_LOCKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_READ_WITH_SHARED_LOCKS</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列聚合内部读取锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_READ_HIGH_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_READ_HIGH_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_READ_HIGH_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_READ_HIGH_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_READ_HIGH_PRIORITY</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列聚合内部读取锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_READ_NO_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_READ_NO_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_READ_NO_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_READ_NO_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_READ_NO_INSERT</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列聚合内部读取锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_READ_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_READ_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_READ_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_READ_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_READ_EXTERNAL</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总外部读取锁定。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_WRITE_ALLOW_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WRITE_ALLOW_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WRITE_ALLOW_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WRITE_ALLOW_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WRITE_ALLOW_WRITE</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总内部写锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_WRITE_CONCURRENT_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WRITE_CONCURRENT_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WRITE_CONCURRENT_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WRITE_CONCURRENT_INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WRITE_CONCURRENT_INSERT</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总内部写锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_WRITE_LOW_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WRITE_LOW_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WRITE_LOW_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WRITE_LOW_PRIORITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WRITE_LOW_PRIORITY</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总内部写锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_WRITE_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WRITE_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WRITE_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WRITE_NORMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WRITE_NORMAL</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总内部写锁。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">COUNT_WRITE_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">SUM_TIMER_WRITE_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">MIN_TIMER_WRITE_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">AVG_TIMER_WRITE_EXTERNAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                </font></font><code class="literal">MAX_TIMER_WRITE_EXTERNAL</code>
              </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                这些列汇总外部写锁。
</font></font></p></li></ul>
</div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于表锁定汇总表。</font><font style="vertical-align: inherit;">它将摘要列重置为零而不是删除行。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="socket-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.8套接字汇总表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969820560"></a><a class="indexterm" name="idm140527969819056"></a><a class="indexterm" name="idm140527969817552"></a><a class="indexterm" name="idm140527969816048"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些套接字汇总表汇总套接字操作的定时器和字节计数信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：由</font></font><code class="literal">wait/io/socket/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器为每个套接字仪器的所有套接字I / O操作</font><font style="vertical-align: inherit;">生成的聚合定时器和字节计数统计信息
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code class="literal">wait/io/socket/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器为每个套接字实例的所有套接字I / O操作</font><font style="vertical-align: inherit;">生成的聚合定时器和字节计数统计信息
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当连接终止时，</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与其相对应</font><font style="vertical-align: inherit;">的行将
               </font><font style="vertical-align: inherit;">被删除。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"></font><code class="literal">idle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当套接字正在等待来自客户端的下一个请求时，</font><font style="vertical-align: inherit;">
          套接字汇总表不会聚合由</font><font style="vertical-align: inherit;">事件</font><font style="vertical-align: inherit;">生成的
           </font><font style="vertical-align: inherit;">等待。</font><font style="vertical-align: inherit;">对于</font></font><code class="literal">idle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          事件聚合，请使用等待事件摘要表; </font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#wait-summary-tables" title="25.11.15.1等待事件汇总表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.15.1节“等待事件汇总表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个套接字汇总表都有一个或多个分组列来指示表汇总事件的方式。</font><font style="vertical-align: inherit;">事件名称是指</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中事件工具的名称
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定对象的事件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个套接字汇总表都包含这些汇总列的汇总值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_STAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_WAIT</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列汇总所有操作。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MAX_TIMER_READ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">SUM_NUMBER_OF_BYTES_READ</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列聚集所有接收操作（</font></font><code class="literal">RECV</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">RECVFROM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
               </font></font><code class="literal">RECVMSG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MAX_TIMER_WRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">SUM_NUMBER_OF_BYTES_WRITE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列汇总所有发送操作（</font></font><code class="literal">SEND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">SENDTO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
               </font></font><code class="literal">SENDMSG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SUM_TIMER_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MIN_TIMER_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">AVG_TIMER_MISC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">MAX_TIMER_MISC</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些列聚集所有其他套接字操作，如</font></font><code class="literal">CONNECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LISTEN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">ACCEPT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">CLOSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
               </font></font><code class="literal">SHUTDOWN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些操作没有字节计数。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-summary-tables" title="25.11.15.8套接字汇总表"><code class="literal">socket_summary_by_instance</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表还具有一个</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示类插座的列：
           </font></font><code class="literal">client_connection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">server_tcpip_socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">server_unix_socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，可以将此列分组，以隔离来自服务器侦听套接字的客户端活动。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">套接字汇总表是允许的。</font><font style="vertical-align: inherit;">除了
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，tt将摘要列重置为零而不是删除行。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="memory-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.9内存汇总表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969757520"></a><a class="indexterm" name="idm140527969756000"></a><a class="indexterm" name="idm140527969754480"></a><a class="indexterm" name="idm140527969752960"></a><a class="indexterm" name="idm140527969751440"></a><a class="indexterm" name="idm140527969749920"></a><a class="indexterm" name="idm140527969748400"></a><a class="indexterm" name="idm140527969746880"></a><a class="indexterm" name="idm140527969745360"></a><a class="indexterm" name="idm140527969743840"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能架构可以监测内存使用情况并汇总内存使用情况统计信息，并由以下因素详细说明：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用的内存类型（各种缓存，内部缓存等）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              线程，帐户，用户，主机间接执行内存操作
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能架构可以测试内存使用的以下几个方面
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用的内存大小
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              操作很重要
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              低水位和高水位
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          内存大小有助于理解或调整服务器的内存消耗。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          操作数有助于理解或调整服务器对内存分配器施加的整体压力，这会对性能产生影响。</font><font style="vertical-align: inherit;">分配一百万次的单个字节与单次分配一百万个字节不一样; </font><font style="vertical-align: inherit;">跟踪尺寸和计数可以揭示差异。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于检测工作负载峰值，总体工作负载稳定性和可能的​​内存泄漏，低水位和高水位标记至关重要。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          内存摘要表不包含计时信息，因为内存事件未定时。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关收集内存使用情况数据的信息，请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#memory-instrumentation-behavior" title="内存仪器行为"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存工具行为</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例记忆事件摘要信息：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM memory_summary_global_by_event_name</code></strong>
       <strong class="userinput"><code>WHERE EVENT_NAME = 'memory/sql/TABLE'\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  EVENT_NAME：memory / sql / TABLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 COUNT_ALLOC：1381</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  COUNT_FREE：924</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   SUM_NUMBER_OF_BYTES_ALLOC：2059873</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    SUM_NUMBER_OF_BYTES_FREE：1407432</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              LOW_COUNT_USED：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          CURRENT_COUNT_USED：457</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             HIGH_COUNT_USED：461</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    LOW_NUMBER_OF_BYTES_USED：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CURRENT_NUMBER_OF_BYTES_USED：652441</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   HIGH_NUMBER_OF_BYTES_USED：669269</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个内存摘要表都有一个或多个分组列来指示表格如何聚合事件。</font><font style="vertical-align: inherit;">事件名称是指</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中事件工具的名称
           </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_account_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定帐户（用户和主机组合）和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_host_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定主机和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定线程和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_user_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有</font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定用户和事件名称的事件。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              有一</font></font><code class="literal">EVENT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">每行汇总给定事件名称的事件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个内存摘要表都包含这些汇总列的汇总列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">COUNT_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">COUNT_FREE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              调用内存分配和无内存函数的总数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SUM_NUMBER_OF_BYTES_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">SUM_NUMBER_OF_BYTES_FREE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              已分配和已释放内存块的总计大小。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CURRENT_COUNT_USED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              尚未释放的当前分配块的总数。</font><font style="vertical-align: inherit;">这是一个便利的专栏，等于</font></font><code class="literal">COUNT_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
               </font></font><code class="literal">COUNT_FREE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">CURRENT_NUMBER_OF_BYTES_USED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当前分配的尚未释放的内存块的聚合大小。</font><font style="vertical-align: inherit;">这是一个便利的专栏，等于
               </font></font><code class="literal">SUM_NUMBER_OF_BYTES_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
               </font></font><code class="literal">SUM_NUMBER_OF_BYTES_FREE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOW_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">HIGH_COUNT_USED</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">CURRENT_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柱子</font><font style="vertical-align: inherit;">
              对应的低水位和高水位
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOW_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">HIGH_NUMBER_OF_BYTES_USED</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">CURRENT_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柱子</font><font style="vertical-align: inherit;">
              对应的低水位和高水位
               </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被允许用于内存汇总表。</font><font style="vertical-align: inherit;">它有这些影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              通常，截断会重置统计的基线，但不会更改服务器状态。</font><font style="vertical-align: inherit;">即，截断内存表不会释放内存。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">COUNT_FREE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过将每个计数器减少相同的值</font><font style="vertical-align: inherit;">而
               </font><font style="vertical-align: inherit;">重置为新的基线。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              同样，</font></font><code class="literal">SUM_NUMBER_OF_BYTES_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
               </font></font><code class="literal">SUM_NUMBER_OF_BYTES_FREE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置为新的基线。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOW_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
               </font></font><code class="literal">HIGH_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置为
               </font></font><code class="literal">CURRENT_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LOW_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
               </font></font><code class="literal">HIGH_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重置为
               </font></font><code class="literal">CURRENT_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此外，每个由帐户，主机，用户或线程聚合的内存摘要表都会通过截断它所依赖的连接表来隐式截断，或截断它
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-tables" title="25.11.8性能模式连接表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.8节“性能架构连接表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="memory-instrumentation-behavior"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存仪器行为</font></font></h5>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            记忆乐器在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">中列出
             </font><font style="vertical-align: inherit;">并具有表格的名称
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">大多数内存检测默认是禁用的。
          </font></font><code class="literal">memory/<em class="replaceable"><code>code_area</code></em>/<em class="replaceable"><code>instrument_name</code></em></code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以前缀命名的工具会
             </font></font><code class="literal">memory/performance_schema/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暴露在性能模式本身中为内部缓冲区分配了多少内存。</font><font style="vertical-align: inherit;">该
             </font></font><code class="literal">memory/performance_schema/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪器是建立在，始终处于启用状态，并且不能在启动或运行时被禁用。</font><font style="vertical-align: inherit;">内置存储器只能在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表格</font><font style="vertical-align: inherit;">中显示
             </font><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要在服务器启动时控制内存设备状态，请在</font></font><code class="filename">my.cnf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">使用如下所示的行</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                启用：
              </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器=“存储器/％= ON”</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                禁用：
              </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能架构仪器=“存储器/％= OFF”</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要在运行时控制内存工具状态，请更新
             </font><font style="vertical-align: inherit;">表中</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关工具的
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                启用：
              </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='YES'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在哪里像'内存/％';</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                禁用：
              </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDATE setup_instruments SET ENABLED ='NO'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在哪里像'内存/％';</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于内存仪器，</font><font style="vertical-align: inherit;">由于内存操作没有定时</font><font style="vertical-align: inherit;">，因此</font></font><code class="literal">TIMED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列入</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被忽略。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果稍后启用了禁用的内存检测功能，则可能由于缺少分配操作而计算空闲操作而导致明显的负分配。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当服务器中的线程执行已插装的内存分配时，这些规则适用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果线程未检测到或内存仪器未启用，则分配的内存块未检测到。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                否则（即线程和仪器都启用），分配的内存块将被检测。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于释放，这些规则适用于：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果一个线程被检测到，并且一个内存块没有被检测到，那么这个自由操作就不会被检测到; </font><font style="vertical-align: inherit;">没有统计数据被改变。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果一个线程没有被检测到，并且一个内存块被检测到，则自由操作被检测，并且统计信息被改变。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于每个线程统计信息，以下规则适用。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分配</font><font style="vertical-align: inherit;">了一个检测到的大小的内存块时
             </font><font style="vertical-align: inherit;">，性能模式会将这些更新更新到内存摘要表列中：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">COUNT_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：增加1
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">CURRENT_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：增加1
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">HIGH_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：增加如果
                 </font></font><code class="literal">CURRENT_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是新的最大值
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">SUM_NUMBER_OF_BYTES_ALLOC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">： 被...所提升 </font></font><em class="replaceable"><code>N</code></em>
              </p></li><li class="listitem"><p>
                <code class="literal">CURRENT_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">： 被...所提升 </font></font><em class="replaceable"><code>N</code></em>
              </p></li><li class="listitem"><p>
                <code class="literal">HIGH_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：增加如果</font></font><code class="literal">CURRENT_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是新的最大值
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当检测到的内存块被释放后，性能模式会将这些更新更新到内存汇总表列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">COUNT_FREE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：增加1
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">CURRENT_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：减1
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">LOW_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果</font></font><code class="literal">CURRENT_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是新的最小值，则
               </font><font style="vertical-align: inherit;">减少
                </font></font></p></li><li class="listitem"><p>
                <code class="literal">SUM_NUMBER_OF_BYTES_FREE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">： 被...所提升 </font></font><em class="replaceable"><code>N</code></em>
              </p></li><li class="listitem"><p>
                <code class="literal">CURRENT_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：减少 </font></font><em class="replaceable"><code>N</code></em>
              </p></li><li class="listitem"><p>
                <code class="literal">LOW_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果</font></font><code class="literal">CURRENT_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是新的最小值，则
 </font><font style="vertical-align: inherit;">减少</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于更高级别的聚合（全局，按帐户，按用户，按主机），适用于低水位和高水位的相同规则。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">LOW_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
                 </font></font><code class="literal">LOW_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是较低的估计。</font><font style="vertical-align: inherit;">性能模式报告的值保证小于或等于运行时有效使用的最低内存数或内存大小。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">HIGH_COUNT_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
                 </font></font><code class="literal">HIGH_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有更高的估计。</font><font style="vertical-align: inherit;">性能模式报告的值保证大于或等于在运行时有效使用的最大计数或内存大小。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于除汇总表以外的较低估计
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，如果在线程之间传输内存所有权，则值可能会变为负值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这是一个估算计算的例子; </font><font style="vertical-align: inherit;">但请注意，估算的实施情况可能会发生变化：
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            线程1在执行期间使用1MB到2MB范围内的内存，如</font><font style="vertical-align: inherit;">
            表</font></font><code class="literal">LOW_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">HIGH_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
             </font><font style="vertical-align: inherit;">所报告的那样
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            正如报道的，线程2在执行期间使用10MB到12MB范围内的内存。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当这两个线程属于同一用户帐户时，每个帐户摘要估计此帐户使用的内存范围是11MB到14MB。</font><font style="vertical-align: inherit;">也就是说，
             </font></font><code class="literal">LOW_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更高层次的总和是每个总和
             </font></font><code class="literal">LOW_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（假设最坏的情况）。</font><font style="vertical-align: inherit;">同样，
             </font></font><code class="literal">HIGH_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较高级别的总数是每个总数
             </font></font><code class="literal">HIGH_NUMBER_OF_BYTES_USED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（假设最坏的情况）。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            仅当两个线程同时达到低使用率标记时才会出现11MB的较低估计值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            仅当两个线程同时达到高使用率标记时才会出现14MB的更高估计。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这个帐户的实际内存使用量可能在11.5MB到13.5MB之间。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于容量规划而言，报告最糟糕的情况实际上是期望的行为，因为它显示了会话不相关时可能发生的情况，通常情况就是如此。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="performance-schema-status-variable-summary-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.15.10状态变量汇总表</font></font></h4>

</div>

</div>

</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量</font><font style="vertical-align: inherit;">
            的值
             </font><font style="vertical-align: inherit;">影响这里描述的表中可用的信息。</font><font style="vertical-align: inherit;">有关详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中对该变量的描述</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式使状态变量信息在</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.14节“性能模式状态变量表”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述的表中可用
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它还会在汇总表中汇总状态变量信息，如下所述。</font><font style="vertical-align: inherit;">每个状态变量摘要表都有一个或多个分组列来指示表格如何聚合状态值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_account</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">VARIABLE_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列按帐户汇总状态变量。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_host</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有
               </font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">VARIABLE_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列来由客户端连接的主机汇总状态变量。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_user</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有
               </font></font><code class="literal">USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">VARIABLE_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按客户端用户名汇总状态变量的列。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个状态变量汇总表都包含汇总值的汇总列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">VARIABLE_VALUE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              活动会话和终止会话的聚合状态变量值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些表</font><font style="vertical-align: inherit;">
          中</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帐户</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的含义与</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统数据库中</font><font style="vertical-align: inherit;">MySQL授权表中的含义相似，
           </font><font style="vertical-align: inherit;">因为该术语是指用户和主机值的组合。</font><font style="vertical-align: inherit;">它们的不同之处在于，对于授权表，帐户的主机部分可以是模式，而对于性能模式表，主机值始终是特定的非模式主机名。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          帐户状态在会话终止时收集。</font><font style="vertical-align: inherit;">会话状态计数器被添加到全局状态计数器和相应的账户状态计数器。</font><font style="vertical-align: inherit;">如果未收集帐户统计信息，则会话状态将添加到主机和用户状态（如果收集主机和用户状态）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果帐户，主机和用户的统计数据没有收集
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_accounts_size"><code class="literal">performance_schema_accounts_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_hosts_size"><code class="literal">performance_schema_hosts_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_users_size"><code class="literal">performance_schema_users_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          系统变量，分别被设置为0。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能架构支持</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE
          TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量汇总表如下：</font><font style="vertical-align: inherit;">在所有情况下，活动会话的状态都不受影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_account</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将帐户状态从已终止的会话聚合到用户和主机状态，然后重置帐户状态。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_host</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从终止的会话重置聚合主机状态。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_user</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从已终止的会话中重新设置聚合用户状态。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#flush-status"><code class="literal">FLUSH STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 将会话状态从所有活动会话添加到全局状态变量，重置所有活动会话的状态，并重置从断开会话聚合的帐户，主机和用户状态值。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-miscellaneous-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16性能架构杂项表</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16.1 host_cache表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16.2 performance_timers表</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#threads-table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16.3线程表</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下部分描述了不属于前面章节中讨论的表格类别的表格：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：来自内部主机缓存的信息
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：哪些事件计时器可用
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：有关服务器线程的信息
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="host-cache-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16.1 host_cache表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969553152"></a><a class="indexterm" name="idm140527969551664"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表提供对主机缓存内容的访问，其中包含客户端主机名和IP地址信息，并用于避免DNS查找。</font><font style="vertical-align: inherit;">（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#host-cache" title="8.12.5.2 DNS查找优化和主机缓存"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.12.5.2节“DNS查找优化和主机高速缓存”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）该
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表公开了主机高速缓存的内容，以便可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">对其进行检查
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">性能模式必须启用或该表为空。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">IP</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              连接到服务器的客户端的IP地址，用字符串表示。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">HOST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该客户端IP已解析的DNS主机名，或者
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称未知。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">HOST_VALIDATED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              IP到主机名称到IP DNS解析是否已成功执行客户端IP。</font><font style="vertical-align: inherit;">如果
               </font></font><code class="literal">HOST_VALIDATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则将该</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列用作与IP对应的主机名，以避免对DNS的调用。</font><font style="vertical-align: inherit;">尽管
               </font></font><code class="literal">HOST_VALIDATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，DNS解析再次尝试对每个连接，直到它最终与合法的结果或永久出错完成。</font><font style="vertical-align: inherit;">此信息使服务器可以避免在临时DNS故障期间缓存错误或丢失的主机名，这将永远影响客户端。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SUM_CONNECT_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              被视为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阻塞</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的连接错误的数量
               </font><font style="vertical-align: inherit;">（根据</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_connect_errors"><code class="literal">max_connect_errors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">进行评估
               </font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">只计算协议握手错误，并且仅用于通过验证（</font></font><code class="literal">HOST_VALIDATED = YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">主机</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_HOST_BLOCKED_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              因</font></font><code class="literal">SUM_CONNECT_ERRORS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超出</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_connect_errors"><code class="literal">max_connect_errors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              系统变量</font><font style="vertical-align: inherit;">值而</font><font style="vertical-align: inherit;">被阻塞的连接数
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_NAMEINFO_TRANSIENT_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              IP到主机名称DNS解析期间的暂时错误数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_NAMEINFO_PERMANENT_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              IP到主机名称DNS解析期间的永久性错误数。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_FORMAT_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主机名格式错误的数量。</font><font style="vertical-align: inherit;">MySQL不会</font></font><code class="literal">Host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对</font></font><code class="literal">mysql.user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列值</font><font style="vertical-align: inherit;">与名称的一个或多个初始组件完全是数字的主机名</font><font style="vertical-align: inherit;">进行匹配</font><font style="vertical-align: inherit;">，例如
               </font></font><code class="literal">1.2.example.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">客户端IP地址被使用。</font><font style="vertical-align: inherit;">有关此类匹配没有发生的原因，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#account-names" title="6.2.3指定帐户名称"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.2.3节“指定帐户名称”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_ADDRINFO_TRANSIENT_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主机名称到IP反向DNS解析期间的暂时错误数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_ADDRINFO_PERMANENT_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              主机名称到IP反向DNS解析过程中的永久性错误数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_FCRDNS_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              前向确认的反向DNS错误的数量。</font><font style="vertical-align: inherit;">当IP到主机名称到IP DNS解析产生与客户端始发IP地址不匹配的IP地址时，会出现这些错误。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_HOST_ACL_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由于没有来自客户端主机的用户可能登录而发生的错误数。在这种情况下，服务器返回
               </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_host_not_privileged"><code class="literal">ER_HOST_NOT_PRIVILEGED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且甚至不要求用户名或密码。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_NO_AUTH_PLUGIN_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由于请求不可用的身份验证插件而导致的错误数量。</font><font style="vertical-align: inherit;">例如，如果插件从未加载或加载尝试失败，则插件可能不可用。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_AUTH_PLUGIN_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              验证插件报告的错误数量。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              身份验证插件可以报告不同的错误代码以指示失败的根本原因。</font><font style="vertical-align: inherit;">根据错误的类型，这些列中的一个递增：
               </font></font><code class="literal">COUNT_AUTHENTICATION_ERRORS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">COUNT_AUTH_PLUGIN_ERRORS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">COUNT_HANDSHAKE_ERRORS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">新的返回码是现有插件API的可选扩展。</font><font style="vertical-align: inherit;">在</font></font><code class="literal">COUNT_AUTH_PLUGIN_ERRORS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中计算未知或意外的插件错误</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_HANDSHAKE_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在有线协议级别检测到的错误数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_PROXY_USER_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将代理用户A代理给不存在的另一个用户B时检测到的错误数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_PROXY_USER_ACL_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将代理用户A代理给确实存在但其A没有</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_proxy"><code class="literal">PROXY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              特权的</font><font style="vertical-align: inherit;">另一用户B时检测到的错误数</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_AUTHENTICATION_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              验证失败导致的错误数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_SSL_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由于SSL问题而导致的错误数量。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_MAX_USER_CONNECTIONS_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              超过每用户连接配额导致的错误数量。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#user-resources" title="6.3.5设置帐户资源限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.3.5节“设置帐户资源限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_MAX_USER_CONNECTIONS_PER_HOUR_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              超过每用户连接每小时配额导致的错误数量。</font><font style="vertical-align: inherit;">请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#user-resources" title="6.3.5设置帐户资源限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.3.5节“设置帐户资源限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_DEFAULT_DATABASE_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与默认数据库相关的错误数量。</font><font style="vertical-align: inherit;">例如，数据库不存在或用户没有权限访问它。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_INIT_CONNECT_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_init_connect"><code class="literal">init_connect</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量值</font><font style="vertical-align: inherit;">
              中语句执行失败导致的错误数量
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_LOCAL_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              服务器实现本地的错误数量，与网络，身份验证或授权无关。</font><font style="vertical-align: inherit;">例如，内存不足的情况属于这一类。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">COUNT_UNKNOWN_ERRORS</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              其他未知错误的数量未在本表中的其他列中说明。</font><font style="vertical-align: inherit;">如果必须报告新的错误条件，并且需要保留表格的向后兼容性和表格结构，则该列保留供将来使用</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">FIRST_SEEN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从</font></font><code class="literal">IP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">的客户端看到的第一个连接尝试的时间戳</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_SEEN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从</font></font><code class="literal">IP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">客户端看到的最后一次连接尝试的时间戳</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">FIRST_ERROR_SEEN</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从</font></font><code class="literal">IP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">的客户端看到的第一个错误的时间戳</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LAST_ERROR_SEEN</code>
            </p><p><font style="vertical-align: inherit;"></font><code class="literal">IP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">
              客户端发现的最后一个错误的时间戳</font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#flush-hosts"><code class="literal">FLUSH HOSTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE
          host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有相同的效果：它们清除主机缓存。</font><font style="vertical-align: inherit;">这还会从</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">删除行
           </font><font style="vertical-align: inherit;">（因为它是缓存的可见表示）并取消对任何被阻止的主机的阻止（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#blocked-host" title="B.5.2.5主机&#39;host_name&#39;被阻塞"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.5.2.5节“主机'host_name'被阻止”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#flush-hosts"><code class="literal">FLUSH HOSTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要该
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_reload"><code class="literal">RELOAD</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权。
          </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">的
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_drop"><code class="literal">DROP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#host-cache-table" title="25.11.16.1 host_cache表"><code class="literal">host_cache</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="performance-timers-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16.2 performance_timers表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969447264"></a><a class="indexterm" name="idm140527969445760"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表显示哪些事件定时器可用：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM performance_timers;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------- + ----------------- -  + ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TIMER_NAME | </font><font style="vertical-align: inherit;">TIMER_FREQUENCY | </font><font style="vertical-align: inherit;">TIMER_RESOLUTION | </font><font style="vertical-align: inherit;">TIMER_OVERHEAD |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------- + ----------------- -  + ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CYCLE | </font><font style="vertical-align: inherit;">2389029850 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">72 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NANOSECOND | </font><font style="vertical-align: inherit;">1000000000 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">112 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MICROSECOND | </font><font style="vertical-align: inherit;">1000000 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">136 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MILLISECOND | </font><font style="vertical-align: inherit;">1036 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">168 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TICK | </font><font style="vertical-align: inherit;">105 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">2416 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------- + ----------------- -  + ---------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果与给定定时器名称关联的值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该定时器在您的平台上不受支持。</font><font style="vertical-align: inherit;">不包含的行</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          指示您可以使用哪些定时器
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关事件时序如何发生的解释，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-timing" title="25.4.1性能模式事件时序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.1节“性能模式事件时序”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            从MySQL 5.7.21起，性能模式
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表已被弃用，并且在MySQL 8.0中被删除，就像</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的
             </font></font><code class="literal">TICKS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行一样
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">TIMER_NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              配置</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-timers-table" title="25.11.2.5 setup_timers表"><code class="literal">setup_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">时参考定时器的名称</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_FREQUENCY</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              每秒定时器单元的数量。</font><font style="vertical-align: inherit;">对于循环定时器，频率通常与CPU速度有关。</font><font style="vertical-align: inherit;">例如，在一个2.4GHz处理器的系统上，
               </font></font><code class="literal">CYCLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能接近2400000000。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_RESOLUTION</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表示计时器值增加的计时器单元的数量。</font><font style="vertical-align: inherit;">如果定时器的分辨率为10，则其值每次增加10。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIMER_OVERHEAD</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用给定的定时器获得一个定时的最小开销周期数。</font><font style="vertical-align: inherit;">性能模式通过在初始化过程中调用定时器20次并选择最小值来确定此值。</font><font style="vertical-align: inherit;">总开销实际上是这个量的两倍，因为仪器在每个事件的开始和结束时调用定时器。</font><font style="vertical-align: inherit;">定时器代码仅用于定时事件，所以此开销不适用于非定时事件。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-timers-table" title="25.11.16.2 performance_timers表"><code class="literal">performance_timers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="threads-table"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.11.16.3线程表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140527969414672"></a><a class="indexterm" name="idm140527969413184"></a><a class="indexterm" name="idm140527969411696"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表为每个服务器线程包含一行。</font><font style="vertical-align: inherit;">每行包含有关线程的信息，并指示是否为其启用了监视和历史事件日志记录：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM threads\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          THREAD_ID：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               名称：thread / sql / main</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               类型：背景</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     PROCESSLIST_ID：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_USER：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_HOST：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     PROCESSLIST_DB：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PROCESSLIST_COMMAND：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_TIME：80284</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  PROCESSLIST_STATE：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_INFO：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PARENT_THREAD_ID：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               ROLE：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       INSTRUMENTED：是的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            历史：是的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    CONNECTION_TYPE：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       THREAD_OS_ID：489803</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 4. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          THREAD_ID：51</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               名称：thread / sql / one_connection</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               类型：FOREGROUND</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     PROCESSLIST_ID：34</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_USER：伊莎贝拉</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_HOST：localhost</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     PROCESSLIST_DB：performance_schema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PROCESSLIST_COMMAND：查询</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_TIME：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  PROCESSLIST_STATE：发送数据</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PROCESSLIST_INFO：选择*从线程</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   PARENT_THREAD_ID：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
               ROLE：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       INSTRUMENTED：是的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            历史：是的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    CONNECTION_TYPE：SSL / TLS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       THREAD_OS_ID：755399</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当性能模式初始化时，它会</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据当前存在的线程</font><font style="vertical-align: inherit;">填充
           </font><font style="vertical-align: inherit;">表。</font><font style="vertical-align: inherit;">此后，每次服务器创建一个线程时都会添加一个新行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的线程列值是由内容确定
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。</font><font style="vertical-align: inherit;">有关如何使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表来控制这些列的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-thread-filtering" title="25.4.6通过线程预过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.6节“通过线程进行预过滤”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><a class="indexterm" name="idm140527969398592"></a><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当线程结束时，</font><font style="vertical-align: inherit;">
          从</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">移除行</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于与客户端会话关联的线程，在会话结束时进行删除。</font><font style="vertical-align: inherit;">如果客户端启用了自动重新连接并且会话在断开连接后重新连接，则会话将与</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中具有不同</font></font><code class="literal">PROCESSLIST_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的新行关联</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">新线程</font><font style="vertical-align: inherit;">的初始</font><font style="vertical-align: inherit;">值</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值可能与原始线程</font><font style="vertical-align: inherit;">的初始</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">和
           </font><font style="vertical-align: inherit;">值不同：
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此期间表可能已更改，并且如果</font><font style="vertical-align: inherit;">
          原始线程</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">值在该行初始化后发生更改，则该更改不会继续新的线程。
        </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有前缀的名称</font><font style="vertical-align: inherit;">
          的</font><font style="vertical-align: inherit;">表列</font></font><code class="literal">PROCESSLIST_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          提供的信息类似于</font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表或</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          语句</font><font style="vertical-align: inherit;">中可用的信息
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，所有三个来源都提供线程监视信息。</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这些方面</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">不同于其他两个来源的使用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              访问</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要互斥，并且对服务器性能的影响最小。
              </font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              并且</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于它们需要互斥体</font><font style="vertical-align: inherit;">而</font><font style="vertical-align: inherit;">具有负面的性能后果。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 为每个线程提供附加信息，例如它是前台线程还是后台线程，以及与线程关联的服务器内的位置。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 提供有关后台线程的信息，因此可用于监视其他线程信息源无法进行的活动。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              您可以启用或禁用线程监视（即线程执行的事件是否被检测）和历史事件日志记录。</font><font style="vertical-align: inherit;">要控制</font><font style="vertical-align: inherit;">新前景线程</font><font style="vertical-align: inherit;">的初始
               </font><font style="vertical-align: inherit;">值</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，请使用该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表。</font><font style="vertical-align: inherit;">要控制现有线程的这些方面，请设置</font><font style="vertical-align: inherit;">表行的</font><font style="vertical-align: inherit;">列</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（有关线程监视和历史事件记录发生的条件的更多信息，请参阅</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的说明</font><font style="vertical-align: inherit;">。）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          由于这些原因，执行服务器监视的DBA
           </font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能希望使用该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">进行监视</font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于
             </font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            和</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，仅当当前用户有</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_process"><code class="literal">PROCESS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限</font><font style="vertical-align: inherit;">时才显示有关其他用户的线程信息
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这不是真正的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表; </font><font style="vertical-align: inherit;">所有行都显示给任何具有</font></font><code class="literal">SELECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该表</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">权限的</font><font style="vertical-align: inherit;">用户
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">不应该为其他用户看到线程的用户授予该特权。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表具有以下列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              唯一的线程标识符。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与服务器中的线程检测代码关联的名称。</font><font style="vertical-align: inherit;">例如，
               </font></font><code class="literal">thread/sql/one_connection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应负责处理用户连接的代码中的线程函数，并
               </font></font><code class="literal">thread/sql/main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示</font></font><code class="literal">main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器</font><font style="vertical-align: inherit;">的
               </font><font style="vertical-align: inherit;">功能。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              线程类型，</font></font><code class="literal">FOREGROUND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
               </font></font><code class="literal">BACKGROUND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">用户连接线程是前台线程。</font><font style="vertical-align: inherit;">与内部服务器活动关联的线程是后台线程。</font><font style="vertical-align: inherit;">示例是内部</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程，</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">binlog dump</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程将信息发送给从站，以及从站I / O和SQL线程。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于在</font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              表</font><font style="vertical-align: inherit;">中显示的线程，这是在该
               </font><font style="vertical-align: inherit;">表的</font></font><code class="literal">ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">显示的相同值
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它也是</font><font style="vertical-align: inherit;">输出</font></font><code class="literal">Id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中
               </font><font style="vertical-align: inherit;">显示的值</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以及该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线程内返回</font><font style="vertical-align: inherit;">的值
               </font><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于后台线程（与用户连接无关的线程）</font></font><code class="literal">PROCESSLIST_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样的，因此这些值不是唯一的。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_USER</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用户与前台线程关联，
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于后台线程。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_HOST</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与前台线程关联的客户端的主机名，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于后台线程。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              不同于</font></font><code class="literal">HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述的列
               </font></font><code class="literal">INFORMATION_SCHEMA</code>
              <a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表或
               </font></font><code class="literal">Host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出，所述</font></font><code class="literal">PROCESSLIST_HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列不包括用于TCP / IP连接的端口号。</font><font style="vertical-align: inherit;">要从性能模式获取此信息，请启用套接字检测（缺省情况下未启用）并检查该
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#socket-instances-table" title="25.11.3.5 socket_instances表"><code class="literal">socket_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM setup_instruments WHERE NAME LIKE 'wait/io/socket%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -  + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NAME | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">TIMED |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -  + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / socket / sql / server_tcpip_socket | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / socket / sql / server_unix_socket | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">wait / io / socket / sql / client_connection | </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- + -------- -  + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3行（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE setup_instruments SET ENABLED='YES' WHERE NAME LIKE 'wait/io/socket%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，3行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
匹配行数：3更改：3警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM socket_instances\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           EVENT_NAME：wait / io / socket / sql / client_connection</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OBJECT_INSTANCE_BEGIN：140612577298432</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            THREAD_ID：31</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            SOCKET_ID：53</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                   IP：:: ffff：127.0.0.1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 PORT：55642</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                状态：激活</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font>
</pre></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_DB</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              线程的默认数据库，或者
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_COMMAND</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于前台线程，线程正在代表客户端执行的命令的类型，或者
               </font></font><code class="literal">Sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话是否空闲。</font><font style="vertical-align: inherit;">有关线程命令的说明，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#thread-information" title="8.14检查线程信息"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.14节“检查线程信息”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此列的值对应于</font><font style="vertical-align: inherit;">
              客户端/服务器协议和</font><font style="vertical-align: inherit;">
              状态变量</font><font style="vertical-align: inherit;">的
               </font><font style="vertical-align: inherit;">命令
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-status-variables" title="5.1.7服务器状态变量"><font style="vertical-align: inherit;">第5.1.7节“服务器状态变量”</font></a></font><code class="literal">COM_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">Com_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-status-variables" title="5.1.7服务器状态变量"><font style="vertical-align: inherit;"></font></a>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              后台线程不会代表客户端执行命令，所以这个列可能是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_TIME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              线程处于当前状态的时间（以秒为单位）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_STATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              指示线程正在执行的动作，事件或状态。</font><font style="vertical-align: inherit;">有关</font></font><code class="literal">PROCESSLIST_STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">说明
               </font><font style="vertical-align: inherit;">，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#thread-information" title="8.14检查线程信息"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.14节“检查线程信息”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果值if
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，线程可能对应于空闲的客户端会话，或者它正在执行的工作没有安装阶段。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              大多数州相当于非常快速的操作。</font><font style="vertical-align: inherit;">如果线程在特定状态下停留很多秒，则可能有问题需要调查。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PROCESSLIST_INFO</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              线程正在执行的语句，或者
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它没有执行任何语句。</font><font style="vertical-align: inherit;">该语句可能是发送给服务器的语句，或者是语句执行其他语句时的最内层语句。</font><font style="vertical-align: inherit;">例如，如果
               </font></font><code class="literal">CALL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句执行正在执行语句的存储过程，则
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该
               </font></font><code class="literal">PROCESSLIST_INFO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值将显示该
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">PARENT_THREAD_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果这个线程是一个子线程（由另一个线程产生），这就是</font></font><code class="literal">THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">产生线程</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">ROLE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              没用过。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">INSTRUMENTED</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是否检测线程执行的事件。</font><font style="vertical-align: inherit;">值是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  对于前台线程，初始
                   </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值由与该线程关联的用户帐户是否匹配</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中的任何行确定
                   </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">匹配基于</font></font><code class="literal">PROCESSLIST_USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">PROCESSLIST_HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的值
                   </font><font style="vertical-align: inherit;">。
                </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  如果线程产生子线程，则为子线程</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  创建</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">表行</font><font style="vertical-align: inherit;">再次发生匹配</font><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  对于后台线程，
                   </font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就是
                   </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认。
                  </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有被咨询，因为没有关联的用户用于后台线程。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  对于任何线程，其</font></font><code class="literal">INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  值可以在线程的生命周期中更改。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              为了监视线程执行的事件发生，这些事情必须是真实的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  表中</font><font style="vertical-align: inherit;">
                  的</font></font><code class="literal">thread_instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  该</font></font><code class="literal">threads.INSTRUMENTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列必须是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  监控只对从具有仪器产生的那些线程事件发生
                   </font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列设置为
                   </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在
                   </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
              <code class="literal">HISTORY</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是否记录线程的历史事件。</font><font style="vertical-align: inherit;">值是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  对于前台线程，初始
                   </font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值由与该线程关联的用户帐户是否匹配</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中的任何行确定
                   </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">匹配基于</font></font><code class="literal">PROCESSLIST_USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">PROCESSLIST_HOST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的值
                   </font><font style="vertical-align: inherit;">。
                </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  如果线程产生子线程，则为子线程</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  创建</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">表行</font><font style="vertical-align: inherit;">再次发生匹配</font><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  对于后台线程，</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就是
                   </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认。
                  </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有被咨询，因为没有关联的用户用于后台线程。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  对于任何线程，其</font></font><code class="literal">HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值可以在线程的生命周期中更改。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于线程发生的历史事件记录，这些事情必须是真实的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须启用表中</font><font style="vertical-align: inherit;">
                  与历史相关的适当消费者
                   </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，等待事件记录在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  和
                   </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  表需要相应的
                   </font></font><code class="literal">events_waits_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">events_waits_history_long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者是</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  该</font></font><code class="literal">threads.HISTORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列必须是
                   </font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  日志记录仅针对那些将</font></font><code class="literal">ENABLED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列设置为
                   </font><font style="vertical-align: inherit;">表格</font></font><code class="literal">YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的
                   </font><font style="vertical-align: inherit;">工具生成的线程事件
                   </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
              <code class="literal">CONNECTION_TYPE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用于建立连接的协议，或
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于后台线程的协议。</font><font style="vertical-align: inherit;">允许的值为</font></font><code class="literal">TCP/IP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（建立TCP / IP连接而不加密），
               </font></font><code class="literal">SSL/TLS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（使用加密建立的TCP / IP连接），</font></font><code class="literal">Socket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Unix套接字文件连接），</font></font><code class="literal">Named Pipe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Windows命名管道连接）和</font></font><code class="literal">Shared
              Memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Windows共享内存连接）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">THREAD_OS_ID</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              底层操作系统定义的线程或任务标识符（如果有）：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  当MySQL线程在其生命周期中与相同的操作系统线程相关联时，
                   </font></font><code class="literal">THREAD_OS_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含操作系统线程标识。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  当一个MySQL线程在其生命周期中没有与相同的操作系统线程关联时，
                   </font></font><code class="literal">THREAD_OS_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含
                   </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当使用线程池插件时，这是典型的用户会话（请参见
                   </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#thread-pool" title="5.5.3 MySQL企业线程池"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.5.3节“MySQL企业线程池”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于Windows，</font></font><code class="literal">THREAD_OS_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于Process Explorer中可见的线程ID（</font></font><a class="ulink" href="https://technet.microsoft.com/en-us/sysinternals/bb896653.aspx" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://technet.microsoft.com/en-us/sysinternals/bb896653.aspx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于Linux，</font></font><code class="literal">THREAD_OS_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于</font></font><code class="literal">gettid()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，使用</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perf</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ps -L</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
              命令或</font></font><code class="literal">proc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件系统（</font><font style="vertical-align: inherit;">）中</font><font style="vertical-align: inherit;">公开此值
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">欲了解更多信息，请参阅
               </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">手册页。
</font></font><code class="filename">/proc/<em class="replaceable"><code>[pid]</code></em>/task/<em class="replaceable"><code>[tid]</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">perf-stat(1)</code><font style="vertical-align: inherit;"></font><code class="literal">ps(1)</code><font style="vertical-align: inherit;"></font><code class="literal">proc(5)</code><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#truncate-table" title="13.1.34 TRUNCATE TABLE语法"><code class="literal">TRUNCATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不允许的</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-option-variable-reference"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.12性能模式选项和变量引用</font></font></h2>

</div>

</div>

</div>

<div class="table">
<a name="idm140527969203616"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表25.3性能模式变量参考</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="Reference for Performance Schema command-line options, system variables, and status variables."><colgroup><col width="20%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMD线</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项文件</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Var范围</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_accounts_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_accounts_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_accounts_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_accounts_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_cond_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_cond_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_cond_instances_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_cond_instances_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-stages-current"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构消费者的事件，阶段电流</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-stages-history"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构消费者的事件，阶段历史</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-stages-history-long"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构消费者的事件，阶段 - 历史悠久</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-statements-current"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构消费者的事件陈述电流</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-statements-history"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构消费者的事件陈述历史</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-statements-history-long"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构消费者的事件陈述历史长</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-transactions-current"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费事件，交易流</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-transactions-history"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费事件，交易历史</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-transactions-history-long"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费事件，交易历史长</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-waits-current"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费活动，等待电流</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-waits-history"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费活动，等待历史</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-waits-history-long"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费活动，等待历史长</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-global-instrumentation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费全球仪器仪表</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-statements-digest"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构的消费报表消化</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-thread-instrumentation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构消费者线程仪表</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_digest_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_digest_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_digests_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_long_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_stages_history_long_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_stages_history_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_long_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_statements_history_long_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_statements_history_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_long_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_transactions_history_long_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_transactions_history_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_long_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_waits_history_long_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_events_waits_history_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_file_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_file_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_file_handles_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_file_handles_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_file_instances_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_file_instances_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_hosts_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_hosts_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_hosts_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_hosts_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-instrument"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能架构仪</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_locker_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_locker_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_cond_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_cond_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_cond_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_cond_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_digest_length</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_file_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_handles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_file_handles</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_file_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_memory_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_memory_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_metadata_locks"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_metadata_locks</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_mutex_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_mutex_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_prepared_statements_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_prepared_statements_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_program_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_program_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_rwlock_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_rwlock_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_rwlock_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_rwlock_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_socket_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_socket_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_socket_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_socket_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_stage_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_stage_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_statement_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_statement_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_statement_stack"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_statement_stack</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_handles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_table_handles</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_table_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_thread_classes</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_instances"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_max_thread_instances</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_memory_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_memory_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_metadata_lock_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_metadata_lock_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_mutex_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_instances_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_mutex_instances_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_nested_statement_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_nested_statement_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_prepared_statements_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_prepared_statements_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_program_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_program_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_rwlock_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_rwlock_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_rwlock_instances_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_rwlock_instances_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_session_connect_attrs_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_session_connect_attrs_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_session_connect_attrs_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_actors_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_setup_actors_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_objects_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_setup_objects_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_socket_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_socket_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_socket_instances_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_socket_instances_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_stage_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_stage_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_statement_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_statement_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_table_handles_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_table_handles_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_table_instances_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_table_instances_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_thread_classes_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_thread_classes_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_thread_instances_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_thread_instances_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_users_lost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance_schema_users_lost</font></font></a></td>
<td></td>
<td></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_users_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_users_size</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-options"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.13性能架构命令选项</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      可以在服务器启动时在命令行或选项文件中指定性能模式参数，以配置性能模式工具和使用者。</font><font style="vertical-align: inherit;">在许多情况下，运行时配置也是可能的（请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-runtime-configuration" title="25.4性能模式运行时配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4节“性能模式运行时配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），但当运行时配置太迟而不能影响在启动过程中已经初始化的仪器时，必须使用启动配置。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能架构使用者和仪器可以在启动时使用以下语法进行配置。</font><font style="vertical-align: inherit;">有关更多详细信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-startup-configuration" title="25.3性能模式启动配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.3节“性能架构启动配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-xxx"></a>
          <a class="indexterm" name="idm140527968608224"></a>

          <a class="indexterm" name="idm140527968606720"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-xxx"><code class="option">--performance-schema-consumer-<em class="replaceable"><code>consumer_name</code></em>=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置性能架构使用者。</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-consumers-table" title="25.11.2.2 setup_consumers表"><code class="literal">setup_consumers</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">中的消费者名称</font><font style="vertical-align: inherit;">使用下划线，但对于在启动时设置的</font><font style="vertical-align: inherit;">消费者，名称中的
           </font><font style="vertical-align: inherit;">破折号和下划线是等同的。</font><font style="vertical-align: inherit;">本部分后面会详细介绍配置单个使用者的选项。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-instrument"></a>
          <a class="indexterm" name="idm140527968599968"></a>

          <a class="indexterm" name="idm140527968598464"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-instrument"><code class="option">--performance-schema-instrument=<em class="replaceable"><code>instrument_name</code></em>=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置性能模式工具。</font><font style="vertical-align: inherit;">该名称可以作为模式来配置与模式匹配的仪器。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下项目配置个人消费者：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-stages-current"></a>
          <a class="indexterm" name="idm140527968592256"></a>

          <a class="indexterm" name="idm140527968590800"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-stages-current"><code class="option">--performance-schema-consumer-events-stages-current=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-stages-current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-stages-history"></a>
          <a class="indexterm" name="idm140527968585104"></a>

          <a class="indexterm" name="idm140527968583648"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-stages-history"><code class="option">--performance-schema-consumer-events-stages-history=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-stages-history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-stages-history-long"></a>
          <a class="indexterm" name="idm140527968578016"></a>

          <a class="indexterm" name="idm140527968576560"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-stages-history-long"><code class="option">--performance-schema-consumer-events-stages-history-long=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-stages-history-long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-statements-current"></a>
          <a class="indexterm" name="idm140527968570896"></a>

          <a class="indexterm" name="idm140527968569440"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-statements-current"><code class="option">--performance-schema-consumer-events-statements-current=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-statements-current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-statements-history"></a>
          <a class="indexterm" name="idm140527968563776"></a>

          <a class="indexterm" name="idm140527968562320"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-statements-history"><code class="option">--performance-schema-consumer-events-statements-history=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-statements-history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-statements-history-long"></a>
          <a class="indexterm" name="idm140527968556544"></a>

          <a class="indexterm" name="idm140527968555008"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-statements-history-long"><code class="option">--performance-schema-consumer-events-statements-history-long=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置
           </font></font><code class="literal">events-statements-history-long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-transactions-current"></a>
          <a class="indexterm" name="idm140527968549264"></a>

          <a class="indexterm" name="idm140527968547808"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-transactions-current"><code class="option">--performance-schema-consumer-events-transactions-current=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置性能架构
           </font></font><code class="literal">events-transactions-current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-transactions-history"></a>
          <a class="indexterm" name="idm140527968542144"></a>

          <a class="indexterm" name="idm140527968540688"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-transactions-history"><code class="option">--performance-schema-consumer-events-transactions-history=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置性能架构
           </font></font><code class="literal">events-transactions-history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-transactions-history-long"></a>
          <a class="indexterm" name="idm140527968535072"></a>

          <a class="indexterm" name="idm140527968533536"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-transactions-history-long"><code class="option">--performance-schema-consumer-events-transactions-history-long=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置性能架构
           </font></font><code class="literal">events-transactions-history-long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-waits-current"></a>
          <a class="indexterm" name="idm140527968527936"></a>

          <a class="indexterm" name="idm140527968526416"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-waits-current"><code class="option">--performance-schema-consumer-events-waits-current=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-waits-current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-waits-history"></a>
          <a class="indexterm" name="idm140527968520880"></a>

          <a class="indexterm" name="idm140527968519360"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-waits-history"><code class="option">--performance-schema-consumer-events-waits-history=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-waits-history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-events-waits-history-long"></a>
          <a class="indexterm" name="idm140527968513760"></a>

          <a class="indexterm" name="idm140527968512304"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-events-waits-history-long"><code class="option">--performance-schema-consumer-events-waits-history-long=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">events-waits-history-long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-global-instrumentation"></a>
          <a class="indexterm" name="idm140527968506640"></a>

          <a class="indexterm" name="idm140527968505184"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-global-instrumentation"><code class="option">--performance-schema-consumer-global-instrumentation=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">global-instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-statements-digest"></a>
          <a class="indexterm" name="idm140527968499552"></a>

          <a class="indexterm" name="idm140527968498032"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-statements-digest"><code class="option">--performance-schema-consumer-statements-digest=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">statements-digest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用者。
        </font></font></p></li><li class="listitem"><p><a name="option_mysqld_performance-schema-consumer-thread-instrumentation"></a>
          <a class="indexterm" name="idm140527968492512"></a>

          <a class="indexterm" name="idm140527968491056"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#option_mysqld_performance-schema-consumer-thread-instrumentation"><code class="option">--performance-schema-consumer-thread-instrumentation=<code class="literal">value</code></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          配置</font></font><code class="literal">thread-instrumentation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用者。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-system-variables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.14性能模式系统变量</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式实现了几个提供配置信息的系统变量：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW VARIABLES LIKE 'perf%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------- ------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">变量名| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------- ------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema | </font><font style="vertical-align: inherit;">ON |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_accounts_size | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_digests_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_stages_history_long_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_stages_history_size | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_statements_history_long_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_statements_history_size | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_transactions_history_long_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_transactions_history_size | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_waits_history_long_size | </font><font style="vertical-align: inherit;">10000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_events_waits_history_size | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_hosts_size | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_cond_classes | </font><font style="vertical-align: inherit;">80 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_cond_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_digest_length | </font><font style="vertical-align: inherit;">1024 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_file_classes | </font><font style="vertical-align: inherit;">50 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_file_handles | </font><font style="vertical-align: inherit;">32768 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_file_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_index_stat | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_memory_classes | </font><font style="vertical-align: inherit;">320 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_metadata_locks | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_mutex_classes | </font><font style="vertical-align: inherit;">200 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_mutex_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_prepared_statements_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_program_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_rwlock_classes | </font><font style="vertical-align: inherit;">40 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_rwlock_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_socket_classes | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_socket_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_sql_text_length | </font><font style="vertical-align: inherit;">1024 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_stage_classes | </font><font style="vertical-align: inherit;">150 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_statement_classes | </font><font style="vertical-align: inherit;">192 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_statement_stack | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_table_handles | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_table_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_table_lock_stat | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_thread_classes | </font><font style="vertical-align: inherit;">50 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_max_thread_instances | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_session_connect_attrs_size | </font><font style="vertical-align: inherit;">512 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_setup_actors_size | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_setup_objects_size | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">performance_schema_users_size | </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------- ------- + +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式系统变量可以在服务器启动时在命令行或选项文件中设置，并且许多可以在运行时设置。</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-option-variable-reference" title="25.12性能模式选项和变量引用"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.12节“性能模式选项和变量引用”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果未明确设置，性能模式会在服务器启动时自动调整其几个参数的值。</font><font style="vertical-align: inherit;">有关更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-startup-configuration" title="25.3性能模式启动配置"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.3节“性能架构启动配置”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式系统变量具有以下含义：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_performance_schema"></a>
          <a class="indexterm" name="idm140527968472224"></a>

          <a class="indexterm" name="idm140527968471184"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema"><code class="literal">performance_schema</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema">performance_schema</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">ON</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此变量的值是</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示是否启用性能模式。</font><font style="vertical-align: inherit;">默认情况下，该值为
           </font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在服务器启动时，您可以指定此变量没有值或值为</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1或1以启用它，或者值为</font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0或0以禁用它。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          即使在性能模式被禁用，则继续填充</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">global_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">global_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。</font><font style="vertical-align: inherit;">这是</font><font style="vertical-align: inherit;">根据</font><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的设置，根据</font><font style="vertical-align: inherit;">需要发生的，以允许</font><font style="vertical-align: inherit;">从这些表中提取</font><font style="vertical-align: inherit;">结果
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-variables" title="13.7.5.39 SHOW VARIABLES语法"><code class="literal">SHOW VARIABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-status" title="13.7.5.35 SHOW STATUS语法"><code class="literal">SHOW STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句
           </font></font><code class="literal">show_compatibiliy_56</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_accounts_size"></a>
          <a class="indexterm" name="idm140527968430336"></a>

          <a class="indexterm" name="idm140527968429232"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_accounts_size"><code class="literal">performance_schema_accounts_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_accounts_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-accounts-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_accounts_size">performance_schema_accounts_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">1048576</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          的行数
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果此变量为0，则性能架构不会在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">保留连接统计</font><font style="vertical-align: inherit;">信息或表中的状态变量信息
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_account</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_digests_size"></a>
          <a class="indexterm" name="idm140527968384080"></a>

          <a class="indexterm" name="idm140527968382976"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size"><code class="literal">performance_schema_digests_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_digests_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-digests-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size">performance_schema_digests_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">-1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">1048576</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格中</font><font style="vertical-align: inherit;">
          的最大行数
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果超过此最大值以至无法检测摘要，则性能模式会增加
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_digest_lost"><code class="literal">Performance_schema_digest_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句摘要的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息，请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;">第25.9节“性能模式语句摘要”</font></a><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_stages_history_long_size"></a>
          <a class="indexterm" name="idm140527968344560"></a>

          <a class="indexterm" name="idm140527968343520"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_long_size"><code class="literal">performance_schema_events_stages_history_long_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_stages_history_long_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-stages-history-long-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_long_size">performance_schema_events_stages_history_long_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_stages_history_size"></a>
          <a class="indexterm" name="idm140527968313728"></a>

          <a class="indexterm" name="idm140527968312688"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_size"><code class="literal">performance_schema_events_stages_history_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_stages_history_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-stages-history-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_stages_history_size">performance_schema_events_stages_history_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-table" title="25.11.5.2 events_stages_history表"><code class="literal">events_stages_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          每个线程的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_statements_history_long_size"></a>
          <a class="indexterm" name="idm140527968282960"></a>

          <a class="indexterm" name="idm140527968281920"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_long_size"><code class="literal">performance_schema_events_statements_history_long_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_statements_history_long_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-statements-history-long-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_long_size">performance_schema_events_statements_history_long_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font><font style="vertical-align: inherit;">
          的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_statements_history_size"></a>
          <a class="indexterm" name="idm140527968252048"></a>

          <a class="indexterm" name="idm140527968251008"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_size"><code class="literal">performance_schema_events_statements_history_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_statements_history_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-statements-history-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_statements_history_size">performance_schema_events_statements_history_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          每个线程的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_transactions_history_long_size"></a>
          <a class="indexterm" name="idm140527968221120"></a>

          <a class="indexterm" name="idm140527968219984"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_long_size"><code class="literal">performance_schema_events_transactions_history_long_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_transactions_history_long_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-transactions-history-long-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.3</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_long_size">performance_schema_events_transactions_history_long_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-long-table" title="25.11.7.3 events_transactions_history_long表"><code class="literal">events_transactions_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font><font style="vertical-align: inherit;">
          的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_transactions_history_size"></a>
          <a class="indexterm" name="idm140527968187424"></a>

          <a class="indexterm" name="idm140527968186384"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_size"><code class="literal">performance_schema_events_transactions_history_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_transactions_history_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-transactions-history-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.3</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_transactions_history_size">performance_schema_events_transactions_history_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-transactions-history-table" title="25.11.7.2 events_transactions_history表"><code class="literal">events_transactions_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font><font style="vertical-align: inherit;">
          每个线程的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_waits_history_long_size"></a>
          <a class="indexterm" name="idm140527968153856"></a>

          <a class="indexterm" name="idm140527968152816"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_long_size"><code class="literal">performance_schema_events_waits_history_long_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_waits_history_long_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-waits-history-long-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_long_size">performance_schema_events_waits_history_long_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_events_waits_history_size"></a>
          <a class="indexterm" name="idm140527968122992"></a>

          <a class="indexterm" name="idm140527968121872"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_size"><code class="literal">performance_schema_events_waits_history_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_events_waits_history_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-events-waits-history-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_events_waits_history_size">performance_schema_events_waits_history_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-table" title="25.11.4.2 events_waits_history表"><code class="literal">events_waits_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          每个线程的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_hosts_size"></a>
          <a class="indexterm" name="idm140527968092288"></a>

          <a class="indexterm" name="idm140527968091184"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_hosts_size"><code class="literal">performance_schema_hosts_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_hosts_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-hosts-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_hosts_size">performance_schema_hosts_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">1048576</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font><font style="vertical-align: inherit;">
          的行数</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果此变量为0，则性能架构不会在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">保留连接统计
           </font><font style="vertical-align: inherit;">信息或表中的状态变量信息</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_host</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_cond_classes"></a>
          <a class="indexterm" name="idm140527968045936"></a>

          <a class="indexterm" name="idm140527968044896"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_cond_classes"><code class="literal">performance_schema_max_cond_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_cond_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-cond-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_cond_classes">performance_schema_max_cond_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">80</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">256</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          条件工具的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_cond_instances"></a>
          <a class="indexterm" name="idm140527968010352"></a>

          <a class="indexterm" name="idm140527968009312"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_cond_instances"><code class="literal">performance_schema_max_cond_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_cond_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-cond-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_cond_instances">performance_schema_max_cond_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          仪器化条件对象的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_digest_length"></a>
          <a class="indexterm" name="idm140527967977488"></a>

          <a class="indexterm" name="idm140527967976448"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length"><code class="literal">performance_schema_max_digest_length</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_digest_length"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-digest-length=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.8</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_digest_length">performance_schema_max_digest_length</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">1024</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">1048576</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Performance Schema中可用于存储规范化语句摘要值的最大字节数。</font><font style="vertical-align: inherit;">这个变量涉及到
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">请参阅</font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></a><font style="vertical-align: inherit;">中对该变量的描述
          </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"></font></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关</font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句摘要的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息，请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-statement-digests" title="25.9性能架构语句摘要"><font style="vertical-align: inherit;">第25.9节“性能模式语句摘要”</font></a><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_file_classes"></a>
          <a class="indexterm" name="idm140527967935936"></a>

          <a class="indexterm" name="idm140527967934896"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_classes"><code class="literal">performance_schema_max_file_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_file_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-file-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_classes">performance_schema_max_file_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.9）</font></font></td>
<td><code class="literal">80</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.8）</font></font></td>
<td><code class="literal">50</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">256</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          文件的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_file_handles"></a>
          <a class="indexterm" name="idm140527967897040"></a>

          <a class="indexterm" name="idm140527967896000"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_handles"><code class="literal">performance_schema_max_file_handles</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_file_handles"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-file-handles=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_handles">performance_schema_max_file_handles</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">32768</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          打开的文件对象的最大数量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_handles"><code class="literal">performance_schema_max_file_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          应该大于以下值
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_open_files_limit"><code class="literal">open_files_limit</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_open_files_limit"><code class="literal">open_files_limit</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影响服务器可以支持的最大打开文件句柄数，并
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_handles"><code class="literal">performance_schema_max_file_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          影响可以检测这些文件句柄的数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_file_instances"></a>
          <a class="indexterm" name="idm140527967861936"></a>

          <a class="indexterm" name="idm140527967860896"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_instances"><code class="literal">performance_schema_max_file_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_file_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-file-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_file_instances">performance_schema_max_file_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检测文件对象的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_index_stat"></a>
          <a class="indexterm" name="idm140527967829088"></a>

          <a class="indexterm" name="idm140527967828048"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_index_stat"><code class="literal">performance_schema_max_index_stat</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_index_stat"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-index-stat=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.6</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_index_stat">performance_schema_max_index_stat</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护统计信息的最大索引数。</font><font style="vertical-align: inherit;">如果超过此最大值以致索引统计信息丢失，则性能模式会增加
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_index_stat_lost"><code class="literal">Performance_schema_index_stat_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。</font><font style="vertical-align: inherit;">默认值是使用值进行自动调整
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_instances"><code class="literal">performance_schema_max_table_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_memory_classes"></a>
          <a class="indexterm" name="idm140527967794064"></a>

          <a class="indexterm" name="idm140527967793024"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_memory_classes"><code class="literal">performance_schema_max_memory_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_memory_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-memory-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.2</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_memory_classes">performance_schema_max_memory_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.5）</font></font></td>
<td><code class="literal">320</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.4）</font></font></td>
<td><code class="literal">250</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          内存乐器的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_metadata_locks"></a>
          <a class="indexterm" name="idm140527967758544"></a>

          <a class="indexterm" name="idm140527967757504"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_metadata_locks"><code class="literal">performance_schema_max_metadata_locks</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_metadata_locks"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-metadata-locks=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.3</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_metadata_locks">performance_schema_max_metadata_locks</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          元数据锁定工具的最大数量。</font><font style="vertical-align: inherit;">该值控制</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">的大小
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果超过此最大值以致无法检测到元数据锁定，则性能模式会增加
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_metadata_lock_lost"><code class="literal">Performance_schema_metadata_lock_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_mutex_classes"></a>
          <a class="indexterm" name="idm140527967720256"></a>

          <a class="indexterm" name="idm140527967719216"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes"><code class="literal">performance_schema_max_mutex_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_mutex_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-mutex-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_classes">performance_schema_max_mutex_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">200</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">256</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          互斥工具的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_mutex_instances"></a>
          <a class="indexterm" name="idm140527967684704"></a>

          <a class="indexterm" name="idm140527967683664"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_instances"><code class="literal">performance_schema_max_mutex_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_mutex_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-mutex-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_mutex_instances">performance_schema_max_mutex_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          插装互斥对象的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_prepared_statements_instances"></a>
          <a class="indexterm" name="idm140527967651808"></a>

          <a class="indexterm" name="idm140527967650768"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_prepared_statements_instances"><code class="literal">performance_schema_max_prepared_statements_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_prepared_statements_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-prepared-statements-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.4</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_prepared_statements_instances">performance_schema_max_prepared_statements_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格中</font><font style="vertical-align: inherit;">
          的最大行数
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果超过此最大值以致无法检测预准备语句，则性能模式将递增
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_prepared_statements_lost"><code class="literal">Performance_schema_prepared_statements_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。</font><font style="vertical-align: inherit;">该变量的默认值是根据</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_prepared_stmt_count"><code class="literal">max_prepared_stmt_count</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          系统变量</font><font style="vertical-align: inherit;">的值自动设置的
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_rwlock_classes"></a>
          <a class="indexterm" name="idm140527967611904"></a>

          <a class="indexterm" name="idm140527967610864"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_rwlock_classes"><code class="literal">performance_schema_max_rwlock_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_rwlock_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-rwlock-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_rwlock_classes">performance_schema_max_rwlock_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.3）</font></font></td>
<td><code class="literal">40</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.2）</font></font></td>
<td><code class="literal">30</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">256</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          rwlock乐器的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_program_instances"></a>
          <a class="indexterm" name="idm140527967573088"></a>

          <a class="indexterm" name="idm140527967571968"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_program_instances"><code class="literal">performance_schema_max_program_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_program_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-program-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.2</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_program_instances">performance_schema_max_program_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">5000</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Performance Schema维护统计信息的最大存储程序数。</font><font style="vertical-align: inherit;">如果超过此最大值，则性能模式会增加
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_program_lost"><code class="literal">Performance_schema_program_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_rwlock_instances"></a>
          <a class="indexterm" name="idm140527967535984"></a>

          <a class="indexterm" name="idm140527967534944"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_rwlock_instances"><code class="literal">performance_schema_max_rwlock_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_rwlock_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-rwlock-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_rwlock_instances">performance_schema_max_rwlock_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          仪器化的rwlock物体的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_socket_classes"></a>
          <a class="indexterm" name="idm140527967503136"></a>

          <a class="indexterm" name="idm140527967502096"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_socket_classes"><code class="literal">performance_schema_max_socket_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_socket_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-socket-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_socket_classes">performance_schema_max_socket_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">10</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">256</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          套接字乐器的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_socket_instances"></a>
          <a class="indexterm" name="idm140527967467584"></a>

          <a class="indexterm" name="idm140527967466544"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_socket_instances"><code class="literal">performance_schema_max_socket_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_socket_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-socket-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_socket_instances">performance_schema_max_socket_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          仪器化套接字对象的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_sql_text_length"></a>
          <a class="indexterm" name="idm140527967434672"></a>

          <a class="indexterm" name="idm140527967433632"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_sql_text_length"><code class="literal">performance_schema_max_sql_text_length</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_sql_text_length"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-sql-text-length=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.6</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_sql_text_length">performance_schema_max_sql_text_length</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">1024</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">1048576</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用SQL语句存储中的字节的最大数量</font></font><code class="literal">SQL_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的列
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-current-table" title="25.11.6.1 events_statements_current表"><code class="literal">events_statements_current</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-table" title="25.11.6.2 events_statements_history表"><code class="literal">events_statements_history</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          语句事件表。</font><font style="vertical-align: inherit;">任何超过的字节
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_sql_text_length"><code class="literal">performance_schema_max_sql_text_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          都将被丢弃，并且不会出现在
           </font></font><code class="literal">SQL_TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中。</font><font style="vertical-align: inherit;">只有在该列中许多初始字节无法区分之后，才会有所区别。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          减少
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_sql_text_length"><code class="literal">performance_schema_max_sql_text_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值会减少内存的使用，但会导致更多的语句只有在最后才会有区别。</font><font style="vertical-align: inherit;">增加值会增加内存使用量，但允许区分更长的语句。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_stage_classes"></a>
          <a class="indexterm" name="idm140527967387616"></a>

          <a class="indexterm" name="idm140527967386576"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_stage_classes"><code class="literal">performance_schema_max_stage_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_stage_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-stage-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_stage_classes">performance_schema_max_stage_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">150</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">256</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          舞台乐器的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_statement_classes"></a>
          <a class="indexterm" name="idm140527967352080"></a>

          <a class="indexterm" name="idm140527967350960"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_statement_classes"><code class="literal">performance_schema_max_statement_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_statement_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-statement-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_statement_classes">performance_schema_max_statement_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          报表工具的最大数量。</font><font style="vertical-align: inherit;">默认值是在服务器构建时基于客户端/服务器协议中的命令数量以及服务器支持的SQL语句类型数量计算的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          除非将该变量设置为0，否则不应更改此变量以禁用所有语句检测并保存与其关联的所有内存。</font><font style="vertical-align: inherit;">将变量设置为除默认值以外的非零值没有任何好处; </font><font style="vertical-align: inherit;">特别是大于默认值的值会导致分配更多的内存，因此需要进行分配。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_statement_stack"></a>
          <a class="indexterm" name="idm140527967321552"></a>

          <a class="indexterm" name="idm140527967320512"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_statement_stack"><code class="literal">performance_schema_max_statement_stack</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_statement_stack"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-statement-stack=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.2</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_statement_stack">performance_schema_max_statement_stack</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">10</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护统计数据的嵌套存储程序调用的最大深度。</font><font style="vertical-align: inherit;">当超过这个最大值时，性能模式</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_nested_statement_lost"><code class="literal">Performance_schema_nested_statement_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将为每个执行的存储程序语句</font><font style="vertical-align: inherit;">递增
           </font><font style="vertical-align: inherit;">状态变量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_table_handles"></a>
          <a class="indexterm" name="idm140527967287952"></a>

          <a class="indexterm" name="idm140527967286912"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_handles"><code class="literal">performance_schema_max_table_handles</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_table_handles"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-table-handles=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_handles">performance_schema_max_table_handles</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          打开的表格对象的最大数量。</font><font style="vertical-align: inherit;">该值控制</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#table-handles-table" title="25.11.12.2 table_handles表"><code class="literal">table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">的大小
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果超过此最大值以致无法检测表句柄，则性能模式会增加
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_table_handles_lost"><code class="literal">Performance_schema_table_handles_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_table_instances"></a>
          <a class="indexterm" name="idm140527967252352"></a>

          <a class="indexterm" name="idm140527967251312"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_instances"><code class="literal">performance_schema_max_table_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_table_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-table-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_instances">performance_schema_max_table_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检测到的表格对象的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_table_lock_stat"></a>
          <a class="indexterm" name="idm140527967219440"></a>

          <a class="indexterm" name="idm140527967218400"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_lock_stat"><code class="literal">performance_schema_max_table_lock_stat</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_table_lock_stat"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-table-lock-stat=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7.6</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_lock_stat">performance_schema_max_table_lock_stat</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式维护锁统计的最大表数。</font><font style="vertical-align: inherit;">如果超过此最大值以至于表锁定统计信息丢失，则性能模式会增加
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_table_lock_stat_lost"><code class="literal">Performance_schema_table_lock_stat_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_thread_classes"></a>
          <a class="indexterm" name="idm140527967185760"></a>

          <a class="indexterm" name="idm140527967184720"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_classes"><code class="literal">performance_schema_max_thread_classes</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_thread_classes"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-thread-classes=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_classes">performance_schema_max_thread_classes</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">50</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">0</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">256</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          线程乐器的最大数量。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_max_thread_instances"></a>
          <a class="indexterm" name="idm140527967150272"></a>

          <a class="indexterm" name="idm140527967149232"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_instances"><code class="literal">performance_schema_max_thread_instances</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_max_thread_instances"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-max-thread-instances=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_instances">performance_schema_max_thread_instances</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          插装线程对象的最大数量。</font><font style="vertical-align: inherit;">该值控制</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表</font><font style="vertical-align: inherit;">的大小</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果超过此最大值以致无法检测线程，则性能模式会增加
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_thread_instances_lost"><code class="literal">Performance_schema_thread_instances_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_connections"><code class="literal">max_connections</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量会影响多少个线程可以在服务器端运行。
          </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_instances"><code class="literal">performance_schema_max_thread_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          影响有多少这些正在运行的线程可以被检测。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">variables_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">status_by_thread</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格只包含约前台线程系统状态变量信息。</font><font style="vertical-align: inherit;">如果不是所有线程都由性能模式检测，则此表将丢失一些行。</font><font style="vertical-align: inherit;">在这种情况下，
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_thread_instances_lost"><code class="literal">Performance_schema_thread_instances_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量将大于零。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_session_connect_attrs_size"></a>
          <a class="indexterm" name="idm140527967106960"></a>

          <a class="indexterm" name="idm140527967105840"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><code class="literal">performance_schema_session_connect_attrs_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_session_connect_attrs_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-session-connect-attrs-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size">performance_schema_session_connect_attrs_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低限度</font></font></strong></span></td>
<td><code class="literal">-1</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">1048576</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个线程保留的预分配内存量以保存连接属性键/值对。</font><font style="vertical-align: inherit;">如果客户端发送的连接属性数据的聚合大小大于此数量，则性能模式将截断属性数据，递增
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_session_connect_attrs_lost"><code class="literal">Performance_schema_session_connect_attrs_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          状态变量，并向错误日志写入消息，指示发生截断
          </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_log_error_verbosity"><code class="literal">log_error_verbosity</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量值较大时</font><font style="vertical-align: inherit;">比1。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><code class="literal">performance_schema_session_connect_attrs_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          服务器启动时会自动</font><font style="vertical-align: inherit;">
          设置默认值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该值可能很小，因此如果发生截断（</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_session_connect_attrs_lost"><code class="literal">Performance_schema_session_connect_attrs_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          变为非零），您可能希望
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><code class="literal">performance_schema_session_connect_attrs_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          显式设置为更大的值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          尽管允许的
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><code class="literal">performance_schema_session_connect_attrs_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          最大值为1MB，但有效的最大值为64KB，因为服务器会对它将接受的连接属性数据的总大小施加64KB的限制。</font><font style="vertical-align: inherit;">如果客户端试图发送超过64KB的属性数据，服务器会拒绝连接。</font><font style="vertical-align: inherit;">有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-attribute-tables" title="25.11.9性能架构连接属性表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.9节“性能架构连接属性表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_setup_actors_size"></a>
          <a class="indexterm" name="idm140527967060816"></a>

          <a class="indexterm" name="idm140527967059776"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_actors_size"><code class="literal">performance_schema_setup_actors_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_setup_actors_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-setup-actors-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_actors_size">performance_schema_setup_actors_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">100</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_setup_objects_size"></a>
          <a class="indexterm" name="idm140527967026784"></a>

          <a class="indexterm" name="idm140527967025744"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_objects_size"><code class="literal">performance_schema_setup_objects_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_setup_objects_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-setup-objects-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_setup_objects_size">performance_schema_setup_objects_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">100</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-objects-table" title="25.11.2.4 setup_objects表"><code class="literal">setup_objects</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          的行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="sysvar_performance_schema_users_size"></a>
          <a class="indexterm" name="idm140527966992736"></a>

          <a class="indexterm" name="idm140527966991632"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_users_size"><code class="literal">performance_schema_users_size</code></a>
</p>
<div class="informaltable">
<table frame="box" rules="all" summary="Properties for performance_schema_users_size"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr></thead><tbody><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行格式</font></font></strong></span></td>
<td><code class="literal">--performance-schema-users-size=#</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font></font></strong></span></td>
<td><code class="literal"><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_users_size">performance_schema_users_size</a></code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt; = 5.7.6）</font></font></td>
<td><code class="literal">-1 (autoscaled)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&lt;= 5.7.5）</font></font></td>
<td><code class="literal">-1 (autosized)</code></td>
</tr><tr><td scope="row"><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></strong></span></td>
<td><code class="literal">1048576</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font><font style="vertical-align: inherit;">
          的行数</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果此变量为0，则性能架构不会在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">保留连接统计
           </font><font style="vertical-align: inherit;">信息或表中的状态变量信息</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-summary-tables" title="25.11.15.10状态变量汇总表"><code class="literal">status_by_user</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-status-variables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.15性能模式状态变量</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式实现了几个状态变量，这些变量提供有关由于内存限制而无法加载或创建的检测信息：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW STATUS LIKE 'perf%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">变量名| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_accounts_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_cond_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_cond_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_file_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_file_handles_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_file_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_hosts_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_locker_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_mutex_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_mutex_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_rwlock_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_rwlock_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_socket_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_socket_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_stage_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_statement_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_table_handles_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_table_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_thread_classes_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_thread_instances_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Performance_schema_users_lost | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- + ----- -  +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式状态变量具有以下含义：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_Performance_schema_accounts_lost"></a>
          <a class="indexterm" name="idm140527966939360"></a>

          <a class="indexterm" name="idm140527966938320"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_accounts_lost"><code class="literal">Performance_schema_accounts_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          由于行</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#accounts-table" title="25.11.8.1帐户表"><code class="literal">accounts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已满</font><font style="vertical-align: inherit;">而无法将行添加到</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的次数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_cond_classes_lost"></a>
          <a class="indexterm" name="idm140527966932464"></a>

          <a class="indexterm" name="idm140527966931424"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_cond_classes_lost"><code class="literal">Performance_schema_cond_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法加载多少个条件工具。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_cond_instances_lost"></a>
          <a class="indexterm" name="idm140527966926848"></a>

          <a class="indexterm" name="idm140527966925808"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_cond_instances_lost"><code class="literal">Performance_schema_cond_instances_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法创建多少个条件工具实例。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_digest_lost"></a>
          <a class="indexterm" name="idm140527966921328"></a>

          <a class="indexterm" name="idm140527966920224"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_digest_lost"><code class="literal">Performance_schema_digest_lost</code></a>
        </p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_digest</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格中</font><font style="vertical-align: inherit;">
          无法检测的摘要实例的数量
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_digests_size"><code class="literal">performance_schema_digests_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_file_classes_lost"></a>
          <a class="indexterm" name="idm140527966913136"></a>

          <a class="indexterm" name="idm140527966912096"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_file_classes_lost"><code class="literal">Performance_schema_file_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法加载多少文件。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_file_handles_lost"></a>
          <a class="indexterm" name="idm140527966907520"></a>

          <a class="indexterm" name="idm140527966906480"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_file_handles_lost"><code class="literal">Performance_schema_file_handles_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有多少文件工具实例无法打开。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_file_instances_lost"></a>
          <a class="indexterm" name="idm140527966901952"></a>

          <a class="indexterm" name="idm140527966900912"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_file_instances_lost"><code class="literal">Performance_schema_file_instances_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法创建多少个文件工具实例。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_hosts_lost"></a>
          <a class="indexterm" name="idm140527966896432"></a>

          <a class="indexterm" name="idm140527966895328"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_hosts_lost"><code class="literal">Performance_schema_hosts_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          由于行</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#hosts-table" title="25.11.8.2主机表"><code class="literal">hosts</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已满</font><font style="vertical-align: inherit;">而无法将行添加到</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的次数
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_index_stat_lost"></a>
          <a class="indexterm" name="idm140527966889568"></a>

          <a class="indexterm" name="idm140527966888528"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_index_stat_lost"><code class="literal">Performance_schema_index_stat_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          统计信息丢失的索引数量。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_index_stat"><code class="literal">performance_schema_max_index_stat</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_locker_lost"></a>
          <a class="indexterm" name="idm140527966882672"></a>

          <a class="indexterm" name="idm140527966881568"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_locker_lost"><code class="literal">Performance_schema_locker_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于以下情况，</font><font style="vertical-align: inherit;">
          有多少事件</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">丢失</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或未记录：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              事件是递归的（例如，等待A导致等待B，导致C等待）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              嵌套事件堆栈的深度大于实施强加的限制。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式记录的事件不是递归的，所以这个变量应该总是为0。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_memory_classes_lost"></a>
          <a class="indexterm" name="idm140527966873920"></a>

          <a class="indexterm" name="idm140527966872880"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_memory_classes_lost"><code class="literal">Performance_schema_memory_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          内存乐器无法加载的次数。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_metadata_lock_lost"></a>
          <a class="indexterm" name="idm140527966868352"></a>

          <a class="indexterm" name="idm140527966867312"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_metadata_lock_lost"><code class="literal">Performance_schema_metadata_lock_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法在</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中</font><font style="vertical-align: inherit;">检测到的元数据锁的数量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_metadata_locks"><code class="literal">performance_schema_max_metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_mutex_classes_lost"></a>
          <a class="indexterm" name="idm140527966860160"></a>

          <a class="indexterm" name="idm140527966859120"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_classes_lost"><code class="literal">Performance_schema_mutex_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法加载多少个互斥体乐器。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_mutex_instances_lost"></a>
          <a class="indexterm" name="idm140527966854544"></a>

          <a class="indexterm" name="idm140527966853504"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_mutex_instances_lost"><code class="literal">Performance_schema_mutex_instances_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法创建多少个互斥体乐器实例。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_nested_statement_lost"></a>
          <a class="indexterm" name="idm140527966848976"></a>

          <a class="indexterm" name="idm140527966847856"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_nested_statement_lost"><code class="literal">Performance_schema_nested_statement_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          存储的程序语句数量已丢失。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_statement_stack"><code class="literal">performance_schema_max_statement_stack</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_prepared_statements_lost"></a>
          <a class="indexterm" name="idm140527966841904"></a>

          <a class="indexterm" name="idm140527966840784"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_prepared_statements_lost"><code class="literal">Performance_schema_prepared_statements_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          准备好的语句数量无法在
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#prepared-statements-instances-table" title="25.11.6.4 prepared_statements_instances表"><code class="literal">prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格中进行检测。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_prepared_statements_instances"><code class="literal">performance_schema_max_prepared_statements_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_program_lost"></a>
          <a class="indexterm" name="idm140527966833472"></a>

          <a class="indexterm" name="idm140527966832368"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_program_lost"><code class="literal">Performance_schema_program_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          统计信息丢失的存储程序数量。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_program_instances"><code class="literal">performance_schema_max_program_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_rwlock_classes_lost"></a>
          <a class="indexterm" name="idm140527966826528"></a>

          <a class="indexterm" name="idm140527966825488"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_rwlock_classes_lost"><code class="literal">Performance_schema_rwlock_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法装载多少个rwlock乐器。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_rwlock_instances_lost"></a>
          <a class="indexterm" name="idm140527966820992"></a>

          <a class="indexterm" name="idm140527966819872"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_rwlock_instances_lost"><code class="literal">Performance_schema_rwlock_instances_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法创建多少个rwlock仪器实例。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_session_connect_attrs_lost"></a>
          <a class="indexterm" name="idm140527966815376"></a>

          <a class="indexterm" name="idm140527966814256"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_session_connect_attrs_lost"><code class="literal">Performance_schema_session_connect_attrs_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          发生连接属性截断的连接数。</font><font style="vertical-align: inherit;">对于给定连接，如果客户端发送聚合大小大于</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><code class="literal">performance_schema_session_connect_attrs_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          系统变量</font><font style="vertical-align: inherit;">值允许的保留存储的连接属性键/值对
           </font><font style="vertical-align: inherit;">，则性能模式会截断属性数据和增量
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_session_connect_attrs_lost"><code class="literal">Performance_schema_session_connect_attrs_lost</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果此值不为零，则可能希望设置
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_session_connect_attrs_size"><code class="literal">performance_schema_session_connect_attrs_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为更大的值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关连接属性的更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-connection-attribute-tables" title="25.11.9性能架构连接属性表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.9节“性能架构连接属性表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_socket_classes_lost"></a>
          <a class="indexterm" name="idm140527966804160"></a>

          <a class="indexterm" name="idm140527966803120"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_socket_classes_lost"><code class="literal">Performance_schema_socket_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法加载多少插座仪器。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_socket_instances_lost"></a>
          <a class="indexterm" name="idm140527966798608"></a>

          <a class="indexterm" name="idm140527966797488"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_socket_instances_lost"><code class="literal">Performance_schema_socket_instances_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法创建多少套接字乐器实例。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_stage_classes_lost"></a>
          <a class="indexterm" name="idm140527966792992"></a>

          <a class="indexterm" name="idm140527966791952"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_stage_classes_lost"><code class="literal">Performance_schema_stage_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有多少台舞台乐器无法加载。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_statement_classes_lost"></a>
          <a class="indexterm" name="idm140527966787376"></a>

          <a class="indexterm" name="idm140527966786256"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_statement_classes_lost"><code class="literal">Performance_schema_statement_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法加载多少个语句工具。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_table_handles_lost"></a>
          <a class="indexterm" name="idm140527966781776"></a>

          <a class="indexterm" name="idm140527966780736"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_table_handles_lost"><code class="literal">Performance_schema_table_handles_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有多少个表格工具实例无法打开。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_handles"><code class="literal">performance_schema_max_table_handles</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_table_instances_lost"></a>
          <a class="indexterm" name="idm140527966774832"></a>

          <a class="indexterm" name="idm140527966773792"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_table_instances_lost"><code class="literal">Performance_schema_table_instances_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法创建多少个表格工具实例。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_table_lock_stat_lost"></a>
          <a class="indexterm" name="idm140527966769200"></a>

          <a class="indexterm" name="idm140527966768160"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_table_lock_stat_lost"><code class="literal">Performance_schema_table_lock_stat_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          锁定统计信息丢失的表的数量。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_table_lock_stat"><code class="literal">performance_schema_max_table_lock_stat</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_thread_classes_lost"></a>
          <a class="indexterm" name="idm140527966762256"></a>

          <a class="indexterm" name="idm140527966761216"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_thread_classes_lost"><code class="literal">Performance_schema_thread_classes_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法加载多少个线程工具。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_thread_instances_lost"></a>
          <a class="indexterm" name="idm140527966756640"></a>

          <a class="indexterm" name="idm140527966755520"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_thread_instances_lost"><code class="literal">Performance_schema_thread_instances_lost</code></a>
        </p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">
          无法检测的线程实例的数量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果值</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#sysvar_performance_schema_max_thread_instances"><code class="literal">performance_schema_max_thread_instances</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          太小，</font><font style="vertical-align: inherit;">它可能不为零
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><a name="statvar_Performance_schema_users_lost"></a>
          <a class="indexterm" name="idm140527966748448"></a>

          <a class="indexterm" name="idm140527966747344"></a>

          <a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statvar_Performance_schema_users_lost"><code class="literal">Performance_schema_users_lost</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          由于行</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#users-table" title="25.11.8.3用户表"><code class="literal">users</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已满</font><font style="vertical-align: inherit;">而无法将行添加到</font><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的次数
           </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关使用这些变量来检查性能模式状态的信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-monitoring" title="25.7性能模式状态监视"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.7节“性能模式状态监视”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-memory-model"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.16性能模式内存分配模型</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式使用这种内存分配模式：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可以在服务器启动时分配内存
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在服务器操作期间可以分配额外的内存
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从不在服务器运行期间释放内存（虽然可能会被回收）
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          释放所有关机时使用的内存
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      其结果是放宽内存限制，以便性能模式可以在更少的配置下使用，并减少内存占用量，从而消耗随服务器负载而扩大。</font><font style="vertical-align: inherit;">使用的内存取决于实际看到的负载，而不是估计或明确配置的负载。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几个性能模式调整大小参数是自动调整的，不需要显式配置，除非您想建立对内存分配的明确限制：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema_accounts_size</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_hosts_size</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_cond_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_file_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_index_stat</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_metadata_locks</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_mutex_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_prepared_statements_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_program_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_rwlock_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_socket_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_table_handles</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_table_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_table_lock_stat</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_max_thread_instances</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema_users_size</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于自动调整参数，配置如下所示：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将值设置为-1（默认值）时，参数将自动调整为：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              相应的内部缓冲区最初是空的，没有分配内存。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当性能模式收集数据时，内存将分配到相应的缓冲区中。</font><font style="vertical-align: inherit;">缓冲区大小是无界的，并且可能随着负载而增长。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将值设置为0：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              相应的内部缓冲区最初是空的，没有分配内存。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将值设置为</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; 0时：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              相应的内部缓冲区最初是空的，没有分配内存。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              当性能模式收集数据时，内存将分配到相应的缓冲区中，直到缓冲区大小达到</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一旦缓冲区大小达到</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不会分配更多的内存。</font><font style="vertical-align: inherit;">性能模式为此缓冲区收集的数据丢失，并且任何相应的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">丢失的实例</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计数器递增。
</font></font></p></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要查看性能模式使用的内存量，请检查为此设计的仪器。</font><font style="vertical-align: inherit;">性能模式在内部分配内存，并将每个缓冲区与专用仪器相关联，从而可以将内存消耗追踪到单个缓冲区。</font><font style="vertical-align: inherit;">以前缀命名的工具
       </font></font><code class="literal">memory/performance_schema/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示为这些内部缓冲区分配了多少内存。</font><font style="vertical-align: inherit;">缓冲区对服务器来说是全局的，所以仪器只显示在
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#memory-summary-tables" title="25.11.15.9内存汇总表"><code class="literal">memory_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      表格中，而不显示在其他
       </font><font style="vertical-align: inherit;">
      表格中。
    </font></font><code class="literal">memory_summary_by_<em class="replaceable"><code>xxx</code></em>_by_event_name</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该查询显示与内存仪器相关的信息：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM memory_summary_global_by_event_name</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE EVENT_NAME LIKE'memory / performance_schema /％';</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-and-plugins"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.17性能模式和插件</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      删除插件</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#uninstall-plugin" title="13.7.3.4卸载PLUGIN语法"><code class="literal">UNINSTALL
      PLUGIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会影响已经为该插件中的代码收集的信息。</font><font style="vertical-align: inherit;">即使插件稍后被卸载，仍然花费在插件加载时执行代码的时间。</font><font style="vertical-align: inherit;">关联的事件信息（包括聚合信息）在</font></font><code class="literal">performance_schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库表中</font><font style="vertical-align: inherit;">仍然可读
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关插件安装和删除的效果的其他信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-monitoring" title="25.7性能模式状态监视"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.7节“性能架构状态监视”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      插件代码的插件实现者应该记录其插装代码，以使那些加载插件的人能够满足其需求。</font><font style="vertical-align: inherit;">例如，第三方存储引擎应在其文档中包含引擎对互斥锁和其他仪器所需的内存量。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-examples"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.18使用性能模式诊断问题</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-query-profiling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.18.1使用性能模式查询性能分析</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140527966708576"></a><a class="indexterm" name="idm140527966707120"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      性能模式是帮助DBA通过实际测量而不是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">疯狂猜测</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来进行性能调整的工具</font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">。</font></span></span><span class="quote"><font style="vertical-align: inherit;">“</font></span><font style="vertical-align: inherit;">本节演示了为此目的使用性能模式的一些方法。</font><font style="vertical-align: inherit;">这里的讨论依赖于使用事件过滤，这在
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-filtering" title="25.4.2性能模式事件过滤"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.4.2节“性能模式事件过滤”中进行了描述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下示例提供了一种可用于分析可重复问题的方法，例如调查性能瓶颈。</font><font style="vertical-align: inherit;">首先，您应该有一个可重复使用的情况，认为性能被认为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">太慢</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且需要优化，并且应该启用所有仪器（根本不需要预过滤）。
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          运行用例。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用性能模式表，分析性能问题的根本原因。</font><font style="vertical-align: inherit;">这种分析将严重依赖后期过滤。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于排除的问题区域，禁用相应的仪器。</font><font style="vertical-align: inherit;">例如，如果分析显示问题与特定存储引擎中的文件I / O无关，请禁用该引擎的文件I / O工具。</font><font style="vertical-align: inherit;">然后截断历史记录和汇总表以删除先前收集的事件。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          重复第1步的过程。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在每次迭代中，性能模式输出，尤其是</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-waits-history-long-table" title="25.11.4.3 events_waits_history_long表"><code class="literal">events_waits_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表格，将包含</font><font style="vertical-align: inherit;">由不显着的工具引起的</font><font style="vertical-align: inherit;">越来越少的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">噪音</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且鉴于该表具有固定尺寸，将包含越来越多的与分析问题相关的数据手。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在每次迭代中，调查应该越来越接近问题的根源，因为
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号/噪音</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比率将会提高，从而使分析更容易。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一旦确定了性能瓶颈的根本原因，请采取适当的纠正措施，例如：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              调整服务器参数（缓存大小，内存等）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              以不同的方式写入查询来调整查询，
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              调整数据库模式（表格，索引等）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              调整代码（这仅适用于存储引擎或服务器开发人员）。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从步骤1开始，查看变化对性能的影响。
</font></font></p></li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在</font></font><code class="literal">mutex_instances.LOCKED_BY_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
       </font></font><code class="literal">rwlock_instances.WRITE_LOCKED_BY_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      列调查性能瓶颈或死锁非常重要的。</font><font style="vertical-align: inherit;">这可以通过性能模式检测来实现，如下所示：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          假设线程1被卡住等待一个互斥体。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以确定线程正在等待什么：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM events_waits_current WHERE THREAD_ID = </font></font><em class="replaceable"><code>thread_1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          说查询结果判断该线程正在等待互斥体，在发现
           </font></font><code class="literal">events_waits_current.OBJECT_INSTANCE_BEGIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          你可以确定哪个线程持有互斥体A：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM mutex_instances WHERE OBJECT_INSTANCE_BEGIN = </font></font><em class="replaceable"><code>mutex_A</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          假设查询结果标识出它是持有mutex A的线程2，如下所示
           </font></font><code class="literal">mutex_instances.LOCKED_BY_THREAD_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          你可以看到线程2在做什么：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM events_waits_current WHERE THREAD_ID = </font></font><em class="replaceable"><code>thread_2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre></li></ol>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="performance-schema-query-profiling"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.18.1使用性能模式查询性能分析</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例演示如何使用Performance Schema语句事件和阶段事件来检索与由</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-profiles" title="13.7.5.31 SHOW PROFILES语法"><code class="literal">SHOW
        PROFILES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-profile" title="13.7.5.30 SHOW PROFILE语法"><code class="literal">SHOW
        PROFILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">提供的分析信息相当的数据</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表可用于限制主机，用户或帐户收集的历史事件，以减少运行时间开销和历史表中收集的数据量。</font><font style="vertical-align: inherit;">该示例的第一步显示了如何将历史事件的收集限制到特定用户。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        Performance Schema以皮秒（十亿分之一秒）显示事件定时器信息，以将定时数据标准化为标准单位。</font><font style="vertical-align: inherit;">在以下示例中，
         </font></font><code class="literal">TIMER_WAIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值除以1000000000000以秒为单位显示数据。</font><font style="vertical-align: inherit;">值也被截断为6个小数位以显示格式</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-profiles" title="13.7.5.31 SHOW PROFILES语法"><code class="literal">SHOW PROFILES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-profile" title="13.7.5.30 SHOW PROFILE语法"><code class="literal">SHOW PROFILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">相同的数据</font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            将历史事件的集合限制为将运行查询的用户。</font><font style="vertical-align: inherit;">默认情况下，
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置为允许对所有前台线程进行监视和历史事件收集：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM performance_schema.setup_actors;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HOST | </font><font style="vertical-align: inherit;">USER | </font><font style="vertical-align: inherit;">ROLE | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">历史|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + --------- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            更新</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的默认行
             </font><font style="vertical-align: inherit;">以禁用所有前景线程的历史事件收集和监视，并插入一个新行，以启用将运行查询的用户的监视和历史事件收集：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE performance_schema.setup_actors SET ENABLED = 'NO', HISTORY = 'NO'<font></font>
       WHERE HOST = '%' AND USER = '%';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO performance_schema.setup_actors (HOST,USER,ROLE,ENABLED,HISTORY)<font></font>
       VALUES('localhost','test_user','%','YES','YES');</code></strong>
</pre><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-actors-table" title="25.11.2.1 setup_actors表"><code class="literal">setup_actors</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font><font style="vertical-align: inherit;">
            数据</font><font style="vertical-align: inherit;">现在应该类似于以下内容：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM performance_schema.setup_actors;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ----------- + + ------ + --------- + -------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HOST | </font><font style="vertical-align: inherit;">USER | </font><font style="vertical-align: inherit;">ROLE | </font><font style="vertical-align: inherit;">ENABLED | </font><font style="vertical-align: inherit;">历史|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ----------- + + ------ + --------- + -------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">NO |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">localhost | </font><font style="vertical-align: inherit;">test_user | </font><font style="vertical-align: inherit;">％| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ----------- + + ------ + --------- + -------- -  +</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            通过更新</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#setup-instruments-table" title="25.11.2.3 setup_instruments表"><code class="literal">setup_instruments</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">确保语句和阶段检测已启用
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有些仪器可能已经默认启用。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE performance_schema.setup_instruments SET ENABLED = 'YES', TIMED = 'YES'<font></font>
       WHERE NAME LIKE '%statement/%';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE performance_schema.setup_instruments SET ENABLED = 'YES', TIMED = 'YES'<font></font>
       WHERE NAME LIKE '%stage/%';</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            确保</font></font><code class="literal">events_statements_*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">events_stages_*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者已启用。</font><font style="vertical-align: inherit;">一些消费者可能已经默认启用。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE performance_schema.setup_consumers SET ENABLED = 'YES'<font></font>
       WHERE NAME LIKE '%events_statements_%';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE performance_schema.setup_consumers SET ENABLED = 'YES'<font></font>
       WHERE NAME LIKE '%events_stages_%';</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在您正在监控的用户帐户下，运行您想要进行配置的声明。</font><font style="vertical-align: inherit;">例如：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM employees.employees WHERE emp_no = 10001;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------ + ------------ + ----------- +  - ------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">emp_no | </font><font style="vertical-align: inherit;">birth_date | </font><font style="vertical-align: inherit;">first_name | </font><font style="vertical-align: inherit;">last_name | </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">hire_date |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------ + ------------ + ----------- +  - ------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">10001 | </font><font style="vertical-align: inherit;">1953-09-02 | </font><font style="vertical-align: inherit;">Georgi | </font><font style="vertical-align: inherit;">Facello | </font><font style="vertical-align: inherit;">M | </font><font style="vertical-align: inherit;">1986-06-26 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------ + ------------ + ----------- +  - ------ + ------------ +</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过查询</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-statements-history-long-table" title="25.11.6.3 events_statements_history_long表"><code class="literal">events_statements_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表格</font><font style="vertical-align: inherit;">来</font><font style="vertical-align: inherit;">
            确定</font><font style="vertical-align: inherit;">陈述的内容
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这一步与运行</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-profiles" title="13.7.5.31 SHOW PROFILES语法"><code class="literal">SHOW PROFILES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">识别
             </font><font style="vertical-align: inherit;">相似
             </font></font><code class="literal">Query_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下查询产生的输出类似于</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-profiles" title="13.7.5.31 SHOW PROFILES语法"><code class="literal">SHOW
            PROFILES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EVENT_ID, TRUNCATE(TIMER_WAIT/1000000000000,6) as Duration, SQL_TEXT<font></font>
       FROM performance_schema.events_statements_history_long WHERE SQL_TEXT like '%10001%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ---------- + --------------------------- ----------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">event_id | </font><font style="vertical-align: inherit;">持续时间| </font><font style="vertical-align: inherit;">sql_text |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ---------- + --------------------------- ----------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">31 | </font><font style="vertical-align: inherit;">0.028310 | </font><font style="vertical-align: inherit;">SELECT * FROM employees.employees WHERE emp_no = 10001 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ---------- + --------------------------- ----------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查询
             </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#events-stages-history-long-table" title="25.11.5.3 events_stages_history_long表"><code class="literal">events_stages_history_long</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表以检索语句的舞台事件。</font><font style="vertical-align: inherit;">阶段链接到使用事件嵌套的语句。</font><font style="vertical-align: inherit;">每个阶段事件记录都有一个</font></font><code class="literal">NESTING_EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font></font><code class="literal">EVENT_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">父语句的列。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT event_name AS Stage, TRUNCATE(TIMER_WAIT/1000000000000,6) AS Duration<font></font>
       FROM performance_schema.events_stages_history_long WHERE NESTING_EVENT_ID=31;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">舞台| </font><font style="vertical-align: inherit;">持续时间|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / starting | </font><font style="vertical-align: inherit;">0.000080 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /检查权限| </font><font style="vertical-align: inherit;">0.000005 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /打开表格 </font><font style="vertical-align: inherit;">0.027759 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / init | </font><font style="vertical-align: inherit;">0.000052 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /系统锁定| </font><font style="vertical-align: inherit;">0.000009 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / optimize | </font><font style="vertical-align: inherit;">0.000006 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / statistics | </font><font style="vertical-align: inherit;">0.000082 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / prepare | </font><font style="vertical-align: inherit;">0.000008 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /执行| </font><font style="vertical-align: inherit;">0.000000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /发送数据| </font><font style="vertical-align: inherit;">0.000017 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / end | </font><font style="vertical-align: inherit;">0.000001 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / query end | </font><font style="vertical-align: inherit;">0.000004 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /结束表| </font><font style="vertical-align: inherit;">0.000006 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql / free项目| </font><font style="vertical-align: inherit;">0.000272 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">stage / sql /清理| </font><font style="vertical-align: inherit;">0.000001 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- + ---------- +</font></font><font></font>
</pre></li></ol>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="performance-schema-variable-table-migration"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.19迁移到性能模式系统和状态变量表</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表包含系统和状态变量信息（请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/information-schema.html#variables-table" title="24.10 INFORMATION_SCHEMA GLOBAL_VARIABLES和SESSION_VARIABLES表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第24.10节“INFORMATION_SCHEMA GLOBAL_VARIABLES和SESSION_VARIABLES表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="xref" href="/mysql-5.7-google-zh/information-schema.html#status-table" title="24.9 INFORMATION_SCHEMA GLOBAL_STATUS和SESSION_STATUS表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第24.9节“INFORMATION_SCHEMA GLOBAL_STATUS和SESSION_STATUS表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">性能模式还包含系统和状态变量表（请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.13节“性能模式系统变量表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="xref" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第25.11.14节“性能模式状态变量表”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">性能模式表旨在取代
       </font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，从MySQL 5.7.6开始不推荐使用，并将在未来的MySQL版本中删除。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本部分描述了从</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统和状态变量表到相应的性能模式表</font><font style="vertical-align: inherit;">的预期迁移路径
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">应用程序开发人员应该使用这些信息作为关于访问MySQL 5.7.6及更高版本中的系统和状态变量所需的更改的指导，因为这些</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表将被弃用并最终被删除。
    </font></font></p><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL 5.6</font></font></strong></span>
    </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在MySQL 5.6中，系统和状态变量信息可以从这些</font></font><code class="literal">SHOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句中获得：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示变量</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显示状态</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从这些</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格可以看出：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INFORMATION_SCHEMA.GLOBAL_VARIABLES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INFORMATION_SCHEMA.SESSION_VARIABLES</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INFORMATION_SCHEMA.GLOBAL_STATUS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INFORMATION_SCHEMA.SESSION_STATUS</font></font><font></font>
</pre><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL 5.7</font></font></strong></span>
    </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从MySQL 5.7.6开始，性能模式将这些表作为系统和状态变量信息的新来源：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance_schema.global_variables</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.session_variables</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.variables_by_thread</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.global_status</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.session_status</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.status_by_thread</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.status_by_account</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.status_by_host</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
performance_schema.status_by_user</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL 5.7.6还添加了一个
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量来控制服务器如何使系统和状态变量信息可用。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
       </font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，与MySQL 5.6的兼容性已启用。</font><font style="vertical-align: inherit;">较旧的系统和状态变量源（</font></font><code class="literal">SHOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，
       </font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表）可用与MySQL 5.6相同的语义。</font><font style="vertical-align: inherit;">应用程序应该按原样运行，不需要更改代码，并且应该看到与MySQL 5.6中相同的变量名称和值。</font><font style="vertical-align: inherit;">在这些情况下会发生警告：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中</font><font style="vertical-align: inherit;">选择时会引发弃用警告
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6和5.7.7中，</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对</font></font><code class="literal">SHOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">子句
           </font><font style="vertical-align: inherit;">时会引发弃用警告</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这种行为不会发生在MySQL 5.7.8中。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
       </font></font><code class="literal">OFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，与MySQL 5.6的兼容性被禁用和几个变化导致。</font><font style="vertical-align: inherit;">应用程序必须修改如下以正确运行：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font><font style="vertical-align: inherit;">选择</font><font style="vertical-align: inherit;">会产生错误。</font><font style="vertical-align: inherit;">访问</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表的</font><font style="vertical-align: inherit;">应用程序
           </font><font style="vertical-align: inherit;">应该修改为使用相应的性能模式表。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.9之前，从</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">选择
           </font><font style="vertical-align: inherit;">产生一个空的结果集和一个弃用警告。</font><font style="vertical-align: inherit;">这并不足以表示需要迁移到相应的性能模式系统和状态变量表中
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56=OFF</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在MySQL 5.7.9及更高版本中产生错误使得应用程序在需要修改的条件下以及问题出现的地方更加明显。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6和5.7.7中，性能模式
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格不能完全反映当前会话有效的所有变量值; </font><font style="vertical-align: inherit;">它们不包含没有会话副本的全局变量的行。</font><font style="vertical-align: inherit;">这在MySQL 5.7.8中得到了纠正。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">SHOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句的</font><font style="vertical-align: inherit;">
          输出</font><font style="vertical-align: inherit;">是使用底层的性能模式表生成的。</font><font style="vertical-align: inherit;">编写使用这些语句的应用程序仍然可以使用它们，但最好使用MySQL 5.7.8或更高版本。</font><font style="vertical-align: inherit;">在MySQL 5.7.6和5.7.7中，结果可能会有所不同：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">SHOW [SESSION] VARIABLES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 输出不包含没有会话副本的全局变量。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code class="literal">SHOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句中</font><font style="vertical-align: inherit;">
              使用</font><font style="vertical-align: inherit;">子句
               </font><font style="vertical-align: inherit;">会产生错误。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些</font><font style="vertical-align: inherit;">
          状态变量通过</font><font style="vertical-align: inherit;">以下方式
         </font><font style="vertical-align: inherit;">不可用
          </font></font><code class="literal">Slave_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-status" title="13.7.5.35 SHOW STATUS语法"><code class="literal">SHOW STATUS</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slave_heartbeat_period</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Slave_last_heartbeat</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Slave_received_heartbeats</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Slave_retried_transactions</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Slave_running</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          应该修改使用这些状态变量的应用程序，以使用复制相关的性能模式表获取此信息。</font><font style="vertical-align: inherit;">有关详细信息，请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56_slave_status" title="show_compatibility_56对从站状态变量的影响"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">show_compatibility_56对从站状态变量的影响</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          性能模式不会收集</font><font style="vertical-align: inherit;">状态变量表中状态变量的</font><font style="vertical-align: inherit;">统计信息
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要获取全局和每会话语句执行计数</font><font style="vertical-align: inherit;">
          ，分别</font><font style="vertical-align: inherit;">使用
           </font><font style="vertical-align: inherit;">
          和
           </font><font style="vertical-align: inherit;">表。
</font></font><code class="literal">Com_<em class="replaceable"><code>xxx</code></em></code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_global_by_event_name</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#statement-summary-tables" title="25.11.15.3语句汇总表"><code class="literal">events_statements_summary_by_thread_by_event_name</code></a><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移和特权</font></font></strong></span>
    </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      最初，随着MySQL 5.7.6中的性能模式系统和状态变量表的引入，对这些表的访问需要</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_select"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权，就像其他性能模式表一样。</font><font style="vertical-align: inherit;">然而，这有后果时
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56=OFF</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-variables" title="13.7.5.39 SHOW VARIABLES语法"><code class="literal">SHOW VARIABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-status" title="13.7.5.35 SHOW STATUS语法"><code class="literal">SHOW STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报表还需要</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_select"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权：兼容性禁用，对于那些报表输出从性能模式拍摄
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">global_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-system-variable-tables" title="25.11.13性能模式系统变量表"><code class="literal">session_variables</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">global_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#performance-schema-status-variable-tables" title="25.11.14性能模式状态变量表"><code class="literal">session_status</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从MySQL 5.7.9开始，这些性能模式表是世界可读的，没有</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_select"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限就</font><font style="vertical-align: inherit;">可以访问
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-variables" title="13.7.5.39 SHOW VARIABLES语法"><code class="literal">SHOW VARIABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-status" title="13.7.5.35 SHOW STATUS语法"><code class="literal">SHOW STATUS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要求对从其中它们的输出被时所产生的潜在的性能模式表的特权
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56=OFF</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超越MySQL 5.7</font></font></strong></span>
    </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在MySQL 8.0中，</font></font><code class="literal">INFORMATION_SCHEMA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量表和
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量被删除，并且</font></font><code class="literal">SHOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      语句的</font><font style="vertical-align: inherit;">输出</font><font style="vertical-align: inherit;">总是基于底层的性能模式表。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      已经修改为在MySQL 5.7中工作的应用程序
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56=OFF</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该在没有进一步更改的情况下工作，但不能进行测试或设置，
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_show_compatibility_56"><code class="literal">show_compatibility_56</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它不存在。
</font></font></p>
</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tbody><tr>
<td width="40%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/information-schema.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a></td>
<td width="20%" align="center"><a accesskey="u" href="/mysql-5.7-google-zh/performance-schema.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向上</font></font></a></td>
<td width="40%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/sys-schema.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第24章INFORMATION_SCHEMA表</font></font></td>
<td width="20%" align="center"><a accesskey="h" href="/mysql-5.7-google-zh/index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">家</font></font></a></td>
<td width="40%" align="right" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第26章MySQL sys模式</font></font></td>
</tr>
</tbody></table>
</div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./images/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>