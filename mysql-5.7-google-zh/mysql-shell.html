<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>第18章MySQL Shell用户指南</title>
<link rel="stylesheet" href="./images/mvl.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2">
<link rel="start" href="/mysql-5.7-google-zh/index.html" title="{书名}">
<link rel="up" href="/mysql-5.7-google-zh/mysql-shell.html" title="">
<link rel="prev" href="/mysql-5.7-google-zh/group-replication.html" title="第17章组复制">
<link rel="next" href="/mysql-5.7-google-zh/document-store.html" title="第19章使用MySQL作为文档存储">
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./images/translateelement.css"></head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tbody><tr>
<th colspan="3" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18章MySQL Shell用户指南</font></font></th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/group-replication.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a>&nbsp;</td>
<th width="60%" align="center"></th>
<td width="20%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/document-store.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
</tbody></table>
<hr>
</div>
<div lang="zh" class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="mysql-shell"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18章MySQL Shell用户指南</font></font></h1>

</div>

</div>

</div>
<div class="toc">
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></b></p><dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-features"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1 MySQL Shell特性</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-getting-started"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2 MySQL Shell入门</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1 MySQL Shell连接</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-sessions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.2 MySQL Shell会话</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-global-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.3 MySQL Shell全局变量</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-code-execution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3 MySQL Shell代码执行</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-interactive-code-execution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.1交互式代码执行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-batch-code-execution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2批处理代码执行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-output-formats"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3输出格式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-active-language"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.4活动语言</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-batch-mode-interactive"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.5交互式批处理模式</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-configuring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4配置MySQL Shell</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-commands"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.1 MySQL Shell命令</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-application-log"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.5 MySQL Shell应用程序日志</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-customizing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6自定义MySQL Shell</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-creating-startup-scripts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.1使用启动脚本</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-adding-module-search-paths"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2添加模块搜索路径</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-overriding-the-default-prompt"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.3覆盖默认提示</font></font></a></span></dt></dl></dd></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本节提供MySQL Shell的用户文档，这是MySQL Server的高级客户端和代码编辑器。</font><font style="vertical-align: inherit;">除了提供SQL功能，类似</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的MySQL</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，MySQL的壳牌提供的JavaScript和Python脚本功能，包括API来使用MySQL。</font><font style="vertical-align: inherit;">X DevAPI使您能够处理关系数据和文档数据，请参见
     </font></font><a class="xref" href="/mysql-5.7-google-zh/document-store.html" title="第19章使用MySQL作为文档存储"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第19章，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用MySQL作为文档存储</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">AdminAPI使您能够使用InnoDB集群，请参阅
     </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-innodb-cluster-userguide.html" title="第20章InnoDB集群"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第20章</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB集群</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  MySQL Shell使您能够使用X DevAPI与运行X插件的MySQL服务器进行通信的原型代码。</font><font style="vertical-align: inherit;">X插件是MySQL Server 5.7.12和更高版本提供的新的MySQL服务器功能。
</font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  MySQL Shell是MySQL服务器的高级命令行客户端和代码编辑器。</font><font style="vertical-align: inherit;">除SQL外，MySQL Shell还为JavaScript和Python提供脚本功能。</font><font style="vertical-align: inherit;">当MySQL Shell通过X协议连接到MySQL服务器时，X DevAPI可用于处理关系数据和文档数据。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-features"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1 MySQL Shell特性</font></font></h2>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    以下功能在MySQL Shell中可用。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="idm140528022252128"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交互式代码执行</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell提供了一种交互式代码执行模式，您可以在MySQL Shell提示符下键入代码，并处理每个输入的语句，并在屏幕上显示处理结果。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528022250688"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持的语言</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell使用以下语言处理代码：JavaScript，Python和SQL。</font><font style="vertical-align: inherit;">根据当前活动的语言，任何输入的代码都将作为这些语言之一进行处理。</font><font style="vertical-align: inherit;">还有特定的MySQL Shell命令，前缀为</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使您可以配置MySQL Shell，而不管当前选择的语言如何。</font><font style="vertical-align: inherit;">有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-commands" title="18.4.1 MySQL Shell命令"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.4.1节“MySQL Shell命令”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528022247568"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">批处理代码执行</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      除了交互式执行代码之外，MySQL Shell还可以从不同来源获取代码并对其进行处理。</font><font style="vertical-align: inherit;">这种以非交互方式处理代码的方法称为
       </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">批处理执行</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由于批处理执行模式旨在用于单一语言的脚本处理，因此它仅限于具有最少的非格式输出并禁用命令的执行。</font><font style="vertical-align: inherit;">为了避免这些限制，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_interactive"><code class="option">--interactive</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      命令行选项，该选项告诉MySQL Shell执行输入，就像它是交互式会话一样。</font><font style="vertical-align: inherit;">在这种模式下，输入</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逐行进行</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理</font><span class="emphasis"><em><font style="vertical-align: inherit;">，</font></em></span><font style="vertical-align: inherit;">就像在交互式会话中输入每行一样。</font><font style="vertical-align: inherit;">有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-batch-mode-interactive" title="18.3.5交互式批处理模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.3.5节“交互式批处理模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528022242480"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出格式</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell根据使用方式提供不同格式的输出：Tabbed，Table和JSON。</font><font style="vertical-align: inherit;">有关更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-output-formats" title="18.3.3输出格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.3.3节“输出格式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528182264128"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多线支持</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      可以使用命令编写多行代码，使MySQL Shell能够缓存多行，然后将它们作为单个语句执行。</font><font style="vertical-align: inherit;">有关更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-multiple-line-support" title="18.3.5.1多线支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.3.5.1节“多线支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528182261968"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序日志</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      可以将MySQL Shell配置为记录有关执行过程的信息。</font><font style="vertical-align: inherit;">有关更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-application-log" title="18.5 MySQL Shell应用程序日志"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.5节“MySQL Shell应用程序日志”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528182259936"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持的API</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell包括以JavaScript和Python实现的以下API，您可以使用它们来开发与MySQL交互的代码。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当MySQL Shell使用X协议连接到MySQL服务器时，X DevAPI使您能够处理关系数据和文档数据。</font><font style="vertical-align: inherit;">有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/document-store.html" title="第19章使用MySQL作为文档存储"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第19章，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将MySQL用作文档存储</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关X DevAPI概念和用法的文档，请参阅
           </font></font><a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X DevAPI用户指南</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          AdminAPI使您能够使用InnoDB集群，该集群使用基于InnoDB的MySQL数据库提供高可用性和可伸缩性的集成解决方案，而不需要MySQL的高级专业知识。</font><font style="vertical-align: inherit;">请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-innodb-cluster-userguide.html" title="第20章InnoDB集群"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第20章</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB集群</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关API实现的特定文档，请参阅
       </font></font><a class="ulink" href="http://dev.mysql.com/doc/dev//mysqlsh-api-javascript/1.0/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      和
       </font></font><a class="ulink" href="http://dev.mysql.com/doc/dev//mysqlsh-api-python/1.0/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528182252080"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X协议支持</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell旨在为支持X协议的所有MySQL产品提供集成的命令行客户端。</font><font style="vertical-align: inherit;">MySQL Shell的开发功能是为使用X协议的会话而设计的。</font><font style="vertical-align: inherit;">MySQL Shell还可以使用传统MySQL协议连接到不支持X协议的MySQL服务器。</font><font style="vertical-align: inherit;">来自X DevAPI的一小部分功能可用于使用传统MySQL协议创建的会话。

      
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="idm140528182249728"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球会议</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      与MySQL服务器的交互是通过Session对象完成的。</font><font style="vertical-align: inherit;">对于Python和JavaScript，可以通过</font><font style="vertical-align: inherit;">mysqlx模块</font></font><code class="literal">getSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><code class="literal">getNodeSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">创建Session
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果使用这些方法中的任何一种方法以JavaScript模式创建会话，则只能在JavaScript模式下使用会话。</font><font style="vertical-align: inherit;">如果会话是在Python模式下创建的，则会发生同样的情况。</font><font style="vertical-align: inherit;">这些会话都不能在SQL模式下使用。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于SQL模式，MySQL Shell支持全局会话的概念。</font><font style="vertical-align: inherit;">当连接信息使用命令行选项或使用命令传递给MySQL Shell时，会创建一个全局会话</font></font><code class="literal">\connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      全局会话用于在SQL模式下执行语句，同一会话在Python或JavaScript模式下均可用。</font><font style="vertical-align: inherit;">当创建一个全局会话时，调用的变量
       </font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被设置为脚本语言，因此您可以通过切换活动模式来执行不同语言的代码。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-sessions" title="18.2.2 MySQL Shell会话"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.2节“MySQL Shell会话”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-getting-started"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2 MySQL Shell入门</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1 MySQL Shell连接</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-sessions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.2 MySQL Shell会话</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-global-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.3 MySQL Shell全局变量</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本节介绍如何开始使用MySQL Shell，解释如何连接到MySQL服务器实例以及如何选择会话类型。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-connections"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1 MySQL Shell连接</font></font></h3>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.1使用URI字符串进行连接</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-parameters"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.2使用单个参数进行连接</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-encrypted-connections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.3使用加密连接</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-connections-in-javascript-and-python"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.4 JavaScript和Python中的连接</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell可以使用X协议和经典的MySQL协议连接到MySQL服务器。</font><font style="vertical-align: inherit;">您要连接的MySQL服务器的地址可以使用个别参数（如用户，主机名和端口）或使用统一资源标识符（URI）类型字符串来指定。</font><font style="vertical-align: inherit;">以下各节介绍这些连接方法。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多背景信息</font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#connecting" title="4.2.2连接到MySQL服务器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
       </font><a class="xref" href="/mysql-5.7-google-zh/programs.html#connecting" title="4.2.2连接到MySQL服务器"><font style="vertical-align: inherit;">第4.2.2节“连接到MySQL服务器”</font></a><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您可以通过以下方式配置MySQL Shell连接到的MySQL服务器实例：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当您使用命令参数启动MySQL Shell时。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-parameters" title="18.2.1.2使用单个参数进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.1.2节“使用单个参数进行连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当MySQL Shell正在使用该</font></font><code class="literal">\connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font><font style="vertical-align: inherit;">运行时
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-commands" title="18.4.1 MySQL Shell命令"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.4.1节“MySQL Shell命令”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用该</font><font style="vertical-align: inherit;">
          方法</font><font style="vertical-align: inherit;">运行Python或Java代码时
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">查看
           </font><a class="ulink" href="http://dev.mysql.com/doc/dev//mysqlsh-api-javascript/8.0/" target="_top"><font style="vertical-align: inherit;">JavaScript</font></a><font style="vertical-align: inherit;"> 
          和
           </font><a class="ulink" href="http://dev.mysql.com/doc/dev//mysqlsh-api-python/8.0/" target="_top"><font style="vertical-align: inherit;">Python</font></a><font style="vertical-align: inherit;">。
</font></font><code class="literal">shell.connect('<em class="replaceable"><code>instance</code></em>')</code><font style="vertical-align: inherit;"></font><a class="ulink" href="http://dev.mysql.com/doc/dev//mysqlsh-api-javascript/8.0/" target="_top"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a class="ulink" href="http://dev.mysql.com/doc/dev//mysqlsh-api-python/8.0/" target="_top"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些方法都支持
       </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串进行连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        无论您选择连接哪种方法，了解密码是如何由MySQL Shell处理的都很重要。</font><font style="vertical-align: inherit;">默认情况下，连接假定需要密码。</font><font style="vertical-align: inherit;">密码在登录提示时请求。</font><font style="vertical-align: inherit;">要指定密码的帐户使用的
         </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_password"><code class="option">--password</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项，并且不指定密码，或使用</font></font><code class="literal">:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后
         </font></font><code class="literal">user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的URI字符串类型，不指定密码。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您没有为连接指定参数，则使用以下默认值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用户默认为当前系统用户名
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          主机默认为localhost
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          端口在使用X协议会话时默认为X插件端口33060，在使用经典会话时默认为端口3306
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用X协议的MySQL Shell连接
       </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总是</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用TCP，不支持使用Unix套接字。</font><font style="vertical-align: inherit;">当满足以下条件时，使用MySQL协议的MySQL Shell连接默认使用Unix套接字：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          没有指定TCP端口
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          主机名称未指定或等于
          </font></font><code class="literal">localhost</code>
        </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          套接字提供了一个套接字文件的路径
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          指定经典会话
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果指定了主机名但不是
       </font></font><code class="literal">localhost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则建立TCP连接。</font><font style="vertical-align: inherit;">在这种情况下，如果未指定TCP端口，则使用缺省值3306。</font><font style="vertical-align: inherit;">如果套接字连接的条件满足，但未指定套接字文件的路径，则使用默认套接字。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#connecting" title="4.2.2连接到MySQL服务器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.2.2节“连接到MySQL服务器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-connection-using-uri"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.1使用URI字符串进行连接</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以通过以URI字符串格式传递连接数据来配​​置MySQL Shell连接到的MySQL服务器。</font><font style="vertical-align: inherit;">这样的字符串可以与
         </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令选项，MySQL Shell </font></font><code class="literal">\connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令和
         </font></font><code class="literal">shell.connect()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法一起使用。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        URI类型字符串应使用以下格式：
      </font></font></p><pre class="programlisting"><em class="replaceable"><code>scheme</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：// [ </font></font><em class="replaceable"><code>user</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[：[ </font></font><em class="replaceable"><code>password</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]] @] </font></font><em class="replaceable"><code>target</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[：</font></font><em class="replaceable"><code>port</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] [/ </font></font><em class="replaceable"><code>schema</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] [？</font></font><em class="replaceable"><code>attribute1=value1&amp;attribute2=value2...</code></em>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          编码百分比必须用于URI类型字符串元素中的保留字符。</font><font style="vertical-align: inherit;">例如，如果您指定包含该</font></font><code class="literal">@</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">的密码</font><font style="vertical-align: inherit;">，则该字符必须替换为</font></font><code class="literal">%40</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。

          
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL Shell连接的URI类型字符串的元素是：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>scheme</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此元素是必需的，并指定要使用的连接协议，目前</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于传统连接协议和</font></font><code class="literal">mysqlx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X协议。
          </font></font></p></li><li class="listitem"><p>
            <em class="replaceable"><code>user</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此元素是可选的，并指定用于认证过程的MySQL用户帐户。
          </font></font></p></li><li class="listitem"><p>
            <em class="replaceable"><code>password</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此元素是可选的，并指定用于认证过程的密码。
</font></font></p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将密码存储在URI类型字符串中是不安全的，不建议使用。
</font></font></p>
</div>
</li><li class="listitem"><p>
            <em class="replaceable"><code>target</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此元素是必需的，并指定连接引用的服务器实例。</font><font style="vertical-align: inherit;">可以是TCP连接信息，Unix套接字路径或Windows命名管道。</font><font style="vertical-align: inherit;">如果未指定，
             </font><font style="vertical-align: inherit;">则默认使用</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                TCP连接信息可以是主机名，IPv4地址或IPv6地址。</font><font style="vertical-align: inherit;">可以包含一个可选的端口号格式
                 </font></font><code class="literal">host:port</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中
                 </font></font><em class="replaceable"><code>port</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定目标MySQL服务器正在侦听连接的网络端口。</font><font style="vertical-align: inherit;">如果未指定，则默认使用33060用于X协议连接，而3306是经典MySQL协议连接的默认值。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                Unix套接字和Windows命名管道值是本地文件路径。</font><font style="vertical-align: inherit;">有两种方式来指定这样的路径，使用百分号编码或用圆括号包围路径，不需要百分比编码诸如公共目录分隔符之类的字符
                 </font></font><code class="literal">/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，要</font></font><code class="literal">root@localhost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Unix套接字
                 </font><font style="vertical-align: inherit;">进行连接，请
                 </font></font><code class="filename">/tmp/mysqld.sock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定使用括号as </font></font><code class="literal">root@localhost?socket=(/tmp/mysqld.sock)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                或使用百分比编码为
                 </font><font style="vertical-align: inherit;">的路径
                 </font></font><code class="literal">root@localhost?socket=%2Ftmp%2Fmysqld.sock%2F</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
            <em class="replaceable"><code>schema</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此元素是可选的，并指定建立连接时要设置为默认数据库。
          </font></font></p></li><li class="listitem"><p>
            <em class="replaceable"><code>?attribute=value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此元素是可选的，并指定包含选项的数据字典。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果没有使用建议的URI类型字符串指定密码，则会提示输入密码。</font><font style="vertical-align: inherit;">以下示例显示了如何使用用户名指定URI类型字符串
         </font></font><em class="replaceable"><code>user</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，每种情况下都会提示输入密码：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个X协议连接到监听端口33065的本地服务器实例。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlx：//用户@本地：33065
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个经典的MySQL协议X协议连接到监听端口3333的本地服务器实例。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的：//用户@本地：3333
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            X协议连接到远程服务器实例，使用主机名，IPv4地址和IPv6地址。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlx：//user@server.example.com/</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysqlx：//user@198.51.100.14：123</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysqlx：//用户@ [2001：DB8：85±3：8D3：1319：8a2e：370：7348]</font></font><font></font>
		</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            可以指定一个可选路径，它代表数据库模式。

            
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlx：//user@198.51.100.1/world%5Fx</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysqlx：//user@198.51.100.2：33060 /世界</font></font><font></font>
		</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            可以指定一个可选的查询，它包含一</font></font><code class="literal">key=value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对或</font><font style="vertical-align: inherit;">一</font><font style="vertical-align: inherit;">对</font><font style="vertical-align: inherit;">的形式的值</font></font><code class="literal">key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            字符用作值的分隔符，可以指定多个对和键的组合。</font><font style="vertical-align: inherit;">值可以是类型列表，列表值按外观排序。</font><font style="vertical-align: inherit;">字符串必须以百分比编码。

            
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssluser@127.0.0.1？SSL-CA％3D％2Froot％2Fclientcert％2Fca-cert.pem％26ssl证书％3D％2Fro \</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OT％2Fclientcert％2Fclient-cert.pem％26ssl键％3D％2Froot％2Fclientcert％2Fclient键</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
.PEM</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        尽管使用无密码帐户不安全并且不推荐，但您可以</font></font><em class="replaceable"><code>:</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在用户名后面</font><font style="vertical-align: inherit;">指定一个没有密码
         </font><font style="vertical-align: inherit;">的用户，例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlx：//用户：@localhost
</font></font></pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-connection-using-parameters"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.2使用单个参数进行连接</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        除了使用URI类型字符串指定连接参数外，还可以使用每个值的单独命令参数启动MySQL Shell时定义连接数据。</font><font style="vertical-align: inherit;">有关MySQL Shell命令选项的完整参考，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysqlsh" title="4.5.7 mysqlsh  -  MySQL Shell"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.5.7节“ </font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlsh</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  MySQL Shell”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用以下连接相关参数：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_dbuser"><code class="option">--dbuser</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （</font></font><code class="option">-u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_dbpassword"><code class="option">--dbpassword</code></a>
            <em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_host"><code class="option">--host</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="option">-h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font><em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_port"><code class="option">--port</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="option">-P</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font><em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_schema"><code class="option">--schema</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （</font></font><code class="option">-D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_password"><code class="option">--password</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （</font></font><code class="option">-p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_socket"><code class="option">--socket</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （</font></font><code class="option">-S</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        前5个参数与</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串进行连接”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述的URI类型字符串格式中使用的元素匹配
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_password"><code class="option">--password</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数表示用户应该</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码</font><font style="vertical-align: inherit;">连接</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了保持一致，某些参数支持以下别名：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_user"><code class="option">--user</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 相当于
            </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_dbuser"><code class="option">--dbuser</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_password"><code class="option">--password</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 相当于
            </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_dbpassword"><code class="option">--dbpassword</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_database"><code class="option">--database</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 相当于
            </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_schema"><code class="option">--schema</code></a>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当以多种方式指定参数时，例如同时使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项和指定个别参数（例如，）
         </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_user"><code class="option">--user</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则适用以下规则：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果多次指定参数，则使用上次显示的值。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果同时</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定了</font><font style="vertical-align: inherit;">两个单独的连接参数
             </font><font style="vertical-align: inherit;">，则将其值</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为基础值，各个参数的值将覆盖基本URI中的特定组件。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            例如，</font></font><em class="replaceable"><code>user</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要从URI </font><font style="vertical-align: inherit;">覆盖</font><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh --uri <em class="replaceable"><code>user</code></em>@localhost:33065 --user <em class="replaceable"><code>otheruser</code></em></code></strong>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例显示如何使用命令参数来指定连接。</font><font style="vertical-align: inherit;">尝试在端口33065处与指定用户建立X协议连接。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh --mysqxl -u <em class="replaceable"><code>user</code></em> -h localhost -P 33065</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        尝试与指定用户建立经典的MySQL协议连接。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh --mysql -u <em class="replaceable"><code>user</code></em> -h localhost</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-encrypted-connections"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.3使用加密连接</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        连接到TLS（有时称为SSL）的MySQL服务器时，可以使用加密连接。</font><font style="vertical-align: inherit;">MySQL Shell的大部分配置都基于MySQL服务器使用的选项，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#encrypted-connections" title="6.4使用加密连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.4节“使用加密连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取更多信息。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在启动MySQL Shell时配置加密连接，请使用以下命令选项：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl"><code class="option">--ssl</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：已弃用，将在未来版本中删除。</font><font style="vertical-align: inherit;">该选项启用或禁用加密连接。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-mode"><code class="option">--ssl-mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ：该选项指定到服务器的连接的安全状态。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-ca"><code class="option">--ssl-ca=<em class="replaceable"><code>filename</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：PEM格式文件的路径，其中包含可信SSL证书颁发机构的列表。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-capath"><code class="option">--ssl-capath=<em class="replaceable"><code>directory</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：包含PEM格式的可信SSL证书颁发机构证书的目录的路径。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-cert"><code class="option">--ssl-cert=<em class="replaceable"><code>filename</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于建立加密连接的PEM格式的SSL证书文件的名称。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-cipher"><code class="option">--ssl-cipher=<em class="replaceable"><code>name</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于建立加密连接的SSL密码的名称。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-key"><code class="option">--ssl-key=<em class="replaceable"><code>filename</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于建立加密连接的PEM格式的SSL密钥文件的名称。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-crl"><code class="option">--ssl-crl=<em class="replaceable"><code>name</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：以PEM格式包含证书吊销列表的文件的路径。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-crlpath"><code class="option">--ssl-crlpath=<em class="replaceable"><code>directory</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：包含PEM格式的证书撤销列表文件的目录的路径。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/security.html#option_general_tls-version"><code class="option">--tls-version=<em class="replaceable"><code>version</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：允许用于加密连接的TLS协议。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        或者，可以将SSL选项编码为URI类型字符串的一部分，作为查询元素的一部分。</font><font style="vertical-align: inherit;">可用的SSL选项与上面列出的选项相同，但是没有使用连字符编写。</font><font style="vertical-align: inherit;">例如</font></font><code class="literal">ssl-ca</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        URI类型字符串中指定的路径必须进行百分比编码，例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssluser@127.0.0.1？SSL-CA％3D％2Froot％2Fclientcert％2Fca-cert.pem％26ssl证书％3D％2Fro \</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OT％2Fclientcert％2Fclient-cert.pem％26ssl键％3D％2Froot％2Fclientcert％2Fclient键</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
.PEM</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串</font></a><font style="vertical-align: inherit;">进行</font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;">连接”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-connections-in-javascript-and-python"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.4 JavaScript和Python中的连接</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当使用命令选项或使用任何MySQL Shell命令建立连接时，会创建一个全局会话对象。</font><font style="vertical-align: inherit;">这个会话是全局的，因为一旦创建，就可以用于任何MySQL Shell执行模式。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        任何全局会话对象都可以在JavaScript或Python模式下使用，因为名为</font></font><span class="strong"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的变量
         </font><font style="vertical-align: inherit;">持有对它的引用。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        除了全局会话对象，会话可以通过使用可用的功能来建立和分配给不同的变量</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">mysqlx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript和Python模块。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，以下功能由这些模块提供：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">mysqlx.getSession(connectionData[,
            password])</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果使用Session实例创建或检索对象，则返回的对象可以是Session;如果使用ClassicSession实例创建或检索对象，则返回的对象可以是ClassicSession。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">mysql.getClassicSession(connectionData[,
            password])</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的对象是使用传统MySQL协议的ClassicSession，并且具有有限的开发API。
</font></font></p></li></ul>
</div>
<p>
        <code class="literal">connectionData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或包含连接参数的字典中</font><font style="vertical-align: inherit;">指定的URI类型字符串
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例显示如何使用X协议创建会话：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; </font><font style="vertical-align: inherit;">
mysql-js&gt;</font></font><strong class="userinput"><code>var mysession1=mysqlx.getSession('root@localhost:33060', '<em class="replaceable"><code>password</code></em>');</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>session</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;会话：根@本地&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例显示如何创建一个ClassicSession：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; </font><font style="vertical-align: inherit;">
mysql-js&gt;</font></font><strong class="userinput"><code>var mysession2=mysql.getClassicSession('root@localhost:3306', '<em class="replaceable"><code>password</code></em>');</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>session</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;ClassicSession：根@本地：3306&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font><font></font>
</pre>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-using-ssl-connection-data"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1.4.1在代码中使用加密连接</font></font></h5>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要建立加密连接，请在</font></font><code class="literal">connectionData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字典中</font><font style="vertical-align: inherit;">设置SSL信息</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的-JS&gt; </font></font><strong class="userinput"><code>var session=mysqlx.getSession({host: 'localhost',<font></font>
                                             dbUser: 'root',<font></font>
                                             dbPassword: '<em class="replaceable"><code>password</code></em>',<font></font>
                                             ssl_ca: "path_to_ca_file",<font></font>
                                             ssl_cert: "path_to_cert_file",<font></font>
                                             ssl_key: "path_to_key_file"});</code></strong><font></font>
<font></font>
</pre>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-sessions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.2 MySQL Shell会话</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-sessions-introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.2.1 MySQL Shell会话解释</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节介绍MySQL Shell中不同类型的会话以及如何创建和配置它们。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-sessions-introduction"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.2.1 MySQL Shell会话解释</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL Shell是通过脚本语言（如JavaScript或Python）操作MySQL Server的统一接口。</font><font style="vertical-align: inherit;">为了保持与以前版本的兼容性，SQL还可以在某些模式下执行。</font><font style="vertical-align: inherit;">需要连接到MySQL服务器。</font><font style="vertical-align: inherit;">在MySQL Shell中，这些连接由</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Session</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">处理
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下类型的Session对象可用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NodeSession</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：使用此会话类型进行新的应用程序开发，以便与启用了X协议的MySQL服务器实例进行通信。</font><font style="vertical-align: inherit;">它提供了与MySQL服务器的最佳集成，因此它默认使用。
          </font></font></p></li><li class="listitem"><p>
            <span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClassicSession</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用此会话类型与未启用X协议的MySQL服务器进行交互。</font><font style="vertical-align: inherit;">可用于此类会话的开发API非常有限。</font><font style="vertical-align: inherit;">例如，没有CRUD操作，没有收集处理，并且不支持绑定。
</font></font></p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-choose-session-type"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择MySQL Shell会话类型</font></font></h5>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL Shell默认创建一个Session对象。</font><font style="vertical-align: inherit;">您可以使用MySQL Shell命令选项（</font></font><code class="literal">scheme</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URI类型字符串</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">元素）</font><font style="vertical-align: inherit;">配置会话类型</font><font style="vertical-align: inherit;">，也可以为</font></font><code class="literal">\connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font><font style="vertical-align: inherit;">提供选项
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要选择在启动MySQL Shell时应创建哪种类型的会话，请使用以下选项之一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_sqln"><code class="option">--sqln</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 创建一个使用X协议连接的节点会话。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_sqlc"><code class="option">--sqlc</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 创建一个使用MySQL协议连接的ClassicSession。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要在定义URI类型字符串时选择使用哪种类型的会话，请使用以下选项之一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              指定</font></font><code class="literal">mysqlx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建X协议会话。</font><font style="vertical-align: inherit;">X插件必须安装在服务器实例上，请参阅
               </font></font><a class="xref" href="/mysql-5.7-google-zh/document-store.html" title="第19章使用MySQL作为文档存储"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第19章，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用MySQL作为文档存储</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取更多信息。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              指定</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个经典的MySQL协议会话。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串进行连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-create-session-using-shell"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Shell命令创建会话</font></font></h5>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您在未指定连接参数的情况下打开MySQL Shell，则MySQL Shell在未建立全局会话的情况下打开。</font><font style="vertical-align: inherit;">一旦使用MySQL Shell </font><font style="vertical-align: inherit;">
          命令</font><font style="vertical-align: inherit;">启动了MySQL Shell </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">就可以建立全局会话
           </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">是</font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串进行连接”中</font></a><font style="vertical-align: inherit;">定义的URI类型字符串
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：
</font></font><code class="literal">\connect <em class="replaceable"><code>URI</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>URI</code></em><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">\connect URI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：创建一个节点会话。</font><font style="vertical-align: inherit;">尝试默认使用X协议，并回退到MySQL协议。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">\connect -n URI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：创建一个节点会话。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">\connect -c URI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：使用MySQL协议创建一个ClassicSession。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">	MySQL的-JS&gt; </font></font><strong class="userinput"><code>\connect mysqlx://user@localhost:33060</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或者，使用该
           </font><font style="vertical-align: inherit;">
          方法。</font><font style="vertical-align: inherit;">例如，这等同于上面的
           </font><font style="vertical-align: inherit;">命令：
        </font></font><code class="literal">shell.connect('<em class="replaceable"><code>URI</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">\connect&gt;</code><font style="vertical-align: inherit;"></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的-JS&gt; </font></font><strong class="userinput"><code>shell.connect('mysqlx://user@localhost:33060')</code></strong>
</pre>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-global-variables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.3 MySQL Shell全局变量</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell将某些变量保留为全局变量，它们被分配给脚本中的常用对象。</font><font style="vertical-align: inherit;">本节介绍可用的全局变量并提供使用它们的示例。</font><font style="vertical-align: inherit;">全局变量是：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 代表全球会议，如果已经建立。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 表示一个模式，如果已经定义了一个模式，例如通过URI类型字符串。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">dba</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示AdminAPI，它是InnoDB集群的一个组件，可用于管理服务器实例的集群。</font><font style="vertical-align: inherit;">请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-innodb-cluster-userguide.html" title="第20章InnoDB集群"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第20章</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB集群</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 提供通用功能，例如配置MySQL Shell。
</font></font></p></li></ul>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些字是保留的，不能使用，例如作为变量的名称。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通过使用这些全局对象，MySQL Shell为常见情况提供了交互式错误解决方案。</font><font style="vertical-align: inherit;">例如：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          尝试使用未定义的</font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          全局变量。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          尝试使用检索不存在的模式
           </font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          尝试使用未定义的</font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局变量。
</font></font></p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="mysql-shell-undefined-global-session"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未定义的全局会话</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        全局</font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量在全局会话建立时设置。</font><font style="vertical-align: inherit;">建立全局会话时，</font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在MySQL Shell中</font><font style="vertical-align: inherit;">发布</font><font style="vertical-align: inherit;">语句会显示会话类型及其URI，如下所示：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt;会话</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;NodeSession：根@本地：33060&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果没有建立全局会话，MySQL Shell将显示以下内容：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt;会话</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;未定义&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果</font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在未建立全局会话时</font><font style="vertical-align: inherit;">尝试使用该</font><font style="vertical-align: inherit;">变量，将开始交互式错误解决，并提示您提供建立全局会话所需的信息。</font><font style="vertical-align: inherit;">如果会话成功建立，它将被分配给
         </font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量。</font><font style="vertical-align: inherit;">提示是：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            初步提示说明没有建立全球会议并询问是否应建立全球会议。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果您选择设置全局会话，则会请求会话类型。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            请求连接到服务器实例的URI类型字符串。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串进行连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如有需要，请提供密码。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; session.uri</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全球会议没有设置，你想建立一个会议？</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   1）通过X协议的MySQL文档存储会话</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   2）经典的MySQL会话</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请选择会话类型或ENTER键取消：2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请指定MySQL服务器URI：root @ localhost</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
输入密码： </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根@本地：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql-js&gt;会话</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;ClassicSession：根@本地：&gt;</font></font><font></font>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="mysql-shell-undefined-db-variable"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未定义的数据库变量</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        全局</font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量在全局会话建立并且配置了默认模式时设置。</font><font style="vertical-align: inherit;">例如，使用一个URI类型的字符串
         </font></font><code class="literal">root@localhost/sakila</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来建立一个连接到MySQL服务器的全局会话
         </font></font><code class="literal">localhost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在端口33060上，作为用户
         </font></font><code class="literal">root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将模式分配
         </font></font><code class="literal">sakila</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给全局变量
         </font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一旦定义了一个模式，</font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在MySQL Shell提示符处</font><font style="vertical-align: inherit;">发出
         </font><font style="vertical-align: inherit;">如下所示的模式名称：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; db</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;架构：world_x&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果没有建立全局会话，则显示以下内容：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; db</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;未定义&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您</font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在未建立全局会话时</font><font style="vertical-align: inherit;">尝试使用该</font><font style="vertical-align: inherit;">变量，则会显示以下错误：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; db.getCollections（）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LogicError：未设置数据库变量，首先建立一个全局会话。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在（壳）：1：2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在db.getCollections（）中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
^</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果全局会话已建立，但您尝试使用未定义的</font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交互式错误解决方法，则会提示您通过提供架构名称来定义活动模式。</font><font style="vertical-align: inherit;">如果成功，则将
         </font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量设置为已定义的模式。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; db.getCollections（）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
db变量没有设置，你想设置活动模式吗？</font><font style="vertical-align: inherit;">[Y / N]：Y</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请指定模式：world_x</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;收集：countryinfo&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql-js&gt; db</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;架构：world_x&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font><font></font>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="mysql-shell-retrieving-a-nonexistent-schema"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索不存在的模式</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果尝试使用</font></font><code class="literal">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索不存在的模式，交互式错误解决提供了创建模式的选项。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; var mySchema = session.getSchema（'my_test'）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
模式my_test不存在，你想创建它吗？</font><font style="vertical-align: inherit;">[y / N]：y</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql-js&gt; mySchema</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;架构：my_test&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-JS&gt;</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在所有情况下，如果您没有提供解决每种情况所需的信息，则显示在未定义变量上执行所请求语句的正确结果。
</font></font></p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-code-execution"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3 MySQL Shell代码执行</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-interactive-code-execution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.1交互式代码执行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-batch-code-execution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2批处理代码执行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-output-formats"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3输出格式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-active-language"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.4活动语言</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-batch-mode-interactive"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.5交互式批处理模式</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本节介绍如何在MySQL Shell中执行代码。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-interactive-code-execution"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.1交互式代码执行</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell的默认模式提供了在命令提示符下键入的数据库操作的交互式执行。</font><font style="vertical-align: inherit;">这些操作可以用JavaScript，Python或SQL编写，具体取决于</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-active-language" title="18.3.4活动语言"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.3.4节“主动语言”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">执行时，操作结果显示在屏幕上。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      与任何其他语言解释器一样，MySQL Shell在语法方面非常严格。</font><font style="vertical-align: inherit;">例如，以下JavaScript代码段读取并打印集合中的文档：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var mysqlx = require（'mysqlx'）。mysqlx;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var mySession = mysqlx.getSession（'user：pwd @ localhost'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var result = mySession.world_x.countryinfo.find（）。execute（）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var record = result.fetchOne（）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而（记录）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  打印（记录）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  record = result.fetchOne（）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如上所示，调用</font></font><code class="literal">find()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之后是该</font></font><code class="literal">execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font><font style="vertical-align: inherit;">CRUD数据库命令仅在</font></font><code class="literal">execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">时才在MySQL服务器上执行
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，当以交互方式使用MySQL Shell时，</font></font><code class="literal">execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只要按下</font></font><code class="literal">Return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">就会隐式调用它</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然后获取操作结果并显示在屏幕上。</font><font style="vertical-align: inherit;">何时需要打电话的规则
       </font></font><code class="literal">execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当以这种方式使用MySQL Shell时，调用
           </font></font><code class="literal">execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变为可选：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">Collection.add()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Collection.find()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Collection.remove()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Collection.modify()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.insert()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.select()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.delete()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.update()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">NodeSession.sql()</code>
</p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果对象被分配给变量，则自动执行被禁用。</font><font style="vertical-align: inherit;">在这种情况下，呼叫</font></font><code class="literal">execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是强制执行操作的。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当一条线被处理并且该函数返回任何可用</font></font><code class="literal">Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象时，结果对象中包含的信息将自动显示在屏幕上。</font><font style="vertical-align: inherit;">返回Result对象的函数包括：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              SQL执行和CRUD操作（上面列出）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在mysql和mysqlx模块中的会话对象的事务处理和删除功能： -

</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">startTransaction()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">commit()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">rollback()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropSchema()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropTable()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropCollection()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropView()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">ClassicSession.runSql()</code>
</p></li></ul>
</div>
<p>
</p></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      基于上述规则，MySQL Shell以交互模式建立会话，查询和打印集合中的文档所需的语句为：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-js&gt; </font></font><strong class="userinput"><code>var mysqlx = require('mysqlx').mysqlx;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql-js&gt;</font></font><strong class="userinput"><code>var mySession = mysqlx.getSession('user:pwd@localhost');</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      不需要呼叫，</font></font><code class="literal">execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且结果对象被自动打印。
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的-JS&gt; </font></font><strong class="userinput"><code>mySession.world_x.countryinfo.find();</code></strong>
</pre>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="mysql-shell-results-vertical"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直格式化结果</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当使用MySQL Shell执行SQL时，您可以使用</font></font><code class="literal">\G</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        命令</font><font style="vertical-align: inherit;">以每列行格式显示结果，与</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类似</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果语句终止</font></font><code class="literal">\G</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是活动分隔符（默认为</font></font><code class="literal">;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），则由服务器执行，并且结果以垂直格式显示，而不管当前的默认输出格式如何。</font><font style="vertical-align: inherit;">例如发布诸如

</font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM mysql.user \ G</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

        垂直显示结果。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，分隔的同一行上的多个SQL语句
         </font></font><code class="literal">\G</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别执行，就好像它们每行显示一个一样

</font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择1 \ Gselect 2 \ Gselect 3 \ G</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

        换句话说</font></font><code class="literal">\G</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就像普通的分隔符一样。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-batch-code-execution"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2批处理代码执行</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      除了交互式代码执行外，MySQL Shell还提供批处理代码执行：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一个文件加载进行处理。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含重定向到标准输入以供执行的代码的文件。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          来自不同来源的代码被重定向到标准输入以供执行。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      输入是基于在MySQL Shell中选择的当前编程语言处理的，默认为JavaScript。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从文件加载JavaScript代码进行批处理。
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh --file code.js</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将JavaScript文件重定向到标准输入以执行。
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh &lt; code.js</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将SQL重定向到标准输入以执行。
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>echo "show databases;" | mysqlsh --sql --uri root@198.51.100.141:33060</code></strong>
</pre>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="mysql-shell-executable-scripts"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行脚本</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从版本1.0.4开始，在Linux上，您可以通过</font></font><code class="literal">#!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在脚本的第一行添加一行</font><font style="vertical-align: inherit;">来创建与MySQL Shell一起运行的可执行脚本
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这一行应该提供MySQL Shell的完整路径并包含该</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_file"><code class="option">--file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃！/ usr / local / mysql-shell / bin / mysqlsh --file</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
print（“Hello World \ n”）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        脚本文件必须在文件系统中标记为可执行文件。</font><font style="vertical-align: inherit;">运行脚本调用MySQL Shell并执行脚本的内容。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-output-formats"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3输出格式</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-output-table-format"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.1表格格式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-output-tab-format"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.2制表符分隔格式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-json-output"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.3 JSON格式输出</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-output-metadata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.4结果元数据</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在服务器上处理的命令的输出可以用不同的方式进行格式化。</font><font style="vertical-align: inherit;">本节详细介绍不同的可用输出格式。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-output-table-format"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.1表格格式</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当MySQL Shell处于交互模式时，默认使用表格格式。</font><font style="vertical-align: inherit;">输出呈现为格式化表格，以便更好地查看并帮助分析。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的-SQL&gt; </font></font><strong class="userinput"><code>select * from sakila.actor limit 3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------- + ---------------- + ------- --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">actor_id | </font><font style="vertical-align: inherit;">first_name | </font><font style="vertical-align: inherit;">last_name | </font><font style="vertical-align: inherit;">last_update |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------- + ---------------- + ------- --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">PENELOPE | </font><font style="vertical-align: inherit;">GUINESS | </font><font style="vertical-align: inherit;">2006-02-15 4:34:33 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">NICK | </font><font style="vertical-align: inherit;">WAHLBERG | </font><font style="vertical-align: inherit;">2006-02-15 4:34:33 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">ED | </font><font style="vertical-align: inherit;">CHASE | </font><font style="vertical-align: inherit;">2006-02-15 4:34:33 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------- + ---------------- + ------- --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-SQL&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要以批处理模式运行时获得此输出格式，请使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_table"><code class="option">--table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行选项。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-output-tab-format"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.2制表符分隔格式</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在批处理模式下运行MySQL Shell时，默认使用此格式，以便为自动分析提供更好的输出。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font><strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --classic --uri root@198.51.100.141:33460</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
actor_id first_name last_name last_update</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 PENELOPE GUINESS 2006-02-15 4:34:33</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 NICK WAHLBERG 2006-02-15 4:34:33</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3 ED CHASE 2006-02-15 4:34:33</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-json-output"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.3 JSON格式输出</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL Shell支持JSON格式输出，并且可以在交互模式和批处理模式下使用。</font><font style="vertical-align: inherit;">此输出格式可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_json"><code class="option">--json</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        命令行选项</font><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">：
      </font></font></p><p>
        <span class="strong"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">批处理模式下的JSON格式</font></font></strong></span>
      </p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt;</font></font><strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --json --sqlc --uri root@198.51.100.141:3306</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{“duration”：“0.00 sec”，“info”：“”，“row_count”：3，“rows”：[[1，“PENELOPE”，“GUINESS”，{“year”：2006，“month” 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]，[2， “NICK”， “沃尔伯格”，{ “年”：2006， “月”： 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]，[3， “ED”， “追踪”，{ “年”：2006， “月”： 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]]， “WARNING_COUNT”：0}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
外壳&gt;</font></font><strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --json=raw --sqlc --uri root@198.51.100.141:3306</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{“duration”：“0.00 sec”，“info”：“”，“row_count”：3，“rows”：[[1，“PENELOPE”，“GUINESS”，{“year”：2006，“month” 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]，[2， “NICK”， “沃尔伯格”，{ “年”：2006， “月”： 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]，[3， “ED”， “追踪”，{ “年”：2006， “月”： 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]]， “WARNING_COUNT”：0}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
外壳&gt;</font></font><strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --json=pretty --sqlc --uri root@198.51.100.141:3306</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “持续时间”：“0.00秒”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “info”：“”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “row_count”：3，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “行”：[</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        [</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “佩内洛普”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “吉尼斯”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “年”：2006年，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “月”：1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “日”：15日，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “小时”：4，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “分”：34，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “秒”：33.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        [</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            2，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “缺口”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “沃尔伯格”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “年”：2006年，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “月”：1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “日”：15日，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “小时”：4，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “分”：34，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “秒”：33.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        [</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            3，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “ED”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “追”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “年”：2006年，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “月”：1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “日”：15日，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “小时”：4，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “分”：34，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “秒”：33.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “warning_count”：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
外壳&gt;</font></font><font></font>
</pre><p>
        <span class="strong"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交互模式下的JSON格式（以--json = raw开头）</font></font></strong></span>
      </p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的-SQL&gt; </font></font><strong class="userinput"><code>select * from sakila.actor limit 3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{“duration”：“0.00 sec”，“info”：“”，“row_count”：3，“rows”：[[1，“PENELOPE”，“GUINESS”，{“year”：2006，“month” 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]，[2， “NICK”， “沃尔伯格”，{ “年”：2006， “月”： 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]，[3， “ED”， “追踪”，{ “年”：2006， “月”： 1， “日”：15， “小时”：4， “分钟”：34， “第二”：33.0}]]， “WARNING_COUNT”：0}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-SQL&gt;</font></font><font></font>
</pre><p>
        <span class="strong"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交互模式下的JSON格式（以--json = pretty开头）</font></font></strong></span>
      </p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的-SQL&gt; </font></font><strong class="userinput"><code>select * from sakila.actor limit 3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “持续时间”：“0.00秒”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “info”：“”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “row_count”：3，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “行”：[</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        [</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “佩内洛普”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “吉尼斯”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “年”：2006年，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “月”：1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “日”：15日，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “小时”：4，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “分”：34，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “秒”：33.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        [</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            2，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “缺口”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “沃尔伯格”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “年”：2006年，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “月”：1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “日”：15日，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “小时”：4，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “分”：34，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “秒”：33.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        [</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            3，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “ED”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            “追”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “年”：2006年，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “月”：1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “日”：15日，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “小时”：4，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “分”：34，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                “秒”：33.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “warning_count”：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-SQL&gt;</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-output-metadata"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.3.4结果元数据</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        执行操作时，除了返回的结果外，还有一些附加信息可用。</font><font style="vertical-align: inherit;">这包括以下信息：受影响的行数，警告，持续时间等等，当这些条件中的任何一个为真时：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            JSON格式被用于输出
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL Shell以交互模式运行。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-active-language"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.4活动语言</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell可以执行SQL，JavaScript或Python代码，但一次只能激活一种语言。</font><font style="vertical-align: inherit;">主动模式决定了执行语句的处理方式：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果使用SQL模式，语句将作为SQL处理，这意味着它们被发送到MySQL服务器执行。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果使用JavaScript模式，语句将作为JavaScript代码进行处理。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果使用Python模式，语句将作为Python代码进行处理。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在交互模式下运行MySQL外壳中，通过输入命令激活特定的语言：
       </font></font><code class="literal">\sql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">\js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">\py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在批处理模式下运行MySQL壳牌，通过使任何这些命令行选项激活特定语言：
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_js"><code class="option">--js</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_py"><code class="option">--py</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_sql"><code class="option">--sql</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果没有指定，则默认模式为JavaScript。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用MySQL Shell以</font></font><code class="filename">code.sql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL </font><font style="vertical-align: inherit;">的形式执行文件的内容
       </font><font style="vertical-align: inherit;">。
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh --sql &lt; code.sql</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用MySQL Shell以</font></font><code class="filename">code.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript代码</font><font style="vertical-align: inherit;">的形式执行文件的内容
       </font><font style="vertical-align: inherit;">。
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh &lt; code.js</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用MySQL Shell以</font></font><code class="filename">code.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python代码</font><font style="vertical-align: inherit;">的形式执行文件的内容
       </font><font style="vertical-align: inherit;">。
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysqlsh --py &lt; code.py</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-batch-mode-interactive"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.5交互式批处理模式</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-multiple-line-support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.5.1多线支持</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节介绍批处理模式下的代码执行。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在批处理模式下，上述所有命令逻辑都不可用，只能执行活动语言的有效代码。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          处理SQL代码时，使用以下逻辑通过语句执行语句：读取/处理/打印结果。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          处理非SQL代码时，它完全从输入源加载并作为一个单元执行。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_interactive"><code class="option">--interactive</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或
       </font></font><code class="option">-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）命令行选项配置MySQL Shell来处理输入源，就好像它在交互模式下发布一样; </font><font style="vertical-align: inherit;">这使得交互模式提供的所有功能都可用于批处理。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在这种情况下，无论源是什么，它都是逐行读取，并使用交互式管道进行处理。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-multiple-line-support"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.5.1多线支持</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以通过多行指定语句。</font><font style="vertical-align: inherit;">在Python或JavaScript模式下，当语句块像函数定义，if / then语句，for循环等一样启动时，将自动启用多行模式。</font><font style="vertical-align: inherit;">在SQL模式下，</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发出</font><font style="vertical-align: inherit;">命令时</font><font style="vertical-align: inherit;">会</font><font style="vertical-align: inherit;">启动多行模式
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        多行模式启动后，随后输入的语句被缓存。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-sql&gt; </font></font><strong class="userinput"><code>\</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><strong class="userinput"><code>create procedure get_actors()</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><strong class="userinput"><code>begin</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><strong class="userinput"><code>  select first_name from sakila.actor;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><strong class="userinput"><code>end</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的-SQL&gt;</font></font><font></font>
</pre>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-configuring"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4配置MySQL Shell</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-commands"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.1 MySQL Shell命令</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本节介绍如何使用可从交互式代码编辑器和命令选项执行的命令来配置MySQL Shell。</font><font style="vertical-align: inherit;">有关MySQL Shell命令选项的说明，请参见
     </font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysqlsh" title="4.5.7 mysqlsh  -  MySQL Shell"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.5.7节“ </font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlsh</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  MySQL Shell”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-commands"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.1 MySQL Shell命令</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell提供的命令使您能够修改代码编辑器的执行环境，例如配置活动编程语言或MySQL服务器连接。</font><font style="vertical-align: inherit;">下表列出了可用的命令，与当前选择的语言无关。</font><font style="vertical-align: inherit;">由于命令需要独立于</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行模式</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而可用</font><font style="vertical-align: inherit;">，因此它们以转义序列即</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符</font><font style="vertical-align: inherit;">开头</font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Commands available for MySQL Shell."><colgroup><col width="20%"><col width="20%"><col width="60%"></colgroup><thead><tr>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">别名/快捷方式</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><p>
              <code class="literal">\help</code>
            </p></td>
          <td><p>
              <code class="literal">\h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 要么 </font></font><code class="literal">\?</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              打印有关MySQL Shell命令的帮助。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\quit</code>
            </p></td>
          <td><p>
              <code class="literal">\q</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 要么 </font></font><code class="literal">\exit</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              退出MySQL Shell。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\</code>
            </p></td>
          <td></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在SQL模式下，开始多行模式。</font><font style="vertical-align: inherit;">代码被缓存并在输入空行时执行。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\status</code>
            </p></td>
          <td><p>
              <code class="literal">\s</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              显示当前的MySQL Shell状态。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\js</code>
            </p></td>
          <td></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将执行模式切换为JavaScript。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\py</code>
            </p></td>
          <td></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将执行模式切换到Python。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\sql</code>
            </p></td>
          <td></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将执行模式切换到SQL。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\connect</code>
            </p></td>
          <td><p>
              <code class="literal">\c</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用节点会话（X协议）使用URI连接到MySQL服务器。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\connect_node</code>
            </p></td>
          <td><p>
              <code class="literal">\cn</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （在版本1.0.4中删除，使用</font></font><code class="literal">\connect
              -n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）使用节点会话通过URI连接到MySQL服务器。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\connect_classic</code>
            </p></td>
          <td><p>
              <code class="literal">\cc</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （在版本1.0.4中删除，使用</font></font><code class="literal">\connect
              -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）使用经典会话（MySQL协议）使用URI连接到MySQL服务器。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\use</code>
            </p></td>
          <td></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              指定要使用的模式。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\source</code>
            </p></td>
          <td><p>
              <code class="literal">\.</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用活动语言执行脚本文件。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\warnings</code>
            </p></td>
          <td><p>
              <code class="literal">\W</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              显示由语句生成的任何警告。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\nowarnings</code>
            </p></td>
          <td><p>
              <code class="literal">\w</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              不要显示任何声明产生的警告。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\lsconn</code>
            </p></td>
          <td><p>
              <code class="literal">\lsc</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              打印存储会话的连接数据。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\saveconn</code>
            </p></td>
          <td><p>
              <code class="literal">\savec</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              保存会话的连接数据，可选用于
               </font></font><code class="literal">-f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">强制覆盖现有连接。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\addconn</code>
            </p></td>
          <td><p>
              <code class="literal">\addc</code>
            </p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （在版本1.0.4中删除，请参阅
               </font></font><code class="literal">\saveconn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）存储会话的连接数据。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\rmconn</code>
            </p></td>
          <td></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              删除存储的会话。
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p>
              <code class="literal">\chconn</code>
            </p></td>
          <td></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （在版本1.0.4中删除，请参阅
               </font></font><code class="literal">\saveconn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）更新存储的会话。
            </font></font></p></td>
</tr></tbody></table>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm140528021842032"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帮助命令</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">\help</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令可以使用或不使用参数。</font><font style="vertical-align: inherit;">如果不带参数使用，则会打印一般帮助，其中包括以下信息
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            可用的命令。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有效模式的可用命令。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        与参数一起使用时，参数必须是有效的命令。</font><font style="vertical-align: inherit;">如果是这种情况，则打印该特定命令的帮助信息，包括：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            描述
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持别名（如果有的话）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果有任何其他帮助
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如：
      </font></font></p><pre class="programlisting"><strong class="userinput"><code>\help connect</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果该参数不是有效的命令，则打印一般帮助。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm140528021832688"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接命令</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">\connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令用于使用URI类型字符串连接到MySQL服务器。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-connection-using-uri" title="18.2.1.1使用URI字符串进行连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第18.2.1.1节“使用URI字符串进行连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如：
      </font></font></p><pre class="programlisting"><strong class="userinput"><code>\connect root@localhost:3306</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果需要密码，系统会提示您输入密码。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用该</font></font><code class="literal">-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项创建节点会话，使用X协议连接到单台服务器。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><strong class="userinput"><code>\connect -n root@localhost:3306</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用该</font></font><code class="literal">-c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项可创建经典会话，使您可以使用MySQL协议直接在服务器上发出SQL命令。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><strong class="userinput"><code>\connect -c root@localhost:3306</code></strong>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm140528021823376"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态命令</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">\status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令显示有关当前全局连接的信息。</font><font style="vertical-align: inherit;">这包括有关连接到的服务器的信息，正在使用的字符集，正常运行时间等。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm140528021821392"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源命令</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">\source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令用于从给定路径上的脚本执行代码。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><strong class="userinput"><code>\source /tmp/mydata.sql</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以执行SQL，JavaScript或Python代码。</font><font style="vertical-align: inherit;">该文件中的代码使用活动语言执行，因此为了处理SQL代码，MySQL Shell必须处于SQL模式。
</font></font></p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          由于代码是使用活动语言执行的，因此使用与当前选定的执行模式语言不同的语言执行脚本可能会导致意外的结果。
</font></font></p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm140528021816640"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用命令</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">\use</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令使您可以选择哪个模式处于活动状态，例如：
      </font></font></p><pre class="programlisting"><strong class="userinput"><code>\use <em class="replaceable"><code>schema_name</code></em></code></strong></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">\use</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令要求全球发展会议保持活跃。</font><font style="vertical-align: inherit;">在</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用命令将当前模式到指定的
         </font></font><em class="replaceable"><code>schema_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并更新
         </font></font><code class="literal">db</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量来表示所选的模式的对象。
</font></font></p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-application-log"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.5 MySQL Shell应用程序日志</font></font></h2>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本节介绍MySQL Shell提供的日志记录，在哪里查找日志以及如何配置日志记录级别。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    可以将MySQL Shell配置为生成应用程序日志文件，其中包含有关不同严重性问题的信息。</font><font style="vertical-align: inherit;">您可以使用这些信息来验证MySQL Shell在运行时的状态。</font><font style="vertical-align: inherit;">日志格式为纯文本，条目包含时间戳和问题描述。</font><font style="vertical-align: inherit;">例如：
  </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016-04-05 22:23:01：错误：默认域：（shell）：1：8：MySQLError：你有一个错误</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在你的SQL语法中; </font><font style="vertical-align: inherit;">检查对应于你的MySQL服务器版本的手册</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在session.sql的第1行（1064）附近使用正确的语法（“select * from t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
限制“）执行（）所有（）。</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    可以使用配置添加到日志的信息量
     </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_log-level"><code class="option">--log-level</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参阅
     </font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-application-log-configure" title="配置日志记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置日志记录</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="mysql-shell-application-log-location"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL Shell日志文件位置</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      日志文件的位置是用户配置路径和文件的名称</font></font><code class="filename">mysqlsh.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="idm140528021803552"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows上的日志文件</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在Windows上，日志文件的默认路径是
      </font></font><code class="filename">%APPDATA%\MySQL\mysqlsh\mysqlsh.log</code>
    </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要查找</font></font><code class="filename">%APPDATA%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统上</font><font style="vertical-align: inherit;">的位置，</font><font style="vertical-align: inherit;">请从命令行回显它。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C：&gt;</font></font><strong class="userinput"><code>echo %APPDATA%</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C：\ Users \用户exampleuser \应用程序数据\漫游</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在Windows上，路径取决于收集</font></font><code class="filename">%APPDATA%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定于该用户</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">文件夹</font><font style="vertical-align: inherit;">的结果
       </font><font style="vertical-align: inherit;">，然后追加</font></font><code class="filename">MySQL\mysqlsh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用上面的例子结果
       </font></font><code class="filename">C:\Users\exampleuser\AppData\Roaming\MySQL\mysqlsh\mysqlsh.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="idm140528021796992"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在基于Unix的系统上的日志文件</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于运行Unix机器，默认的路径是
       </font></font><code class="filename">~/.mysqlsh/mysqlsh.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      代表你的home目录。</font><font style="vertical-align: inherit;">环境变量
       </font></font><code class="varname">HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也代表主目录。</font><font style="vertical-align: inherit;">追加</font></font><code class="filename">.mysqlsh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到这个主目录决定了日志的默认路径。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt;</font></font><strong class="userinput"><code>echo $HOME</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/家/ exampleuser</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      因此这个系统上的MySQL Shell文件的位置是
       </font></font><code class="filename">/home/exampleuser/.mysqlsh/mysqlsh.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通过定义环境变量，可以在所有平台上覆盖这些路径</font></font><code class="literal">MYSQL_USER_CONFIG_PATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个变量的值</font></font><code class="literal">%APPDATA%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在Windows或</font></font><code class="literal">$HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unix中</font><font style="vertical-align: inherit;">取代</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="mysql-shell-application-log-configure"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置日志记录</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      默认情况下，在MySQL Shell中禁用日志记录。</font><font style="vertical-align: inherit;">要启动日志记录，请</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_log-level"><code class="option">--log-level</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在启动MySQL Shell时</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">命令选项。</font><font style="vertical-align: inherit;">分配的值
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysqlsh_log-level"><code class="option">--log-level</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制日志中的详细程度。</font><font style="vertical-align: inherit;">日志记录级别可以使用1到8的数字级别或下表中所示的等效命名级别来定义。
</font></font></p>
<div class="informaltable">
<table summary="Logging levels that are supported for --log-level."><colgroup><col width="33%"><col width="33%"><col width="33%"></colgroup><thead><tr>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日志级别号码</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日志级别名称</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              1
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              没有
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              没有记录，默认
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              2
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              内部
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              内部错误
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              3
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              错误
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              记录错误
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              4
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              警告
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              记录警告
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              五
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              信息
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              信息被记录
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              6
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              调试
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              调试信息被记录
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              7
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              DEBUG2
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              调试更多的信息被记录下来
            </font></font></p></td>
        </tr><tr>
          <td scope="row"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              8
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              debug3
            </font></font></p></td>
          <td><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用完整信息进行调试会被记录
            </font></font></p></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      数字和命名级别是等价的。</font><font style="vertical-align: inherit;">例如，在以这两种方式启动MySQL Shell时，记录没有区别：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell&gt; </font></font><strong class="userinput"><code>mysqlsh --log-level=4</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
shell&gt;</font></font><strong class="userinput"><code>mysqlsh --log-level=warning</code></strong>
</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-customizing"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6自定义MySQL Shell</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-creating-startup-scripts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.1使用启动脚本</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-adding-module-search-paths"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2添加模块搜索路径</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-overriding-the-default-prompt"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.3覆盖默认提示</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    MySQL Shell提供了通过启动脚本定制行为和代码执行环境的能力，这些脚本在应用程序首次运行时执行。</font><font style="vertical-align: inherit;">使用这些脚本可以使您：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为Python或JavaScript模块添加其他搜索路径。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        覆盖Python和JavaScript模式使用的默认提示。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        定义全局函数或变量。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        任何其他可能的初始化通过JavaScript或Python。
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-creating-startup-scripts"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.1使用启动脚本</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当MySQL Shell进入JavaScript或Python模式时，它会搜索要执行的启动脚本。</font><font style="vertical-align: inherit;">启动脚本是JavaScript或Python特定的脚本，包含相应模式初始化时要执行的指令。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      启动脚本必须命名如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于JavaScript模式： </font></font><code class="filename">mysqlshrc.js</code>
        </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于Python模式： </font></font><code class="filename">mysqlshrc.py</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell为这些文件搜索以下路径（按执行顺序）。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在Windows上：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          <code class="literal">%PROGRAMDATA%MySQLmysqlshmysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">%MYSQLSH_HOME%sharedmysqlshmysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">&lt;mysqlsh binary
          path&gt;mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">%APPDATA%MySQLmysqlshmysqlshrc.[js|py]</code>
</p></li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在Linux和OSX上：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          <code class="literal">/etc/mysql/mysqlsh/mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">$MYSQLSH_HOME/shared/mysqlsh/mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">&lt;mysqlsh binary
          path&gt;/mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">$HOME/.mysqlsh/mysqlshrc.[js|py]</code>
</p></li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      环境变量</font></font><code class="literal">MYSQLSH_HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义了MySQL Shell的标准设置的根文件夹。</font><font style="vertical-align: inherit;">如果
       </font></font><code class="literal">MYSQLSH_HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未定义，它将根据MySQL Shell二进制文件的位置自动计算，因此在许多标准设置中，不需要定义
       </font></font><code class="literal">MYSQLSH_HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果</font></font><code class="literal">MYSQLSH_HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未定义并且MySQL Shell二进制文件不在标准安装文件夹结构中，则使用上面列表中选项3中定义的路径。</font><font style="vertical-align: inherit;">如果使用标准安装或者
       </font></font><code class="literal">MYSQLSH_HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指向标准安装文件夹结构，则不使用选项3中定义的路径。
</font></font></p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        上面的列表还定义了搜索路径的顺序，所以如果在两个不同的脚本中定义了某些内容，稍后执行的脚本优先。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-adding-module-search-paths"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2添加模块搜索路径</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-environment-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2.1环境变量</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/mysql-shell.html#mysql-shell-startup-scripts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2.2启动脚本</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      

      有两种方法可以添加额外的模块搜索路径：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过环境变量
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过启动脚本
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-environment-variables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2.1环境变量</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        Python使用</font></font><code class="literal">PYTHONPATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">环境变量允许扩展python模块的搜索路径。</font><font style="vertical-align: inherit;">此变量的值是由以下分隔的路径列表：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            Linux和OSX中的冒号字符
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            Windows中的分号字符
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了在JavaScript中实现这一点，MySQL Shell支持使用</font></font><code class="literal">MYSQLSH_JS_MODULE_PATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">环境变量</font><font style="vertical-align: inherit;">定义附加的JavaScript模块路径
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此变量的值是分号分隔路径的列表。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-startup-scripts"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2.2启动脚本</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过相应的启动脚本，可以为两种语言实现模块搜索路径的添加。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于Python修改</font></font><code class="filename">mysqlshrc.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件并将所需的路径追加到</font></font><code class="literal">sys.path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        数组中。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃导入sys模块</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
进口系统</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃附加额外的模块路径</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sys.path.append（ '〜/自定义/蟒'）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sys.path.append（ '〜/其他/定制/模块'）</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于JavaScript，通过将代码添加到</font></font><code class="filename">mysqlshrc.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中以将所需路径附加到预定义
         </font></font><code class="literal">shell.js_module_paths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组中，</font><font style="vertical-align: inherit;">可以实现相同的任务
         </font><font style="vertical-align: inherit;">。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//追加附加的模块路径</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
shell.js.module_paths [shell.js.module_paths.length] ='〜/ custom / js';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
shell.js.module_paths [shell.js.module_paths.length] ='〜/ other / custom / modules';</font></font></pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-overriding-the-default-prompt"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.3覆盖默认提示</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL Shell使用Python（</font></font><code class="literal">mysql-py&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和JavaScript（
       </font></font><code class="literal">mysql-js&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的默认提示
       </font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您可以使用该</font></font><code class="literal">shell.custom_prompt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">自定义特定于语言的提示
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该函数必须返回一个用作提示的字符串。</font><font style="vertical-align: inherit;">要在MySQL Shell启动时进行自定义提示，请在启动脚本中定义此函数。</font><font style="vertical-align: inherit;">以下示例显示了如何使用此功能。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在Python中</font></font><code class="literal">shell.custom_prompt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以定义为：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃导入sys模块</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从时间导入gmtime，strftime</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
def my_prompt（）：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ret_val = strftime（“％H：％M：％S”，gmtime（））</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  如果session和session.isOpen（）：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    data = shell.parseUri（session.getUri（））</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ret_val =“％s-％s-％s-py&gt;”％（ret_val，data.dbUser，data.host）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  其他：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ret_val =“％s-disconnected-py&gt;”％ret_val</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  返回ret_val</font></font><font></font>
<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
shell.custom_prompt = my_prompt</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在JavaScript中</font></font><code class="literal">shell.custom_prompt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以定义为：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell.custom_prompt = function（）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  var now = new Date（）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  var ret_val = now.getHours（）。toString（）+“：”+ now.getMinutes（）。toString（）+“：”+ now.getSeconds（）。toString（）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  if（session &amp;&amp; session.isOpen（））{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    var data = shell.parseUri（session.getUri（））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ret_val + =“ - ”+ data.dbUser +“ - ”+ data.host +“-js&gt;”;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  其他</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ret_val + =“-disconnected-js&gt;”;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  返回ret_val;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下示例演示如何在启动脚本中使用上面定义的自定义提示功能。</font><font style="vertical-align: inherit;">提示符显示当前系统时间，如果会话已打开，则当前用户和主机：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欢迎来到MySQL Shell 1.0.4开发预览版</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
版权所有（c）2016，Oracle和/或其附属公司。</font><font style="vertical-align: inherit;">版权所有。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oracle是Oracle Corporation和/或其注册商标的注册商标</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分支机构。</font><font style="vertical-align: inherit;">其他名称可能是其各自的商标</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
拥有者。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
输入'\ help'，'\ h'或'\？' </font><font style="vertical-align: inherit;">求助。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前处于JavaScript模式。</font><font style="vertical-align: inherit;">使用\ sql切换到SQL模式并执行查询。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
14：34：32-disconnected-js&gt; \ py</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
切换到Python模式...</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
19：34：39-disconnected-py&gt; \ connect root：@localhost</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建一个X会话到root @ localhost：33060</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
没有选择默认模式。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
19：34：50-root-localhost-py&gt; \ js</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
切换到JavaScript模式...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
14：34：57-根本地主机-JS&gt;</font></font></pre>
</div>

</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tbody><tr>
<td width="40%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/group-replication.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a></td>
<td width="20%" align="center"><a accesskey="u" href="/mysql-5.7-google-zh/mysql-shell.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向上</font></font></a></td>
<td width="40%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/document-store.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第17章组复制</font></font></td>
<td width="20%" align="center"><a accesskey="h" href="/mysql-5.7-google-zh/index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">家</font></font></a></td>
<td width="40%" align="right" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第19章使用MySQL作为文档存储</font></font></td>
</tr>
</tbody></table>
</div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./images/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>