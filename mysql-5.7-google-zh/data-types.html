<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>第11章数据类型</title>
<link rel="stylesheet" href="./images/mvl.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2">
<link rel="start" href="/mysql-5.7-google-zh/index.html" title="{书名}">
<link rel="up" href="/mysql-5.7-google-zh/data-types.html" title="">
<link rel="prev" href="/mysql-5.7-google-zh/charset.html" title="第10章字符集，排序规则，Unicode">
<link rel="next" href="/mysql-5.7-google-zh/functions.html" title="Chapter 12 Functions and Operators">
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./images/translateelement.css"></head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tbody><tr>
<th colspan="3" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11章数据类型</font></font></th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/charset.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a>&nbsp;</td>
<th width="60%" align="center"></th>
<td width="20%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/functions.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
</tbody></table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="data-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11章数据类型</font></font></h1>

</div>

</div>

</div>
<div class="toc">
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></b></p><dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#data-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1数据类型概述</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#numeric-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.1数字类型概述</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.2日期和时间类型概述</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#string-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.3字符串类型概述</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#numeric-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2数字类型</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#integer-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#fixed-point-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.2定点类型（准确值） -  DECIMAL，NUMERIC</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#floating-point-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.3浮点类型（近似值） -  FLOAT，DOUBLE</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#bit-type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.4位值类型 -  BIT</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#numeric-type-attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.5数字类型属性</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#out-of-range-and-overflow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.6超出范围和溢出处理</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#date-and-time-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3日期和时间类型</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#datetime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.1 DATE，DATETIME和TIMESTAMP类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.2时间类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#year"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.3年份类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#migrating-to-year4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.4年（2）限制和迁移到年（4）</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.5 TIMESTAMP和DATETIME的自动初始化和更新</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#fractional-seconds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.6小数秒的时间值</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-conversion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.7日期和时间类型之间的转换</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#two-digit-years"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.8两位数日期</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#string-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4字符串类型</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#char"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.1 CHAR和VARCHAR类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#binary-varbinary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.2 BINARY和VARBINARY类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#blob"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.3 BLOB和TEXT类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#enum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.4 ENUM类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#set"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.5 SET类型</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#spatial-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5空间数据类型</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#spatial-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.1空间数据类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#opengis-geometry-model"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2 OpenGIS几何模型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-data-formats"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.3支持的空间数据格式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#geometry-well-formedness-validity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.4几何形态和有效性</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#creating-spatial-columns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.5创建空间列</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#populating-spatial-columns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.6填充空间列</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#fetching-spatial-data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.7获取空间数据</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#optimizing-spatial-analysis"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.8优化空间分析</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#creating-spatial-indexes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.9创建空间索引</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#using-spatial-indexes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.10使用空间索引</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#json"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.6 JSON数据类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#data-type-defaults"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.7数据类型默认值</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#storage-requirements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.8数据类型存储要求</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#choosing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.9为列选择正确的类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#other-vendor-data-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.10使用来自其他数据库引擎的数据类型</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    MySQL支持多种</font><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">的</font></font><a class="link" href="/mysql-5.7-google-zh/glossary.html#glos_sql" title="SQL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型：数字类型，日期和时间类型，字符串（字符和字节）类型，空间类型和
     </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型。</font><font style="vertical-align: inherit;">本章概述这些数据类型，更详细地描述每个类别中类型的属性以及数据类型存储需求的摘要。</font><font style="vertical-align: inherit;">最初的概述是故意简短的。</font><font style="vertical-align: inherit;">有关特定数据类型的其他信息（如可指定值的允许格式），应参阅本章后面的更详细说明。
  </font></font></p><a class="indexterm" name="idm140528094041232"></a><a class="indexterm" name="idm140528094040160"></a><a class="indexterm" name="idm140528094038672"></a><a class="indexterm" name="idm140528094037184"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    数据类型描述使用这些约定：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <a class="indexterm" name="idm140528094034480"></a>

        <a class="indexterm" name="idm140528094033408"></a>

        <a class="indexterm" name="idm140528094031920"></a>

        <a class="indexterm" name="idm140528094030848"></a>

        <a class="indexterm" name="idm140528094029360"></a>

        <a class="indexterm" name="idm140528094028288"></a>

        <em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示整数类型的最大显示宽度。</font><font style="vertical-align: inherit;">对于浮点型和定点型，
         </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可以存储的总位数（精度）。</font><font style="vertical-align: inherit;">对于字符串类型，
         </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最大长度。</font><font style="vertical-align: inherit;">最大允许值</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于数据类型。
      </font></font></p></li><li class="listitem"><p>
        <a class="indexterm" name="idm140528094024112"></a>

        <a class="indexterm" name="idm140528094023040"></a>

        <a class="indexterm" name="idm140528094021552"></a>

        <a class="indexterm" name="idm140528094020480"></a>

        <em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于浮点类型和定点类型，并指示小数点后的位数（比例）。</font><font style="vertical-align: inherit;">最大可能值是30，但不应大于
         </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-2。
      </font></font></p></li><li class="listitem"><p>
        <a class="indexterm" name="idm140528094017600"></a>

        <a class="indexterm" name="idm140528094016512"></a>

        <em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型和表示小数精度秒; </font><font style="vertical-align: inherit;">也就是小数点后几位数的小数部分。</font><font style="vertical-align: inherit;">的
         </font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，如果给定的，必须在1到6的值为0表示没有小数部分范围为0。</font><font style="vertical-align: inherit;">如果省略，则默认精度为0.（这与标准SQL缺省值6不同，以便与以前的MySQL版本兼容。）
      </font></font></p></li><li class="listitem"><p>
        <a class="indexterm" name="idm140528094009232"></a>

        <a class="indexterm" name="idm140528094007744"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

        方括号（</font></font><code class="literal">[</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）表示类型定义的可选部分。
</font></font></p></li></ul>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="data-type-overview"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1数据类型概述</font></font></h2>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#numeric-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.1数字类型概述</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.2日期和时间类型概述</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#string-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.3字符串类型概述</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528094003664"></a>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="numeric-type-overview"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.1数字类型概述</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528094001024"></a><a class="indexterm" name="idm140528093999952"></a><a class="indexterm" name="idm140528093998880"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        数字数据类型的摘要如下。</font><font style="vertical-align: inherit;">有关数字类型的属性和存储要求的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#numeric-types" title="11.2数字类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.2节“数字类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p>
        <em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示整数类型的最大显示宽度。</font><font style="vertical-align: inherit;">最大显示宽度为255.显示宽度与类型可以包含的值范围无关，如</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#numeric-types" title="11.2数字类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.2节“数字类型”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于浮点型和定点型，</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可以存储的总位数。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您</font></font><code class="literal">ZEROFILL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为数字列</font><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">，MySQL会自动将该</font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        属性</font><font style="vertical-align: inherit;">添加</font><font style="vertical-align: inherit;">到该列。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        允许该</font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        属性的</font><font style="vertical-align: inherit;">数字数据类型</font><font style="vertical-align: inherit;">也允许</font></font><code class="literal">SIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，这些数据类型是默认签名的，因此该
         </font></font><code class="literal">SIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性不起作用。
      </font></font></p><p>
        <code class="literal">SERIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个别名</font></font><code class="literal">BIGINT
        UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p>
        <code class="literal">SERIAL DEFAULT VALUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在整数列的定义中是一个别名</font></font><code class="literal">NOT NULL AUTO_INCREMENT
        UNIQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在一个类型的整数值之间使用减法时</font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，除非</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用S​​QL模式，</font><font style="vertical-align: inherit;">否则结果是无符号的
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#cast-functions" title="12.10 Cast功能和操作符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.10节“演算函数和操作符”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm140528093979504"></a>

            <a class="indexterm" name="idm140528093978432"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#bit-type" title="11.2.4位值类型 -  BIT"><code class="literal">BIT[(<em class="replaceable"><code>M</code></em>)]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个比特值类型。</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示每个值的位数，从1到64.如果</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">省略，</font><font style="vertical-align: inherit;">则默认值为1
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093970640"></a>

            <a class="indexterm" name="idm140528093969568"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT[(<em class="replaceable"><code>M</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个非常小的整数。</font><font style="vertical-align: inherit;">签署的范围是
             </font></font><code class="literal">-128</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">127</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无符号的范围是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">255</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093959856"></a>

            <a class="indexterm" name="idm140528093958784"></a>

            <a class="indexterm" name="idm140528093957712"></a>

            <a class="indexterm" name="idm140528093956224"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BOOL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BOOLEAN</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些类型是同义词
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT(1)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">零值被认为是错误的。</font><font style="vertical-align: inherit;">非零值被认为是正确的：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(0, 'true', 'false');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">IF（0，'true'，'false'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">false |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(1, 'true', 'false');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">IF（1，'true'，'false'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">true |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(2, 'true', 'false');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">IF（2，'true'，'false'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">true |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            然而，这些值</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅是别名为
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别，如下所示：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(0 = FALSE, 'true', 'false');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">IF（0 = FALSE，'true'，'false'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">true |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(1 = TRUE, 'true', 'false');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">IF（1 = TRUE，'true'，'false'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">true |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(2 = TRUE, 'true', 'false');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">IF（2 = TRUE，'true'，'false'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">false |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(2 = FALSE, 'true', 'false');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">IF（2 = FALSE，'true'，'false'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">false |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最后两条语句显示显示的结果，因为
             </font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既不等于</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也不</font><font style="vertical-align: inherit;">等于
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093932976"></a>

            <a class="indexterm" name="idm140528093931904"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT[(<em class="replaceable"><code>M</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个小整数。</font><font style="vertical-align: inherit;">签署的范围是
             </font></font><code class="literal">-32768</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">32767</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无符号的范围是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">65535</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093922128"></a>

            <a class="indexterm" name="idm140528093921056"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">MEDIUMINT[(<em class="replaceable"><code>M</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个中等大小的整数。</font><font style="vertical-align: inherit;">签署的范围是
             </font></font><code class="literal">-8388608</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">8388607</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无符号的范围是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">16777215</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093911296"></a>

            <a class="indexterm" name="idm140528093910224"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT[(<em class="replaceable"><code>M</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个正常大小的整数。</font><font style="vertical-align: inherit;">签署的范围是
             </font></font><code class="literal">-2147483648</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">2147483647</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无符号的范围是
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">4294967295</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093901184"></a>

            <a class="indexterm" name="idm140528093900112"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INTEGER[(<em class="replaceable"><code>M</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这是一个同义词
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093892000"></a>

            <a class="indexterm" name="idm140528093890928"></a>

            <a class="indexterm" name="idm140528093889440"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT[(<em class="replaceable"><code>M</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个大整数。</font><font style="vertical-align: inherit;">签署的范围是
             </font></font><code class="literal">-9223372036854775808</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">9223372036854775807</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无符号的范围是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">18446744073709551615</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <code class="literal">SERIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个别名</font></font><code class="literal">BIGINT
            UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关列的一些事情您应该注意
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="indexterm" name="idm140528093878400"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

                所有算法都使用signed
                 </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
                 </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">values完成，所以</font></font><code class="literal">9223372036854775807</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了位函数外，</font><font style="vertical-align: inherit;">不应使用大于</font><font style="vertical-align: inherit;">（63位）的</font><font style="vertical-align: inherit;">无符号大整数
                 </font><font style="vertical-align: inherit;">！</font><font style="vertical-align: inherit;">如果这样做，结果中的某些最后数字可能会因为将</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
                 </font><font style="vertical-align: inherit;">转换为一个舍入错误而错误
                 </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
              </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                MySQL可以处理</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                以下情况：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                    使用整数将大的无符号值存储在</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中时。
                  </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                    在
                     </font><font style="vertical-align: inherit;">
                    或中
                     </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">指的是某一</font><font style="vertical-align: inherit;">列。
                  </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN(<em class="replaceable"><code>col_name</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX(<em class="replaceable"><code>col_name</code></em>)</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>col_name</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                    当使用操作符（</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                     </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                     </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，等等），其中两个操作数都是整数。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                您可以始终</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用字符串存储</font><font style="vertical-align: inherit;">精确的整数值
                 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，MySQL执行一个不涉及中间双精度表示的字符串到数字的转换。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                运营商使用</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                算术当两个操作数是整数值。</font><font style="vertical-align: inherit;">这意味着如果你乘两个大整数（或者返回整数的函数的结果），当结果大于时，你可能会得到意想不到的结果
                 </font></font><code class="literal">9223372036854775807</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093844208"></a>

            <a class="indexterm" name="idm140528093843136"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL[(<em class="replaceable"><code>M</code></em>[,<em class="replaceable"><code>D</code></em>])]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            外带</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精确</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定点数。
            </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是总位数（精度），</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是小数点后的位数（标度）。</font><font style="vertical-align: inherit;">小数点和（对于负数）
             </font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符号不计入
             </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为0，则值不包含小数点或小数部分。</font><font style="vertical-align: inherit;">最大位数（</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）为
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">65.支持的最大小数数（</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）为30.如果</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">省略，则默认值为0.如果</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">省略，则默认值为10。
          </font></font></p><p>
            <code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果指定，则不允许负值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            所有</font></font><code class="literal">+, -, *, /</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">基本计算（</font><font style="vertical-align: inherit;">）
             </font><font style="vertical-align: inherit;">都以65位数的精度完成。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093826208"></a>

            <a class="indexterm" name="idm140528093825136"></a>

            <a class="indexterm" name="idm140528093824064"></a>

            <a class="indexterm" name="idm140528093822992"></a>

            <a class="indexterm" name="idm140528093821536"></a>

            <a class="indexterm" name="idm140528093820048"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DEC[(<em class="replaceable"><code>M</code></em>[,<em class="replaceable"><code>D</code></em>])]
            [UNSIGNED] [ZEROFILL]</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">NUMERIC[(<em class="replaceable"><code>M</code></em>[,<em class="replaceable"><code>D</code></em>])]
            [UNSIGNED] [ZEROFILL]</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">FIXED[(<em class="replaceable"><code>M</code></em>[,<em class="replaceable"><code>D</code></em>])]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些类型是同义词
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">FIXED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同义词是可与其它数据库系统的兼容性。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093806112"></a>

            <a class="indexterm" name="idm140528093805040"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT[(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个小的（单精度）浮点数。</font><font style="vertical-align: inherit;">允许值是</font></font><code class="literal">-3.402823466E+38</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对</font></font><code class="literal">-1.175494351E-38</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><code class="literal">1.175494351E-38</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对</font></font><code class="literal">3.402823466E+38</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些是基于IEEE标准的理论极限。</font><font style="vertical-align: inherit;">根据您的硬件或操作系统，实际范围可能会稍小。
          </font></font></p><p>
            <em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是总位数，</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是小数点后面的位数。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            和</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">省略，值将存储到硬件允许的限制。</font><font style="vertical-align: inherit;">单精度浮点数精确到约7位小数。
          </font></font></p><p>
            <code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果指定，则不允许负值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能会给你一些意想不到的问题，因为MySQL中的所有计算都是以双精度完成的。</font><font style="vertical-align: inherit;">参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#no-matching-rows" title="B.5.4.7解决没有匹配行的问题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.5.4.7节“无匹配行解决问题”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093787888"></a>

            <a class="indexterm" name="idm140528093786816"></a>

            <a class="indexterm" name="idm140528093785744"></a>

            <a class="indexterm" name="idm140528093784256"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE[(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个正常大小的（双精度）浮点数。</font><font style="vertical-align: inherit;">允许值是
             </font></font><code class="literal">-1.7976931348623157E+308</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对
             </font></font><code class="literal">-2.2250738585072014E-308</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
             </font></font><code class="literal">2.2250738585072014E-308</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对
             </font></font><code class="literal">1.7976931348623157E+308</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些是基于IEEE标准的理论极限。</font><font style="vertical-align: inherit;">根据您的硬件或操作系统，实际范围可能会稍小。
          </font></font></p><p>
            <em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是总位数，</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是小数点后面的位数。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            和</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">省略，值将存储到硬件允许的限制。</font><font style="vertical-align: inherit;">双精度浮点数精确到小数点后15位。
          </font></font></p><p>
            <code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果指定，则不允许负值。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093770352"></a>

            <a class="indexterm" name="idm140528093769264"></a>

            <a class="indexterm" name="idm140528093768192"></a>

            <a class="indexterm" name="idm140528093766704"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE
            PRECISION[(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">REAL[(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)]
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些类型是同义词
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例外：如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_real_as_float"><code class="literal">REAL_AS_FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了
             </font><font style="vertical-align: inherit;">SQL模式，那么它</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">REAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就是一个同义词，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093753168"></a>

            <a class="indexterm" name="idm140528093752096"></a>

            <a class="indexterm" name="idm140528093751024"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT(<em class="replaceable"><code>p</code></em>)
            [UNSIGNED] [ZEROFILL]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个浮点数。</font></font><em class="replaceable"><code>p</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表示以位为单位的精度，但MySQL仅使用此值来确定是使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于结果数据类型。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>p</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从0到24，则数据类型变为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>p</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从25到53，则数据类型将变为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no
             </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            value。</font><font style="vertical-align: inherit;">结果列的范围与</font><font style="vertical-align: inherit;">本节前面</font><font style="vertical-align: inherit;">所述的单精度</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或双精度</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型相同。
          </font></font></p><p>
            <a class="indexterm" name="idm140528093736352"></a>

            <a class="indexterm" name="idm140528093735280"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT(<em class="replaceable"><code>p</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            提供ODBC兼容性的语法。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="date-and-time-type-overview"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.2日期和时间类型概述</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        时间数据类型的总结如下。</font><font style="vertical-align: inherit;">有关时态类型的属性和存储要求的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-types" title="11.3日期和时间类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3节“日期和时间类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关对时间值进行操作的函数的说明，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#date-and-time-functions" title="12.7日期和时间函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.7节“日期和时间函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围的描述
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， “ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着尽管更早的值可能工作，也不能保证。
      </font></font></p><a class="indexterm" name="idm140528093724416"></a><a class="indexterm" name="idm140528093723328"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的MySQL允许分数秒
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，高达微秒（6位）的精度。</font><font style="vertical-align: inherit;">要定义包含分数秒部分的列，使用语法
         </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">是
         </font><font style="vertical-align: inherit;">，
         </font><font style="vertical-align: inherit;">，或
         </font><font style="vertical-align: inherit;">，并且
         </font><font style="vertical-align: inherit;">是分数秒精度。</font><font style="vertical-align: inherit;">例如：
      </font></font><code class="literal"><em class="replaceable"><code>type_name</code></em>(<em class="replaceable"><code>fsp</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>type_name</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（t TIME（3），dt DATETIME（6））;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，如果给定的，必须在1到6的值为0表示没有小数部分范围为0。</font><font style="vertical-align: inherit;">如果省略，则默认精度为0.（这与标准SQL缺省值6不同，以便与以前的MySQL版本兼容。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font><font style="vertical-align: inherit;">
        任何</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列都可以具有自动初始化和更新属性。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm140528093704000"></a>

            <a class="indexterm" name="idm140528093702928"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个约会。</font><font style="vertical-align: inherit;">支持的范围是
             </font></font><code class="literal">'1000-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">'9999-12-31'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">'YYYY-MM-DD'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">显示
             </font><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">，但允许</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用字符串或数字</font><font style="vertical-align: inherit;">将值分配给</font><font style="vertical-align: inherit;">列。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093692416"></a>

            <a class="indexterm" name="idm140528093691344"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME[(<em class="replaceable"><code>fsp</code></em>)]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            日期和时间组合。</font><font style="vertical-align: inherit;">支持的范围是
             </font></font><code class="literal">'1000-01-01 00:00:00.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">'9999-12-31 23:59:59.999999'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">'YYYY-MM-DD HH:MM:SS[.fraction]'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">显示</font><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">，但允许</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用字符串或数字</font><font style="vertical-align: inherit;">将值分配给
             </font><font style="vertical-align: inherit;">列。
          </font></font></p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以给出从0到6范围内</font><font style="vertical-align: inherit;">
            的可选</font><font style="vertical-align: inherit;">值来指定小数秒精度。</font><font style="vertical-align: inherit;">值为0表示不存在小数部分。</font><font style="vertical-align: inherit;">如果省略，则默认精度为0。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如</font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization" title="11.3.5 Automatic Initialization and Updating for TIMESTAMP and DATETIME"><font style="vertical-align: inherit;">第11.3.5节“自动初始化和更新TIMESTAMP和DATETIME”中</font></a><font style="vertical-align: inherit;">所述</font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization" title="11.3.5 Automatic Initialization and Updating for TIMESTAMP and DATETIME"><font style="vertical-align: inherit;">，自动初始化和更新</font></a></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">
            的当前日期和时间</font><font style="vertical-align: inherit;">可以使用</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">ON UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列定义子句</font><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">。
          </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization" title="11.3.5 TIMESTAMP和DATETIME的自动初始化和更新"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093674672"></a>

            <a class="indexterm" name="idm140528093673600"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP[(<em class="replaceable"><code>fsp</code></em>)]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            时间戳。</font><font style="vertical-align: inherit;">范围是</font></font><code class="literal">'1970-01-01
            00:00:01.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC到</font></font><code class="literal">'2038-01-19
            03:14:07.999999'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC。
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值将以纪元（</font></font><code class="literal">'1970-01-01 00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC）</font><font style="vertical-align: inherit;">以来的秒数存储</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">甲
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能代表值</font></font><code class="literal">'1970-01-01 00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为这是等同于从所述历元和值00秒被保留用于表示</font></font><code class="literal">'0000-00-00
            00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span>
            <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
          </font></font></p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以给出从0到6范围内</font><font style="vertical-align: inherit;">
            的可选</font><font style="vertical-align: inherit;">值来指定小数秒精度。</font><font style="vertical-align: inherit;">值为0表示不存在小数部分。</font><font style="vertical-align: inherit;">如果省略，则默认精度为0。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            服务器处理</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            定义</font><font style="vertical-align: inherit;">的方式</font><font style="vertical-align: inherit;">取决于</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量</font><font style="vertical-align: inherit;">的值
             </font><font style="vertical-align: inherit;">（请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用，存在无自动分配
             </font></font><code class="literal">DEFAULT CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">ON
            UPDATE CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性的任何
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">它们必须明确包含在列定义中。</font><font style="vertical-align: inherit;">此外，任何
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未明确声明为</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            被禁用，则服务器处理</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如下：
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            除非另有规定，否则</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中</font><font style="vertical-align: inherit;">的第一
             </font><font style="vertical-align: inherit;">列被定义为如果未明确赋值，则自动设置为最近修改的日期和时间。</font><font style="vertical-align: inherit;">这使得</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            用于记录的时间戳有用
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作。</font><font style="vertical-align: inherit;">您也可以</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过为其分配一个</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">来</font><font style="vertical-align: inherit;">将任何</font><font style="vertical-align: inherit;">列设置为当前日期和时间
             </font><font style="vertical-align: inherit;">，除非已使用该</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">定义</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">以允许
             </font><font style="vertical-align: inherit;">值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            自动初始化和更新到当前日期和时间可以使用</font></font><code class="literal">DEFAULT
            CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">ON UPDATE
            CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列定义子句</font><font style="vertical-align: inherit;">来指定</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，第一</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列具有这些属性，如前所述。</font><font style="vertical-align: inherit;">但是，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font><font style="vertical-align: inherit;">任何</font><font style="vertical-align: inherit;">列都可以定义为具有这些属性。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093630944"></a>

            <a class="indexterm" name="idm140528093629872"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME[(<em class="replaceable"><code>fsp</code></em>)]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一次。</font><font style="vertical-align: inherit;">范围是</font></font><code class="literal">'-838:59:59.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            到</font></font><code class="literal">'838:59:59.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">'HH:MM:SS[.fraction]'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">显示
             </font><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">，但允许</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用字符串或数字</font><font style="vertical-align: inherit;">将值分配给</font><font style="vertical-align: inherit;">列。
          </font></font></p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以给出从0到6范围内</font><font style="vertical-align: inherit;">
            的可选</font><font style="vertical-align: inherit;">值来指定小数秒精度。</font><font style="vertical-align: inherit;">值为0表示不存在小数部分。</font><font style="vertical-align: inherit;">如果省略，则默认精度为0。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093617952"></a>

            <a class="indexterm" name="idm140528093616880"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR[(4)]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一年四位数的格式。</font><font style="vertical-align: inherit;">MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">YYYY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">显示
             </font><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">，但允许</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用字符串或数字</font><font style="vertical-align: inherit;">将值分配给</font><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">值显示为
             </font></font><code class="literal">1901</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">2155</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型已被弃用，并且在MySQL 5.7.5中被删除。</font><font style="vertical-align: inherit;">要转换</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#migrating-to-year4" title="11.3.4年（2）限制和迁移到年（4）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.4节“年（2）限制和迁移到年（4）”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示格式和输入值解释的</font><font style="vertical-align: inherit;">更多信息
             </font><font style="vertical-align: inherit;">，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.3节“年份类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚合函数不具有时间价值的工作。</font><font style="vertical-align: inherit;">（它们将值转换为数字，在第一个非数字字符后丢失所有内容。）要解决此问题，请转换为数值单位，执行聚合操作并转换回临时值。</font><font style="vertical-align: inherit;">例子：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT SEC_TO_TIME（SUM（TIME_TO_SEC（</font></font><em class="replaceable"><code>time_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）））FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT FROM_DAYS（SUM（TO_DAYS（</font></font><em class="replaceable"><code>date_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）））FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL服务器可以在</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_maxdb"><code class="literal">MAXDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用S​​QL模式的情况下</font><font style="vertical-align: inherit;">运行
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与之相同</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果在创建表格时启用此模式，则将
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列创建为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">因此，这些列使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示格式，具有相同的值范围，并且没有自动初始化或更新当前日期和时间。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.22开始，</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_maxdb"><code class="literal">MAXDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被弃用。</font><font style="vertical-align: inherit;">它将在未来版本的MySQL中被删除。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="string-type-overview"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.3字符串类型概述</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下是字符串数据类型的摘要。</font><font style="vertical-align: inherit;">有关字符串类型的属性和存储要求的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#string-types" title="11.4字符串类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.4节“字符串类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在某些情况下，MySQL可能会将字符串列更改为与a </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE
        TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        语句</font><font style="vertical-align: inherit;">中给出的类型不同的类型</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#silent-column-changes" title="13.1.18.7无声列规格更改"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.1.18.7节“无声列规格更改”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL以字符单位解释字符列定义中的长度规范。</font><font style="vertical-align: inherit;">这适用于
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        许多字符串数据类型的列定义可以包含指定字符集或列的排序规则的属性。</font><font style="vertical-align: inherit;">这些属性适用于
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，的
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">CHARACTER SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性指定字符集，</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">属性指定字符集</font></font><code class="literal">COLLATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的排序规则。</font><font style="vertical-align: inherit;">例如：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    c1 VARCHAR（20）字符集utf8，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    c2 TEXT CHARACTER SET latin1 COLLATE latin1_general_cs</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此表定义将创建一个名为的列</font></font><code class="literal">c1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">该列
             </font><font style="vertical-align: inherit;">具有一个字符集，该字符集具有该字符集
             </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的默认排序规则，并且列名称</font></font><code class="literal">c2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有字符集</font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和区分大小写的排序规则。
          </font></font></p><p><font style="vertical-align: inherit;"><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-column" title="10.3.5列字符集和校对"><font style="vertical-align: inherit;">第10.3.5节“列字符集和归类”</font></a><font style="vertical-align: inherit;">中描述了在缺失</font></font><code class="literal">CHARACTER SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">COLLATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺失</font><font style="vertical-align: inherit;">
            其中一个或两个时</font><font style="vertical-align: inherit;">缺省</font><font style="vertical-align: inherit;">分配字符集和归类的</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-column" title="10.3.5列字符集和校对"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <code class="literal">CHARSET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
             </font></font><code class="literal">CHARACTER SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            指定</font></font><code class="literal">CHARACTER SET binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            字符串数据类型</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">属性会导致创建列作为相应的二进制字符串数据类型：
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变为
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变为
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变成
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型，这不会发生; </font><font style="vertical-align: inherit;">它们按照声明创建。</font><font style="vertical-align: inherit;">假设你使用这个定义来指定一个表：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  c1 VARCHAR（10）字符集二进制，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  c2文本字符集二进制，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  c3 ENUM（'a'，'b'，'c'）CHARACTER SET二进制</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            结果表格有这样的定义：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  c1 VARBINARY（10），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  c2 BLOB，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  c3 ENUM（'a'，'b'，'c'）CHARACTER SET二进制</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性是指定表默认字符集和该字符集的二进制（</font></font><code class="literal">_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）排序规则的</font><font style="vertical-align: inherit;">简写</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，比较和排序基于数字字符代码值。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">ASCII</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性是简写
             </font></font><code class="literal">CHARACTER SET latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">UNICODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性是简写
             </font></font><code class="literal">CHARACTER SET ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字符列比较和排序基于分配给列的排序规则。</font><font style="vertical-align: inherit;">对于
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型，可以使用二进制（声明一个柱</font></font><code class="literal">_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）归类或所述
         </font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性，以使比较和排序，以使用底层字符代码值，而不是一个词汇顺序。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关在MySQL中使用字符集的更多信息，请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html" title="第10章字符集，排序规则，Unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10章，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集，归类，Unicode</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm140528093520032"></a>

            <a class="indexterm" name="idm140528093518960"></a>

            <a class="indexterm" name="idm140528093517888"></a>

            <a class="indexterm" name="idm140528093516816"></a>

            <a class="indexterm" name="idm140528093515744"></a>

            <a class="indexterm" name="idm140528093514256"></a>

            <a class="indexterm" name="idm140528093512768"></a>

            <a class="indexterm" name="idm140528093511280"></a>

            <code class="literal">[NATIONAL] CHAR[(<em class="replaceable"><code>M</code></em>)]
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个固定长度的字符串，在存储时总是用空格填充指定的长度。
            </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表字符的列长度。</font><font style="vertical-align: inherit;">范围</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是0到255.如果</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">省略，则长度为1。
</font></font></p><a class="indexterm" name="idm140528093505776"></a>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_pad_char_to_full_length"><code class="literal">PAD_CHAR_TO_FULL_LENGTH</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              启用S​​QL模式，</font><font style="vertical-align: inherit;">否则在检索值
               </font><font style="vertical-align: inherit;">
              时删除尾随空格
               </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是速记
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHARACTER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">NATIONAL CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或其等效简写形式</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">NCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是定义</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列应使用某些预定义字符集</font><font style="vertical-align: inherit;">的标准SQL方法
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL使用</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这个预定义的字符集。
            </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-national" title="10.3.7国家字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.3.7节“国家字符集”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">CHAR BYTE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型是用于一个别名</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的数据类型。</font><font style="vertical-align: inherit;">这是一个兼容性功能。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL允许你创建一个类型的列
             </font></font><code class="literal">CHAR(0)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当您必须符合依赖列的存在但实际上并未使用其值的旧应用程序时，这非常有用。</font></font><code class="literal">CHAR(0)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当你需要一个只能取两个值的列时也是相当不错的：一列被定义为</font></font><code class="literal">CHAR(0) NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            只占用一位，并且只能取值
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（空字符串）。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093479536"></a>

            <a class="indexterm" name="idm140528093478464"></a>

            <a class="indexterm" name="idm140528093477376"></a>

            <a class="indexterm" name="idm140528093476304"></a>

            <a class="indexterm" name="idm140528093475232"></a>

            <a class="indexterm" name="idm140528093474144"></a>

            <a class="indexterm" name="idm140528093473072"></a>

            <a class="indexterm" name="idm140528093471584"></a>

            <a class="indexterm" name="idm140528093470096"></a>

            <a class="indexterm" name="idm140528093468608"></a>

            <a class="indexterm" name="idm140528093467120"></a>

            <a class="indexterm" name="idm140528093465632"></a>

            <code class="literal">[NATIONAL] VARCHAR(<em class="replaceable"><code>M</code></em>)
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code>
          </p><a class="indexterm" name="idm140528093462016"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个可变长度的字符串。</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            代表字符中的最大列长度。</font><font style="vertical-align: inherit;">范围</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是0到65,535。</font><font style="vertical-align: inherit;">a的有效最大长度
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于最大行大小（65,535字节，在所有列中共享）和使用的字符集。</font><font style="vertical-align: inherit;">例如，
             </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符每个字符最多可能需要三个字节，因此</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">列
             </font><font style="vertical-align: inherit;">最多可以声明为21,844个字符。</font><font style="vertical-align: inherit;">参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#column-count-limit" title="C.10.4表列数和行大小的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.10.4节“表列数量和行数限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL将</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数值</font><font style="vertical-align: inherit;">存储</font><font style="vertical-align: inherit;">为1字节或2字节长度的前缀和数据。</font><font style="vertical-align: inherit;">长度前缀表示该值中的字节数。</font><font style="vertical-align: inherit;">甲
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列使用一个长度字节的值，如果不需要超过255字节，2个字节长度值是否可能需要多于255个字节。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              MySQL的遵从标准SQL规范，并
               </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从删除尾随空格
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值。
</font></font></p>
</div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是速记
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHARACTER VARYING</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">NATIONAL VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是定义</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列应使用某些预定义字符集</font><font style="vertical-align: inherit;">的标准SQL方法
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL使用
             </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个预定义的字符集。
            </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-national" title="10.3.7国家字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.3.7节“国家字符集”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">NVARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是速记
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">NATIONAL VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093436560"></a>

            <a class="indexterm" name="idm140528093435488"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY[(<em class="replaceable"><code>M</code></em>)]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型与类型相似</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但存储二进制字节字符串而不</font><font style="vertical-align: inherit;">是非</font><font style="vertical-align: inherit;">二进制字符串。</font><font style="vertical-align: inherit;">可选长度</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示以字节为单位的列长度。</font><font style="vertical-align: inherit;">如果省略，则
             </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认为1。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093425872"></a>

            <a class="indexterm" name="idm140528093424800"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY(<em class="replaceable"><code>M</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型与类型相似</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但存储二进制字节字符串而不</font><font style="vertical-align: inherit;">是非</font><font style="vertical-align: inherit;">二进制字符串。</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示以字节为单位的最大列长度。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093415664"></a>

            <a class="indexterm" name="idm140528093414592"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TINYBLOB</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            阿</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为255字节的最大长度塔（2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1）个字节。</font><font style="vertical-align: inherit;">每个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TINYBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都使用1字节的长度前缀进行存储，该前缀指示该值中的字节数。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093405792"></a>

            <a class="indexterm" name="idm140528093404720"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TINYTEXT
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            阿</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与255（2的最大长度列</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">个字符- 1）。</font><font style="vertical-align: inherit;">如果值包含多字节字符，则有效最大长度会减少。</font><font style="vertical-align: inherit;">每个
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TINYTEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都使用1字节的长度前缀进行存储，该前缀指示该值中的字节数。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093394800"></a>

            <a class="indexterm" name="idm140528093393728"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB[(<em class="replaceable"><code>M</code></em>)]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            阿</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用的65,535（2的最大长度柱</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1）字节。</font><font style="vertical-align: inherit;">每个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都使用一个2字节长度前缀进行存储，该前缀表示该值中的字节数。
          </font></font></p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以给这种类型</font><font style="vertical-align: inherit;">
            一个可选的长度</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果这样做了，MySQL创建列作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">足够大以保存值</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节长</font><font style="vertical-align: inherit;">的最小</font><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093381904"></a>

            <a class="indexterm" name="idm140528093380832"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT[(<em class="replaceable"><code>M</code></em>)]
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            阿</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用的65,535（2的最大长度列</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">个字符- 1）。</font><font style="vertical-align: inherit;">如果值包含多字节字符，则有效最大长度会减少。</font><font style="vertical-align: inherit;">每个
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都使用一个2字节长度前缀进行存储，该前缀表示该值中的字节数。
          </font></font></p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以给这种类型</font><font style="vertical-align: inherit;">
            一个可选的长度</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果这样做了，MySQL将创建列作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">足够大以保存值</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            字符长</font><font style="vertical-align: inherit;">的最小</font><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093367840"></a>

            <a class="indexterm" name="idm140528093366768"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMBLOB</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            甲</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16,777,215个（2的最大长度柱</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1）字节。</font><font style="vertical-align: inherit;">每个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            值都使用一个3字节的长度前缀进行存储，该前缀表示该值中的字节数。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093357952"></a>

            <a class="indexterm" name="idm140528093356880"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMTEXT
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            甲</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16,777,215个（2的最大长度列</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">个字符- 1）。</font><font style="vertical-align: inherit;">如果值包含多字节字符，则有效最大长度会减少。</font><font style="vertical-align: inherit;">每个
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMTEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都使用一个3字节的长度前缀进行存储，该前缀表示该值中的字节数。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093346240"></a>

            <a class="indexterm" name="idm140528093345168"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGBLOB</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            甲</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2具有4294967295或4GB的最大长度柱</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1）个字节。</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的有效最大长度
             </font><font style="vertical-align: inherit;">取决于客户端/服务器协议和可用内存中配置的最大数据包大小。</font><font style="vertical-align: inherit;">每个
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都使用一个4字节的长度前缀进行存储，该前缀表示该值中的字节数。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093334896"></a>

            <a class="indexterm" name="idm140528093333824"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGTEXT
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            甲</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2具有4294967295或4GB的最大长度柱</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1）字符。</font><font style="vertical-align: inherit;">如果值包含多字节字符，则有效最大长度会减少。</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGTEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列</font><font style="vertical-align: inherit;">的有效最大长度
             </font><font style="vertical-align: inherit;">还取决于客户端/服务器协议和可用内存中配置的最大数据包大小。</font><font style="vertical-align: inherit;">每个
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGTEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            值都使用一个4字节的长度前缀进行存储，该前缀表示该值中的字节数。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093322448"></a>

            <a class="indexterm" name="idm140528093321376"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM('<em class="replaceable"><code>value1</code></em>','<em class="replaceable"><code>value2</code></em>',...)
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            枚举。</font><font style="vertical-align: inherit;">的字符串对象，它只能有一个值，从值列表中选择
             </font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">或特殊的</font><font style="vertical-align: inherit;">误差值。
            </font><font style="vertical-align: inherit;">值在内部表示为整数。
          </font></font><code class="literal">'<em class="replaceable"><code>value1</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">'<em class="replaceable"><code>value2</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">...</code><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><code class="literal">''</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列最多可以有65,535个不同的元素。</font><font style="vertical-align: inherit;">（实际限制小于3000.）一个表在其</font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中可以有不多于255个独特元素列表定义，
             </font><font style="vertical-align: inherit;">被视为一个组。</font><font style="vertical-align: inherit;">有关这些限制的更多信息，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#limits-frm-file" title="C.10.5由.frm文件结构提供的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.10.5节“由.frm文件结构实施的限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528093303024"></a>

            <a class="indexterm" name="idm140528093301952"></a>

            <a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET('<em class="replaceable"><code>value1</code></em>','<em class="replaceable"><code>value2</code></em>',...)
            [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
            [COLLATE
            <em class="replaceable"><code>collation_name</code></em>]</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一套。</font><font style="vertical-align: inherit;">一个字符串对象，该对象可以具有零个或多个值，每个都必须从值的列表中选择
             </font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">
            值在内部表示为整数。
          </font></font><code class="literal">'<em class="replaceable"><code>value1</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">'<em class="replaceable"><code>value2</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">...</code> <a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列最多可以有64个不同的成员。</font><font style="vertical-align: inherit;">一个表在其</font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中可以有不超过255个唯一元素列表定义，
             </font><font style="vertical-align: inherit;">被视为一个组。</font><font style="vertical-align: inherit;">有关此限制的更多信息，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#limits-frm-file" title="C.10.5由.frm文件结构提供的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.10.5节“由.frm文件结构实施的限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="numeric-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2数字类型</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#integer-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#fixed-point-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.2定点类型（准确值） -  DECIMAL，NUMERIC</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#floating-point-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.3浮点类型（近似值） -  FLOAT，DOUBLE</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#bit-type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.4位值类型 -  BIT</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#numeric-type-attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.5数字类型属性</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#out-of-range-and-overflow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.6超出范围和溢出处理</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528093285856"></a><a class="indexterm" name="idm140528093284784"></a><a class="indexterm" name="idm140528093283712"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL支持所有标准的SQL数字数据类型。</font><font style="vertical-align: inherit;">这些类型包括确切的数值数据类型（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INTEGER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">NUMERIC</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），以及该近似数值数据类型（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">REAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE PRECISION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">关键字
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INTEGER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而关键字
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DEC</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">FIXED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL视为
       </font><font style="vertical-align: inherit;">（非标准扩展）</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的同义词
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE PRECISION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
      除非</font><font style="vertical-align: inherit;">启用S​​QL模式</font><font style="vertical-align: inherit;">，否则</font><font style="vertical-align: inherit;">MySQL也可以</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">REAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE PRECISION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（非标准变体）
       </font><font style="vertical-align: inherit;">的同义词</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_real_as_float"><code class="literal">REAL_AS_FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#bit-type" title="11.2.4位值类型 -  BIT"><code class="literal">BIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型存储位值，并且被支撑为</font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#memory-storage-engine" title="15.3内存存储引擎"><code class="literal">MEMORY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关在表达式求值过程中MySQL如何处理向列分配超范围值和溢出的信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#out-of-range-and-overflow" title="11.2.6超出范围和溢出处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.2.6节“超出范围和溢出处理”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关数字类型存储要求的信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      用于数字操作数计算结果的数据类型取决于操作数的类型和对其执行的操作。</font><font style="vertical-align: inherit;">有关更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#arithmetic-functions" title="12.6.1算术运算符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.6.1节“算术运算符”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="integer-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL支持SQL标准整数类型
         </font></font><code class="literal">INTEGER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或</font></font><code class="literal">INT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和
         </font></font><code class="literal">SMALLINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">作为一个可扩展标准，MySQL也支持整数类型
         </font></font><code class="literal">TINYINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MEDIUMINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">BIGINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">下表显示了每种整数类型所需的存储空间和范围。
</font></font></p>
<div class="table">
<a name="integer-type-storage-and-range"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表11.1 MySQL支持的整数类型的必需存储和范围</font></font></b></p>
<div class="table-contents">
<table summary="Required storage and range for integer types supported by MySQL. Information includes the integer type, the storage size in bytes, the minimum signed and unsigned values, and the maximum signed and unsigned values."><colgroup><col width="1%"><col width="1%"><col width="1%"><col width="1%"><col width="1%"><col width="1%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储（字节）</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小值签名</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小值无符号</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大值签署</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大值无符号</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">TINYINT</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
            <td><code class="literal">-128</code></td>
            <td><code class="literal">0</code></td>
            <td><code class="literal">127</code></td>
            <td><code class="literal">255</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">SMALLINT</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
            <td><code class="literal">-32768</code></td>
            <td><code class="literal">0</code></td>
            <td><code class="literal">32767</code></td>
            <td><code class="literal">65535</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">MEDIUMINT</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
            <td><code class="literal">-8388608</code></td>
            <td><code class="literal">0</code></td>
            <td><code class="literal">8388607</code></td>
            <td><code class="literal">16777215</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">INT</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
            <td><code class="literal">-2147483648</code></td>
            <td><code class="literal">0</code></td>
            <td><code class="literal">2147483647</code></td>
            <td><code class="literal">4294967295</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">BIGINT</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
            <td><code class="literal">-2^63</code></td>
            <td><code class="literal">0</code></td>
            <td><code class="literal">2^63-1</code></td>
            <td><code class="literal">2^64-1</code></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fixed-point-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.2定点类型（准确值） -  DECIMAL，NUMERIC</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">NUMERIC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        类型的存储精确的数值数据。</font><font style="vertical-align: inherit;">使用这些类型时，重要的是要保留精确的精度，例如使用货币数据。</font><font style="vertical-align: inherit;">在MySQL中，</font></font><code class="literal">NUMERIC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被实现为</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此以下关于</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样适用的
         </font><font style="vertical-align: inherit;">评论</font></font><code class="literal">NUMERIC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL </font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以二进制格式</font><font style="vertical-align: inherit;">存储</font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#precision-math" title="12.21精度数学"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.21节“精度数学”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列声明中，精度和比例可以是（并且通常是）指定的; </font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">薪金DECIMAL（5,2）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在这个例子中，</font></font><code class="literal">5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度
         </font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是规模。</font><font style="vertical-align: inherit;">精度表示为值存储的有效数字的数量，标度表示可以存储在小数点后面的数字的数量。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        标准SQL要求</font></font><code class="literal">DECIMAL(5,2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能够存储具有五位数和两位小数的任何值，因此可以存储在</font></font><code class="literal">salary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列中的值范围从</font></font><code class="literal">-999.99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至
         </font></font><code class="literal">999.99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在标准SQL中，语法
         </font><font style="vertical-align: inherit;">等同于
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">类似地，语法</font><font style="vertical-align: inherit;">等同于</font><font style="vertical-align: inherit;">允许实现决定值的地方
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL支持这两种</font><font style="vertical-align: inherit;">语法的</font><font style="vertical-align: inherit;">变体形式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认值</font><font style="vertical-align: inherit;">是10。
      </font></font><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>)</code><font style="vertical-align: inherit;"></font><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,0)</code><font style="vertical-align: inherit;"></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"></font><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,0)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果比例为0，则</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值不包含小数点或小数部分。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        数字的最大位数为</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">65，但给定</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列</font><font style="vertical-align: inherit;">的实际范围</font><font style="vertical-align: inherit;">可能受到</font><font style="vertical-align: inherit;">给定</font><font style="vertical-align: inherit;">列的精度或标度的限制。</font><font style="vertical-align: inherit;">当这样的列被赋予一个小数点后的数字超过指定比例尺允许的数值时，该值将被转换为该比例。</font><font style="vertical-align: inherit;">（精确的行为是特定于操作系统的，但通常效果会截断到允许的位数。）
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="floating-point-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.3浮点类型（近似值） -  FLOAT，DOUBLE</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><code class="literal">FLOAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">DOUBLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型代表近似数字数据值。</font><font style="vertical-align: inherit;">MySQL对于单精度值使用四个字节，对于双精度值使用八个字节。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        因为</font></font><code class="literal">FLOAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，SQL标准允许</font></font><code class="literal">FLOAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在括号内</font><font style="vertical-align: inherit;">的关键字</font><font style="vertical-align: inherit;">后面的</font><font style="vertical-align: inherit;">位中可选地指定精度（但不是指数的范围）
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL也支持这个可选的精度规格，但精度值仅用于确定存储大小。</font><font style="vertical-align: inherit;">从0到23的精度导致4个字节的单精度</font></font><code class="literal">FLOAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列。</font><font style="vertical-align: inherit;">从24到53的精度导致一个8字节的双精度</font></font><code class="literal">DOUBLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL允许使用非标准语法：
         </font><font style="vertical-align: inherit;">
        或
         </font><font style="vertical-align: inherit;">
        或</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这里，
         </font><font style="vertical-align: inherit;">
        除了数值之外</font><font style="vertical-align: inherit;">，总数</font><font style="vertical-align: inherit;">最多可以存储
         </font><font style="vertical-align: inherit;">数字，其中的
         </font><font style="vertical-align: inherit;">数字可以在小数点后面。</font><font style="vertical-align: inherit;">例如，定义为的列
         </font><font style="vertical-align: inherit;">将</font><font style="vertical-align: inherit;">在显示时</font><font style="vertical-align: inherit;">看起来像
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL在存储值时执行四舍五入，所以如果插入
         </font><font style="vertical-align: inherit;">到
         </font><font style="vertical-align: inherit;">列中，则近似结果为
         </font><font style="vertical-align: inherit;">。
      </font></font><code class="literal">FLOAT(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><code class="literal">REAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><code class="literal">DOUBLE
        PRECISION(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><code class="literal">(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"></font><code class="literal">FLOAT(7,4)</code><font style="vertical-align: inherit;"></font><code class="literal">-999.9999</code><font style="vertical-align: inherit;"></font><code class="literal">999.00009</code><font style="vertical-align: inherit;"></font><code class="literal">FLOAT(7,4)</code><font style="vertical-align: inherit;"></font><code class="literal">999.0001</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        因为浮点值是近似值而不是作为精确值存储的，所以将它们作为比较准确对待可能会导致问题。</font><font style="vertical-align: inherit;">他们也受到平台或实施依赖关系的影响。</font><font style="vertical-align: inherit;">有关更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#problems-with-float" title="B.5.4.8浮点值问题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.5.4.8节“浮点值问题”</font></font></a>
      </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了最大限度的便携性，需要存储近似数字数据值的代码应该使用</font></font><code class="literal">FLOAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">DOUBLE PRECISION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不指定精度或数字位数。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="bit-type"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.4位值类型 -  BIT</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">BIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型被用于存储比特值。</font><font style="vertical-align: inherit;">一种类型
         </font><font style="vertical-align: inherit;">允许存储</font><font style="vertical-align: inherit;">位值。
        </font><font style="vertical-align: inherit;">可以从1到64。
      </font></font><code class="literal">BIT(<em class="replaceable"><code>M</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要指定位值，
         </font><font style="vertical-align: inherit;">可以使用符号。</font><font style="vertical-align: inherit;">是使用零和1写成的二进制值。</font><font style="vertical-align: inherit;">例如，
         </font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">
        分别代表图7和128。</font><font style="vertical-align: inherit;">请参见
         </font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#bit-value-literals" title="9.1.5比特值文字"><font style="vertical-align: inherit;">第9.1.5节“比特值文字”</font></a><font style="vertical-align: inherit;">。
      </font></font><code class="literal">b'<em class="replaceable"><code>value</code></em>'</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>value</code></em><font style="vertical-align: inherit;"></font><code class="literal">b'111'</code><font style="vertical-align: inherit;"></font><code class="literal">b'10000000'</code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#bit-value-literals" title="9.1.5比特值文字"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果将值分配给</font><font style="vertical-align: inherit;">小于</font><font style="vertical-align: inherit;">位长</font><font style="vertical-align: inherit;">的
         </font><font style="vertical-align: inherit;">列，则</font><font style="vertical-align: inherit;">该值左侧用零填充。</font><font style="vertical-align: inherit;">例如，</font><font style="vertical-align: inherit;">为</font><font style="vertical-align: inherit;">
        列</font><font style="vertical-align: inherit;">分配值</font><font style="vertical-align: inherit;">实际上与分配相同
         </font><font style="vertical-align: inherit;">。
      </font></font><code class="literal">BIT(<em class="replaceable"><code>M</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><code class="literal">b'101'</code><font style="vertical-align: inherit;"></font><code class="literal">BIT(6)</code><font style="vertical-align: inherit;"></font><code class="literal">b'000101'</code><font style="vertical-align: inherit;"></font></p><p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDB群集。&nbsp;</font></font></b><font style="vertical-align: inherit;"></font><code class="literal">BIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">
          的所有</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的最大组合大小</font><font style="vertical-align: inherit;">不得超过4096位。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="numeric-type-attributes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.5数字类型属性</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL支持一个扩展，用于在类型的基本关键字后面的括号中指定整型数据类型的显示宽度。</font><font style="vertical-align: inherit;">例如，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个显示宽度为四位的显示。</font><font style="vertical-align: inherit;">这个可选的显示宽度可以被应用程序用来显示宽度小于为列指定的宽度的整数值，方法是用空格填充它们。</font><font style="vertical-align: inherit;">（也就是说，这个宽度出现在结果集返回的元数据中，它是否被使用取决于应用程序。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        显示宽度也</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限制，可以被存储在列中的值的范围内。</font><font style="vertical-align: inherit;">它也不会阻止比列显示宽度更宽的值被正确显示。</font><font style="vertical-align: inherit;">例如，指定为
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT(3)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有通常
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围
         </font></font><code class="literal">-32768</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to的列</font></font><code class="literal">32767</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以及三位数所允许范围之外的值全部使用三位以上的数字显示。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当与可选（非标准）属性一起使用时</font></font><code class="literal">ZEROFILL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，空格的默认填充将替换为零。</font><font style="vertical-align: inherit;">例如，对于声明为的列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT(4) ZEROFILL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其值为</font></font><code class="literal">5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索为
         </font></font><code class="literal">0005</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"></font><code class="literal">ZEROFILL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当表达式或</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询中</font><font style="vertical-align: inherit;">涉及列时，</font><font style="vertical-align: inherit;">
          该</font><font style="vertical-align: inherit;">属性将被忽略
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您在具有该</font></font><code class="literal">ZEROFILL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font><font style="vertical-align: inherit;">的整数列中存储大于显示宽度的值，则</font><font style="vertical-align: inherit;">当MySQL为某些复杂联接生成临时表时，可能会遇到问题。</font><font style="vertical-align: inherit;">在这些情况下，MySQL假定数据值符合列显示宽度。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        所有的整数类型都可以有一个可选的（非标准）属性
         </font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无符号类型可用于只允许列中的非负数，或者当您需要列的较大数值范围时。</font><font style="vertical-align: inherit;">例如，如果
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列是
         </font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，列的范围的大小是相同的，但是它的端点从
         </font></font><code class="literal">-2147483648</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">2147483647</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        到</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">4294967295</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        浮点型和定点型也可以
         </font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">与整数类型一样，此属性可防止将负值存储在列中。</font><font style="vertical-align: inherit;">与整数类型不同，列值的上限范围保持不变。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您</font></font><code class="literal">ZEROFILL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为数字列</font><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">，MySQL会自动将该</font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        属性</font><font style="vertical-align: inherit;">添加</font><font style="vertical-align: inherit;">到该列。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        整数或浮点数据类型可以具有附加属性</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将值</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入索引
         </font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列时，该列将设置为下一个序列值。</font><font style="vertical-align: inherit;">通常这是
         </font></font><code class="literal"><em class="replaceable"><code>value</code></em>+1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em class="replaceable"><code>value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中当前列的最大值</font><font style="vertical-align: inherit;">在哪里
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">序列以</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">开头
         </font><font style="vertical-align: inherit;">。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        存储</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
         </font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中与存储的效果相同</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，除非</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了
         </font><font style="vertical-align: inherit;">SQL模式。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        插入</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以生成
         </font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值需要声明该列</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果该列已声明</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则插入
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">商店a </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">插入任何其他值时
         </font><font style="vertical-align: inherit;">，该列将设置为该值，并重置序列，以便下一个自动生成的值从插入值开始依次跟随。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL 5.7中，</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不支持列的</font><font style="vertical-align: inherit;">负值
         </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="out-of-range-and-overflow"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.6超出范围和溢出处理</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528093082512"></a><a class="indexterm" name="idm140528093081440"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当MySQL将数值存储在列数据类型的允许范围之外的数值列中时，结果取决于当时有效的SQL模式：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果启用了严格SQL模式，则MySQL会根据SQL标准拒绝超出范围的值并发生错误，并且插入失败。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有启用限制模式，则MySQL将该值剪切到列数据类型范围的适当端点，并存储结果值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当超出范围的值分配给整数列时，MySQL将存储表示列数据类型范围的相应端点的值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当为浮点或定点列指定一个超出指定（或默认）精度和标度所暗示范围的值时，MySQL会存储代表该范围相应端点的值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设一张表</font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有这样的定义：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（i1 TINYINT，i2 TINYINT UNSIGNED）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果启用严格的SQL模式，则会发生超出范围的错误：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET sql_mode = 'TRADITIONAL';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>INSERT INTO t1 (i1, i2) VALUES(256, 256);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1264（22003）：第1行的列'i1'的范围值超出范围</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空集（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在严格的SQL模式未启用的情况下，会发生带有警告的剪辑：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET sql_mode = '';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>INSERT INTO t1 (i1, i2) VALUES(256, 256);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SHOW WARNINGS;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">级别| </font><font style="vertical-align: inherit;">代码| </font><font style="vertical-align: inherit;">留言|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">警告| </font><font style="vertical-align: inherit;">1264 | </font><font style="vertical-align: inherit;">第1行的列'i1'超出范围值</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">警告| </font><font style="vertical-align: inherit;">1264 | </font><font style="vertical-align: inherit;">列1的列'i2'超出范围值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">i1 | </font><font style="vertical-align: inherit;">i2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">127 | </font><font style="vertical-align: inherit;">255 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果不启用严格的SQL模式，即削波的发生是由于列分配转化的报告为警告</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD DATA
        INFILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和多行</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">在严格模式下，这些语句失败，并且部分或全部值不会被插入或更改，具体取决于表是否是事务表和其他因素。</font><font style="vertical-align: inherit;">有关详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在数值表达式评估期间溢出会导致错误。</font><font style="vertical-align: inherit;">例如，最大的有符号
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是9223372036854775807，所以下面的表达式会产生一个错误：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 9223372036854775807 + 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1690（22003）：BIGINT值超出范围'（9223372036854775807 + 1）'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在这种情况下使操作成功，请将该值转换为无符号;
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST(9223372036854775807 AS UNSIGNED) + 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CAST（9223372036854775807 AS UNSIGNED）+ 1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">9223372036854775808 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        是否发生溢出取决于操作数的范围，因此处理前面的表达式的另一种方式是使用精确值算术，因为
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的范围比整数大：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 9223372036854775807.0 + 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">9223372036854775807.0 + 1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">9223372036854775808.0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        整数值之间的减法（其中一个是类型的
         </font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）会默认生成无符号结果。</font><font style="vertical-align: inherit;">如果结果是否定的，则会出现错误：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode = '';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font><span class="errortext"><font style="vertical-align: inherit;">ERROR 1690（22003）：BIGINT UNSIGNED值在'（cast（0 as unsigned） -  1）'</font></span></font><strong class="userinput"><code>SELECT CAST(0 AS UNSIGNED) - 1;</code></strong>
<span class="errortext"><font style="vertical-align: inherit;"></font></span>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        启用</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">SQL模式，结果是否定的：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET sql_mode = 'NO_UNSIGNED_SUBTRACTION';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT CAST(0 AS UNSIGNED) - 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CAST（0 AS UNSIGNED） -  1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">-1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果此操作的结果用于更新
         </font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数列，则结果将被剪裁为列类型的最大值，如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        启用</font><font style="vertical-align: inherit;">，则剪切为0 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果启用严格SQL模式，则会发生错误并且列保持不变。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="date-and-time-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3日期和时间类型</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#datetime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.1 DATE，DATETIME和TIMESTAMP类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.2时间类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#year"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.3年份类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#migrating-to-year4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.4年（2）限制和迁移到年（4）</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.5 TIMESTAMP和DATETIME的自动初始化和更新</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#fractional-seconds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.6小数秒的时间值</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-conversion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.7日期和时间类型之间的转换</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#two-digit-years"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.8两位数日期</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528093038480"></a><a class="indexterm" name="idm140528093036992"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      日期和时间类型代表的时间值
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个时态类型都有一个有效值范围，以及一个</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，当您指定一个MySQL无法表示的无效值时可能会使用该值。</font><font style="vertical-align: inherit;">该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型具有特殊的自动更新行为，稍后介绍。</font><font style="vertical-align: inherit;">有关时间类型存储要求，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在处理日期和时间类型时请记住以下一般注意事项：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL以标准输出格式检索给定日期或时间类型的值，但它试图解释您提供的输入值的各种格式（例如，当您指定要分配给日期或与日期比较的值或时间类型）。</font><font style="vertical-align: inherit;">有关日期和时间类型的允许格式的说明，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#date-and-time-literals" title="9.1.3日期和时间文字"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.1.3节“日期和时间文字”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">预计您会提供有效的值。</font><font style="vertical-align: inherit;">如果您使用其他格式的值，则可能会出现不可预知的结果。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          虽然MySQL试图以多种格式解释值，但日期部分必须始终以年 - 月 - 日的顺序（例如</font></font><code class="literal">'98-09-04'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）给出，而不是在其他地方常用的月 - 日 - 年或日 - 月 - 年的顺序中例如</font></font><code class="literal">'09-04-98'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">'04-09-98'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          包含两位数年份值的日期含糊不清，因为该世纪未知。</font><font style="vertical-align: inherit;">MySQL使用这些规则解释两位数年份值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              范围内的年份值</font></font><code class="literal">70-99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将转换为</font></font><code class="literal">1970-1999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              范围内的年份值</font></font><code class="literal">00-69</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将转换为</font></font><code class="literal">2000-2069</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          另见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#two-digit-years" title="11.3.8两位数日期"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.8节“日期中的两位数字”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-conversion" title="11.3.7日期和时间类型之间的转换"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.7节“日期和时间类型之间的转换”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的规则，将值从一种时间类型转换为另一种
           </font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-conversion" title="11.3.7 Conversion Between Date and Time Types"><font style="vertical-align: inherit;">时间类型</font></a><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果在数值上下文中使用该值，MySQL会自动将日期或时间值转换为数字，反之亦然。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          默认情况下，当MySQL遇到超出范围的日期或时间类型的值或者对于该类型无效时，它会将该值转换为该类型的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">例外情况是超出范围的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被剪切到</font><font style="vertical-align: inherit;">范围
           </font><font style="vertical-align: inherit;">的适当端点
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过将SQL模式设置为适当的值，您可以更确切地指定希望MySQL支持的日期类型。</font><font style="vertical-align: inherit;">（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）您可以让MySQL接受某些日期，例如
           </font></font><code class="literal">'2009-11-31'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_allow_invalid_dates"><code class="literal">ALLOW_INVALID_DATES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL模式。</font><font style="vertical-align: inherit;">当您想要</font><font style="vertical-align: inherit;">将用户在数据库中指定</font><font style="vertical-align: inherit;">的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能错误的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值（例如，在Web表单中）中存储以供将来处理</font><font style="vertical-align: inherit;">时，这非常有用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种模式下，MySQL仅验证月份是在1到12的范围内，并且该日期在1到31的范围内。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL允许你存储日期或月份和日期在一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或一
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中为零的日期</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这对需要存储生日的应用程序非常有用，因为您可能不知道确切的日期。</font><font style="vertical-align: inherit;">在这种情况下，您只需将日期存储为</font></font><code class="literal">'2009-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">'2009-01-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果你存储这些日期，你不应该期望得到正确的结果，例如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要完整日期的功能。</font><font style="vertical-align: inherit;">要在日期中禁止零月或零日零件，请启用该</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_in_date"><code class="literal">NO_ZERO_IN_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          模式。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL允许您将</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">存储</font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虚拟日期”。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这在某些情况下比使用</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">更方便
           </font><font style="vertical-align: inherit;">，并且使用更少的数据和索引空间。</font><font style="vertical-align: inherit;">禁止</font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用该
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_date"><code class="literal">NO_ZERO_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式。
        </font></font></p></li><li class="listitem"><p>
          <span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过Connector / ODBC使用的</font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">零</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">日期或时间值会自动转换为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ODBC </font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">因为ODBC无法处理这些值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      下表显示了</font><font style="vertical-align: inherit;">
      每种类型</font><font style="vertical-align: inherit;">的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的格式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是特殊的，但你可以存储或引用它们明确使用表中显示的值。</font><font style="vertical-align: inherit;">你也可以使用这些值来做到这一点，
       </font></font><code class="literal">'0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更容易编写。</font><font style="vertical-align: inherit;">对于包含日期部分（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的时</font><font style="vertical-align: inherit;">态类型，</font><font style="vertical-align: inherit;">如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_date"><code class="literal">NO_ZERO_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">SQL模式</font><font style="vertical-align: inherit;">，则使用这些值会产生警告
       </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Format of the zero value for temporal data types."><colgroup><col width="30%"><col width="40%"></colgroup><thead><tr>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font></font></th>
          <th scope="col"><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a></td>
          <td><code class="literal">'0000-00-00'</code></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a></td>
          <td><code class="literal">'00:00:00'</code></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a></td>
          <td><code class="literal">'0000-00-00 00:00:00'</code></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a></td>
          <td><code class="literal">'0000-00-00 00:00:00'</code></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a></td>
          <td><code class="literal">0000</code></td>
</tr></tbody></table>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="datetime"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.1 DATE，DATETIME和TIMESTAMP类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528092952480"></a><a class="indexterm" name="idm140528092951440"></a><a class="indexterm" name="idm140528092950368"></a><a class="indexterm" name="idm140528092949296"></a><a class="indexterm" name="idm140528092947808"></a><a class="indexterm" name="idm140528092946320"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><code class="literal">DATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型都有关。</font><font style="vertical-align: inherit;">本节介绍它们的特点，它们的相似之处以及它们的不同之处。</font><font style="vertical-align: inherit;">MySQL </font><font style="vertical-align: inherit;">
        以</font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#date-and-time-literals" title="9.1.3日期和时间文字"><font style="vertical-align: inherit;">第9.1.3节“日期和时间文字”中</font></a><font style="vertical-align: inherit;">描述的几种格式</font><font style="vertical-align: inherit;">识别</font></font><code class="literal">DATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于
         </font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">范围的描述</font><span class="quote"><font style="vertical-align: inherit;">， “ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">支持</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">意味着尽管更早的值可能工作，也不能保证。
      </font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#date-and-time-literals" title="9.1.3日期和时间文字"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code class="literal">DATE</code><font style="vertical-align: inherit;"></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">DATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型用于包含日期部分但不包含时间部分的值。</font><font style="vertical-align: inherit;">MySQL </font></font><code class="literal">DATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">'YYYY-MM-DD'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">检索并显示
         </font><font style="vertical-align: inherit;">值
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">支持的范围是
         </font></font><code class="literal">'1000-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
         </font></font><code class="literal">'9999-12-31'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型用于包含日期和时间部分的值。</font><font style="vertical-align: inherit;">MySQL </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">'YYYY-MM-DD
        HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">检索并显示
         </font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">支持的范围是
         </font></font><code class="literal">'1000-01-01 00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">'9999-12-31
        23:59:59'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型被用于同时包含日期和时间部分的值。
        </font><font style="vertical-align: inherit;">UTC到</font><font style="vertical-align: inherit;">UTC </font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的范围</font><font style="vertical-align: inherit;">。
      </font></font><code class="literal">'1970-01-01
        00:00:01'</code><font style="vertical-align: inherit;"></font><code class="literal">'2038-01-19
        03:14:07'</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        A </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值可以包含最大微秒（6位）精度的尾随小数秒部分。</font><font style="vertical-align: inherit;">特别是，插入a </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的值中的任何小数部分都</font><font style="vertical-align: inherit;">被存储而不是丢弃。</font><font style="vertical-align: inherit;">与包括分数部分，这些值的格式</font></font><code class="literal">'YYYY-MM-DD
        HH:MM:SS[.fraction]'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，对于范围
         </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值是</font></font><code class="literal">'1000-01-01
        00:00:00.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">'9999-12-31
        23:59:59.999999'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而对于范围
         </font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值是</font></font><code class="literal">'1970-01-01
        00:00:01.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">'2038-01-19
        03:14:07.999999'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">小数部分应始终与其余时间分开小数点; </font><font style="vertical-align: inherit;">没有其他小数分隔符被识别。</font><font style="vertical-align: inherit;">有关MySQL中小数秒支持的信息，请参阅
        </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#fractional-seconds" title="11.3.6小数秒的时间值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.6节“时间分数秒”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        数据类型提供自动初始化和更新到当前的日期和时间。</font><font style="vertical-align: inherit;">有关更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization" title="11.3.5 TIMESTAMP和DATETIME的自动初始化和更新"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.5节“自动初始化和更新TIMESTAMP和DATETIME”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL将</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前时区的值</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">为UTC存储，并从UTC返回到当前时区以供检索。</font><font style="vertical-align: inherit;">（对于其他类型（例如，这不会发生</font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。默认情况下，每个连接的当前时区是服务器的时间。</font><font style="vertical-align: inherit;">时区可以基于每个连接进行设置。</font><font style="vertical-align: inherit;">只要时区设置保持不变，您可以恢复您存储的相同值。</font><font style="vertical-align: inherit;">如果您存储了一个</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，然后更改时区并检索该值，则检索到的值与您存储的值不同。</font><font style="vertical-align: inherit;">发生这种情况是因为同一时区未用于双向转换。</font><font style="vertical-align: inherit;">当前时区可用作值的值</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_time_zone"><code class="literal">time_zone</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">有关更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#time-zone-support" title="5.1.10 MySQL服务器时区支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.10节“MySQL服务器时区支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        无效</font></font><code class="literal">DATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被转换为</font><font style="vertical-align: inherit;">适当类型（</font><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。
      </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"></font><code class="literal">'0000-00-00
        00:00:00'</code><font style="vertical-align: inherit;"></font></p><a class="indexterm" name="idm140528092903520"></a><a class="indexterm" name="idm140528092902032"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        了解MySQL中日期值解释的某些属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于指定为字符串的值，</font><font style="vertical-align: inherit;">
            MySQL允许使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宽松</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式，其中任何标点符号都可用作日期部分或时间部分之间的分隔符。</font><font style="vertical-align: inherit;">在某些情况下，这种语法可能是骗人的。</font><font style="vertical-align: inherit;">例如，由于某个值</font></font><code class="literal">'10:11:12'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能看起来像时间值</font></font><code class="literal">:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但</font></font><code class="literal">'2010-11-12'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在日期上下文中</font><font style="vertical-align: inherit;">被解释为年份</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该值
             </font></font><code class="literal">'10:45:15'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被转换为
             </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为
             </font></font><code class="literal">'45'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是有效的月份。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            日期和时间部分和小数部分之间唯一标识的分隔符是小数点。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            服务器要求月份和日期值有效，而不仅分别在1到12和1到31的范围内。</font><font style="vertical-align: inherit;">在禁用严格模式的情况下，会生成无效日期（如
             </font></font><code class="literal">'2004-04-31'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为
             </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和警告）。</font><font style="vertical-align: inherit;">启用严格模式后，无效日期会生成错误。</font><font style="vertical-align: inherit;">要允许这种日期，请启用
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_allow_invalid_dates"><code class="literal">ALLOW_INVALID_DATES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
             </font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></a><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL不接受</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含日期或月份列中的零值或不是有效日期的值。</font><font style="vertical-align: inherit;">这条规则的唯一例外是特殊的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font></font><code class="literal">'0000-00-00 00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            包含两位数年份值的日期含糊不清，因为该世纪未知。</font><font style="vertical-align: inherit;">MySQL使用这些规则解释两位数年份值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                范围内的年份值</font></font><code class="literal">00-69</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将转换为</font></font><code class="literal">2000-2069</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                范围内的年份值</font></font><code class="literal">70-99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将转换为</font></font><code class="literal">1970-1999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            另见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#two-digit-years" title="11.3.8两位数日期"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.8节“日期中的两位数字”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL服务器可以在</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_maxdb"><code class="literal">MAXDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用S​​QL模式的情况下</font><font style="vertical-align: inherit;">运行
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与之相同
           </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果在创建表格时启用此模式，则将</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列创建为</font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">因此，这些列使用</font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示格式，具有相同的值范围，并且没有自动初始化或更新当前日期和时间。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.22开始，</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_maxdb"><code class="literal">MAXDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被弃用。</font><font style="vertical-align: inherit;">它将在未来版本的MySQL中被删除。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="time"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.2时间类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528092868720"></a><a class="indexterm" name="idm140528092867648"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL </font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">'HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">检索和显示</font><font style="vertical-align: inherit;">值
         </font><font style="vertical-align: inherit;">（或
         </font></font><code class="literal">'HHH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大时间值的格式）。
        </font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的范围可以从
         </font></font><code class="literal">'-838:59:59'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
         </font></font><code class="literal">'838:59:59'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">小时部分可能非常大，因为该</font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型不仅可用于表示一天中的时间（其必须小于24小时），还可用于经过的时间或两个事件之间的时间间隔（其可能远远大于24小时，甚至负面）。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL </font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以多种格式</font><font style="vertical-align: inherit;">识别</font><font style="vertical-align: inherit;">数值，其中一些格式可以包含以微秒（6位数）为精度的尾随小数秒部分。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#date-and-time-literals" title="9.1.3日期和时间文字"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.1.3节“日期和时间文字”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关MySQL </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#fractional-seconds" title="11.3.6小数秒的时间值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中小</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数秒支持的信息，请参见</font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#fractional-seconds" title="11.3.6小数秒的时间值"><font style="vertical-align: inherit;">第11.3.6节“</font></a><font style="vertical-align: inherit;">小数秒的
         </font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#fractional-seconds" title="11.3.6小数秒的时间值"><font style="vertical-align: inherit;">时间值”</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特别是，插入</font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的值中的任何小数部分都
         </font><font style="vertical-align: inherit;">被存储而不是丢弃。</font><font style="vertical-align: inherit;">与包括分数部分，为范围
         </font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值是
         </font></font><code class="literal">'-838:59:59.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
         </font></font><code class="literal">'838:59:59.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        小心将缩略值分配给
         </font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">MySQL </font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用冒号</font><font style="vertical-align: inherit;">解释</font><font style="vertical-align: inherit;">当天时间的</font><font style="vertical-align: inherit;">缩写
         </font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">也就是说，</font></font><code class="literal">'11:12'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着
         </font></font><code class="literal">'11:12:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，没有
         </font></font><code class="literal">'00:11:12'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL使用假设两个最右边的数字表示秒（即随着时间而不是一天中的时间）来解释缩写值。</font><font style="vertical-align: inherit;">例如，你可能会想到
         </font></font><code class="literal">'1112'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">1112</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意义
         </font></font><code class="literal">'11:12:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（11点以后12分钟），但MySQL解释为</font></font><code class="literal">'00:11:12'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（11分12秒）。</font><font style="vertical-align: inherit;">同样，</font></font><code class="literal">'12'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并被
         </font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解释为
         </font></font><code class="literal">'00:00:12'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在时间部分和小数部分之间唯一识别的分隔符是小数点。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，超出</font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        范围但以其他方式有效的值将剪切到范围的最近端点。</font><font style="vertical-align: inherit;">例如，
         </font></font><code class="literal">'-850:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
         </font></font><code class="literal">'850:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为
         </font></font><code class="literal">'-838:59:59'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">'838:59:59'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无效的</font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值被转换为</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，由于</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它本身是一个有效值
         </font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此无法从</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储在表中</font><font style="vertical-align: inherit;">的值中</font><font style="vertical-align: inherit;">判断原始值是否已指定为
         </font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或是否无效。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于无效</font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">更严格的处理
         </font><font style="vertical-align: inherit;">，启用严格SQL模式会导致错误发生。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="year"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.3年份类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528092832848"></a><a class="indexterm" name="idm140528092831776"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型是用于表示年份值的1字节类型。</font><font style="vertical-align: inherit;">它可以被声明为
         </font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或，</font></font><code class="literal">YEAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且具有四个字符的显示宽度。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">YEAR(2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型已被弃用，并且在MySQL 5.7.5中被删除。</font><font style="vertical-align: inherit;">要转换
           </font></font><code class="literal">YEAR(2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
           </font></font><code class="literal">YEAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#migrating-to-year4" title="11.3.4年（2）限制和迁移到年（4）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.4节“年（2）限制和迁移到年（4）”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL </font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><code class="literal">YYYY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">显示</font><font style="vertical-align: inherit;">值，
         </font><font style="vertical-align: inherit;">范围为
         </font></font><code class="literal">1901</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font></font><code class="literal">2155</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以指定</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各种格式的</font><font style="vertical-align: inherit;">输入</font><font style="vertical-align: inherit;">值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如在的范围内的4位数字</font></font><code class="literal">1901</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来
             </font></font><code class="literal">2155</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如在的范围内的4位串</font></font><code class="literal">'1901'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            来</font></font><code class="literal">'2155'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如在的范围内的1位或2位的数字</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            来</font></font><code class="literal">99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL的转换在范围内的值</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来</font></font><code class="literal">69</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">70</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值范围
             </font></font><code class="literal">2001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来</font></font><code class="literal">2069</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">1970</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">1999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如在的范围内的1或2的数字串
             </font></font><code class="literal">'0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来</font></font><code class="literal">'99'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL的转换在范围内的值</font></font><code class="literal">'0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来
             </font></font><code class="literal">'69'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'70'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">'99'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值范围</font></font><code class="literal">2000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来
             </font></font><code class="literal">2069</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">1970</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><code class="literal">1999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            插入数字的结果</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有显示值</font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和内部值</font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要插入零并将其解释为</font></font><code class="literal">2000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请将其指定为字符串</font></font><code class="literal">'0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">'00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为返回一个在</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上下文中</font><font style="vertical-align: inherit;">可接受的值的函数的结果</font><font style="vertical-align: inherit;">，例如
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL将无效</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">为
         </font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        另见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#two-digit-years" title="11.3.8两位数日期"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.8节“日期中的两位数字”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="migrating-to-year4"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.4年（2）限制和迁移到年（4）</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节介绍使用时可能出现的问题，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并提供有关将现有</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列</font><font style="vertical-align: inherit;">转换为的信息</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        虽然内部取值范围
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和不赞成
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型是相同的（</font></font><code class="literal">1901</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font></font><code class="literal">2155</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），但</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于显示的值仅指示内部值的最后两位数字并省略世纪数字</font><font style="vertical-align: inherit;">，因此显示宽度
         </font><font style="vertical-align: inherit;">使得该类型固有不明确。</font><font style="vertical-align: inherit;">在某些情况下，结果可能是信息的丢失。</font><font style="vertical-align: inherit;">出于这个原因，在MySQL 5.7.5之前，请避免
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在您的应用程序中使用并</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在需要</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型的</font><font style="vertical-align: inherit;">地方
         </font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">从MySQL 5.7.5开始，支持</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被删除，现有</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列必须转换为
        </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 再次变得可用。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="year2-limitations"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年（2）限制</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型的</font><font style="vertical-align: inherit;">
          问题</font><font style="vertical-align: inherit;">包括显示值的不明确性，以及在将值转储并重新加载或转换为字符串时可能会丢失信息。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              显示的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值可能不明确。</font><font style="vertical-align: inherit;">最多有三个
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有不同内部值的值可以具有相同的显示值，如以下示例所示：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (y2 YEAR(2), y4 YEAR(4));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t (y2) VALUES(1912),(2012),(2112);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，3行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：3重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE t SET y4 = y2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，3行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
匹配行数：3更改：3警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">y2 | </font><font style="vertical-align: inherit;">y4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">12 | </font><font style="vertical-align: inherit;">1912 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">12 | </font><font style="vertical-align: inherit;">2012 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">12 | </font><font style="vertical-align: inherit;">2112 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转储在前一项中创建的表，转储文件将</font></font><code class="literal">y2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用相同的2位表示形式（</font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">表示所有</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您从转储文件重新加载表，则所有结果行都具有内部值</font></font><code class="literal">2012</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和显示值
               </font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从而失去它们之间的区别。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据值</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">为字符串形式使用该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">的显示宽度
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">假设
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列都包含值</font></font><code class="literal">1970</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将每个列分配给一个字符串将分别产生一个值
               </font></font><code class="literal">'70'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><code class="literal">'1970'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">也就是说，从</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">到</font><font style="vertical-align: inherit;">信息时会发生信息丢失</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当插入</font><font style="vertical-align: inherit;">表格中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">
              列</font><font style="vertical-align: inherit;">时</font><font style="vertical-align: inherit;">
              ，范围以外的值</font></font><code class="literal">1970</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将
               </font></font><code class="literal">2069</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被错误地存储</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，将</font><font style="vertical-align: inherit;">结果</font><font style="vertical-align: inherit;">插入</font><font style="vertical-align: inherit;">显示值中，</font><font style="vertical-align: inherit;">但内部值为</font><font style="vertical-align: inherit;">。
</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#csv-storage-engine" title="15.4 CSV存储引擎"><code class="literal">CSV</code></a><font style="vertical-align: inherit;"></font><code class="literal">2111</code><font style="vertical-align: inherit;"></font><code class="literal">11</code><font style="vertical-align: inherit;"></font><code class="literal">2011</code><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了避免这些问题，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关迁移策略的建议将在本节稍后介绍。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="limited-y2-support"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少/删除MySQL 5.7中的YEAR（2）支持</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.5之前，支持
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是减少的。</font><font style="vertical-align: inherit;">从MySQL 5.7.5开始，支持
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被删除。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 新表的列定义会产生警告或错误：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  在MySQL 5.7.5之前，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新表的列定义被转换（带有
                   </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_invalid_year_column_length"><code class="literal">ER_INVALID_YEAR_COLUMN_LENGTH</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  警告）到</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
                </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t1 (y YEAR(2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响，1个警告（0.04秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：警告</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1818</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：YEAR（2）列类型已被弃用。</font><font style="vertical-align: inherit;">改为创建YEAR（4）列。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW CREATE TABLE t1\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       表：t1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建表：CREATE TABLE`t1`（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `y`年（4）DEFAULT NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = InnoDB DEFAULT CHARSET = latin1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  从MySQL 5.7.5开始，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新表的列定义会产生
                   </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_invalid_year_column_length"><code class="literal">ER_INVALID_YEAR_COLUMN_LENGTH</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  错误：
                </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t1 (y YEAR(2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1818（HY000）：仅支持YEAR或YEAR（4）列。</font></font><font></font>
</pre></li></ul>
</div>
</li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现有表中的列保留为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  在MySQL 5.7.5之前，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像查询旧版本的MySQL一样在查询中处理。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  从MySQL 5.7.5开始，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询中的列会产生警告或错误。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              几个程序或语句</font><font style="vertical-align: inherit;">自动</font><font style="vertical-align: inherit;">转换
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 导致表重建的语句。
                </font></font></p></li><li class="listitem"><p>
                  <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE语法"><code class="literal">REPAIR TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#check-table" title="13.7.2.2 CHECK TABLE语法"><code class="literal">CHECK TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果发现表中包含</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">，
                   </font><font style="vertical-align: inherit;">建议您使用它
                   </font><font style="vertical-align: inherit;">）。
                </font></font></p></li><li class="listitem"><p>
                  <a class="link" href="/mysql-5.7-google-zh/programs.html#mysql-upgrade" title="4.4.7 mysql_upgrade  - 检查并升级MySQL表"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql_upgrade</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（使用
                  </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE语法"><code class="literal">REPAIR TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转储并重新加载转储文件。</font><font style="vertical-align: inherit;">与前三项执行的转换不同，转储和重新加载可能会更改值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              MySQL升级通常至少涉及最后两项中的一项。</font><font style="vertical-align: inherit;">然而，相对于
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql-upgrade" title="4.4.7 mysql_upgrade  - 检查并升级MySQL表"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql_upgrade</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是优选的。</font><font style="vertical-align: inherit;">你应该避免使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为如上所述，它可以改变值。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="migrating-from-y2-to-y4"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从YEAR（2）迁移到YEAR（4）</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要将</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">为
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您可以随时手动执行，而无需升级。</font><font style="vertical-align: inherit;">或者，您可以升级到MySQL版本，减少或移除
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（MySQL 5.6.6或更高版本）的支持，然后让MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          自动</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">在后一种情况下，请避免通过转储和重新加载数据进行升级，因为这可能会更改数据值。</font><font style="vertical-align: inherit;">另外，如果您使用复制，则必须考虑升级注意事项。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要</font><font style="vertical-align: inherit;">手动</font><font style="vertical-align: inherit;">转换</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE语法"><code class="literal">REPAIR TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">假设一张表</font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有这样的定义：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（ycol YEAR（2）NOT NULL DEFAULT'70'）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用</font></font><code class="literal">ALTER TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下方式</font><font style="vertical-align: inherit;">修改列</font><font style="vertical-align: inherit;">：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALTER TABLE t1 FORCE;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句转换表而不更改
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">如果服务器是复制主服务器，则</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER
          TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句将复制到从服务器，并使每个对应的表进行更改。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          另一种迁移方法是执行二进制升级：安装MySQL而不倾销并重新加载数据。</font><font style="vertical-align: inherit;">然后运行</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql-upgrade" title="4.4.7 mysql_upgrade  - 检查并升级MySQL表"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql_upgrade</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE语法"><code class="literal">REPAIR TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用来转换
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不更改数据值。</font><font style="vertical-align: inherit;">如果服务器是复制主服务器，则</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE语法"><code class="literal">REPAIR TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句会复制到从服务器并在每个</font><font style="vertical-align: inherit;">服务器上
           </font><font style="vertical-align: inherit;">进行相应的表更改，除非您</font><font style="vertical-align: inherit;">使用该
           </font><font style="vertical-align: inherit;">
          选项</font><font style="vertical-align: inherit;">调用
           </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql-upgrade" title="4.4.7 mysql_upgrade  - 检查并升级MySQL表"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql_upgrade</font></font></strong></span></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysql_upgrade_write-binlog"><code class="option">--skip-write-binlog</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          升级到复制服务器通常涉及将从服务器升级到较新版本的MySQL，然后升级主服务器。</font><font style="vertical-align: inherit;">例如，如果主站和从站都运行MySQL 5.5，则典型的升级过程涉及将从站升级到5.6，然后将主站升级到5.6。</font><font style="vertical-align: inherit;">关于对</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL 5.6.6 </font><font style="vertical-align: inherit;">的不同处理</font><font style="vertical-align: inherit;">，升级顺序会导致一个问题：假设从服务器已升级但尚未成为主服务器。</font><font style="vertical-align: inherit;">然后</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在主</font><font style="vertical-align: inherit;">表中创建一个包含一</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的表格将生成一个包含a
           </font><font style="vertical-align: inherit;">的表格
          </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从机上的列。</font><font style="vertical-align: inherit;">因此，如果您使用基于语句的复制，这些操作将在主服务器和从服务器上产生不同的结果：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              插入数字</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果值</font></font><code class="literal">2000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在主机上但</font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在从机</font><font style="vertical-align: inherit;">上</font><font style="vertical-align: inherit;">具有内部值</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              转换</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为字符串。</font><font style="vertical-align: inherit;">该操作使用</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主站但</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在从站</font><font style="vertical-align: inherit;">上
               </font><font style="vertical-align: inherit;">的显示值
               </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为避免出现此类问题，请</font><font style="vertical-align: inherit;">在升级之前</font><font style="vertical-align: inherit;">修改</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主服务器上的</font><font style="vertical-align: inherit;">所有
           </font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不引入任何，如先前所描述）。然后可以正常升级（从第一，然后主站）
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机和从机之间的差异。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          应该避免一种迁移方法：不要在</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump中</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转储数据，</font><font style="vertical-align: inherit;">并在升级后重新加载转储文件。</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，</font><font style="vertical-align: inherit;">这有可能改变
           </font><font style="vertical-align: inherit;">数值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从A迁移</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还应包括检查应用程序代码为如在这些条件下改变的行为的可能性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              希望选择一
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列来生成两位数的代码。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              不考虑不同的处理为数字的插入代码</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：插入
               </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致的内部值</font></font><code class="literal">2000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="timestamp-initialization"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.5 TIMESTAMP和DATETIME的自动初始化和更新</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528092614896"></a><p>
        <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列可以自动初始化并更新为当前日期和时间（即当前时间戳）。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font><font style="vertical-align: inherit;">表中的</font><font style="vertical-align: inherit;">任何</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，您可以将当前时间戳分配为默认值，自动更新值或两者：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个自动初始化的列被设置为插入行的当前时间戳，这些行没有为列指定值。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当行中任何其他列的值从其当前值更改时，自动更新列会自动更新为当前时间戳。</font><font style="vertical-align: inherit;">如果所有其他列都设置为其当前值，则自动更新的列保持不变。</font><font style="vertical-align: inherit;">为了防止在其他列更改时自动更新列，请将其显式设置为其当前值。</font><font style="vertical-align: inherit;">要更新自动更新的列（即使其他列未更改），请将其显式设置为其应具有的值（例如，将其设置为
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        另外，如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        禁用</font><font style="vertical-align: inherit;">了
         </font><font style="vertical-align: inherit;">系统变量，则可以</font><font style="vertical-align: inherit;">通过为当前日期和时间</font><font style="vertical-align: inherit;">初始化或更新任何
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（但不是
         </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）列的</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，除非已使用该</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">定义</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">以允许</font><font style="vertical-align: inherit;">值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要指定自动属性，请</font><font style="vertical-align: inherit;">在列定义中</font><font style="vertical-align: inherit;">使用</font></font><code class="literal">DEFAULT
        CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">ON UPDATE
        CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句。</font><font style="vertical-align: inherit;">条款的顺序无关紧要。</font><font style="vertical-align: inherit;">如果两者都出现在列定义中，则可以先发生。</font><font style="vertical-align: inherit;">任何同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的含义与
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用</font></font><code class="literal">DEFAULT CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">ON UPDATE CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定于
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该
         </font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句也可以用来指定一个常量（非自动）的默认值; </font><font style="vertical-align: inherit;">例如，
         </font></font><code class="literal">DEFAULT 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">DEFAULT '2000-01-01
        00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下示例使用</font></font><code class="literal">DEFAULT 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值，该值可能会产生警告或错误，具体取决于严格SQL模式还是
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_date"><code class="literal">NO_ZERO_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL模式已启用。</font><font style="vertical-align: inherit;">请注意，
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_traditional"><code class="literal">TRADITIONAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL模式包括严格模式和
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_date"><code class="literal">NO_ZERO_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p>
        <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列定义可以为默认值和自动更新值指定当前时间戳，一个而不是另一个，或者两者都不指定。</font><font style="vertical-align: inherit;">不同的列可以具有不同的自动属性组合。</font><font style="vertical-align: inherit;">以下规则描述了可能性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            既</font></font><code class="literal">DEFAULT CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">ON UPDATE CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，列有它的默认值使用当前的时间戳，并且自动更新为当前时间戳。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  dt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句但不带</font></font><code class="literal">ON
            UPDATE CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句，该列具有给定的默认值，并且不会自动更新为当前时间戳。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            默认取决于
             </font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句是指定
             </font></font><code class="literal">CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是一个常数值。</font><font style="vertical-align: inherit;">与</font></font><code class="literal">CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，默认是当前的时间戳。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  dt DATETIME DEFAULT CURRENT_TIMESTAMP</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个常量，默认值是给定的值。</font><font style="vertical-align: inherit;">在这种情况下，该列根本没有自动属性。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts TIMESTAMP DEFAULT 0，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  dt DATETIME DEFAULT 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用</font></font><code class="literal">ON UPDATE CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            子句和常量</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句，该列将自动更新为当前时间戳并具有给定的常量默认值。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts TIMESTAMP DEFAULT 0 ON UPDATE CURRENT_TIMESTAMP，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  dt DATETIME DEFAULT 0 ON UPDATE CURRENT_TIMESTAMP</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用</font></font><code class="literal">ON UPDATE CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            子句但不使用</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句时，该列将自动更新为当前时间戳，但没有当前时间戳作为其默认值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在这种情况下的默认值是依赖于类型的。
            </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非使用</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">定义，否则默认值为0 </font><font style="vertical-align: inherit;">，在这种情况下，默认值为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts1 TIMESTAMP ON UPDATE CURRENT_TIMESTAMP， - 默认为0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts2 TIMESTAMP NULL ON UPDATE CURRENT_TIMESTAMP  - 默认为NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非用</font></font><code class="literal">NOT
            NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">否则</font><font style="vertical-align: inherit;">默认值为0，在这种情况下默认值为0。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  dt1 DATETIME ON UPDATE CURRENT_TIMESTAMP， - 默认为NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  dt2 DATETIME NOT NULL ON UPDATE CURRENT_TIMESTAMP  - 默认为0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre></li></ul>
</div>
<p>
        <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非明确指定，否则列没有自动属性，但有以下例外情况：如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        禁用</font><font style="vertical-align: inherit;">了
         </font><font style="vertical-align: inherit;">系统变量，则</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一</font></font></em></span>
        <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列同时具有
         </font></font><code class="literal">DEFAULT CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><code class="literal">ON
        UPDATE CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果两者均未明确指定。</font><font style="vertical-align: inherit;">要抑制第一</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">自动属性
         </font><font style="vertical-align: inherit;">，请使用以下策略之一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量。</font><font style="vertical-align: inherit;">在这种情况下，</font><font style="vertical-align: inherit;">指定自动初始化和更新的子句</font></font><code class="literal">DEFAULT
            CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">ON UPDATE
            CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句是可用的，但</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            除非明确包含在列定义中，否则</font><font style="vertical-align: inherit;">不会指定给任何</font><font style="vertical-align: inherit;">列。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            或者，如果
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            禁用，请执行以下任一操作：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                使用</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                指定常量默认值</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">定义列</font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                指定</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性。</font><font style="vertical-align: inherit;">这也会导致列允许</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                值，这意味着您无法通过将列设置为来指定当前时间戳
                 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">分配
                 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将列设置为
                 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是当前时间戳。</font><font style="vertical-align: inherit;">要分配当前时间戳，请将列设置为
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或同义词，如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        考虑这些表定义：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts1 TIMESTAMP DEFAULT 0，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts2 TIMESTAMP DEFAULT CURRENT_TIMESTAMP</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ON UPDATE CURRENT_TIMESTAMP）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE TABLE t2（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts1 TIMESTAMP NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts2 TIMESTAMP DEFAULT CURRENT_TIMESTAMP</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ON UPDATE CURRENT_TIMESTAMP）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE TABLE t3（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts1 TIMESTAMP NULL DEFAULT 0，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts2 TIMESTAMP DEFAULT CURRENT_TIMESTAMP</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ON UPDATE CURRENT_TIMESTAMP）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些表具有以下属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在每个表定义中，第一
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列没有自动初始化或更新。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些表在</font></font><code class="literal">ts1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列处理</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值方面</font><font style="vertical-align: inherit;">有所不同</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于
             </font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ts1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
             </font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与分配给它的值，
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将它设置为当前的时间戳。</font><font style="vertical-align: inherit;">对于</font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">ts1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许可</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和分配给它的值</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置它
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在默认值上有所不同</font></font><code class="literal">ts1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因为
             </font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ts1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被定义为允许</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所以默认也是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有明确的
             </font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款。</font><font style="vertical-align: inherit;">对于
             </font></font><code class="literal">t3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ts1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许可
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但明确默认为0。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列定义包含明确的分数秒精度值的任何地方，相同的值必须在整个列定义中使用。</font><font style="vertical-align: inherit;">这是允许的：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts TIMESTAMP（6）DEFAULT CURRENT_TIMESTAMP（6）ON UPDATE CURRENT_TIMESTAMP（6）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这是不允许的：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts TIMESTAMP（6）DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP（3）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre>
<h4><a name="idm140528092491888"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TIMESTAMP初始化和NULL属性</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        系统变量被禁用，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下</font><font style="vertical-align: inherit;">，
         </font><font style="vertical-align: inherit;">列
         </font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能包含
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，并且分配
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会分配当前时间戳。</font><font style="vertical-align: inherit;">要允许</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列包含
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用该</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">显式声明它
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非用</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定不同默认值</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">覆盖</font><font style="vertical-align: inherit;">默认值。</font></font><code class="literal">DEFAULT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于明确指定</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为默认值。</font><font style="vertical-align: inherit;">（对于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        未用</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性
         </font><font style="vertical-align: inherit;">声明</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font></font><code class="literal">DEFAULT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是无效的。）如果
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列允许
        </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，分配
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其设置为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是当前时间戳。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        下表包含</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">几
         </font><font style="vertical-align: inherit;">列
         </font><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts1 TIMESTAMP NULL DEFAULT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts2 TIMESTAMP NULL DEFAULT 0，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ts3 TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        除下列条件之一外</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，允许</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">
        的</font><font style="vertical-align: inherit;">列
         </font><font style="vertical-align: inherit;">在插入时</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">占用当前时间戳：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            它的默认值被定义为，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且没有为列指定值
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或其任何同义词，例如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明确插入到列中
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        换句话说，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        定义为允许</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">只有在其定义包括时才会自动初始化
         </font></font><code class="literal">DEFAULT CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t（ts TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列允许
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值但其定义不包含</font></font><code class="literal">DEFAULT CURRENT_TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则必须显式插入与当前日期和时间相对应的值。</font><font style="vertical-align: inherit;">假设表</font></font><code class="literal">t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">t2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有这些定义：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（ts TIMESTAMP NULL DEFAULT'0000-00-00 00:00:00'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE TABLE t2（ts TIMESTAMP NULL DEFAULT NULL）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在插入时将任一表中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">设置为</font><font style="vertical-align: inherit;">当前时间戳，请明确指定该值。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INSERT INTO t2 VALUES（CURRENT_TIMESTAMP）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO t1 VALUES（NOW（））;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        启用</font><font style="vertical-align: inherit;">了
         </font><font style="vertical-align: inherit;">系统变量，则</font><font style="vertical-align: inherit;">只有在使用该</font><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">声明时</font><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列才允许
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">而且，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不允许分配</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分配当前时间戳，无论是用</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
         </font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">声明</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要分配当前时间戳，请将列设置为
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或同义词，如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fractional-seconds"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.6小数秒的时间值</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL的5.7具有用于小数秒支持
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，高达微秒（6位）精度：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要定义包含分数秒部分的列，使用语法
             </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">是
             </font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">，或
             </font><font style="vertical-align: inherit;">，并且
             </font><font style="vertical-align: inherit;">是分数秒精度。</font><font style="vertical-align: inherit;">例如：
          </font></font><code class="literal"><em class="replaceable"><code>type_name</code></em>(<em class="replaceable"><code>fsp</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>type_name</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（t TIME（3），dt DATETIME（6））;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            的</font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，如果给定的，必须在1到6的值为0表示没有小数部分范围为0。</font><font style="vertical-align: inherit;">如果省略，则默认精度为0.（这与标准SQL缺省值6不同，以便与以前的MySQL版本兼容。）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            插入</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有小数部分秒值到相同类型的一列，但具有更少的舍入小数位的结果，如本例所示：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE fractest( c1 TIME(2), c2 DATETIME(2), c3 TIMESTAMP(2) );</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.33秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql </font></font><strong class="userinput"><code>INSERT INTO fractest VALUES</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;</font></font><strong class="userinput"><code>('17:51:04.777', '2014-09-08 17:51:04.777', '2014-09-08 17:51:04.777');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.03秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM fractest;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ------------------------ + ---------- -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c1 | </font><font style="vertical-align: inherit;">c2 | </font><font style="vertical-align: inherit;">c3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ------------------------ + ---------- -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">17：51：04.78 | </font><font style="vertical-align: inherit;">2014-09-08 17:51：04.78 | </font><font style="vertical-align: inherit;">2014-09-08 17:51：04.78 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ------------------------ + ---------- -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            发生舍入时不会发出警告或错误。</font><font style="vertical-align: inherit;">此行为遵循SQL标准，并且不受服务器</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            设置的影响。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            带时态参数的函数接受小数秒的值。</font><font style="vertical-align: inherit;">时间函数的返回值包括适当的小数秒。</font><font style="vertical-align: inherit;">例如，如果
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有参数，则返回当前日期和时间，但不包含小数部分，但采用从0到6的可选参数来指定返回值包含该许多数字的小数部分。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语法用于时间文字产生的时间值：
             </font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">，和</font><font style="vertical-align: inherit;">，和ODBC语法等同物。</font><font style="vertical-align: inherit;">如果指定，结果值包含尾随小数秒部分。</font><font style="vertical-align: inherit;">以前，时态类型关键字被忽略，这些结构产生字符串值。</font><font style="vertical-align: inherit;">请参阅
             </font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#date-and-time-standard-sql-literals" title="标准SQL和ODBC日期和时间文字"><font style="vertical-align: inherit;">标准SQL和ODBC日期和时间文字</font></a></font><code class="literal">DATE '<em class="replaceable"><code>str</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">TIME '<em class="replaceable"><code>str</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">TIMESTAMP
            '<em class="replaceable"><code>str</code></em>'</code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#date-and-time-standard-sql-literals" title="标准SQL和ODBC日期和时间文字"><font style="vertical-align: inherit;"></font></a>
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="date-and-time-type-conversion"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.7日期和时间类型之间的转换</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在某种程度上，您可以将值从一种时间类型转换为另一种时间类型。</font><font style="vertical-align: inherit;">但是，价值或信息的损失可能会有所改变。</font><font style="vertical-align: inherit;">在所有情况下，时态类型之间的转换都取决于结果类型的有效值范围。</font><font style="vertical-align: inherit;">例如，虽然
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都可以使用同一组的格式指定，其种类并不都具有相同的值的范围。
        </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值不能早于</font></font><code class="literal">1970</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC或晚于
         </font></font><code class="literal">'2038-01-19 03:14:07'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC。</font><font style="vertical-align: inherit;">这意味着某个日期（例如</font></font><code class="literal">'1968-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，作为一个
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">有效）作为一个</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">无效
         </font><font style="vertical-align: inherit;">并被转换为</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">
        转换</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            转换为a </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值会添加时间部分，</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为该
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值不包含时间信息。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            转换为一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是没有用的; </font><font style="vertical-align: inherit;">结果是</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">
        转换</font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            转换为一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值需要考虑小数秒，并舍入时间部分。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">'1999-12-31
            23:59:59.499'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变成
             </font></font><code class="literal">'1999-12-31'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而
             </font></font><code class="literal">'1999-12-31 23:59:59.500'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变成
             </font></font><code class="literal">'2000-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            转换为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值会丢弃日期部分，因为该
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型不包含日期信息。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了将</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">为其他时间类型，将该值
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于日期部分。</font><font style="vertical-align: inherit;">这</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被解释为经过的时间（不是一天中的时间）并添加到日期。</font><font style="vertical-align: inherit;">这意味着如果时间值超出</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font><font style="vertical-align: inherit;">的范围，则结果的日期部分与当前日期不同
         </font></font><code class="literal">'23:59:59'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设当前日期是
         </font></font><code class="literal">'2012-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值
         </font></font><code class="literal">'12:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'24:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><code class="literal">'-12:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，当转换成
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，导致
         </font></font><code class="literal">'2012-01-01 12:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'2012-01-02
        00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">'2011-12-31
        12:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的转换</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：是类似的，但丢弃时间部分从结果</font></font><code class="literal">'2012-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">'2012-01-02'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
         </font></font><code class="literal">'2011-12-31'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        显式转换可用于覆盖隐式转换。</font><font style="vertical-align: inherit;">例如，通过比较
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，该
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过添加时间部分</font><font style="vertical-align: inherit;">强制为该
         </font><font style="vertical-align: inherit;">类型</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要通过忽略该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的时间部分来执行比较，请按
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下方式</font><font style="vertical-align: inherit;">使用该
         </font><font style="vertical-align: inherit;">函数：
      </font></font></p><pre class="programlisting"><em class="replaceable"><code>date_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= CAST（</font></font><em class="replaceable"><code>datetime_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS DATE）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        将</font><font style="vertical-align: inherit;">值</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">为数值形式（例如，通过添加</font></font><code class="literal">+0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）取决于值是否包含小数秒部分。
        </font><font style="vertical-align: inherit;">
        或者
         </font><font style="vertical-align: inherit;">
        当</font><font style="vertical-align: inherit;">为0（或省略）</font><font style="vertical-align: inherit;">时转换为整数，当</font><font style="vertical-align: inherit;">大于0 </font><font style="vertical-align: inherit;">时转换</font><font style="vertical-align: inherit;">为</font><font style="vertical-align: inherit;">具有</font><font style="vertical-align: inherit;">小数位
         </font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值
         </font><font style="vertical-align: inherit;">：
      </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME(<em class="replaceable"><code>N</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME(<em class="replaceable"><code>N</code></em>)</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CURTIME(), CURTIME()+0, CURTIME(3)+0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ------------- + -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CURTIME（）| </font><font style="vertical-align: inherit;">CURTIME（）+ 0 | </font><font style="vertical-align: inherit;">CURTIME（3）+0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ------------- + -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">09:28:00 | </font><font style="vertical-align: inherit;">92800 | </font><font style="vertical-align: inherit;">92800.887 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- ------------- + -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOW(), NOW()+0, NOW(3)+0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------------- + ---------- ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NOW（）| </font><font style="vertical-align: inherit;">NOW（）+ 0 | </font><font style="vertical-align: inherit;">NOW（3）+0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------------- + ---------- ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2012-08-15 09:28:00 | </font><font style="vertical-align: inherit;">20120815092800 | </font><font style="vertical-align: inherit;">20120815092800.889 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------------- + ---------- ---------- +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="two-digit-years"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.3.8两位数日期</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        两位数年份的日期值是不明确的，因为这个世纪是未知的。</font><font style="vertical-align: inherit;">这些值必须解释为四位数形式，因为MySQL在内部使用四位数字存储多年。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，MySQL使用以下规则来解释使用不明确年份值指定的日期：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            范围内的年份值</font></font><code class="literal">00-69</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将转换为</font></font><code class="literal">2000-2069</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            范围内的年份值</font></font><code class="literal">70-99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将转换为</font></font><code class="literal">1970-1999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        因为</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，规则是相同的，但有以下例外：</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入到
         </font></font><code class="literal">YEAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果中的</font><font style="vertical-align: inherit;">数字</font></font><code class="literal">0000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        而不是</font></font><code class="literal">2000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要指定零
         </font></font><code class="literal">YEAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将其解释为
         </font></font><code class="literal">2000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请将其指定为字符串
         </font></font><code class="literal">'0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">'00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        请记住，这些规则只是启发式规则，可以提供关于数据值的含义的合理猜测。</font><font style="vertical-align: inherit;">如果MySQL使用的规则不生成您需要的值，则必须提供包含四位数年份值的明确输入。
      </font></font></p><p>
        <code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正确分类
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有两位数年份的值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一些功能喜欢</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成一个数字。</font><font style="vertical-align: inherit;">这意味着具有两位数年份的值无法正确使用这些函数。</font><font style="vertical-align: inherit;">在这种情况下的修正是将其转换为
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">四位数年份格式。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="string-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4字符串类型</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#char"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.1 CHAR和VARCHAR类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#binary-varbinary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.2 BINARY和VARBINARY类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#blob"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.3 BLOB和TEXT类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#enum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.4 ENUM类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#set"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.5 SET类型</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528092300592"></a><a class="indexterm" name="idm140528092299104"></a><a class="indexterm" name="idm140528092298032"></a><a class="indexterm" name="idm140528092296960"></a><a class="indexterm" name="idm140528092295888"></a><a class="indexterm" name="idm140528092294400"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串类型</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本节介绍这些类型如何工作以及如何在查询中使用它们。</font><font style="vertical-align: inherit;">有关字符串类型存储要求，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="char"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.1 CHAR和VARCHAR类型</font></font></h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140528092280736"></a><a class="indexterm" name="idm140528092279280"></a><a class="indexterm" name="idm140528092277792"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型相似，但它们被存储和检索的方式不同。</font><font style="vertical-align: inherit;">它们的最大长度和尾部空格是否保留也不同。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型的声明，其长度指示要存储的最大字符数。</font><font style="vertical-align: inherit;">例如，
         </font></font><code class="literal">CHAR(30)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最多可容纳30个字符。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一个长度</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列被固定在创建表声明的长度。</font><font style="vertical-align: inherit;">长度可以是0到255之间的任何值。</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        存储值时，它们将空格填充到指定的长度。</font><font style="vertical-align: inherit;">当</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索</font><font style="vertical-align: inherit;">到</font><font style="vertical-align: inherit;">值时，除非</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_pad_char_to_full_length"><code class="literal">PAD_CHAR_TO_FULL_LENGTH</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">SQL模式，</font><font style="vertical-align: inherit;">否则将删除尾随空格
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中的</font><font style="vertical-align: inherit;">
        值</font><font style="vertical-align: inherit;">是可变长度的字符串。</font><font style="vertical-align: inherit;">长度可以指定为0到65,535之间的值。</font><font style="vertical-align: inherit;">a的有效最大长度
         </font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于最大行大小（65,535字节，在所有列中共享）和使用的字符集。</font><font style="vertical-align: inherit;">参见</font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#column-count-limit" title="C.10.4表列数和行大小的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.10.4节“表列数量和行数限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        与之相反</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值存储为1字节或2字节长度前缀加数据。</font><font style="vertical-align: inherit;">长度前缀表示该值中的字节数。</font><font style="vertical-align: inherit;">如果值不超过255个字节，则列使用一个长度字节，如果值可能需要超过255个字节，则使用两个长度字节。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果严格SQL模式未启用，并且您为某</font><font style="vertical-align: inherit;">列</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或某</font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">分配的值
         </font><font style="vertical-align: inherit;">超出列的最大长度，则该值将被截断以生成警告。</font><font style="vertical-align: inherit;">要截断非空格字符，可以导致发生错误（而不是警告），并通过使用严格SQL模式来禁止插入值。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，超过列长度的尾随空格在插入之前会被截断并生成警告，无论使用的是何种SQL模式。</font><font style="vertical-align: inherit;">对于
         </font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，无论SQL模式如何，都会以无提示方式从插入的值中截断多余的尾随空格。
      </font></font></p><p>
        <code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储时值不会被填充。</font><font style="vertical-align: inherit;">根据标准SQL存储和检索值时将保留尾随空格。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        下表说明之间的差别
         </font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过显示存储各种字符串值到的结果
         </font></font><code class="literal">CHAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARCHAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列（假设该列使用单字节字符集，例如</font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
</font></font></p>
<div class="informaltable">
<table summary="Illustration of the difference between CHAR and VARCHAR storage requirements by showing the required storage for various string values in CHAR(4) and VARCHAR(4) columns."><colgroup><col width="15%"><col width="15%"><col width="20%"><col width="15%"><col width="20%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
            <th scope="col"><code class="literal">CHAR(4)</code></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要存储</font></font></th>
            <th scope="col"><code class="literal">VARCHAR(4)</code></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要存储</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">''</code></td>
            <td><code class="literal">'&nbsp;&nbsp;&nbsp;&nbsp;'</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
            <td><code class="literal">''</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个字节</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">'ab'</code></td>
            <td><code class="literal">'ab&nbsp;&nbsp;'</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
            <td><code class="literal">'ab'</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个字节</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">'abcd'</code></td>
            <td><code class="literal">'abcd'</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
            <td><code class="literal">'abcd'</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5个字节</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">'abcdefgh'</code></td>
            <td><code class="literal">'abcd'</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
            <td><code class="literal">'abcd'</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5个字节</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        显示为存储在表格最后一行的值</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用
         </font><span class="emphasis"><em><font style="vertical-align: inherit;">于不使用严格模式的情况</font></em></span><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">如果MySQL在严格模式下运行，超出列长度的值将</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会被存储</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并会导致错误。
      </font></font></p><p>
        <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将长度大于或等于768字节的固定长度字段编码为可变长度字段，可将其存储在页外。</font><font style="vertical-align: inherit;">例如，
         </font></font><code class="literal">CHAR(255)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果字符集的最大字节长度大于3，则列可能会超过768个字节</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果将给定值存储到</font></font><code class="literal">CHAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        和</font></font><code class="literal">VARCHAR(4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中，则从列中检索的值不总是相同，因为</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在检索时</font><font style="vertical-align: inherit;">从</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中删除了尾随空格</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例说明了这种差异：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE vc (v VARCHAR(4), c CHAR(4));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO vc VALUES ('ab  ', 'ab  ');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT('(', v, ')'), CONCAT('(', c, ')') FROM vc;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CONCAT（'（'，v''）'）| </font><font style="vertical-align: inherit;">CONCAT（'（'，c，'）'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">（ab）| </font><font style="vertical-align: inherit;">（ab）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.06秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        根据分配给列的字符集归类对列</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中的</font><font style="vertical-align: inherit;">
        值</font><font style="vertical-align: inherit;">进行排序和比较。
      </font></font></p><a class="indexterm" name="idm140528092201488"></a><a class="indexterm" name="idm140528092200000"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        所有MySQL归类都是PAD SPACE类型。</font><font style="vertical-align: inherit;">这意味着所有
         </font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值都会进行比较，而不考虑任何尾随空格。</font><font style="vertical-align: inherit;">在此上下文中的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比较</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不包括</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        模式匹配运算符，其尾部空格是重要的。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE names (myname CHAR(10));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.03秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO names VALUES ('Monty');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT myname = 'Monty', myname = 'Monty  ' FROM names;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">myname ='Monty'| </font><font style="vertical-align: inherit;">myname ='Monty'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT myname LIKE 'Monty', myname LIKE 'Monty  ' FROM names;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">myname LIKE'Monty'| </font><font style="vertical-align: inherit;">myname LIKE'Monty'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于所有MySQL版本都是如此，并且不受服务器SQL模式的影响。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关MySQL字符集和归类的更多信息，请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html" title="第10章字符集，排序规则，Unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10章，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集，归类，Unicode</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关存储要求的更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于尾随填充字符被去除或比较忽略它们的情况，如果列的索引需要唯一值，则插入到仅与尾部填充字符数不同的列值中将导致重复键错误。</font><font style="vertical-align: inherit;">例如，如果一个表包含
         </font></font><code class="literal">'a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，尝试存储
         </font></font><code class="literal">'a&nbsp;'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致重复键错误。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="binary-varbinary"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.2 BINARY和VARBINARY类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528092183632"></a><a class="indexterm" name="idm140528092182592"></a><a class="indexterm" name="idm140528092181520"></a><a class="indexterm" name="idm140528092180032"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        类型相似，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不同的是它们包含二进制字符串，而非非二进制字符串。</font><font style="vertical-align: inherit;">也就是说，它们包含字节串而不是字符串。</font><font style="vertical-align: inherit;">这意味着它们具有</font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集和归类，并且比较和排序基于值中字节的数值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        所允许的最大长度是相同的
         </font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code class="literal">VARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它是为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，除了长度</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以字节为单位而不是字符的长度。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">VARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        数据类型是从不同</font></font><code class="literal">CHAR BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        和</font></font><code class="literal">VARCHAR BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型。</font><font style="vertical-align: inherit;">对于后者类型，该</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性不会将该列视为二进制字符串列。</font><font style="vertical-align: inherit;">相反，它会导致使用</font></font><code class="literal">_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列字符集</font><font style="vertical-align: inherit;">的binary（</font><font style="vertical-align: inherit;">）归类，而列本身包含非二进制字符串而不是二进制字节串。</font><font style="vertical-align: inherit;">例如，</font><font style="vertical-align: inherit;">假设默认字符集为
         </font><font style="vertical-align: inherit;">，</font></font><code class="literal">CHAR(5) BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则视为
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这不同于
         </font><font style="vertical-align: inherit;">存储5字节的二进制字符串</font></font><code class="literal">CHAR(5) CHARACTER SET latin1 COLLATE
        latin1_bin</code><font style="vertical-align: inherit;"></font><code class="literal">latin1</code><font style="vertical-align: inherit;"></font><code class="literal">BINARY(5)</code><font style="vertical-align: inherit;"></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集和整理。</font><font style="vertical-align: inherit;">有关二进制字符串与非二进制字符串的二进制归类之间差异的信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-binary-collations" title="10.8.5二进制归类与_bin归类比较"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.8.5节“二进制归类与_bin归类比较”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果严格SQL模式未启用，并且您为某</font><font style="vertical-align: inherit;">列</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或某</font></font><code class="literal">VARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">分配的值
         </font><font style="vertical-align: inherit;">超出列的最大长度，则该值将被截断以生成警告。</font><font style="vertical-align: inherit;">对于截断的情况，可以导致发生错误（而不是警告），并通过使用严格SQL模式来禁止插入值。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储值时，它们将填充值填充到指定的长度。</font><font style="vertical-align: inherit;">填充值是</font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（零字节）。</font><font style="vertical-align: inherit;">值</font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在插入时</font><font style="vertical-align: inherit;">被右填充</font><font style="vertical-align: inherit;">，并且在选择时不会删除尾部字节。</font><font style="vertical-align: inherit;">所有字节在比较中都很重要，包括</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作。</font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字节和空格在比较中有所不同，用
         </font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;空格。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如：对于一</font></font><code class="literal">BINARY(3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，
         </font><font style="vertical-align: inherit;">插入时</font></font><code class="literal">'a&nbsp;'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变成
         </font></font><code class="literal">'a&nbsp;\0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font><font style="vertical-align: inherit;">在插入时</font></font><code class="literal">'a\0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变成</font></font><code class="literal">'a\0\0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">选中时，两个插入的值都保持不变。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        因为</font></font><code class="literal">VARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在插入时没有填充，并且在select时没有字节被去除。</font><font style="vertical-align: inherit;">所有字节在比较中都很重要，包括</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作。</font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字节和空格在比较中有所不同，用
         </font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;空格。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于尾部填充字节被剥离或比较忽略它们的情况，如果列的索引需要唯一值，则插入列值仅在尾部填充字节数上不同的值将导致重复键错误。</font><font style="vertical-align: inherit;">例如，如果一个表包含</font></font><code class="literal">'a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，尝试存储</font></font><code class="literal">'a\0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致重复键错误。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您打算使用</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型来存储二进制数据，并且您要求检索到的值与存储的值完全相同，那么</font><font style="vertical-align: inherit;">您应该仔细考虑前面的填充和剥离特征
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例说明了</font><font style="vertical-align: inherit;">
        值的</font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">填充</font><font style="vertical-align: inherit;">如何
         </font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影响列值比较：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (c BINARY(3));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t SET c = 'a';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(c), c = 'a', c = 'a\0\0' from t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + --------- + ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（c）| </font><font style="vertical-align: inherit;">c ='a'| </font><font style="vertical-align: inherit;">c ='a \ 0 \ 0'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + --------- + ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">610000 | </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + --------- + ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.09秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果检索到的值必须与为不带填充的存储指定的值相同，则最好使用
         </font></font><code class="literal">VARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或其中一种
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="blob"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.3 BLOB和TEXT类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528092127360"></a><a class="indexterm" name="idm140528092126288"></a><a class="indexterm" name="idm140528092125216"></a><a class="indexterm" name="idm140528092123728"></a><a class="indexterm" name="idm140528092122240"></a><a class="indexterm" name="idm140528092121168"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        A </font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个二进制大对象，可以容纳可变数量的数据。</font><font style="vertical-align: inherit;">这四个</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        类型</font></font><code class="literal">TINYBLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">MEDIUMBLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">LONGBLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些不同仅在于它们可以容纳的值的最大长度。</font><font style="vertical-align: inherit;">这四个</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型
         </font></font><code class="literal">TINYTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">MEDIUMTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">LONGTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些对应于四种</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，并具有相同的最大长度和存储要求。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p>
        <code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被视为二进制字符串（字节字符串）。</font><font style="vertical-align: inherit;">它们具有</font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字符集和归类，并且比较和排序基于列值中字节的数值。
        </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被视为非二进制字符串（字符串）。</font><font style="vertical-align: inherit;">它们具有除字符集以外的字符集
         </font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且根据字符集的排序规则对值进行排序和比较。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果严格SQL模式未启用，并且您为某</font><font style="vertical-align: inherit;">列</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或某</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">分配的值
         </font><font style="vertical-align: inherit;">超出列的最大长度，则该值将被截断以生成警告。</font><font style="vertical-align: inherit;">要截断非空格字符，可以导致发生错误（而不是警告），并通过使用严格SQL模式来禁止插入值。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论SQL模式如何，</font><font style="vertical-align: inherit;">
        从要插入</font><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">值中截断多余的尾随空格</font><font style="vertical-align: inherit;">都会生成警告。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，插入时没有填充，并且在select时没有字节被删除。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列被索引，则索引条目比较在末尾被空格填充。</font><font style="vertical-align: inherit;">这意味着，如果索引需要唯一值，那么对于仅在尾部空格数量方面不同的值将出现重复键错误。</font><font style="vertical-align: inherit;">例如，如果一个表包含</font></font><code class="literal">'a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，尝试存储</font></font><code class="literal">'a&nbsp;'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致重复键错误。</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">不适用
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在大多数方面，您可以将</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列视为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以尽可能大</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">同样，您可以将
         </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列视为一
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。
        </font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同于
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下方面：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于on </font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">columns </font><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">，您必须指定一个索引前缀长度。</font><font style="vertical-align: inherit;">对于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，前缀长度是可选的。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#column-indexes" title="8.3.4列索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.3.4节“列索引”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528092080864"></a>

            <a class="indexterm" name="idm140528092079376"></a>

            <a class="indexterm" name="idm140528092077888"></a>

            <code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列不能有</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果将该</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性用于
         </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型，则该列将被分配</font></font><code class="literal">_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列字符集</font><font style="vertical-align: inherit;">的二进制（</font><font style="vertical-align: inherit;">）排序规则。
      </font></font></p><p>
        <code class="literal">LONG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">LONG VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射到</font></font><code class="literal">MEDIUMTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型。</font><font style="vertical-align: inherit;">这是一个兼容性功能。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL连接器/ ODBC将</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">为
         </font></font><code class="literal">LONGVARBINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值</font><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">为</font></font><code class="literal">LONGVARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        由于</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值可能会非常长，你可能会遇到在使用它们的一些制约因素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">排序时仅使用列</font><font style="vertical-align: inherit;">
            的第一个
             </font><font style="vertical-align: inherit;">字节。</font><font style="vertical-align: inherit;">缺省值为
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1024.通过增加</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器启动或运行时</font><font style="vertical-align: inherit;">的值，可以在排序或分组中增加更多字节
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">任何客户端都可以更改其会话</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            变量</font><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET max_sort_length = 2000;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT id, comment FROM t</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>ORDER BY comment;</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用临时表处理的查询结果中的</font><font style="vertical-align: inherit;">
            实例</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列导致服务器在磁盘上而不是在内存中使用表，因为
             </font></font><code class="literal">MEMORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎不支持这些数据类型（请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#internal-temporary-tables" title="8.4.4在MySQL中使用内部临时表"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.4.4节“内部临时在MySQL中使用表“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">使用磁盘会导致性能损失，因此</font><font style="vertical-align: inherit;">只有在确实需要时才在查询结果中</font><font style="vertical-align: inherit;">包含
             </font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">例如，避免使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT *</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它会选择所有列。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            a </font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">object </font><font style="vertical-align: inherit;">的最大大小</font><font style="vertical-align: inherit;">由其类型决定，但实际可在客户端和服务器之间传输的最大值由可用内存量和通信缓冲区大小决定。</font><font style="vertical-align: inherit;">您可以通过更改</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            变量</font><font style="vertical-align: inherit;">的值来更改消息缓冲区大小
             </font><font style="vertical-align: inherit;">，但是您必须对服务器和客户端程序都这样做。</font><font style="vertical-align: inherit;">例如，</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
            和</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump都</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以让你改变客户端的
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-configuration" title="5.1.1配置服务器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.1节“配置服务器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.5.1节“</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  MySQL命令行工具“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.5.4节”</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mysqldump</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 数据库备份程序“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可能还想要将存储的数据对象的数据包大小和大小与存储要求进行比较，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></font></a>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        每个</font><font style="vertical-align: inherit;">值</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值由一个单独分配的对象内部表示。</font><font style="vertical-align: inherit;">这与所有其他数据类型形成对比，在打开表格时，每个列会为其分配一次存储空间。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在某些情况下，可能需要将二进制数据（如媒体文件）</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">TEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中存储。</font><font style="vertical-align: inherit;">您可能会发现MySQL的字符串处理函数对于处理这些数据很有用。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#string-functions" title="12.5字符串函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.5节“字符串函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">出于安全性和其他原因，通常最好使用应用程序代码而不是给予应用程序用户
         </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_file"><code class="literal">FILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权。</font><font style="vertical-align: inherit;">您可以在MySQL论坛（</font></font><a class="ulink" href="http://forums.mysql.com/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://forums.mysql.com/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中</font><font style="vertical-align: inherit;">讨论各种语言和平台的具体情况</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="enum"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.4 ENUM类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528092028656"></a><a class="indexterm" name="idm140528092027584"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        An </font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个字符串对象，其值从列创建时在列规范中明确枚举的允许值列表中选择。</font><font style="vertical-align: inherit;">它具有以下优点：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            紧凑型数据存储在列中有可能值有限的情况下。</font><font style="vertical-align: inherit;">您指定为输入值的字符串会自动编码为数字。</font><font style="vertical-align: inherit;">参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.8节，“列类型存储需求”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为存储需求</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            可读的查询和输出。</font><font style="vertical-align: inherit;">这些数字将被转换回查询结果中的相应字符串。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        并考虑这些潜在问题：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果使枚举值看起来像数字，则很容易将文字值与其内部索引编号混淆，如</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-limits" title="枚举限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举限制中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code class="literal">ORDER
            BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">
            使用</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">需要特别小心，如
             </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-sorting" title="枚举排序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举排序中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-using" title="创建和使用ENUM列"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建和使用ENUM列</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-indexes" title="枚举文字的索引值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举文字的索引值</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-literals" title="枚举文字的处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举文字的处理</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-nulls" title="空或NULL枚举值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空或NULL枚举值</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-sorting" title="枚举排序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举排序</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-limits" title="枚举限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举限制</font></font></a></p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="enum-using"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建和使用ENUM列</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          枚举值必须是带引号的字符串。</font><font style="vertical-align: inherit;">例如，您可以创建一个</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像这样</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的表
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE衬衫（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    名称VARCHAR（40），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    尺寸ENUM（'x-small'，'small'，'medium'，'large'，'x-large'）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入衬衫（名字，大小）VALUES（'礼服衬衫'，'大'），（'t恤'，'中等'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  （'polo衫'，'小'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择名称，大小从衬衫WHERE大小='中等';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">大小|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">T恤| </font><font style="vertical-align: inherit;">中等|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更新衬衫SET size ='small'WHERE size ='large';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
承诺;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"></font><code class="literal">'medium'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您将实际字符串存储</font></font><code class="literal">'medium'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在
           </font></font><code class="literal">VARCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">
          ，</font><font style="vertical-align: inherit;">则将</font><font style="vertical-align: inherit;">值为100万行的值插入此表中
           </font><font style="vertical-align: inherit;">需要100万字节的存储空间，而不是600万字节</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="enum-indexes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举文字的索引值</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个枚举值都有一个索引：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              列说明中列出的元素分配索引编号，从1开始。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              空字符串错误值的索引值为0.这意味着您可以使用以下
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句查找</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分配了</font><font style="vertical-align: inherit;">无效</font><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">行</font><font style="vertical-align: inherit;">：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>enum_col</code></em>=0;</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的索引</font><font style="vertical-align: inherit;">是
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这里术语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是指枚举值列表内的一个位置。</font><font style="vertical-align: inherit;">它与表索引无关。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如，指定的列</font></font><code class="literal">ENUM('Mercury',
          'Venus', 'Earth')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以具有此处显示的任何值。</font><font style="vertical-align: inherit;">还显示了每个值的索引。
</font></font></p>
<div class="informaltable">
<table summary="Possible values for a column specified as ENUM(&#39;Mercury&#39;, &#39;Venus&#39;, &#39;Earth&#39;). The table also shows the index of each value."><colgroup><col width="15%"><col width="15%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指数</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">NULL</code></td>
              <td><code class="literal">NULL</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">''</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">'Mercury'</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">'Venus'</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">'Earth'</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列最多可以有65,535个不同的元素。</font><font style="vertical-align: inherit;">（实际限制小于3000.）一个表在其</font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中可以有不多于255个独特元素列表定义，
           </font><font style="vertical-align: inherit;">被视为一个组。</font><font style="vertical-align: inherit;">有关这些限制的更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#limits-frm-file" title="C.10.5由.frm文件结构提供的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.10.5节“由.frm文件结构实施的限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在数字上下文中</font><font style="vertical-align: inherit;">检索</font><font style="vertical-align: inherit;">值，则返回列值的索引。</font><font style="vertical-align: inherit;">例如，您可以</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像这样</font><font style="vertical-align: inherit;">从</font><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">检索数值
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT <em class="replaceable"><code>enum_col</code></em>+0 FROM <em class="replaceable"><code>tbl_name</code></em>;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          诸如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期望数字参数的函数在必要时将参数转换为数字。</font><font style="vertical-align: inherit;">对于
           </font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，索引号用于计算。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="enum-literals"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举文字的处理</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091955232"></a><p><font style="vertical-align: inherit;"></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建表格时，</font><font style="vertical-align: inherit;">
          会自动从</font><font style="vertical-align: inherit;">表格定义中的成员值中</font><font style="vertical-align: inherit;">删除尾部空格
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检索后，存储在</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列中的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">将使用列定义中使用的lettercase显示。</font><font style="vertical-align: inherit;">请注意，</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以为列分配字符集和归类。</font><font style="vertical-align: inherit;">对于二进制或区分大小写的排序规则，在为列分配值时会考虑到lettercase。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果将数字存储到</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中，则该数字将被视为可能值中的索引，并且存储的值是具有该索引的枚举成员。</font><font style="vertical-align: inherit;">（然而，这并</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一起工作
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它把所有的输入字串。）如果数值是引用，它仍然解释为索引，如果在枚举值的列表中没有匹配的字符串。</font><font style="vertical-align: inherit;">由于这些原因，建议定义一个</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举值看起来像数字</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">是不可取的</font><font style="vertical-align: inherit;">，因为这很容易造成混淆。</font><font style="vertical-align: inherit;">例如，下面的列具有的字符串值枚举成员
           </font></font><code class="literal">'0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
          </font></font><code class="literal">'2'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但数值索引值
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
           </font></font><code class="literal">3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字ENUM（'0'，'1'，'2'）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您存储</font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它将被解释为索引值，并成为</font></font><code class="literal">'1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（索引为2的值）。</font><font style="vertical-align: inherit;">如果您存储</font></font><code class="literal">'2'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它匹配枚举值，因此它被存储为
           </font></font><code class="literal">'2'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果存储</font></font><code class="literal">'3'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它不匹配任何枚举值，因此它被视为索引并成为</font></font><code class="literal">'2'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（索引为3的值）。
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>INSERT INTO t (numbers) VALUES(2),('2'),('3');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT * FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">数字|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要确定</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">所有可能值
           </font><font style="vertical-align: inherit;">，请使用
           </font><font style="vertical-align: inherit;">并分析
           </font><font style="vertical-align: inherit;">输出列中的</font><font style="vertical-align: inherit;">定义
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-columns" title="13.7.5.5 SHOW COLUMNS语法"><code class="literal">SHOW COLUMNS
          FROM <em class="replaceable"><code>tbl_name</code></em> LIKE
          '<em class="replaceable"><code>enum_col</code></em>'</code></a><font style="vertical-align: inherit;"></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"></font><code class="literal">Type</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在C API中，</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值作为字符串返回。</font><font style="vertical-align: inherit;">有关使用结果集元数据将它们与其他字符串区分开来的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/connectors-apis.html#c-api-data-structures" title="27.8.5 C API数据结构"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第27.8.5节“C API数据结构”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="enum-nulls"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空或NULL枚举值</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          枚举值也可以是空字符串（</font></font><code class="literal">''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些情况下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果向无效值插入
               </font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（即允许值列表中不存在的字符串），则将插入空字符串作为特殊错误值。</font><font style="vertical-align: inherit;">该字符串可以与</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">普通</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空字符串</font><font style="vertical-align: inherit;">区分开来，</font><font style="vertical-align: inherit;">因为该字符串的数值为0.有关</font><font style="vertical-align: inherit;">枚举值的数字索引的详细信息，</font><font style="vertical-align: inherit;">请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-indexes" title="枚举文字的索引值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举文字</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的索引值。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果启用严格的SQL模式，则尝试插入无效
               </font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值会导致错误。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果一个</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列声明为允许
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是该列的有效值，并且默认值为
               </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              声明</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">列</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则其默认值是允许值列表的第一个元素。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="enum-sorting"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举排序</font></font></h4>

</div>

</div>

</div>
<p>
          <code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值将根据其索引编号进行排序，这取决于枚举成员在列规范中列出的顺序。</font><font style="vertical-align: inherit;">例如，
           </font></font><code class="literal">'b'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前</font></font><code class="literal">'a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行
           </font><font style="vertical-align: inherit;">排序</font></font><code class="literal">ENUM('b', 'a')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">空字符串在非空字符串之前</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">排序</font><font style="vertical-align: inherit;">，并且</font><font style="vertical-align: inherit;">值在所有其他枚举值之前排序。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为防止</font></font><code class="literal">ORDER
          BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">上</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">时出现意外的结果</font><font style="vertical-align: inherit;">，请使用以下技巧之一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按字母顺序</font><font style="vertical-align: inherit;">
              指定</font><font style="vertical-align: inherit;">列表。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              确保列是通过编码</font><font style="vertical-align: inherit;">或
               </font><font style="vertical-align: inherit;">词法分类而不是按索引号排序的</font><font style="vertical-align: inherit;">。
</font></font><code class="literal">ORDER BY
              CAST(<em class="replaceable"><code>col</code></em> AS CHAR)</code><font style="vertical-align: inherit;"></font><code class="literal">ORDER BY
              CONCAT(<em class="replaceable"><code>col</code></em>)</code><font style="vertical-align: inherit;"></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="enum-limits"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举限制</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          枚举值不能是一个表达式，即使是一个评估为字符串值的表达式。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如，这种</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          说法并</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作，因为
           </font></font><code class="literal">CONCAT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能不能用于构建一个枚举值：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE大小（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    尺寸ENUM（'小'，CONCAT（'med'，'ium'），'大'））</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您也不能使用用户变量作为枚举值。</font><font style="vertical-align: inherit;">这对报表都</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          正常工作：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @mysize ='medium';</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE TABLE大小（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    大小ENUM（'small'，@mysize，'large'）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          我们强烈建议您不要</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用数字作为枚举值，因为它不会在存储保存在适当
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，很容易混淆，如果你的字符串和基本数值（这可能是不一样的）</font></font><code class="literal">ENUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误地</font><font style="vertical-align: inherit;">引用了这些
           </font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">如果确实使用数字作为枚举值，则始终将其用引号括起来。</font><font style="vertical-align: inherit;">如果省略引号，则该数字被视为索引。</font><font style="vertical-align: inherit;">请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum-literals" title="枚举文字的处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理枚举文字</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以查看引用的数字是否可能被错误地用作数字索引值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果启用严格SQL模式，则定义中的重复值会导致警告或错误。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="set"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4.5 SET类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091887584"></a><a class="indexterm" name="idm140528091886512"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        A </font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个可以有零个或多个值的字符串对象，每个值都必须从创建表时指定的允许值列表中选择。
        </font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由多个集合成员组成的列值由以逗号（</font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">分隔的成员指定</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这样做的结果是
         </font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员值本身不应包含逗号。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，指定的列</font></font><code class="literal">SET('one', 'two')
        NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以具有以下任何值：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
'一'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
'二'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
'一二'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列最多可以有64个不同的成员。</font><font style="vertical-align: inherit;">一个表在其</font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">中可以有不超过255个唯一元素列表定义，
         </font><font style="vertical-align: inherit;">被视为一个组。</font><font style="vertical-align: inherit;">有关此限制的更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#limits-frm-file" title="C.10.5由.frm文件结构提供的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.10.5节“由.frm文件结构实施的限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果启用严格SQL模式，则定义中的重复值会导致警告或错误。
      </font></font></p><a class="indexterm" name="idm140528091874272"></a><p><font style="vertical-align: inherit;"></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建表格时，</font><font style="vertical-align: inherit;">
        会自动从</font><font style="vertical-align: inherit;">表格定义中的成员值中</font><font style="vertical-align: inherit;">删除尾部空格
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        检索时，存储在</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">将使用列定义中使用的lettercase显示。</font><font style="vertical-align: inherit;">请注意，</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以为列分配字符集和归类。</font><font style="vertical-align: inherit;">对于二进制或区分大小写的排序规则，在为列分配值时会考虑到lettercase。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL以</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数值方式</font><font style="vertical-align: inherit;">存储</font><font style="vertical-align: inherit;">值，</font><font style="vertical-align: inherit;">存储</font><font style="vertical-align: inherit;">值的低位与第一个成员对应。</font><font style="vertical-align: inherit;">如果您</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在数字上下文中</font><font style="vertical-align: inherit;">检索</font><font style="vertical-align: inherit;">值，则检索到的值具有与组成列值的组成员相对应的位。</font><font style="vertical-align: inherit;">例如，您可以</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        像这样</font><font style="vertical-align: inherit;">从</font><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">检索数值</font><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT <em class="replaceable"><code>set_col</code></em>+0 FROM <em class="replaceable"><code>tbl_name</code></em>;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果一个数字存储在</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中，那么在数字的二进制表示中设置的位将确定列值中的集合成员。</font><font style="vertical-align: inherit;">对于指定为的列</font></font><code class="literal">SET('a','b','c','d')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，成员具有以下十进制和二进制值。
</font></font></p>
<div class="informaltable">
<table summary="Decimal and binary values for members of a column specified as SET(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;)."><colgroup><col width="15%"><col width="20%"><col width="20%"></colgroup><thead><tr>
            <th scope="col"><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 会员</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">十进制值</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制值</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">'a'</code></td>
            <td><code class="literal">1</code></td>
            <td><code class="literal">0001</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">'b'</code></td>
            <td><code class="literal">2</code></td>
            <td><code class="literal">0010</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">'c'</code></td>
            <td><code class="literal">4</code></td>
            <td><code class="literal">0100</code></td>
          </tr><tr>
            <td scope="row"><code class="literal">'d'</code></td>
            <td><code class="literal">8</code></td>
            <td><code class="literal">1000</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果</font></font><code class="literal">9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此列</font><font style="vertical-align: inherit;">指定值（</font><font style="vertical-align: inherit;">即</font></font><code class="literal">1001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值）</font></font><code class="literal">'a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'d'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则选择</font><font style="vertical-align: inherit;">第一个和第四个</font><font style="vertical-align: inherit;">值成员
         </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">并选择结果值</font></font><code class="literal">'a,d'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于包含多个</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        元素的值，插入值时列出元素的顺序无关紧要。</font><font style="vertical-align: inherit;">数值中列出给定元素的次数也无关紧要。</font><font style="vertical-align: inherit;">稍后检索该值时，该值中的每个元素都会显示一次，并根据元素在创建表时指定的顺序列出元素。</font><font style="vertical-align: inherit;">例如，假设列被指定为</font></font><code class="literal">SET('a','b','c','d')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE myset (col SET('a', 'b', 'c', 'd'));</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果插入值</font></font><code class="literal">'a,d'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">'d,a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'a,d,d'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">'a,d,a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">'d,a,d'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO myset (col) VALUES </code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'d，a'），（'a，d，a'），（'a，d，d'），（'d，a，d'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，5行受影响（0.01秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：5个重复：0个警告：0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        然后所有这些值都会</font></font><code class="literal">'a,d'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在检索时</font><font style="vertical-align: inherit;">出现</font><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT col FROM myset;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">col |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5排（0.04秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您将</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列设置为不受支持的值，则该值将被忽略并发出警告：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO myset (col) VALUES ('a,d,d,s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询确定，1行受影响，1个警告（0.03秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">级别| </font><font style="vertical-align: inherit;">代码| </font><font style="vertical-align: inherit;">留言|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">警告| </font><font style="vertical-align: inherit;">1265 | </font><font style="vertical-align: inherit;">数据在第1行的列'col'被截断</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.04秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT col FROM myset;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">col |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a，d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一组6行（0.01秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果启用严格的SQL模式，则尝试插入无效
         </font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值会导致错误。
      </font></font></p><p>
        <code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值按数字排序。
        </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值在非</font></font><code class="literal">NULL</code> <code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">之前排序</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        诸如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期望数字参数的函数在必要时将参数转换为数字。</font><font style="vertical-align: inherit;">对于
         </font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，转换操作会导致使用数字值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通常，您可以</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数或
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">搜索</font><font style="vertical-align: inherit;">值
         </font><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE FIND_IN_SET('<em class="replaceable"><code>value</code></em>',<em class="replaceable"><code>set_col</code></em>)&gt;0;</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>set_col</code></em> LIKE '%<em class="replaceable"><code>value</code></em>%';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        第一条语句查找</font></font><em class="replaceable"><code>set_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含
         </font></font><em class="replaceable"><code>value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set成员的</font><font style="vertical-align: inherit;">行
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第二种是相似的，但不一样：它查找</font></font><em class="replaceable"><code>set_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含
         </font></font><em class="replaceable"><code>value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何地方的</font><font style="vertical-align: inherit;">行
         </font><font style="vertical-align: inherit;">，甚至是另一个集合成员的子字符串。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下声明也是允许的：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>set_col</code></em> &amp; 1;</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>set_col</code></em> = '<em class="replaceable"><code>val1</code></em>,<em class="replaceable"><code>val2</code></em>';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些语句中的第一个查找包含第一个成员的值。</font><font style="vertical-align: inherit;">第二个查找完全匹配。</font><font style="vertical-align: inherit;">小心比较第二种类型。</font><font style="vertical-align: inherit;">比较设定值以
         </font><font style="vertical-align: inherit;">
        返回不同的结果
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您应该按照它们在列定义中列出的顺序指定值。
      </font></font><code class="literal">'<em class="replaceable"><code>val1</code></em>,<em class="replaceable"><code>val2</code></em>'</code><font style="vertical-align: inherit;"></font><code class="literal">'<em class="replaceable"><code>val2</code></em>,<em class="replaceable"><code>val1</code></em>'</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要确定</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列的</font><font style="vertical-align: inherit;">所有可能值</font><font style="vertical-align: inherit;">，请使用</font><font style="vertical-align: inherit;">并分析
         </font><font style="vertical-align: inherit;">
        输出列中的</font><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">。
      </font></font><code class="literal">SHOW COLUMNS FROM
        <em class="replaceable"><code>tbl_name</code></em> LIKE
        <em class="replaceable"><code>set_col</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">SET</code><font style="vertical-align: inherit;"></font><code class="literal">Type</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在C API中，</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值作为字符串返回。</font><font style="vertical-align: inherit;">有关使用结果集元数据将它们与其他字符串区分开来的信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/connectors-apis.html#c-api-data-structures" title="27.8.5 C API数据结构"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第27.8.5节“C API数据结构”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="spatial-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5空间数据类型</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#spatial-type-overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.1空间数据类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#opengis-geometry-model"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2 OpenGIS几何模型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-data-formats"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.3支持的空间数据格式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#geometry-well-formedness-validity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.4几何形态和有效性</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#creating-spatial-columns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.5创建空间列</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#populating-spatial-columns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.6填充空间列</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#fetching-spatial-data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.7获取空间数据</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#optimizing-spatial-analysis"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.8优化空间分析</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#creating-spatial-indexes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.9创建空间索引</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#using-spatial-indexes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.10使用空间索引</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528091779440"></a><a class="indexterm" name="idm140528091778368"></a><a class="indexterm" name="idm140528091777280"></a><a class="indexterm" name="idm140528091776192"></a><a class="indexterm" name="idm140528091775120"></a><a class="indexterm" name="idm140528091774032"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      开放地理空间联盟（OGC）是由250多家公司，机构和大学组成的国际联盟，致力于开发公共可用的概念性解决方案，这些解决方案可用于各种管理空间数据的应用程序。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      Open Geospatial Consortium发布了
       </font></font><em class="citetitle"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGIS®地理信息实施标准 - 简单要素访问 - 第2部分：SQL选项</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该文件提出了扩展SQL RDBMS以支持空间数据的几种概念性方法。</font><font style="vertical-align: inherit;">该规范可从OGC网站
       </font></font><a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.opengeospatial.org/standards/sfs获得</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      遵循OGC规范，MySQL将空间扩展实现为</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有几何类型</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">环境</font><font style="vertical-align: inherit;">的</font><span class="bold"><strong><font style="vertical-align: inherit;">SQL</font></strong></span><font style="vertical-align: inherit;">的子集</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个术语是指已经用一组几何类型扩展的SQL环境。</font><font style="vertical-align: inherit;">几何值SQL列实现为具有几何类型的列。</font><font style="vertical-align: inherit;">该规范描述了一组SQL几何类型以及用于创建和分析几何值的类型的函数。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL空间扩展支持地理特征的生成，存储和分析：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于表示空间值的数据类型
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于处理空间值的函数
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          空间索引可改善空间列访问时间
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      空间数据类型和函数可用于
       </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#archive-storage-engine" title="15.5 ARCHIVE存储引擎"><code class="literal">ARCHIVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。</font><font style="vertical-align: inherit;">用于索引空间列，</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      支持两者</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和非</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引。</font><font style="vertical-align: inherit;">其他存储引擎支持非</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引，如
       </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.1.14节“CREATE INDEX语法”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><a class="indexterm" name="idm140528091754384"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地理特征</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是具有位置世上任何东西。</font><font style="vertical-align: inherit;">一个功能可以是：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一个实体。</font><font style="vertical-align: inherit;">例如，一座山，一座池塘，一座城市。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          空间。</font><font style="vertical-align: inherit;">例如，镇区，热带地区。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一个可定义的位置。</font><font style="vertical-align: inherit;">例如，一个十字路口，作为两条街道相交的特定地方。
</font></font></p></li></ul>
</div>
<a class="indexterm" name="idm140528091749120"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一些文档使用术语</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地理空间特征</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来指代地理特征。
    </font></font></p><a class="indexterm" name="idm140528091746864"></a><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是表示地理特征的另一个词。</font><font style="vertical-align: inherit;">最初
      </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何形状</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是指测量地球。</font><font style="vertical-align: inherit;">另一个意义来自制图学，指的是制图师用来绘制世界的几何特征。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这里的讨论认为这些术语是同义词：
       </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地理特征</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地理空间特征</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特征</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最常用的术语是</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何体</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，定义为
       </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示世界上任何具有位置的任何事物的点或点的集合体</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下材料涵盖这些主题：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL模型中实现的空间数据类型
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          OpenGIS几何模型中空间扩展的基础
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于表示空间数据的数据格式
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如何在MySQL中使用空间数据
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对空间数据使用索引
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL与OpenGIS规范的不同之处
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关对空间数据进行操作的函数的信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#spatial-analysis-functions" title="12.15空间分析函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15节“空间分析函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h3><a name="idm140528091731824"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL GIS一致性和兼容性</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL不实现以下GIS功能：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          其他元数据视图
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          OpenGIS规范提出了几个额外的元数据视图。</font><font style="vertical-align: inherit;">例如，命名的系统视图
           </font></font><code class="literal">GEOMETRY_COLUMNS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含几何列的描述，数据库中每个几何列都有一行。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          开放地理信息系统功能</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">Length()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          上</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应在MySQL被称为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          问题是现有的SQL函数
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">Length()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算字符串值的长度，有时无法区分函数是在文本还是空间上下文中调用。
</font></font></p></li></ul>
</div>
<h3><a name="idm140528091721200"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他资源</font></font></h3>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Open Geospatial Consortium发布了
           </font></font><em class="citetitle"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGIS®地理信息实施标准 - 简单要素访问 - 第2部分：SQL选项</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该文件提出了扩展SQL RDBMS以支持空间数据的几种概念性方法。</font><font style="vertical-align: inherit;">开放地理空间联盟（OGC）在</font></font><a class="ulink" href="http://www.opengeospatial.org/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.opengeospatial.org/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护一个网站</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该规范可在
           </font></font><a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.opengeospatial.org/standards/sfs获得</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它包含与这里的材料有关的其他信息。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您对使用MySQL的空间扩展有任何问题或疑虑，可以在GIS论坛中讨论它们：</font></font><a class="ulink" href="http://forums.mysql.com/list.php?23" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :
           </font><a class="ulink" href="http://forums.mysql.com/list.php?23" target="_top"><font style="vertical-align: inherit;">//forums.mysql.com/list.php?23</font></a><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-type-overview"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.1空间数据类型</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091714528"></a><a class="indexterm" name="idm140528091713456"></a><a class="indexterm" name="idm140528091712384"></a><a class="indexterm" name="idm140528091711312"></a><a class="indexterm" name="idm140528091710240"></a><a class="indexterm" name="idm140528091709168"></a><a class="indexterm" name="idm140528091708080"></a><a class="indexterm" name="idm140528091707008"></a><a class="indexterm" name="idm140528091705920"></a><a class="indexterm" name="idm140528091704432"></a><a class="indexterm" name="idm140528091702944"></a><a class="indexterm" name="idm140528091701456"></a><a class="indexterm" name="idm140528091699968"></a><a class="indexterm" name="idm140528091698480"></a><a class="indexterm" name="idm140528091696992"></a><a class="indexterm" name="idm140528091695504"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL具有对应于OpenGIS类的空间数据类型。</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#opengis-geometry-model" title="11.5.2 OpenGIS几何模型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5.2节“OpenGIS几何模型”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍了这些类型的基础
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一些空间数据类型保存单个几何值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">GEOMETRY</code>
          </p></li><li class="listitem"><p>
            <code class="literal">POINT</code>
          </p></li><li class="listitem"><p>
            <code class="literal">LINESTRING</code>
          </p></li><li class="listitem"><p>
            <code class="literal">POLYGON</code>
</p></li></ul>
</div>
<p>
        <code class="literal">GEOMETRY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以存储任何类型的几何值。</font><font style="vertical-align: inherit;">其他单值类型（</font></font><code class="literal">POINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">LINESTRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">POLYGON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）将它们的值限制为特定的几何类型。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        其他空间数据类型包含值的集合：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MULTIPOINT</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MULTILINESTRING</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MULTIPOLYGON</code>
          </p></li><li class="listitem"><p>
            <code class="literal">GEOMETRYCOLLECTION</code>
</p></li></ul>
</div>
<p>
        <code class="literal">GEOMETRYCOLLECTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以存储任何类型的对象的集合。</font><font style="vertical-align: inherit;">其他集合类型（</font></font><code class="literal">MULTIPOINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">MULTILINESTRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">MULTIPOLYGON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><code class="literal">GEOMETRYCOLLECTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）限制集合成员向那些具有特定的几何形状的类型。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        示例：要创建一个名为</font></font><code class="literal">geom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有</font></font><code class="literal">g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可存储任何几何类型值的</font><font style="vertical-align: inherit;">列的名为</font><font style="vertical-align: inherit;">的表</font><font style="vertical-align: inherit;">，请使用以下语句：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE geom（g GEOMETRY）;
</font></font></pre><p>
        <code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间列</font><font style="vertical-align: inherit;">上创建索引
         </font><font style="vertical-align: inherit;">，因此如果您计划对列进行索引，请声明它</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE geom（g GEOMETRY NOT NULL）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关如何在MySQL中使用空间数据类型的其他示例，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#creating-spatial-columns" title="11.5.5创建空间列"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5.5节“创建空间列”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="opengis-geometry-model"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2 OpenGIS几何模型</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-geometry-class-hierarchy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.1几何类层次结构</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-geometry"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.2几何类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.3点类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-curve"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.4曲线类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-linestring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.5 LineString类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-surface"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.6表面类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-polygon"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.7多边形类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-geometrycollection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.8 GeometryCollection类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-multipoint"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.9多点类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-multicurve"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.10 MultiCurve类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-multilinestring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.11 MultiLineString类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-multisurface"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.12 MultiSurface类</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/data-types.html#gis-class-multipolygon"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.13 MultiPolygon类</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        OGC的</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL与几何类型</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        环境</font><font style="vertical-align: inherit;">提出的一组几何类型
         </font><font style="vertical-align: inherit;">基于</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGIS几何模型</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这个模型中，每个几何对象都具有以下一般属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            它与一个空间参考系统相关，该系统描述了对象所在的坐标空间。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            它属于几何几何类。
</font></font></p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-geometry-class-hierarchy"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.1几何类层次结构</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何类定义如下的层次结构：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （noninstantiable）
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （实例化）
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （noninstantiable）
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （实例化）
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                          <code class="literal">Line</code>
                        </p></li><li class="listitem"><p>
                          <code class="literal">LinearRing</code>
</p></li></ul>
</div>
</li></ul>
</div>
</li><li class="listitem"><p>
                  <code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （noninstantiable）
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （实例化）
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
                  <code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （实例化）
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      <code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （实例化）
                    </font></font></p></li><li class="listitem"><p>
                      <code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （noninstantiable）
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                          <code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          （实例化）
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p>
                      <code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （noninstantiable）
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                          <code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （实例化）
</font></font></p></li></ul>
</div>
</li></ul>
</div>
</li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无法在无法实现的类中创建对象。</font><font style="vertical-align: inherit;">可以在可实例化的类中创建对象。</font><font style="vertical-align: inherit;">所有类都有属性，可实例化的类也可以有断言（定义有效类实例的规则）。
        </font></font></p><p>
          <code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是基类。</font><font style="vertical-align: inherit;">这是一个抽象类。</font><font style="vertical-align: inherit;">可实例化的子类
           </font></font><code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅限于存在于二维坐标空间中的零维，一维和二维几何对象。</font><font style="vertical-align: inherit;">所有可实例化的几何类都经过定义，以便几何类的有效实例在拓扑上关闭（即，所有定义的几何都包含它们的边界）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          基</font></font><code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类有子类
           </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 代表零维对象。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表一维对象，并具有子类</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，子类</font></font><code class="literal">Line</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font><font style="vertical-align: inherit;">子类</font></font><code class="literal">LinearRing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是为二维对象设计的并且具有子类</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有专门的零，一维和二维集合类命名
               </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建模的几何形状对应的集合</font></font><code class="literal">Points</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">LineStrings</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">Polygons</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别。
              </font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
               </font></font><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍了为推广集合接口来处理抽象超</font></font><code class="literal">Curves</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">Surfaces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被定义为noninstantiable类。</font><font style="vertical-align: inherit;">他们为它们的子类定义了一组通用的方法，并将其包含在扩展性中。
        </font></font></p><p>
          <code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是实例化类。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-geometry"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.2几何类</font></font></h4>

</div>

</div>

</div>
<p>
          <code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是层次结构的根类。</font><font style="vertical-align: inherit;">它是一个无法实现的类，但是具有许多属性，如以下列表中所述，这些属性对于从任何子</font></font><code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">创建的所有几何值都是通用的
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特定的子类具有它们自己的特定属性，稍后介绍。
        </font></font></p><p>
          <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何属性</font></font></strong></span>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何值具有以下属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              它的</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个几何都属于层次结构中的一个可实例化类。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              其</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SRID</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或空间参考标识符。</font><font style="vertical-align: inherit;">此值标识几何图形的关联空间参照系，该系统描述几何对象所在的坐标空间。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在MySQL中，SRID值是与几何值相关的整数。</font><font style="vertical-align: inherit;">最大可用SRID值是2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1。</font><font style="vertical-align: inherit;">如果给出的值较大，则只使用较低的32位。</font><font style="vertical-align: inherit;">不管实际的SRID值如何，所有的计算都假设SRID为0。</font><font style="vertical-align: inherit;">SRID 0代表一个无限平坦的笛卡尔平面，没有单位分配给它的轴。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              其</font><font style="vertical-align: inherit;">空间参考系统中的</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">坐标</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以双精度（8字节）数字表示。</font><font style="vertical-align: inherit;">所有非空的几何包括至少一对（X，Y）坐标。</font><font style="vertical-align: inherit;">空的几何图形不包含坐标。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              坐标与SRID有关。</font><font style="vertical-align: inherit;">例如，在不同的坐标系中，即使物体具有相同的坐标，两个物体之间的距离也可能不同，因为
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平面</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">坐标系上的距离和</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大地</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统</font><font style="vertical-align: inherit;">上的距离
               </font><font style="vertical-align: inherit;">（地球表面上的坐标）是不同的东西。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              它的</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">边界</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              每个几何都占据一定的空间位置。</font><font style="vertical-align: inherit;">几何图形的外部是没有被几何图形占据的所有空间。</font><font style="vertical-align: inherit;">内部是由几何体占据的空间。</font><font style="vertical-align: inherit;">边界是几何内部和外部之间的界面。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              它的</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MBR</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（最小边界矩形）或信封。</font><font style="vertical-align: inherit;">这是由最小和最大（X，Y）坐标形成的边界几何：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（（MINX MINY，MAXX MINY，MAXX MAXY，MINX MAXY，MINX MINY））
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              价值是
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不简单</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的类型的几何值（</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是简单或非简单。</font><font style="vertical-align: inherit;">每种类型都确定自己的简单或不简单的断言。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              价值是
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">封闭</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不封闭</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">类型（</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">几何值</font><font style="vertical-align: inherit;">可以是封闭的或不封闭的。</font><font style="vertical-align: inherit;">每种类型决定自己关闭或不关闭的断言。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              值是
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空的</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是
               </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空的如果几何体没有任何点，则它是空的。</font><font style="vertical-align: inherit;">外部，内部和空几何的边界未定义（即它们由</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              值</font><font style="vertical-align: inherit;">表示</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">空的几何被定义为总是简单并且具有面积为0。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              它的</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维度</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">几何可以具有-1,0,1或2的维度：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  -1为空几何。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  0表示没有长度和面积的几何图形。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  1表示具有非零长度和零面积的几何。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  2表示非零区域的几何图形。
</font></font></p></li></ul>
</div>
<p>
              <code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的维数为零。
              </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的维度为1. </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的维度为2.维度</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">维度</font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的维度与它们组成的维度相同。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-point"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.3点类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是代表坐标空间中单个位置的几何图形。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              想象一下有很多城市的大型世界地图。</font><font style="vertical-align: inherit;">一个
               </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象可以代表每个城市。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在城市地图上，一个</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物体可以代表一个公共汽车站。
</font></font></p></li></ul>
</div>
<p>
          <span class="bold"><strong><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              X坐标值。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Y坐标值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 被定义为零维几何。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              a的边界</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是空集。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-curve"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.4曲线类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个一维几何，通常由一系列点表示。</font><font style="vertical-align: inherit;">特定的子类</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义点之间的插值类型。</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个无法实现的课程。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有点的坐标。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被定义为一维几何。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很简单，如果它不通过同一个点两次，只是如果开始点和结束点相同，曲线仍然很简单。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果它的起点等于其终点，则</font><font style="vertical-align: inherit;">
              A </font><font style="vertical-align: inherit;">关闭。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              关闭的边界</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是空的。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              非封闭的边界</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由两个端点组成。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一个</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单而封闭的是一个
               </font></font><code class="literal">LinearRing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-linestring"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.5 LineString类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          点之间的线性插值。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在世界地图上，</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物体可以代表河流。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在城市地图中，</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物体可以代表街道。
</font></font></p></li></ul>
</div>
<p>
          <span class="bold"><strong><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有由每个连续的点对定义的段的坐标。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个，
               </font></font><code class="literal">Line</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果它恰好包含两个点。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果它既封闭又简单，</font><font style="vertical-align: inherit;">
              A </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就是一个
               </font></font><code class="literal">LinearRing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-surface"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.6表面类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个二维几何。</font><font style="vertical-align: inherit;">这是一个无法实现的课程。</font><font style="vertical-align: inherit;">它唯一的可实例化的子类是
           </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被定义为二维几何。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              OpenGIS规范将简单定义为由
               </font><font style="vertical-align: inherit;">与单个外部边界和零个或更多内部边界相关联</font></font><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的单个</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">补丁</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组成的几何体</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              简单的边界</font></font><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是与其外部和内部边界相对应的一组闭合曲线。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-polygon"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.7多边形类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">Surface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表多面几何</font><font style="vertical-align: inherit;">的平面
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它由单个外部边界和零个或多个内部边界定义，其中每个内部边界在其中定义一个孔</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在区域地图上，</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象可以代表森林，地区等。
</font></font></p></li></ul>
</div>
<p>
          <span class="bold"><strong><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          断言</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              a的边界</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font><font style="vertical-align: inherit;">构成其外部和内部边界</font><font style="vertical-align: inherit;">的一组</font></font><code class="literal">LinearRing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象（即，
               </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既简单又封闭的对象）组成。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有交叉的环。</font><font style="vertical-align: inherit;">a的边界上的环</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以相交于a </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但仅作为切线相交。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有线条，尖刺或刺孔。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的内部是连接点集。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能有漏洞。</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有孔</font><font style="vertical-align: inherit;">的外部</font><font style="vertical-align: inherit;">没有连接。</font><font style="vertical-align: inherit;">每个孔限定了外部的连接部件。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          前面的断言构成了</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个简单的几何体。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-geometrycollection"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.8 GeometryCollection类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是几何体，它是任何类的零个或多个几何体的集合。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何集合中的所有元素必须位于相同的空间参照系（即相同的坐标系）中。</font><font style="vertical-align: inherit;">尽管</font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下部分</font><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">描述</font><font style="vertical-align: inherit;">的子类</font><font style="vertical-align: inherit;">可能会限制成员资格</font><font style="vertical-align: inherit;">，但几何集合中的元素没有其他限制
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">限制可能基于：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              元素类型（例如，a </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              可能只包含</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              尺寸
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              元素之间空间重叠程度的限制
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multipoint"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.9多点类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是由</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">组成的几何集合</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">点没有以任何方式连接或排序。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在世界地图上，a </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以代表一连串的小岛。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在城市地图上，a </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以代表售票处的出路。
</font></font></p></li></ul>
</div>
<p>
          <span class="bold"><strong><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是零维几何。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有两个</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值相等（A具有相同的坐标值），</font><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">
              A </font><font style="vertical-align: inherit;">很简单
               </font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              a的边界</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是空集。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multicurve"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.10 MultiCurve类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是由</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">组成的几何集合</font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个无法实现的课程。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一维几何。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当它的所有元素都很简单时，</font><font style="vertical-align: inherit;">
              A </font><font style="vertical-align: inherit;">才是简单的; </font><font style="vertical-align: inherit;">任何两个元素之间的唯一交点出现在两个元素边界上的点上。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              甲</font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">边界是通过将所获得的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模2联合规则</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（也被称为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">奇偶规则</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：一个点是在一个边界</font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果它是在奇数个的边界
               </font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的元件。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果所有元素都关闭，则</font><font style="vertical-align: inherit;">
              A </font><font style="vertical-align: inherit;">关闭。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              关闭的边界</font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总是空的。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multilinestring"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.11 MultiLineString类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
           </font></font><code class="literal">MultiCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">组成的几何集合
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在区域地图上，a </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              可以代表河流系统或高速公路系统。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multisurface"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.12 MultiSurface类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是由表面元素组成的几何集合。</font></font><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是一个无法实现的课程。</font><font style="vertical-align: inherit;">它唯一的可实例化的子类是
           </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          断言</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              a内的曲面</font></font><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有相交的内部。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              a内的曲面</font></font><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有在有限数量的点处相交的边界。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multipolygon"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.2.13 MultiPolygon类</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          A </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
           </font></font><code class="literal">MultiSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">组成的对象
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <span class="bold"><strong><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在地区地图上，a </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以代表一个湖泊系统。
</font></font></p></li></ul>
</div>
<p>
          <span class="bold"><strong><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          断言</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有两个
               </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部相交的元素。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交叉的</font><font style="vertical-align: inherit;">两个
               </font><font style="vertical-align: inherit;">元素（前面的断言也禁止交叉），或者触及无数个点。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能没有剪线，尖刺或刺破。</font><font style="vertical-align: inherit;">A </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个常规的闭合点集合。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一个</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有多个
               </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的内部没有连接。</font><font style="vertical-align: inherit;">a内部的连接组件</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的数量等于中的</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
               </font><font style="vertical-align: inherit;">的数量</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p>
          <span class="bold"><strong><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          属性</font></font></strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个二维几何。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              甲</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">边界是一组闭合曲线（的</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于其的边界值）
               </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的元素。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在边界上的</font><font style="vertical-align: inherit;">
              每一个都</font><font style="vertical-align: inherit;">在
               </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">的边界上</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              每个</font></font><code class="literal">Curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在边界
               </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素是的边界</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="gis-data-formats"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.3支持的空间数据格式</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        两个标准的空间数据格式用于表示查询中的几何对象：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            众所周知的文本（WKT）格式
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            众所周知的二进制（WKB）格式
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在内部，MySQL以与WKT或WKB格式不相同的格式存储几何值。</font><font style="vertical-align: inherit;">（内部格式与WKB类似，但是最初的4个字节表示SRID。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有可用于在不同数据格式之间转换的功能; </font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#gis-format-conversion-functions" title="12.15.6几何格式转换函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15.6节“几何格式转换函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下部分描述了MySQL使用的空间数据格式：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-wkt-format" title="众所周知的文本（WKT）格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">众所周知的文本（WKT）格式</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-wkb-format" title="众所周知的二进制（WKB）格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">众所周知的二进制（WKB）格式</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-internal-format" title="内部几何存储格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部几何存储格式</font></font></a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="gis-wkt-format"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">众所周知的文本（WKT）格式</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091365040"></a><a class="indexterm" name="idm140528091363584"></a><a class="indexterm" name="idm140528091362096"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何值的已知文本（WKT）表示用于以ASCII格式交换几何数据。</font><font style="vertical-align: inherit;">OpenGIS规范提供了一个Backus-Naur语法，该语法指定了用于编写WKT值的正式生产规则（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#spatial-types" title="11.5空间数据类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5节“空间数据类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何对象的WKT表示示例：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POINT（15 20）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              点坐标指定为不分隔逗号。</font><font style="vertical-align: inherit;">这与SQL </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_point"><code class="literal">Point()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的语法不同
               </font><font style="vertical-align: inherit;">，后者在坐标之间需要逗号。</font><font style="vertical-align: inherit;">注意使用适合于给定空间操作上下文的语法。</font><font style="vertical-align: inherit;">例如，以下语句都用于
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象中</font><font style="vertical-align: inherit;">提取X坐标</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第一个直接使用该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_point"><code class="literal">Point()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">生成对象
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第二个使用转换为</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with
               </font><font style="vertical-align: inherit;">的WKT表示
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_X(Point(15, 20));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_X（POINT（15，20））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">15 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_X(ST_GeomFromText('POINT(15 20)'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_X（ST_GeomFromText（'POINT（15 20）'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">15 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有四点：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LINESTRING（0 0，10 10，20 25，50 60）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              点坐标对用逗号分隔。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带一个外圈和一个内圈：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POLYGON（（0 0,10 0,10 10,0 10,0 0），（5 5,7 5,7 7,5 7，5 5））
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有三个
               </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MULTIPOINT（0 0，20 20，60 60）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从MySQL 5.7.9的，空间的功能，例如
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该接受的WKT格式表示
               </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的值内允许个别指向由括号包围。</font><font style="vertical-align: inherit;">例如，以下两个函数调用都是有效的，而在MySQL 5.7.9之前，第二个函数调用会产生一个错误：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ST_MPointFromText（'MULTIPOINT（1 1，2 2，3 3）'）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ST_MPointFromText（'MULTIPOINT（（1 1），（2 2），（3 3））'）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从MySQL 5.7.9开始，</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">输出
               </font><font style="vertical-align: inherit;">包括每个点周围的括号。</font><font style="vertical-align: inherit;">例如：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @mp = 'MULTIPOINT(1 1, 2 2, 3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeomFromText(@mp));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeomFromText（@mp））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MULTIPOINT（（1 1），（2 2），（3 3））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在MySQL 5.7.9之前，相同值的输出不包括每个点周围的括号：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @mp = 'MULTIPOINT(1 1, 2 2, 3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeomFromText(@mp));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeomFromText（@mp））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MULTIPOINT（1 1,2 2,3 3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有两个
               </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MULTILINESTRING（（10 10，20 20），（15 15，30 15））
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              A </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有两个
               </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（（（0,0,10 0,10 10,0 10,0 0）），（（5 5,7 5,7 7,5 7，5 5）））的多元素
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              阿</font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由两个的
               </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值和一
               </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
            </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GEOMETRYCOLLECTION（POINT（10 10），POINT（30 30），LINESTRING（15 15，20 20））
</font></font></pre></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="gis-wkb-format"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">众所周知的二进制（WKB）格式</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091312576"></a><a class="indexterm" name="idm140528091311120"></a><a class="indexterm" name="idm140528091309616"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何值的已知二进制（WKB）表示用于交换几何数据，作为由</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含几何WKB信息的值</font><font style="vertical-align: inherit;">表示的二进制流</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该格式由OpenGIS规范定义（请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#spatial-types" title="11.5空间数据类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5节“空间数据类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">它也在ISO </font></font><em class="citetitle"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL / MM Part 3：Spatial</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准中定义。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          WKB使用1字节无符号整数，4字节无符号整数和8字节双精度数字（IEEE 754格式）。</font><font style="vertical-align: inherit;">一个字节是八位。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如，对应的WKB值</font></font><code class="literal">POINT(1
          -1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由21个字节的序列组成，每个字节由两个十六进制数字表示：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0101000000000000000000F03F000000000000F0BF
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该序列由下表中显示的组件组成。
</font></font></p>
<div class="table">
<a name="wkb-components-example-table"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表11.2 WKB组件示例</font></font></b></p>
<div class="table-contents">
<table summary="Example showing component in WKB values."><colgroup><col width="30%"><col width="30%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零件</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尺寸</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
            </tr></thead><tbody><tr>
              <td align="left" scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节顺序</font></font></td>
              <td align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个字节</font></font></td>
              <td align="left"><code class="literal">01</code></td>
            </tr><tr>
              <td align="left" scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WKB类型</font></font></td>
              <td align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
              <td align="left"><code class="literal">01000000</code></td>
            </tr><tr>
              <td align="left" scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X坐标</font></font></td>
              <td align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8个字节</font></font></td>
              <td align="left"><code class="literal">000000000000F03F</code></td>
            </tr><tr>
              <td align="left" scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y坐标</font></font></td>
              <td align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8个字节</font></font></td>
              <td align="left"><code class="literal">000000000000F0BF</code></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          组件表示如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字节顺序指示符是1或0来表示小端或大端存储。</font><font style="vertical-align: inherit;">小端和大端字节顺序也分别称为网络数据表示（NDR）和外部数据表示（XDR）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              WKB类型是指示几何类型的代码。</font><font style="vertical-align: inherit;">MySQL使用从1个值至7，以表示
               </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
               </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一个</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值具有X和Y坐标，每个坐标表示为双精度值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          更复杂的几何值的WKB值具有更复杂的数据结构，详见OpenGIS规范。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="gis-internal-format"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部几何存储格式</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091264256"></a><a class="indexterm" name="idm140528091262800"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL使用4个字节存储几何值，以指示SRID，后面跟随值的WKB表示。</font><font style="vertical-align: inherit;">有关WKB格式的说明，请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-wkb-format" title="众所周知的二进制（WKB）格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">众所周知的二进制（WKB）格式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于WKB部分，这些特定于MySQL的注意事项适用于：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字节顺序指示字节是1，因为MySQL将几何存储为小端值。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              MySQL支持几何类型</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
               </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">其他几何类型不受支持。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回值存储所需的空间字节数。</font><font style="vertical-align: inherit;">例：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g = ST_GeomFromText('POINT(1 -1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT LENGTH(@g);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LENGTH（@g）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">25 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(@g);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（@g）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">000000000101000000000000000000F03F000000000000F0BF |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值长度为25个字节，由这些组件组成（从十六进制值中可以看出）：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              整数SRID（0）为4个字节
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              整数字节顺序为1个字节（1 =小端）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              整数类型信息4个字节（1 =
               </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              双精度X坐标的8个字节（1）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              双精度Y坐标为8个字节（-1）
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="geometry-well-formedness-validity"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.4几何形态和有效性</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091239920"></a><a class="indexterm" name="idm140528091238416"></a><a class="indexterm" name="idm140528091236912"></a><a class="indexterm" name="idm140528091235424"></a><a class="indexterm" name="idm140528091233936"></a><a class="indexterm" name="idm140528091232448"></a><a class="indexterm" name="idm140528091230960"></a><a class="indexterm" name="idm140528091229472"></a><a class="indexterm" name="idm140528091227984"></a><a class="indexterm" name="idm140528091226480"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于几何值，MySQL区分句法良构和几何有效的概念。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果一个几何在满足如下（非穷举）列表中的条件时在语法上是良构的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            线串至少有两点
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            多边形至少有一个环
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            多边形环关闭（第一个和最后一个点相同）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            多边形环至少有4个点（最小多边形是一个三角形，第一个和最后一个点相同）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            集合不为空（除外
             </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果一个几何在句法上是良构的并且满足如下（非穷举）列表中的条件，那么几何是有效的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            多边形不是自相交的
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            多边形内环位于外环内部
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            多多边形不具有重叠的多边形
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果几何在语法上不是格式良好的，空间函数就会失败。</font><font style="vertical-align: inherit;">分析WKT或WKB值的空间导入函数会导致尝试创建非句法结构几何的错误。</font><font style="vertical-align: inherit;">语法格式良好性也会被检查以尝试将几何存储到表中。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        允许插入，选择和更新几何无效的几何图形，但它们必须在语法上形成良好。</font><font style="vertical-align: inherit;">由于计算开销，MySQL不会明确检查几何效度。</font><font style="vertical-align: inherit;">空间计算可能会检测到一些无效几何形状的情况并产生错误，但它们也可能返回未定义的结果而未检测到无效。</font><font style="vertical-align: inherit;">需要几何有效几何图形的应用程序应该使用该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isvalid"><code class="literal">ST_IsValid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">来检查它们
         </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="creating-spatial-columns"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.5创建空间列</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL提供了为几何类型创建空间列的标准方法，例如，使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE
        TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">空间列支持
         </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#archive-storage-engine" title="15.5 ARCHIVE存储引擎"><code class="literal">ARCHIVE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。</font><font style="vertical-align: inherit;">另请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#creating-spatial-indexes" title="11.5.9创建空间索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5.9节“创建空间索引”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下有关空间索引的注意事项
         </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语句创建具有空间列的表格：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE geom（g GEOMETRY）;
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句在现有表中添加或删除空间列：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALTER TABLE geom ADD pt POINT;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ALTER TABLE geom DROP pt;</font></font><font></font>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="populating-spatial-columns"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.6填充空间列</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        创建空间列后，可以使用空间数据填充它们。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值应该以内部几何格式存储，但是您可以将它们从知名文本（WKT）或众所周知的二进制（WKB）格式转换为该格式。</font><font style="vertical-align: inherit;">以下示例演示如何通过将WKT值转换为内部几何格式将几何值插入到表中：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明中</font><font style="vertical-align: inherit;">直接执行转换
             </font><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INSERT INTO geom VALUES（ST_GeomFromText（'POINT（1 1）'））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @g ='POINT（1 1）';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_GeomFromText（@g））;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            执行以下操作之前的转换
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @g = ST_GeomFromText（'POINT（1 1）'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（@g）;</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例将更复杂的几何图形插入表中：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @g ='LINESTRING（0 0,1 1,2 2）';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_GeomFromText（@g））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @g ='POLYGON（（0,0,10 0,10 10,0 10,0 0），（5 5,7 5,7 7,5 7，5 5））';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_GeomFromText（@g））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @g =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
'GEOMETRYCOLLECTION（POINT（1 1），LINESTRING（0 0,1 1,2 2,3 3,4 4））';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_GeomFromText（@g））;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        前面的例子
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用来创建几何值。</font><font style="vertical-align: inherit;">您也可以使用类型特定的功能：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @g ='POINT（1 1）';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_PointFromText（@g））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @g ='LINESTRING（0 0,1 1,2 2）';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_LineStringFromText（@g））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @g ='POLYGON（（0,0,10 0,10 10,0 10,0 0），（5 5,7 5,7 7,5 7，5 5））';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_PolygonFromText（@g））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @g =</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
'GEOMETRYCOLLECTION（POINT（1 1），LINESTRING（0 0,1 1,2 2,3 3,4 4））';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO geom VALUES（ST_GeomCollFromText（@g））;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        希望使用WKB表示几何值的客户端应用程序负责将查询中形成的WKB正确地发送到服务器。</font><font style="vertical-align: inherit;">有几种方法可以满足这个要求。</font><font style="vertical-align: inherit;">例如：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">POINT(1 1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用十六进制文字语法</font><font style="vertical-align: inherit;">
            插入一个</font><font style="vertical-align: inherit;">值：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入到geom值中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（ST_GeomFromWKB（X'0101000000000000000000F03F000000000000F03F'））;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个ODBC应用程序可以发送一个WKB表示，并使用</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">为参数将其绑定到一个占位符
             </font><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入到geom值（ST_GeomFromWKB（？））
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            其他编程接口可能支持类似的占位符机制。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在C程序中，您可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-real-escape-string-quote" title="27.8.7.56 mysql_real_escape_string_quote（）"><code class="literal">mysql_real_escape_string_quote()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            并将结果包含在发送到服务器的查询字符串中</font><font style="vertical-align: inherit;">来转义二进制值
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-real-escape-string-quote" title="27.8.7.56 mysql_real_escape_string_quote（）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第27.8.7.56节“mysql_real_escape_string_quote（）”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fetching-spatial-data"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.7获取空间数据</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        存储在表格中的几何值可以以内部格式获取。</font><font style="vertical-align: inherit;">您也可以将它们转换为WKT或WKB格式。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以内部格式提取空间数据：
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用内部格式提取几何值可用于表到表传输：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE geom2（g GEOMETRY）SELECT g FROM geom;
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以WKT格式提取空间数据：
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数将几何体从内部格式转换为WKT字符串。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ST_AsText（g）FROM geom;
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以WKB格式提取空间数据：
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能将几何从内部格式转换为
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含WKB值。
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ST_AsBinary（g）FROM geom;
</font></font></pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="optimizing-spatial-analysis"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.8优化空间分析</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表，可以使用</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">优化包含空间数据的列中的搜索操作
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最典型的操作是：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            点搜索包含给定点的所有对象的查询
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            搜索与给定区域重叠的所有对象的区域查询
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL使用</font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R-树与二次拆分</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对空间列的索引。</font><font style="vertical-align: inherit;">甲</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指数使用几何的最小外接矩形（MBR）构建的。</font><font style="vertical-align: inherit;">对于大多数几何图形，MBR是围绕几何图形的最小矩形。</font><font style="vertical-align: inherit;">对于水平或垂直线串，MBR是退化为线串的矩形。</font><font style="vertical-align: inherit;">对于某一点，MBR是一个退化为点的矩形。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        也可以在空间列上创建正常的索引。</font><font style="vertical-align: inherit;">在非</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引中，除了列以外，您必须为任何空间列声明前缀
         </font></font><code class="literal">POINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p>
        <code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持两者</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和非</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引。</font><font style="vertical-align: inherit;">其他存储引擎支持非</font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引，如
         </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.1.14节“CREATE INDEX语法”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="creating-spatial-indexes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.9创建空间索引</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表，MySQL可以使用类似于创建常规索引的语法创建空间索引，但使用
         </font></font><code class="literal">SPATIAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字。</font><font style="vertical-align: inherit;">必须声明空间索引中的列</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例演示如何创建空间索引：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            随着</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE geom（g GEOMETRY NOT NULL，SPATIAL INDEX（g））;
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            随着</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE geom（g GEOMETRY NOT NULL）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ALTER TABLE geom ADD SPATIAL INDEX（g）;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            随着</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><code class="literal">CREATE INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE geom（g GEOMETRY NOT NULL）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建空间索引g geom（g）;</font></font><font></font>
</pre></li></ul>
</div>
<p>
        <code class="literal">SPATIAL INDEX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个R-tree索引。</font><font style="vertical-align: inherit;">对于支持空间列的非空间索引的存储引擎，引擎会创建一个B树索引。</font><font style="vertical-align: inherit;">空间值的B树索引对精确值查找非常有用，但对范围扫描无效。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关索引空间列的更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.1.14节“CREATE INDEX语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要删除空间索引，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER
        TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#drop-index" title="13.1.25 DROP INDEX语法"><code class="literal">DROP INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            随着</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALTER TABLE geom DROP INDEX g;
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            随着</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#drop-index" title="13.1.25 DROP INDEX语法"><code class="literal">DROP INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DROP INDEX g ON geom;
</font></font></pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        示例：假设一个表格</font></font><code class="literal">geom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含超过32,000个几何图形，它们存储在</font></font><code class="literal">g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">的列
         </font><font style="vertical-align: inherit;">中</font></font><code class="literal">GEOMETRY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该表还有一个</font><font style="vertical-align: inherit;">用于存储对象ID值</font><font style="vertical-align: inherit;">的</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
         </font></font><code class="literal">fid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>DESCRIBE geom;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ---------- + ------ + ------ + --------- + ------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">字段| </font><font style="vertical-align: inherit;">类型| </font><font style="vertical-align: inherit;">空| </font><font style="vertical-align: inherit;">Key | </font><font style="vertical-align: inherit;">默认| </font><font style="vertical-align: inherit;">额外|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ---------- + ------ + ------ + --------- + ------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">fid | </font><font style="vertical-align: inherit;">int（11）| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">PRI | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">auto_increment |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">g | </font><font style="vertical-align: inherit;">几何| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ---------- + ------ + ------ + --------- + ------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COUNT(*) FROM geom;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">count（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">32376 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在列上添加空间索引</font></font><code class="literal">g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用以下语句：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>ALTER TABLE geom ADD SPATIAL INDEX(g);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，32376行受影响（4.05秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：32376重复：0警告：0</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="using-spatial-indexes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.5.10使用空间索引</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        优化程序将调查可用空间索引是否可以参与搜索使用诸如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在
         </font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">的函数的查询</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下查询查找给定矩形中的所有对象：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font><font style="vertical-align: inherit;">
mysql&gt; </font><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>'Polygon((30000 15000,<font></font>
                 31000 15000,<font></font>
                 31000 16000,<font></font>
                 30000 16000,<font></font>
                 30000 15000))';</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT fid,ST_AsText(g) FROM geom WHERE</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>MBRContains(ST_GeomFromText(@poly),g);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----- + ------------------------------------------- -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">fid | </font><font style="vertical-align: inherit;">ST_AsText（g）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----- + ------------------------------------------- -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">21 | </font><font style="vertical-align: inherit;">LINESTRING（30350.4 15828.8,30350.6 15845,30333.8 15845,30 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">22 | </font><font style="vertical-align: inherit;">LINESTRING（30350.6 15871.4,30350.6 15887.8,30334 15887.8，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">23 | </font><font style="vertical-align: inherit;">LINESTRING（30350.6 15914.2,30350.6 15930.4,30334 15930.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">24 | </font><font style="vertical-align: inherit;">LINESTRING（30290.2 15823,30290.2 15839.4,30273.4 15839.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">25 | </font><font style="vertical-align: inherit;">LINESTRING（30291.4 15866.2,30291.6 15882.4,30274.8 15882. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">26 | </font><font style="vertical-align: inherit;">LINESTRING（30291.6 15918.2,30291.6 15934.4,30275 15934.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">249 | </font><font style="vertical-align: inherit;">LINESTRING（30337.8 15938.6,30337.8 15946.8,30320.4 15946. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">LINESTRING（30250.4 15129.2,30248.8 15138.4,30238.2 15136. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">LINESTRING（30220.2 15122.8,30217.2 15137.8,30207.6 15136，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">LINESTRING（30179 15114.4,30176.6 15129.4,30167 15128,3016 ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">LINESTRING（30155.2 15121.4,30140.4 15118.6,30142 15109,30 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">LINESTRING（30192.4 15085,30177.6 15082.2,30179.2 15072.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">LINESTRING（30244 15087,30229 15086.2,30229.4 15076.4,3024 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">7 | </font><font style="vertical-align: inherit;">LINESTRING（30200.6 15059.4,30185.6 15058.6,30186 15048.8，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">10 | </font><font style="vertical-align: inherit;">LINESTRING（30179.6 15017.8,30181 15002.8,30190.8 15003.6，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">11 | </font><font style="vertical-align: inherit;">LINESTRING（30154.2 15000.4,30168.6 15004.8,30166 15014.2，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">13 | </font><font style="vertical-align: inherit;">LINESTRING（30105 15065.8,30108.4 15050.8,30118 15053,3011 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">154 | </font><font style="vertical-align: inherit;">LINESTRING（30276.2 15143.8,30261.4 15141,30263 15131.4,30 ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">155 | </font><font style="vertical-align: inherit;">LINESTRING（30269.8 15084,30269.4 15093.4,30258.6 15093,30 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">157 | </font><font style="vertical-align: inherit;">LINESTRING（30128.2 15011,30113.2 15010.2,30113.6 15000.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----- + ------------------------------------------- -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
20行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#explain" title="13.8.2 EXPLAIN语法"><code class="literal">EXPLAIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查执行该查询方式：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font><font style="vertical-align: inherit;">
mysql&gt; </font><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>'Polygon((30000 15000,<font></font>
                 31000 15000,<font></font>
                 31000 16000,<font></font>
                 30000 16000,<font></font>
                 30000 15000))';</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>EXPLAIN SELECT fid,ST_AsText(g) FROM geom WHERE</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>MBRContains(ST_GeomFromText(@poly),g)\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           ID：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  select_type：SIMPLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表：几何</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         键入：范围</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
possible_keys：g</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          关键：g</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      key_len：32</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          ref：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         行数：50</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        额外：在哪里使用</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        检查没有空间索引会发生什么：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font><font style="vertical-align: inherit;">
mysql&gt; </font><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>'Polygon((30000 15000,<font></font>
                 31000 15000,<font></font>
                 31000 16000,<font></font>
                 30000 16000,<font></font>
                 30000 15000))';</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>EXPLAIN SELECT fid,ST_AsText(g) FROM g IGNORE INDEX (g) WHERE</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>MBRContains(ST_GeomFromText(@poly),g)\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           ID：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  select_type：SIMPLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表：几何</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         键入：ALL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
possible_keys：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          键：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      key_len：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          ref：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         行数：32376</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        额外：在哪里使用</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        执行</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有空间索引</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">语句会得到相同的结果，但会导致执行时间从0.00秒增加到0.46秒：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font><font style="vertical-align: inherit;">
mysql&gt; </font><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>'Polygon((30000 15000,<font></font>
                 31000 15000,<font></font>
                 31000 16000,<font></font>
                 30000 16000,<font></font>
                 30000 15000))';</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT fid,ST_AsText(g) FROM geom IGNORE INDEX (g) WHERE</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>MBRContains(ST_GeomFromText(@poly),g);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----- + ------------------------------------------- -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">fid | </font><font style="vertical-align: inherit;">ST_AsText（g）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----- + ------------------------------------------- -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">LINESTRING（30250.4 15129.2,30248.8 15138.4,30238.2 15136. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">LINESTRING（30220.2 15122.8,30217.2 15137.8,30207.6 15136，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">LINESTRING（30179 15114.4,30176.6 15129.4,30167 15128,3016 ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">LINESTRING（30155.2 15121.4,30140.4 15118.6,30142 15109,30 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">LINESTRING（30192.4 15085,30177.6 15082.2,30179.2 15072.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">LINESTRING（30244 15087,30229 15086.2,30229.4 15076.4,3024 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">7 | </font><font style="vertical-align: inherit;">LINESTRING（30200.6 15059.4,30185.6 15058.6,30186 15048.8，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">10 | </font><font style="vertical-align: inherit;">LINESTRING（30179.6 15017.8,30181 15002.8,30190.8 15003.6，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">11 | </font><font style="vertical-align: inherit;">LINESTRING（30154.2 15000.4,30168.6 15004.8,30166 15014.2，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">13 | </font><font style="vertical-align: inherit;">LINESTRING（30105 15065.8,30108.4 15050.8,30118 15053,3011 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">21 | </font><font style="vertical-align: inherit;">LINESTRING（30350.4 15828.8,30350.6 15845,30333.8 15845,30 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">22 | </font><font style="vertical-align: inherit;">LINESTRING（30350.6 15871.4,30350.6 15887.8,30334 15887.8，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">23 | </font><font style="vertical-align: inherit;">LINESTRING（30350.6 15914.2,30350.6 15930.4,30334 15930.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">24 | </font><font style="vertical-align: inherit;">LINESTRING（30290.2 15823,30290.2 15839.4,30273.4 15839.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">25 | </font><font style="vertical-align: inherit;">LINESTRING（30291.4 15866.2,30291.6 15882.4,30274.8 15882. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">26 | </font><font style="vertical-align: inherit;">LINESTRING（30291.6 15918.2,30291.6 15934.4,30275 15934.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">154 | </font><font style="vertical-align: inherit;">LINESTRING（30276.2 15143.8,30261.4 15141,30263 15131.4,30 ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">155 | </font><font style="vertical-align: inherit;">LINESTRING（30269.8 15084,30269.4 15093.4,30258.6 15093,30 ...）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">157 | </font><font style="vertical-align: inherit;">LINESTRING（30128.2 15011,30113.2 15010.2,30113.6 15000.4，... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">249 | </font><font style="vertical-align: inherit;">LINESTRING（30337.8 15938.6,30337.8 15946.8,30320.4 15946. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----- + ------------------------------------------- -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
20行（0.46秒）</font></font><font></font>
</pre>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="json"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.6 JSON数据类型</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528091069568"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-values" title="创建JSON值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建JSON值</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-normalization" title="JSON值的规范化，合并和自动套接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的规范化，合并和自动套接</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-paths" title="搜索和修改JSON值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索和修改JSON值</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-comparison" title="JSON值的比较和排序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的比较和排序</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-converting-between-types" title="在JSON和非JSON值之间转换"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在JSON和非JSON值之间转换</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-aggregation" title="JSON值的聚合"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的聚合</font></font></a></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从MySQL 5.7.8开始，MySQL支持</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由</font></font><a class="ulink" href="https://tools.ietf.org/html/rfc7159" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 7159</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">的本地</font><font style="vertical-align: inherit;">数据类型，</font><font style="vertical-align: inherit;">
      该</font><font style="vertical-align: inherit;">类型
       </font><font style="vertical-align: inherit;">可以高效地访问JSON（JavaScript Object Notation）文档中的数据。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型提供了这些优点超过存储在字符串列JSON格式的字符串：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          自动验证存储在</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">的JSON文档
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无效的文档会产生错误。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          优化的存储格式。</font><font style="vertical-align: inherit;">存储在</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中的</font><font style="vertical-align: inherit;">JSON文档
           </font><font style="vertical-align: inherit;">被转换为允许快速读取文档元素的内部格式。</font><font style="vertical-align: inherit;">当服务器稍后必须读取以二进制格式存储的JSON值时，不需要从文本表示中解析该值。</font><font style="vertical-align: inherit;">二进制格式的结构使服务器能够直接通过键或数组索引来查找子对象或嵌套值，而无需读取文档中之前或之后的所有值。
</font></font></p></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本讨论</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在monotype中</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">
        通常指定JSON数据</font><font style="vertical-align: inherit;">类型和</font><font style="vertical-align: inherit;">常规字体中的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以指示JSON数据。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      存储</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font><font style="vertical-align: inherit;">所需的空间</font><font style="vertical-align: inherit;">大致与</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font><font style="vertical-align: inherit;">相同</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGTEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">有关更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
       </font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#storage-requirements" title="11.8数据类型存储要求"><font style="vertical-align: inherit;">第11.8节“数据类型存储要求”</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请记住，存储在</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">的任何JSON文档的大小</font><font style="vertical-align: inherit;">都限制为</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值，</font><font style="vertical-align: inherit;">这一点很重要</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（当服务器在内存中操作JSON值时，它可能大于此值;当服务器存储它时，此限制适用。）
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列不能有默认值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      与</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型一起，可以使用一组SQL函数启用对JSON值的操作，例如创建，操作和搜索。</font><font style="vertical-align: inherit;">以下讨论显示这些操作的示例。</font><font style="vertical-align: inherit;">有关各个函数的详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-functions" title="12.16 JSON函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.16节“JSON函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      还可以使用一组用于GeoJSON值操作的空间函数。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#spatial-geojson-functions" title="12.15.11空间GeoJSON函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15.11节“空间GeoJSON函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p>
      <code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，如其他二进制类型的列，不直接索引; </font><font style="vertical-align: inherit;">相反，您可以在生成的列上创建索引，从列中提取标量值
       </font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">详细示例，</font><font style="vertical-align: inherit;">请参阅
       </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#json-column-indirect-index" title="索引生成的列以提供JSON列索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引生成的列以提供JSON列索引</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL优化器还在符合JSON表达式的虚拟列上查找兼容的索引。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL NDB Cluster 7.5（7.5.2和更高版本）支持
       </font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列和MySQL JSON函数，包括在列中生成的</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">上创建索引
       </font><font style="vertical-align: inherit;">，作为无法索引</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的解决方法</font><font style="vertical-align: inherit;">。</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">最多</font><font style="vertical-align: inherit;">支持</font><font style="vertical-align: inherit;">3
       </font><font style="vertical-align: inherit;">列
       </font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      接下来的几节提供了关于创建和操作JSON值的基本信息。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="json-values"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建JSON值</font></font></h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140528091032480"></a><a class="indexterm" name="idm140528091030992"></a><a class="indexterm" name="idm140528091029504"></a><a class="indexterm" name="idm140528091028016"></a><a class="indexterm" name="idm140528091026528"></a><a class="indexterm" name="idm140528091025040"></a><a class="indexterm" name="idm140528091023552"></a><a class="indexterm" name="idm140528091022064"></a><a class="indexterm" name="idm140528091020576"></a><a class="indexterm" name="idm140528091019088"></a><a class="indexterm" name="idm140528091017600"></a><a class="indexterm" name="idm140528091016112"></a><a class="indexterm" name="idm140528091014624"></a><a class="indexterm" name="idm140528091013136"></a><a class="indexterm" name="idm140528091011648"></a><a class="indexterm" name="idm140528091010160"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        JSON数组包含由逗号分隔并包含在内</font></font><code class="literal">[</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字符</font><font style="vertical-align: inherit;">中的值列表</font><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[“abc”，10，null，true，false]
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        JSON对象包含一组用逗号分隔的键值对，并包含在内</font></font><code class="literal">{</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符中：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{“k1”：“value”，“k2”：10}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如示例所示，JSON数组和对象可以包含字符串或数字的标量值，JSON空文本或JSON布尔真或假文字。</font><font style="vertical-align: inherit;">JSON对象中的键必须是字符串。</font><font style="vertical-align: inherit;">时间（日期，时间或日期时间）标量值也是允许的：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[“12：18：29.000000”，“2015-07-29”，“2015-07-29 12：18：29.000000”]
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在JSON数组元素和JSON对象键值中允许嵌套：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[99，{“id”：“HK500”，“费用”：75.99}，[“热”，“冷”]]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{“k1”：“value”，“k2”：[10，20]}</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您还可以从MySQL为此提供的许多函数中获取JSON值（请参阅
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-creation-functions" title="12.16.2创建JSON值的函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.16.2节“创建JSON值的函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），也可以</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">其他类型的值将其</font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-converting-between-types" title="在JSON和非JSON值之间转换"><font style="vertical-align: inherit;">转换</font></a><font style="vertical-align: inherit;">为</font><font style="vertical-align: inherit;">类型
         </font><font style="vertical-align: inherit;">（请参阅
         </font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-converting-between-types" title="在JSON和非JSON值之间转换"><font style="vertical-align: inherit;">JSON之间的转换和非JSON值</font></a><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">接下来的几段描述了MySQL如何处理作为输入提供的JSON值。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>value</code></em> AS
        JSON)</code></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-converting-between-types" title="在JSON和非JSON值之间转换"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><a class="indexterm" name="idm140528090996272"></a><a class="indexterm" name="idm140528090995200"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL中，JSON值被写为字符串。</font><font style="vertical-align: inherit;">MySQL解析在需要JSON值的上下文中使用的任何字符串，并且如果JSON无效，则会产生错误。</font><font style="vertical-align: inherit;">这些上下文包括将值插入到具有</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font><font style="vertical-align: inherit;">的列中，
         </font><font style="vertical-align: inherit;">并将参数传递给需要JSON值的函数（通常显示</font><font style="vertical-align: inherit;">为MySQL JSON函数的文档</font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><em class="replaceable"><code>json_val</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该文档中</font><font style="vertical-align: inherit;">显示
         </font><font style="vertical-align: inherit;">），如以下示例所示：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果值是有效的JSON值，则</font><font style="vertical-align: inherit;">
            尝试将值插入</font><font style="vertical-align: inherit;">列成功，但如果不是，则会失败：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t1 (jdoc JSON);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.20秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t1 VALUES('{"key1": "value1", "key2": "value2"}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t1 VALUES('[1, 2,');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误3140（22032）在第2行：无效的JSON文本：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“无效值。” </font><font style="vertical-align: inherit;">在值（或列）的位置6处'[1,2，'）。</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            为位置</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在位置
            </font></font><em class="replaceable"><code>N</code></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这样的错误消息是基于0的，但应考虑其中一个值问题实际发生的粗指示。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数需要一个JSON参数并尝试将其解析为JSON值。</font><font style="vertical-align: inherit;">如果该值有效，则返回值的JSON类型，否则会产生错误：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE('["a", "b", 1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_TYPE（'[“a”，“b”，1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ARRAY |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE('"hello"');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_TYPE（'“hello”'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">STRING |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE('hello');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误3146（22032）：参数1中的JSON数据的数据类型无效</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数json_type; </font><font style="vertical-align: inherit;">一个JSON字符串或JSON类型是必需的。</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL使用</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集和</font></font><code class="literal">utf8mb4_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">归类</font><font style="vertical-align: inherit;">处理JSON上下文中使用的
         </font><font style="vertical-align: inherit;">字符串
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">其他字符集中的字符串将</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据需要</font><font style="vertical-align: inherit;">进行转换</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（对于</font><font style="vertical-align: inherit;">字符集</font></font><code class="literal">ascii</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集中的</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">，不需要转换，因为</font></font><code class="literal">ascii</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是子集</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        作为使用文字字符串编写JSON值的替代方法，存在用于编写来自组件元素的JSON值的函数。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array"><code class="literal">JSON_ARRAY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受一个（可能为空的）值列表并返回一个包含这些值的JSON数组：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY('a', 1, NOW());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY（'a'，1，NOW（））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，1，“2015-07-27 09：43：47.000000”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font>
</pre><p>
        <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-object"><code class="literal">JSON_OBJECT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 需要一个（可能是空的）键值对列表并返回一个包含这些对的JSON对象：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_OBJECT('key1', 1, 'key2', 'abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_OBJECT（'​​key1'，1，'key2'，'abc'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“key1”：1，“key2”：“abc”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font>
</pre><p>
        <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge"><code class="literal">JSON_MERGE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 需要两个或更多JSON文档并返回组合结果：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE('["a", 1]', '{"key": "value"}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE（'[“a”，1]'，'{“key”：“value”}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，1，{“key”：“value”}] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关合并规则的信息，请参阅
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-normalization" title="JSON值的规范化，合并和自动套接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规范化，合并和自动套装JSON值</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        JSON值可以分配给用户定义的变量：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = JSON_OBJECT('key', 'value');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @j;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@j |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“key”：“value”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        但是，用户定义的变量不能是
         </font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型，所以虽然
         </font></font><code class="literal">@j</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在前面的例子中看起来像一个JSON值并且具有相同的字符集和归类为JSON值，但它</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有
         </font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型。</font><font style="vertical-align: inherit;">相反，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-object"><code class="literal">JSON_OBJECT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分配给变量</font><font style="vertical-align: inherit;">的结果
         </font><font style="vertical-align: inherit;">将转换为字符串。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过转换JSON值生成的字符串具有以下字符集</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和排序规则
         </font></font><code class="literal">utf8mb4_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHARSET(@j), COLLATION(@j);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CHARSET（@j）| </font><font style="vertical-align: inherit;">COLLATION（@j）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">utf8mb4 | </font><font style="vertical-align: inherit;">utf8mb4_bin |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + --------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        由于</font></font><code class="literal">utf8mb4_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是二进制排序规则，所以JSON值的比较区分大小写。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY('x') = JSON_ARRAY('X');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY（'x'）= JSON_ARRAY（'X'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font>
</pre><a class="indexterm" name="idm140528090947696"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        区分大小写也适用于JSON
         </font></font><code class="literal">null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字，它总是必须以小写写成：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_VALID('null'), JSON_VALID('Null'), JSON_VALID('NULL');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + -------------------- + ------- ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_VALID（'null'）| </font><font style="vertical-align: inherit;">JSON_VALID（'Null'）| </font><font style="vertical-align: inherit;">JSON_VALID（'NULL'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + -------------------- + ------- ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + -------------------- + ------- ------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST('null' AS JSON);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CAST（'null'AS JSON）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">null |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST('NULL' AS JSON);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误3141（22032）：参数1中的函数cast_as_json中的JSON文本无效：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“无效值。” </font><font style="vertical-align: inherit;">在'NULL'的位置0。</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的字面JSON的情况下，灵敏度不同于所述SQL的</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字，它可以在任何大小写被写成：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ISNULL(null), ISNULL(Null), ISNULL(NULL);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- -------------- + + + --------------</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ISNULL（null）| </font><font style="vertical-align: inherit;">ISNULL（空）| </font><font style="vertical-align: inherit;">ISNULL（NULL）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- -------------- + + + --------------</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- -------------- + + + --------------</font></font><font></font>
</pre><a class="indexterm" name="idm140528090935232"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有时可能需要或希望将引号字符（</font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）插入到JSON文档中。</font><font style="vertical-align: inherit;">假设你想插入一些包含字符串的JSON对象，这些字符串表示一些关于MySQL的关于MySQL的事实，每个事实都与一个合适的关键字配对成一个使用这里显示的SQL语句创建的表格：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE facts (sentence JSON);</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在这些关键字 - 句子对之中是这一个：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">吉祥物：MySQL吉祥物是名为“Sakila”的海豚。
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        将其作为JSON对象插入</font></font><code class="literal">facts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font><font style="vertical-align: inherit;">一种方法
         </font><font style="vertical-align: inherit;">是使用MySQL
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-object"><code class="literal">JSON_OBJECT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font><font style="vertical-align: inherit;">在这种情况下，您必须使用反斜杠来转义每个引号字符，如下所示：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql </font></font><strong class="userinput"><code>INSERT INTO facts VALUES</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;   </font></font><strong class="userinput"><code>(JSON_OBJECT("mascot", "Our mascot is a dolphin named \"Sakila\"."));</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果将该值作为JSON对象文本插入，则这种方式不起作用，在这种情况下，必须使用双反斜杠转义序列，如下所示：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql </font></font><strong class="userinput"><code>INSERT INTO facts VALUES</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;   </font></font><strong class="userinput"><code>('{"mascot": "Our mascot is a dolphin named \\"Sakila\\"."}');</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用双反斜杠使MySQL不会执行转义序列处理，而是使其将字符串文字传递给存储引擎进行处理。</font><font style="vertical-align: inherit;">以上述任何一种方式插入JSON对象后，通过执行一个简单的操作就可以看到反斜杠存在于JSON列值中</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT sentence FROM facts;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">句子|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“吉祥物”：“我们的吉祥物是名为”Sakila“的海豚。”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要查找这个</font></font><code class="literal">mascot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用作关键字的</font><font style="vertical-align: inherit;">特定句子
         </font><font style="vertical-align: inherit;">，可以使用列路径运算符
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SELECT col  - &gt;“$。mascot”FROM qtest;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">col  - &gt;“$。吉祥物”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“我们的吉祥物是一只名叫”Sakila“的海豚。” </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这使反斜杠和周围的引号完好无损。</font><font style="vertical-align: inherit;">要使用</font></font><code class="literal">mascot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">键</font><font style="vertical-align: inherit;">显示所需的值
         </font><font style="vertical-align: inherit;">，但不包括周围的引号或任何转义符</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-inline-path"><code class="literal">-&gt;&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请</font><font style="vertical-align: inherit;">使用内联路径运算符
         </font><font style="vertical-align: inherit;">，如下所示：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT sentence-&gt;&gt;"$.mascot" FROM facts;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">句子 -  &gt;&gt;“$。吉祥物”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我们的吉祥物是名为“Sakila”的海豚。</font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_backslash_escapes"><code class="literal">NO_BACKSLASH_ESCAPES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">服务器SQL模式，则</font><font style="vertical-align: inherit;">前面的示例不会如所示那样工作
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果设置了此模式，则可以使用单个反斜杠而不是双反斜杠来插入JSON对象文字，并保留反斜杠。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">JSON_OBJECT()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在执行插入操作时</font><font style="vertical-align: inherit;">使用该</font><font style="vertical-align: inherit;">功能并设置了此模式，则必须如下所示替换单引号和双引号：
        </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql </font></font><strong class="userinput"><code>INSERT INTO facts VALUES</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;</font></font><strong class="userinput"><code>(JSON_OBJECT('mascot', 'Our mascot is a dolphin named "Sakila".'));</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-unquote"><code class="literal">JSON_UNQUOTE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此模式对JSON值中的转义字符的影响的更多信息，</font><font style="vertical-align: inherit;">请参阅该</font><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的说明
           </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="json-normalization"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的规范化，合并和自动套接</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090900400"></a><a class="indexterm" name="idm140528090898944"></a><a class="indexterm" name="idm140528090897872"></a><a class="indexterm" name="idm140528090896384"></a><a class="indexterm" name="idm140528090895312"></a><a class="indexterm" name="idm140528090893824"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当一个字符串被分析并被发现是一个有效的JSON文档时，它也被标准化：带有键的文档会​​被丢弃（即使值不同）。</font><font style="vertical-align: inherit;">由以下</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-object"><code class="literal">JSON_OBJECT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">生成的对象值
         </font><font style="vertical-align: inherit;">不包含第二个</font></font><code class="literal">key1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素，因为该键名称出现在值的较早部分：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_OBJECT('key1', 1, 'key2', 'abc', 'key1', 'def');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_OBJECT（'​​key1'，1，'key2'，'abc'，'key1'，'def'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“key1”：1，“key2”：“abc”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个关键的胜利</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复键的处理是不相一致
           </font></font><a class="ulink" href="https://tools.ietf.org/html/rfc7159" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 7159</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是MySQL 5.7中的一个已知问题，它已在MySQL 8.0中修复。</font><font style="vertical-align: inherit;">（错误＃86866，错误＃26369555）
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL还会丢弃原始JSON文档中的键，值或元素之间的额外空白。</font><font style="vertical-align: inherit;">为了使查找效率更高，它还对JSON对象的键进行排序。
        </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您应该意识到，此订购的结果可能会发生变化，并不保证在各版本之间保持一致。</font></font></em></span>
      </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        生成JSON值的MySQL函数（参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-creation-functions" title="12.16.2创建JSON值的函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.16.2节“创建JSON值的函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）总是返回标准化值。
</font></font></p>
<h4><a name="json-merging"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合并JSON值</font></font></h4>
<a class="indexterm" name="idm140528090882736"></a><a class="indexterm" name="idm140528090881664"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在组合多个数组的上下文中，通过将稍后命名的数组连接到第一个数组的末尾，将数组合并成单个数组。</font><font style="vertical-align: inherit;">在以下示例中，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge"><code class="literal">JSON_MERGE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其参数合并到单个数组中：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE('[1, 2]', '["a", "b"]', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE（'[1，2]'，'[“a”，“b”]'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2，“a”，“b”，true，false] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在将值插入JSON列时也会执行规范化，如下所示：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t1 (c1 JSON);</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t1 VALUES</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;      </font></font><strong class="userinput"><code>('{"x": 17, "x": "red"}'),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;     </font></font><strong class="userinput"><code>('{"x": 17, "x": "red", "x": [3, 5, 7]}');</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT c1 FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“x”：17} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“x”：17} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        合并时多个对象产生单个对象。</font><font style="vertical-align: inherit;">如果多个对象具有相同的键，则生成的合并对象中该键的值是包含键值的数组：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE('{"a": 1, "b": 2}', '{"c": 3, "a": 4}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE（'{“a”：1，“b”：2}'，'{“c”：3，“a”：4}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：[1，4]，“b”：2，“c”：3} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在需要数组值的上下文中使用的Nonarray值是自动压缩的：该值被包围，</font></font><code class="literal">[</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        并将</font></font><code class="literal">]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其转换为数组。</font><font style="vertical-align: inherit;">在下面的语句，每个参数被autowrapped作为阵列（</font></font><code class="literal">[1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">[2]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">这些然后合并产生一个结果数组：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE('1', '2');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE（'1'，'2'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过将对象作为数组自动套装并合并两个数组来合并数组和对象值：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE('[10, 20]', '{"a": "x", "b": "y"}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE（'[10，20]'，'{“a”：“x”，“b”：“y”}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[10,20，{“a”：“x”，“b”：“y”}] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="json-paths"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索和修改JSON值</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        JSON路径表达式在JSON文档中选择一个值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        路径表达式对于提取部分或修改JSON文档的函数非常有用，以指定要在该文档中的何处进行操作。</font><font style="vertical-align: inherit;">例如，以下查询从JSON文档中提取具有该</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">键</font><font style="vertical-align: inherit;">的成员的值
         </font><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT('{"id": 14, "name": "Aztalan"}', '$.name');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（'{“id”：14，“name”：“Aztalan”}'，'$ .name'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“Aztalan”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        路径语法使用前导</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符来表示正在考虑的JSON文档，可选地后跟选择器，该选择器依次指示文档的更多特定部分：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            后跟一个键名的句点用给定键指定对象中的成员。</font><font style="vertical-align: inherit;">如果不带引号的名称在路径表达式中不合法（例如，它包含空格），则必须在双引号内指定密钥名称。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">[<em class="replaceable"><code>N</code></em>]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加到一个</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择一个数组的名称在数组中位置的值</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            。</font><font style="vertical-align: inherit;">阵列位置是从零开始的整数。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不选择数组值，</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[0]的计算结果与以下值相同
             </font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SET('"x"', '$[0]', 'a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SET（'“x”'，'$ [0]'，'a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“a”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            路径可以包含</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">.[*]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 评估JSON对象中所有成员的值。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">[*]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 评估为JSON数组中所有元素的值。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal"><em class="replaceable"><code>prefix</code></em>**<em class="replaceable"><code>suffix</code></em></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                评估所有以命名前缀开头并以命名后缀结尾的路径。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            文档中不存在的路径（评估为不存在的数据）评估为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        让我们</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用三个元素来引用这个JSON数组：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[3，{“a”：[5,6]，“b”：10}，[99，100]]
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        然后：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">$[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为</font></font><code class="literal">3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">$[1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为</font></font><code class="literal">{"a": [5, 6],
            "b": 10}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">$[2]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为</font></font><code class="literal">[99,
            100]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">$[3]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （它指的是不存在的第四个数组元素）。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        因为</font></font><code class="literal">$[1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">$[2]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        评估为非标量值，所以它们可以用作选择嵌套值的更具体路径表达式的基础。</font><font style="vertical-align: inherit;">例子：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">$[1].a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为</font></font><code class="literal">[5,
            6]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">$[1].a[1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为
             </font></font><code class="literal">6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">$[1].b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为
             </font></font><code class="literal">10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">$[2][0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为
             </font></font><code class="literal">99</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如前所述，如果在路径表达式中未加引号的键名称不合法，则必须引用命名键的路径组件。</font><font style="vertical-align: inherit;">让我们</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考这个值：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{“一条鱼”：“鲨鱼”，“一只鸟”：“麻雀”}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这两个键都包含一个空格，并且必须加引号：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">$."a fish"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为
             </font></font><code class="literal">shark</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">$."a bird"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估为
             </font></font><code class="literal">sparrow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用通配符的路径评估可以包含多个值的数组：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT('{"a": 1, "b": 2, "c": [3, 4, 5]}', '$.*');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（'{“a”：1，“b”：2，“c”：[3，4，5]}'，'$。*'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2，[3，4，5]] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT('{"a": 1, "b": 2, "c": [3, 4, 5]}', '$.c[*]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（'{“a”：1，“b”：2，“c”：[3，4，5]}'，'$ .c [*]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[3，4，5] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在以下示例中，路径</font></font><code class="literal">$**.b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        评估为多个路径（</font></font><code class="literal">$.a.b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">$.c.b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）并生成匹配路径值的数组：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT('{"a": {"b": 1}, "c": {"b": 2}}', '$**.b');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（'{“a”：{“b”：1}，“c”：{“b”：2}}'，'$ **。b'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL 5.7.9和更高版本中，您可以使用
         </font><font style="vertical-align: inherit;">
        JSON列标识符和JSON路径表达式作为其同义词
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-search-functions" title="12.16.3搜索JSON值的函数"><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">请参见
         </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-search-functions" title="12.16.3搜索JSON值的函数"><font style="vertical-align: inherit;">第12.16.3节“搜索JSON值的函数”</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">另请参见</font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#json-column-indirect-index" title="索引生成的列以提供JSON列索引"><font style="vertical-align: inherit;">为生成的列建立索引以提供JSON列索引</font></a><font style="vertical-align: inherit;">。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal"><em class="replaceable"><code>column</code></em>-&gt;<em class="replaceable"><code>path</code></em></code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-extract"><code class="literal">JSON_EXTRACT(<em class="replaceable"><code>column</code></em>,
        <em class="replaceable"><code>path</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-search-functions" title="12.16.3搜索JSON值的函数"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#json-column-indirect-index" title="索引生成的列以提供JSON列索引"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一些函数使用现有的JSON文档，以某种方式修改它，并返回生成的修改文档。</font><font style="vertical-align: inherit;">路径表达式指示要在文档中进行更改的位置。</font><font style="vertical-align: inherit;">例如，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能各采取JSON文档，再加上描述其中修改文档和使用的值的一个或多个路径/值对。</font><font style="vertical-align: inherit;">这些函数在文档中处理现有和不存在的值方面有所不同。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        考虑这个文件：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SET @j ='[“a”，{“b”：[true，false]}，[10，20]]';
</font></font></pre><p>
        <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 替换存在路径的值并为不存在的路径添加值:.
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SET(@j, '$[1].b[0]', 1, '$[2][2]', 2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SET（@j，'$ [1] .b [0]'，1，'$ [2] [2]'，2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，{“b”：[1，false]}，[10，20，2]] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在这种情况下，路径将</font></font><code class="literal">$[1].b[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择一个现有值（</font></font><code class="literal">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），该值将替换为路径参数（</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">后面的值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">路径</font></font><code class="literal">$[2][2]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不存在，所以相应的值（</font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）被添加到所选的值</font></font><code class="literal">$[2]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p>
        <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 增加了新的值，但并未取代现有值：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_INSERT(@j, '$[1].b[0]', 1, '$[2][2]', 2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_INSERT（@j，'$ [1] .b [0]'，1，'$ [2] [2]'，2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，{“b”：[true，false]}，[10，20，2]] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font>
</pre><p>
        <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 替换现有值并忽略新值：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_REPLACE(@j, '$[1].b[0]', 1, '$[2][2]', 2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_REPLACE（@j，'$ [1] .b [0]'，1，'$ [2] [2]'，2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，{“b”：[1，false]}，[10,20]]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        路径/值对从左到右进行评估。</font><font style="vertical-align: inherit;">通过评估一对产生的文件成为评估下一对的新值。
      </font></font></p><p>
        <code class="literal">JSON_REMOVE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要一个JSON文档和一个或多个指定要从文档中删除的值的路径。</font><font style="vertical-align: inherit;">返回值是原始文档减去文档中存在的路径选择的值：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_REMOVE(@j, '$[2]', '$[1].b[1]', '$[1].b[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_REMOVE（@j，'$ [2]'，'$ [1] .b [1]'，'$ [1] .b [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，{“b”：[true]}] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        路径有这些影响：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">$[2]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><code class="literal">[10, 20]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            并删除它。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            的第一个实例</font></font><code class="literal">$[1].b[1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相匹配
             </font></font><code class="literal">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code class="literal">b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素并将其删除。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            第二个实例</font></font><code class="literal">$[1].b[1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有匹配：该元素已被删除，该路径不再存在，并且没有任何作用。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="json-comparison"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的比较和排序</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        JSON值可以使用进行比较
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than"><code class="literal">&lt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than"><code class="literal">&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">!=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        运营商。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        JSON值尚不支持以下比较运算符和函数：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal">BETWEEN</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_in"><code class="literal">IN()</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_greatest"><code class="literal">GREATEST()</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST()</code></a>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        刚刚列出的比较运算符和函数的解决方法是将JSON值转换为本机MySQL数值或字符串数​​据类型，以便它们具有一致的非JSON标量类型。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        JSON值的比较发生在两个层次上。</font><font style="vertical-align: inherit;">第一级比较基于比较值的JSON类型。</font><font style="vertical-align: inherit;">如果类型不同，则比较结果仅由哪种类型具有较高的优先级来确定。</font><font style="vertical-align: inherit;">如果这两个值具有相同的JSON类型，则会使用特定于类型的规则进行第二级比较。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下列表显示了JSON类型的优先级，从最高优先级到最低优先级。</font><font style="vertical-align: inherit;">（类型名称是</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        函数</font><font style="vertical-align: inherit;">返回的</font><font style="vertical-align: inherit;">类型。）在一行上显示的类型具有相同的优先级。</font><font style="vertical-align: inherit;">具有列表中前面列出的JSON类型的任何值比列表中稍后列出的具有JSON类型的任何值都大。
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLOB</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BIT</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不透明</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
约会时间</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
时间</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日期</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
布尔</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ARRAY</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
串</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INTEGER，DOUBLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空值</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于具有相同优先级的JSON值，比较规则是特定于类型的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">BLOB</code>
          </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个值</font><font style="vertical-align: inherit;">
            的第一个</font><font style="vertical-align: inherit;">字节进行比较，其中</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是较短值中的字节数。</font><font style="vertical-align: inherit;">如果第一个
            </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个值的前几个字节相同，则较短的值在较长的值之前排序。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">BIT</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            同样的规则</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">OPAQUE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            同样的规则</font></font><code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><code class="literal">OPAQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是未被分类为其他类型之一的值。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">DATETIME</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表示较早时间点的值在表示较晚时间点的值之前排序。</font><font style="vertical-align: inherit;">如果两个值最初</font><font style="vertical-align: inherit;">
            分别</font><font style="vertical-align: inherit;">来自MySQL
             </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，如果它们表示相同的时间点，则它们是相等的。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">TIME</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            两个时间值中较小的一个在较大的一个之前排序。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">DATE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            较早日期是在较近日期之前订购的。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">ARRAY</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果两个JSON数组的长度相同，并且数组中相应位置的值相等，则两个JSON数组相等。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果数组不相等，它们的顺序由第一个位置中存在差异的元素决定。</font><font style="vertical-align: inherit;">首先排序在该位置具有较小值的数组。</font><font style="vertical-align: inherit;">如果较短数组的所有值都等于较长数组中的对应值，则较短的数组首先排序。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            例：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[] &lt;[“a”] &lt;[“ab”] &lt;[“ab”，“cd”，“ef”] &lt;[“ab”，“ef”]
</font></font></pre></li><li class="listitem"><p>
            <code class="literal">BOOLEAN</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            JSON假文字小于JSON真文字。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">OBJECT</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果两个JSON对象具有相同的一组键，并且每个键在两个对象中具有相同的值，则两个JSON对象相等。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            例：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{“a”：1，“b”：2} = {“b”：2，“a”：1}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            两个不相等的对象的顺序是未指定的，但是是确定性的。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">STRING</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            字符串按字面顺序排列在</font><font style="vertical-align: inherit;">被比较的两个字符串</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示</font><font style="vertical-align: inherit;">的第一个
             </font><font style="vertical-align: inherit;">字节上
             </font><font style="vertical-align: inherit;">，其中</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较短的字符串的长度。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个字符串</font><font style="vertical-align: inherit;">的第一个
             </font><font style="vertical-align: inherit;">字节相同，则较短的字符串被认为小于较长的字符串。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            例：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“a”&lt;“ab”&lt;“b”&lt;“bc”
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此排序等同于排序的SQL字符串排序</font></font><code class="literal">utf8mb4_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因为
            </font></font><code class="literal">utf8mb4_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是二进制排序规则，所以JSON值的比较区分大小写：
          </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“A”&lt;“a”
</font></font></pre></li><li class="listitem"><p>
            <code class="literal">INTEGER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">DOUBLE</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            JSON值可以包含精确值数字和近似值数字。</font><font style="vertical-align: inherit;">有关这些类型数字的一般讨论，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#number-literals" title="9.1.2数字文字"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.1.2节“数字文字”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2表达式评估中的类型转换"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.2节“表达式评估中的类型转换”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
            中讨论了比较原生MySQL数值类型</font><font style="vertical-align: inherit;">的规则，但用于比较JSON值中的数字的规则有所不同：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                在</font><font style="vertical-align: inherit;">分别</font><font style="vertical-align: inherit;">使用本地MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                 </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字类型的</font><font style="vertical-align: inherit;">两列之间进行比较时</font><font style="vertical-align: inherit;">，已知所有比较都涉及整数和双精度，因此整数转换为所有行的double精度。</font><font style="vertical-align: inherit;">也就是说，精确值数字被转换为近似值数字。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                另一方面，如果查询比较包含数字的两个JSON列，则无法预先知道数字是整数还是双精度。</font><font style="vertical-align: inherit;">为了在所有行中提供最一致的行为，MySQL将近似值数字转换为精确值数字。</font><font style="vertical-align: inherit;">由此产生的排序是一致的，不会损失精确值数字的精度。</font><font style="vertical-align: inherit;">例如，给定标量9223372036854775805,9223372036854775806,9223372036854775807和9.223372036854776e18，顺序如下：
              </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9223372036854775805 &lt;9223372036854775806 &lt;9223372036854775807</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;9.223372036854776e18 = 9223372036854776000 &lt;9223372036854776001</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果JSON比较使用非JSON数字比较规则，则可能会发生不一致的排序。</font><font style="vertical-align: inherit;">通常的数字MySQL比较规则产生这些排序：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                整数比较：
              </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9223372036854775805 &lt;9223372036854775806 &lt;9223372036854775807
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                （未定义为9.223372036854776e18）
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                双重比较：
              </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9223372036854775805 = 9223372036854775806 = 9223372036854775807 = 9.223372036854776e18
</font></font></pre></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了比较任何JSON值与SQL </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果如下</font></font><code class="literal">UNKNOWN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了比较JSON和非JSON值，根据下表中的规则将非JSON值转换为JSON，然后按照前面所述比较值。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="json-converting-between-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在JSON和非JSON值之间转换</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        下表提供了在JSON值和其他类型值之间进行转换时MySQL遵循的规则摘要：
</font></font></p>
<div class="oracle-all">
<a name="json-conversion-rules"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表11.3 JSON转换规则</font></font></b></p>
<div class="oracle-all-contents">
<table summary="Conversion rules for the JSON data type"><colgroup><col width="20%"><col width="40%"><col width="40%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他类型</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CAST（其他类型AS JSON）</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CAST（JSON作为其他类型）</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不用找了</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不用找了</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTF8字符类型（</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ascii</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该字符串被解析为JSON值。</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值被串行化成一个</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串。</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他字符类型</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他字符编码被隐式转换
               </font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为utf8字符类型所描述的并进行处理。</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值被序列化为一个</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串，然后转换为其他字符编码。</font><font style="vertical-align: inherit;">结果可能没有意义。</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">NULL</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON类型</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值。</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不适用。</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何类型</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何值通过调用转换为JSON文档
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asgeojson"><code class="literal">ST_AsGeoJSON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非法经营。</font><font style="vertical-align: inherit;">解决方法：将结果传递
               </font><font style="vertical-align: inherit;">给
               </font><font style="vertical-align: inherit;">。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>json_val</code></em>
              AS CHAR)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromgeojson"><code class="literal">ST_GeomFromGeoJSON()</code></a><font style="vertical-align: inherit;"></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有其他类型</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成由单个标量值组成的JSON文档。</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果JSON文档由目标类型的单个标量值组成，并且标量值可以转换为目标类型，则成功。</font><font style="vertical-align: inherit;">否则，返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              并产生警告。</font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="oracle-all-break"><p>
        <code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于JSON值则按照以下原则工作：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            标量JSON值的排序使用与前面讨论中相同的规则。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于升序排序，SQL </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在所有JSON值之前</font><font style="vertical-align: inherit;">排序，</font><font style="vertical-align: inherit;">包括JSON空文本; </font><font style="vertical-align: inherit;">对于降序排序，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有JSON值（包括JSON空文本）之后的</font><font style="vertical-align: inherit;">SQL </font><font style="vertical-align: inherit;">顺序。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于JSON值的排序键由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值绑定
             </font><font style="vertical-align: inherit;">，因此只有在第一个</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节比较为相等</font><font style="vertical-align: inherit;">后才会有所不同
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            目前不支持排序非标量值，并发生警告。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于排序，将JSON标量转换为其他本地MySQL类型可能会有所帮助。</font><font style="vertical-align: inherit;">例如，如果名为列的列
         </font></font><code class="literal">jdoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含具有由</font></font><code class="literal">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">键和非负值</font><font style="vertical-align: inherit;">组成的成员的JSON对象</font><font style="vertical-align: inherit;">，请使用此表达式按</font></font><code class="literal">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值</font><font style="vertical-align: inherit;">排序</font><font style="vertical-align: inherit;">：
      </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDER BY CAST（JSON_EXTRACT（jdoc，'$ .id'）AS UNSIGNED）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果碰巧有一个生成的列被定义为使用与之相同的表达式</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，那么MySQL优化器会识别并考虑为查询执行计划使用索引。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#generated-column-index-optimizations" title="8.3.10优化器使用生成的列索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.3.10节“优化器使用生成的列索引”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="json-aggregation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的聚合</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于JSON值的聚合，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        与其他数据类型一样</font><font style="vertical-align: inherit;">，SQL </font><font style="vertical-align: inherit;">值将被忽略。</font><font style="vertical-align: inherit;">非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被转换为数字类型和聚合，除
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">转换为数字应该为数值标量的JSON值产生有意义的结果，尽管（取决于值）可能会发生截断和精度损失。</font><font style="vertical-align: inherit;">转换为其他JSON值的数量可能不会产生有意义的结果。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="data-type-defaults"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.7数据类型默认值</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090619472"></a><a class="indexterm" name="idm140528090618432"></a><a class="indexterm" name="idm140528090616944"></a><a class="indexterm" name="idm140528090615872"></a><a class="indexterm" name="idm140528090614384"></a><a class="indexterm" name="idm140528090613312"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      数据类型规范中</font><font style="vertical-align: inherit;">
      的</font><font style="vertical-align: inherit;">子句指示列的默认值。</font><font style="vertical-align: inherit;">有一个例外，默认值必须是常数; </font><font style="vertical-align: inherit;">它不能是一个函数或表达式。</font><font style="vertical-align: inherit;">这意味着，例如，您不能将日期列的默认值设置为诸如</font><font style="vertical-align: inherit;">or
       </font><font style="vertical-align: inherit;">之类的函数的值
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例外情况是您可以指定</font><font style="vertical-align: inherit;">
      为</font><font style="vertical-align: inherit;">和
       </font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的默认值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
       </font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization" title="11.3.5 TIMESTAMP和DATETIME的自动初始化和更新"><font style="vertical-align: inherit;">第11.3.5节“自动初始化和更新TIMESTAMP和DATETIME”</font></a><font style="vertical-align: inherit;">。
    </font></font><code class="literal">DEFAULT <em class="replaceable"><code>value</code></em></code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#timestamp-initialization" title="11.3.5 TIMESTAMP和DATETIME的自动初始化和更新"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p>
      <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GEOMETRY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列不能被赋予一个默认值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果列定义不包含明确的
       </font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，MySQL将按如下方式确定默认值：
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果该列可以</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为一个值，则该列用明确的</font></font><code class="literal">DEFAULT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      子句</font><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果该列不能</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为值，MySQL将定义没有明确</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">的列
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例外：如果列被定义为一部分</font></font><code class="literal">PRIMARY KEY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但不是显式的</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，MySQL将它创建为
       </font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列（因为</font></font><code class="literal">PRIMARY
      KEY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列必须是</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">在MySQL 5.7.3之前，该列还被分配了一个</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用隐式默认值</font><font style="vertical-align: inherit;">的
       </font><font style="vertical-align: inherit;">子句。</font><font style="vertical-align: inherit;">为了防止出现这种情况，请</font></font><code class="literal">NOT
      NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任何</font></font><code class="literal">PRIMARY
      KEY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的定义中</font><font style="vertical-align: inherit;">加入明确</font><font style="vertical-align: inherit;">的内容</font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有显式</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列中的</font><font style="vertical-align: inherit;">数据输入</font><font style="vertical-align: inherit;">，如果一个
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#replace" title="13.2.8 REPLACE语法"><code class="literal">REPLACE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句不包含列的值，或者</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      语句将列设置为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则MySQL根据当时有效的SQL模式处理列：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果启用严格的SQL模式，则事务表发生错误，语句将回滚。</font><font style="vertical-align: inherit;">对于非事务性表，会发生错误，但如果这种情况发生在多行语句的第二行或后续行中，则前面的行将被插入。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果严格模式未启用，则MySQL将列设置为列数据类型的隐式默认值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      假设一个表</font></font><code class="literal">t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的定义如下：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t（i INT NOT NULL）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在这种情况下，</font></font><code class="literal">i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有明确的默认值，所以在严格模式下，以下每个语句都会产生错误，并且不插入行。</font><font style="vertical-align: inherit;">当不使用严格模式时，只有第三个语句会产生错误; </font><font style="vertical-align: inherit;">为前两个语句插入隐式默认值，但第三个语句因为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_default"><code class="literal">DEFAULT(i)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法生成值而</font><font style="vertical-align: inherit;">失败
       </font><font style="vertical-align: inherit;">：
    </font></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INSERT INTO t VALUES（）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入t值（默认）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入t值（默认（i））;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于给定的表，您可以使用该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-create-table" title="13.7.5.10 SHOW CREATE TABLE语法"><code class="literal">SHOW
      CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句查看哪些列具有显式</font></font><code class="literal">DEFAULT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      隐式默认值定义如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于数字类型，缺省值是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，除了对于用</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">声明的整数或浮点类型</font><font style="vertical-align: inherit;">，缺省值是序列中的下一个值。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于日期和时间类型以外的其他日期和时间类型
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，默认</font><font style="vertical-align: inherit;">值为该类型</font><font style="vertical-align: inherit;">的相应</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">对于这也是真实的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          启用了系统变量（参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节，“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">否则，对于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的第一</font><font style="vertical-align: inherit;">列，默认值是当前的日期和时间。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-types" title="11.3日期和时间类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3节“日期和时间类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于除以外的字符串类型
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，默认值是空字符串。</font><font style="vertical-align: inherit;">对于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，默认值是第一个枚举值。
</font></font></p></li></ul>
</div>
<a class="indexterm" name="idm140528090555504"></a><p>
      <code class="literal">SERIAL DEFAULT VALUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在整数列的定义中是一个别名</font></font><code class="literal">NOT NULL AUTO_INCREMENT
      UNIQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="storage-requirements"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.8数据类型存储要求</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090551264"></a><a class="indexterm" name="idm140528090549808"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#data-types-storage-reqs-innodb" title="InnoDB表存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB表存储要求</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#data-types-storage-reqs-ndb" title="NDB表格存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDB表格存储要求</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#data-types-storage-reqs-numeric" title="数字类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字类型存储要求</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#data-types-storage-reqs-date-time" title="日期和时间类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间类型存储要求</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#data-types-storage-reqs-strings" title="字符串类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串类型存储要求</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#data-types-storage-reqs-gis" title="空间类型存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间类型存储要求</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/data-types.html#data-types-storage-reqs-json" title="JSON存储要求"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON存储要求</font></font></a></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      磁盘上表格数据的存储要求取决于几个因素。</font><font style="vertical-align: inherit;">不同的存储引擎表示数据类型并以不同方式存储原始数据 </font><font style="vertical-align: inherit;">表数据可能会被压缩，无论是列还是整行，都会使表或列的存储需求计算复杂化。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      尽管磁盘上的存储布局有所不同，但通信和交换表行信息的内部MySQL API使用适用于所有存储引擎的一致数据结构。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本部分包含有关MySQL支持的每种数据类型的存储要求的准则和信息，包括使用固定大小表示形式表示数据类型的存储引擎的内部格式和大小。</font><font style="vertical-align: inherit;">信息按类别或存储引擎列出。
    </font></font></p><a class="indexterm" name="idm140528090538320"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      即使存储引擎能够支持更大的行，表的内部表示的最大行大小也是65,535字节。</font><font style="vertical-align: inherit;">这个数字不包括
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，这只对这个大小贡献了9到12个字节。</font><font style="vertical-align: inherit;">对于
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据，信息内部存储在与行缓冲区不同的内存区域中。</font><font style="vertical-align: inherit;">不同的存储引擎以不同的方式处理这些数据的分配和存储，根据它们用于处理相应类型的方法。</font><font style="vertical-align: inherit;">有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/storage-engines.html" title="第15章备用存储引擎"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第15章，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备用存储引擎</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#column-count-limit" title="C.10.4表列数和行大小的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第C.10.4节“表列数和行大小限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="data-types-storage-reqs-innodb"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB表存储要求</font></font></h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140528090528496"></a><a class="indexterm" name="idm140528090527008"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关</font></font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-physical-record" title="14.8.1.2 InnoDB表的物理行结构"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储要求的信息</font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-physical-record" title="14.8.1.2 InnoDB表的物理行结构"><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-physical-record" title="14.8.1.2 InnoDB表的物理行结构"><font style="vertical-align: inherit;">第14.8.1.2节“InnoDB表的物理行结构”</font></a></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="data-types-storage-reqs-ndb"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDB表格存储要求</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090522384"></a><a class="indexterm" name="idm140528090520896"></a>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表使用
           </font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节对齐</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">所有的
           </font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据存储都是以4个字节的倍数完成的。</font><font style="vertical-align: inherit;">因此，通常需要15个字节的列值在</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">需要16个字节
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，在
           </font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">MEDIUMINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INTEGER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）列类型均需要每记录4个字节存储由于取向因子。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每</font><font style="vertical-align: inherit;">
          列需要</font><font style="vertical-align: inherit;">一些存储空间。</font><font style="vertical-align: inherit;">尽管单个
           </font><font style="vertical-align: inherit;">列
           </font><span class="emphasis"><em><font style="vertical-align: inherit;">不是</font></em></span><font style="vertical-align: inherit;"> 4字节对齐的，但</font><font style="vertical-align: inherit;">对于</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">需要的前1位到32位，每行保留4个字节（32位）</font><font style="vertical-align: inherit;">，然后</font><font style="vertical-align: inherit;">对于33到64位</font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">保留4个字节（
           </font><font style="vertical-align: inherit;">依此类推）。
        </font></font><code class="literal">BIT(<em class="replaceable"><code>M</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#bit-type" title="11.2.4位值类型 -  BIT"><code class="literal">BIT</code></a><font style="vertical-align: inherit;"></font><span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"></font><code class="literal">BIT</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          虽然a </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身不需要任何存储空间，但</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果表定义包含定义为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最多32 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的列</font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">则每行保留4个字节</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（如果NDB簇表定义为32 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列以上至64 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，则每行保留8字节。）
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        每个使用</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎的</font><font style="vertical-align: inherit;">表都</font><font style="vertical-align: inherit;">需要一个主键; </font><font style="vertical-align: inherit;">如果您没有定义主键，</font><font style="vertical-align: inherit;">则会创建</font><font style="vertical-align: inherit;">一个</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐藏</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主键
         </font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个隐藏的主键占用每个表记录31-35个字节。
      </font></font></p><a class="indexterm" name="idm140528090492192"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="21.4.29 ndb_size.pl  -  NDBCLUSTER大小需求估计器"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ndb_size.pl</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perl脚本来估计</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储需求。</font><font style="vertical-align: inherit;">它连接到当前的MySQL（而不是NDB集群）数据库，并创建一份报告，说明数据库使用</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎时</font><font style="vertical-align: inherit;">需要多少空间</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="21.4.29 ndb_size.pl  -  NDBCLUSTER大小需求估计器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><span class="command"><strong><font style="vertical-align: inherit;"></font></strong></span><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="21.4.29 ndb_size.pl  -  NDBCLUSTER大小需求估计器"><font style="vertical-align: inherit;">第21.4.29节“ </font></a><a class="xref" href="/mysql-5.7-google-zh/mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="21.4.29 ndb_size.pl  -  NDBCLUSTER大小需求估计器"><span class="command"><strong><font style="vertical-align: inherit;">ndb_size.pl</font></strong></span></a><a class="xref" href="/mysql-5.7-google-zh/mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="21.4.29 ndb_size.pl  -  NDBCLUSTER大小需求估计器"><font style="vertical-align: inherit;"> -  NDBCLUSTER大小需求估计器”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="data-types-storage-reqs-numeric"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字类型存储要求</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090484752"></a><a class="indexterm" name="idm140528090483264"></a>
<div class="informaltable">
<table summary="Storage required for numeric data types."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要存储</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2个字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">MEDIUMINT</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INTEGER</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8个字节</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">FLOAT(<em class="replaceable"><code>p</code></em>)</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果0 &lt;= </font></font><em class="replaceable"><code>p</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;= 24 </font><font style="vertical-align: inherit;">则为4个</font><font style="vertical-align: inherit;">字节，如果25 &lt;= </font></font><em class="replaceable"><code>p</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;= 53 </font><font style="vertical-align: inherit;">则为8个字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">DOUBLE [PRECISION]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">REAL</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8个字节</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">NUMERIC(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而变化; </font><font style="vertical-align: inherit;">请参阅以下讨论</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">BIT(<em class="replaceable"><code>M</code></em>)</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大约（</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+7）/ 8个字节</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对值</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">NUMERIC</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）列使用包9个十进制（基体10）的数字成四个字节的二进制格式来表示。</font><font style="vertical-align: inherit;">整数和每个值的小数部分的存储是分开确定的。</font><font style="vertical-align: inherit;">九位数的每个倍数需要四个字节，</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">剩余</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        数字需要四个字节的一小部分。</font><font style="vertical-align: inherit;">超出数字所需的存储空间由下表给出。
</font></font></p>
<div class="informaltable">
<table summary="Storage required by excess/leftover digits in DECIMAL values."><colgroup><col width="25%"><col width="25%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">剩余数字</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节数</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">五</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
</tr></tbody></table>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="data-types-storage-reqs-date-time"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间类型存储要求</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090406384"></a><a class="indexterm" name="idm140528090404896"></a><a class="indexterm" name="idm140528090403408"></a><a class="indexterm" name="idm140528090401920"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，MySQL 5.6.4之前创建的表所需的存储与5.6.4之后创建的表不同。</font><font style="vertical-align: inherit;">这是由于5.6.4的更改导致这些类型有小数部分，这需要0到3个字节。
</font></font></p>
<div class="informaltable">
<table summary="Storage required for date and time data types before MySQL 5.6.4 and as of MySQL 5.6.4."><colgroup><col width="20%"><col width="40%"><col width="40%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在MySQL 5.6.4之前需要存储</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.6.4开始需要存储</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个字节</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个字节</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个字节</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个字节+小数秒存储</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8个字节</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5字节+小数秒存储</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4字节</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4个字节+小数秒存储</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从MySQL 5.6.4开始，存储
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#year" title="11.3.3年份类型"><code class="literal">YEAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保持不变。</font><font style="vertical-align: inherit;">然而
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以不同方式表示。</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更高效地打包，非分数部分需要5个而不是8个字节，并且所有三个部分都有一个小数部分，需要0到3个字节，具体取决于存储值的小数秒精度。
</font></font></p>
<div class="informaltable">
<table summary="Required storage for fractional seconds precision."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小数秒精度</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要存储</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0字节</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1，2</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个字节</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3，4</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2个字节</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5，6</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个字节</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME(0)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME(2)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME(6)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别用3，4，5，和6个字节。</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME(0)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是相同的并且需要相同的存储。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关时间值的内部表示的详细信息，请参阅</font></font><a class="ulink" href="http://dev.mysql.com/doc/internals/en/algorithms.html" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL内部：重要算法和结构</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="data-types-storage-reqs-strings"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串类型存储要求</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090333568"></a><a class="indexterm" name="idm140528090332080"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在下表中，</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示非二进制字符串类型的字符和二进制字符串类型的字节的已声明列长度。
        </font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示给定字符串值的实际字节长度。
</font></font></p>
<div class="informaltable">
<table summary="Storage required for string types."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要存储</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><code class="literal">CHAR(<em class="replaceable"><code>M</code></em>)</code></td>
            <td><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× </font></font><em class="replaceable"><code>w</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节，0 </font><font style="vertical-align: inherit;">255，其中</font><font style="vertical-align: inherit;">是字符集中最大长度字符所需的字节数。</font><font style="vertical-align: inherit;">有关</font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-physical-record" title="14.8.1.2 InnoDB表的物理行结构"><font style="vertical-align: inherit;">表的</font></a><font style="vertical-align: inherit;">数据类型存储要求的</font><font style="vertical-align: inherit;">信息</font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-physical-record" title="14.8.1.2 InnoDB表的物理行结构"><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">请参见
               </font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-physical-record" title="14.8.1.2 InnoDB表的物理行结构"><font style="vertical-align: inherit;">第14.8.1.2节“InnoDB表的物理行结构”</font></a><font style="vertical-align: inherit;">。</font></font><code class="literal">&lt;= <em class="replaceable"><code>M</code></em>
              &lt;=</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>w</code></em><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-physical-record" title="14.8.1.2 InnoDB表的物理行结构"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">BINARY(<em class="replaceable"><code>M</code></em>)</code></td>
            <td><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节，0 </font><font style="vertical-align: inherit;">255</font></font><code class="literal">&lt;=
              <em class="replaceable"><code>M</code></em> &lt;=</code><font style="vertical-align: inherit;"></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">VARCHAR(<em class="replaceable"><code>M</code></em>)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">VARBINARY(<em class="replaceable"><code>M</code></em>)</code></td>
            <td><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果列值需要0-255个字节，</font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则为1个字节;如果值可能需要超过255个字节，则为2个字节</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TINYBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TINYTEXT</code></a></td>
            <td><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 1个字节，其中
               </font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></sup></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a></td>
            <td><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 2个字节，其中
               </font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></sup></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMTEXT</code></a></td>
            <td><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 3个字节，其中
               </font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></sup></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGTEXT</code></a></td>
            <td><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 4个字节，其中
               </font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup></td>
          </tr><tr>
            <td scope="row"><code class="literal">ENUM('<em class="replaceable"><code>value1</code></em>','<em class="replaceable"><code>value2</code></em>',...)</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1或2个字节，具体取决于枚举值的数量（最多65,535个值）</font></font></td>
          </tr><tr>
            <td scope="row"><code class="literal">SET('<em class="replaceable"><code>value1</code></em>','<em class="replaceable"><code>value2</code></em>',...)</code></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,2,3,4或8个字节，取决于设置成员的数量（最多64个成员）</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可变长度字符串类型使用长度前缀加数据存储。</font><font style="vertical-align: inherit;">根据数据类型长度前缀需要1到4个字节，前缀的值是
         </font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（字符串的字节长度）。</font><font style="vertical-align: inherit;">例如，存储一个
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMTEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值需要
         </font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节来存储值加上三个字节来存储值的长度。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了计算用于存储特定的字节数
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的值时，必须考虑到用于该列是否值包含多字节字符的字符集。</font><font style="vertical-align: inherit;">特别是，在使用</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unicode字符集时，您必须记住并非所有字符都使用相同的字节数。</font></font><code class="literal">utf8mb3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字符集可能分别需要每个字符多达三个和四个字节。</font><font style="vertical-align: inherit;">有关用于不同类别</font></font><code class="literal">utf8mb3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">的存储细分</font><font style="vertical-align: inherit;">，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-unicode" title="10.9 Unicode支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.9节“Unicode支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><a class="indexterm" name="idm140528090264736"></a><a class="indexterm" name="idm140528090263248"></a><a class="indexterm" name="idm140528090261760"></a><p>
        <a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型是可变长度类型。</font><font style="vertical-align: inherit;">对于每个存储要求都取决于这些因素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列值的实际长度
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该列的最大可能长度
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            用于该列的字符集，因为某些字符集包含多字节字符
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，一</font></font><code class="literal">VARCHAR(255)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列可以容纳最大长度为255个字符的字符串。</font><font style="vertical-align: inherit;">假设该列使用</font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集（每个字符一个字节），则实际需要的存储空间是字符串（</font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的长度</font><font style="vertical-align: inherit;">，加上一个字节来记录字符串的长度。</font><font style="vertical-align: inherit;">对于字符串
         </font></font><code class="literal">'abcd'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em class="replaceable"><code>L</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是4，存储要求是5个字节。</font><font style="vertical-align: inherit;">如果相同的列被声明为使用</font></font><code class="literal">ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">双字节字符集，则存储要求为10个字节：长度</font></font><code class="literal">'abcd'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为8个字节，并且该列需要两个字节来存储长度，因为最大长度大于255（高达510字节）。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以存储在a </font><font style="vertical-align: inherit;">或
         </font><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">
        的有效最大</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数</font><font style="vertical-align: inherit;">受所有列共享的最大行大小65,535字节的限制。</font><font style="vertical-align: inherit;">用于</font><font style="vertical-align: inherit;">存储多字节字符列，的有效最大数量</font><span class="emphasis"><em><font style="vertical-align: inherit;">的字符</font></em></span><font style="vertical-align: inherit;">较小。</font><font style="vertical-align: inherit;">例如，
         </font><font style="vertical-align: inherit;">字符每个字符最多可能需要三个字节，因此</font><font style="vertical-align: inherit;">
        使用</font><font style="vertical-align: inherit;">字符集</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">最多可以声明为21,844个字符。</font><font style="vertical-align: inherit;">参见
         </font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#column-count-limit" title="C.10.4表列数和行大小的限制"><font style="vertical-align: inherit;">第C.10.4节“表列数量和行数限制”</font></a><font style="vertical-align: inherit;">。
      </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"></font><span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font><code class="literal">utf8mb3</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"></font><code class="literal">utf8mb3</code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/restrictions.html#column-count-limit" title="C.10.4表列数和行大小的限制"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p>
        <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将长度大于或等于768字节的固定长度字段编码为可变长度字段，可将其存储在页外。</font><font style="vertical-align: inherit;">例如，
         </font></font><code class="literal">CHAR(255)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果字符集的最大字节长度大于3，则列可能会超过768个字节</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎支持可变宽度的列。</font><font style="vertical-align: inherit;">这意味着</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDB Cluster表</font><font style="vertical-align: inherit;">中的
         </font><font style="vertical-align: inherit;">列需要与任何其他存储引擎相同的存储量，除了这些值是4字节对齐的。</font><font style="vertical-align: inherit;">因此，</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">字符集</font></font><code class="literal">'abcd'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储在
         </font></font><code class="literal">VARCHAR(50)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中的
         </font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串需要8个字节（而不是</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">相同列值的5个字节
         </font><font style="vertical-align: inherit;">）。
      </font></font></p><p>
        <a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/mysql-cluster.html" title="第21章MySQL NDB集群7.5和NDB集群7.6"><code class="literal">NDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储引擎中</font><font style="vertical-align: inherit;">不同地实现列</font><font style="vertical-align: inherit;">，其中列中的每行
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由两个分开的部分组成。</font><font style="vertical-align: inherit;">其中一个是固定大小（256字节），实际上存储在原始表中。</font><font style="vertical-align: inherit;">另一个由超过256个字节的数据组成，存储在一个隐藏表中。</font><font style="vertical-align: inherit;">第二个表中的行总是有2000个字节。</font><font style="vertical-align: inherit;">这意味着
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
         </font></font><em class="replaceable"><code>size</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;= 256（其中</font></font><em class="replaceable"><code>size</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表行的大小），列的大小为</font><font style="vertical-align: inherit;">256
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，大小为256 ++ </font></font><em class="replaceable"><code>size</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2000  - （</font></font><em class="replaceable"><code>size</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-  256）％2000）。
      </font></font></p><a class="indexterm" name="idm140528090219584"></a><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">
        的大小</font><font style="vertical-align: inherit;">由不同的枚举值的数量决定。</font><font style="vertical-align: inherit;">一个字节用于最多255个可能值的枚举。</font><font style="vertical-align: inherit;">两个字节用于具有介于256和65,535个可能值之间的枚举。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.4.4节“ENUM类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><a class="indexterm" name="idm140528090215520"></a><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">
        的大小</font><font style="vertical-align: inherit;">由不同集合成员的数量决定。</font><font style="vertical-align: inherit;">如果设置的大小是</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该对象占用
         </font><font style="vertical-align: inherit;">字节，四舍五入为1,2,3,4或8个字节。</font><font style="vertical-align: inherit;">A
         </font><font style="vertical-align: inherit;">最多可以有64个成员。</font><font style="vertical-align: inherit;">参见</font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><font style="vertical-align: inherit;">第11.4.5节“SE​​T类型”</font></a><font style="vertical-align: inherit;">。
</font></font><code class="literal">(<em class="replaceable"><code>N</code></em>+7)/8</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="data-types-storage-reqs-gis"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间类型存储要求</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090207696"></a><a class="indexterm" name="idm140528090206208"></a><a class="indexterm" name="idm140528090204720"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL使用4个字节存储几何值，以指示SRID，后面跟随值的WKB表示。</font><font style="vertical-align: inherit;">该
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回值存储所需的空间字节数。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关空间值的WKB和内部存储格式的说明，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-data-formats" title="11.5.3支持的空间数据格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5.3节“支持的空间数据格式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="data-types-storage-reqs-json"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON存储要求</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通常，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的存储需求
         </font><font style="vertical-align: inherit;">与a </font></font><code class="literal">LONGBLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">LONGTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">大致相同</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">也就是说，JSON文档占用的空间与存储在其中一种类型的列中的文档字符串表示大致相同。</font><font style="vertical-align: inherit;">但是，二进制编码会对JSON文档中存储的各个值产生开销，包括查找所需的元数据和字典。</font><font style="vertical-align: inherit;">例如，存储在JSON文档中的字符串需要4到10个字节的附加存储空间，具体取决于字符串的长度以及存储它的对象或数组的大小。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        另外，MySQL强制限制存储在</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">的任何JSON文档的大小</font><font style="vertical-align: inherit;">，使其不能大于值的大小
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="choosing-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.9为列选择正确的类型</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090191056"></a><a class="indexterm" name="idm140528090189600"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为了获得最佳存储效果，您应该尝试在所有情况下使用最精确的存储类型。</font><font style="vertical-align: inherit;">例如，如果整数列用于从</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至
       </font><font style="vertical-align: inherit;">的范围内的值</font></font><code class="literal">99999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MEDIUMINT UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则是最佳类型。</font><font style="vertical-align: inherit;">在代表所有必需值的类型中，此类型使用最少的存储量。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      所有基本计算（</font></font><code class="literal">+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><code class="literal">/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）与</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      列与65（十进制）（基体10）位的精度进行。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#numeric-type-overview" title="11.1.1数字类型概述"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.1.1节“数字类型概述”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果精度不是太重要，或者速度是最高优先级，那么</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型可能就足够了。</font><font style="vertical-align: inherit;">为了高精度，你总是可以转换成存储在a中的一个定点类型
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这使您可以使用64位整数进行所有计算，然后根据需要将结果转换回浮点值。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="other-vendor-data-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.10使用来自其他数据库引擎的数据类型</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528090175616"></a><a class="indexterm" name="idm140528090174160"></a><a class="indexterm" name="idm140528090172672"></a><a class="indexterm" name="idm140528090171184"></a><a class="indexterm" name="idm140528090169696"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为了便于使用其他供应商为SQL实现编写的代码，MySQL按照下表所示映射数据类型。</font><font style="vertical-align: inherit;">这些映射使得将其他数据库系统的表定义导入到MySQL更容易。
</font></font></p>
<div class="informaltable">
<table summary="Mapping of MySQL data types to data types from other vendors."><colgroup><col width="35%"><col width="55%"></colgroup><thead><tr>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他供应商类型</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL类型</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BOOL</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BOOLEAN</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a></td>
        </tr><tr>
          <td scope="row"><code class="literal">CHARACTER VARYING(<em class="replaceable"><code>M</code></em>)</code></td>
          <td><code class="literal">VARCHAR(<em class="replaceable"><code>M</code></em>)</code></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">FIXED</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT4</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT8</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT1</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT2</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT3</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">MEDIUMINT</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT4</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a></td>
        </tr><tr>
          <td scope="row"><code class="literal">INT8</code></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a></td>
        </tr><tr>
          <td scope="row"><code class="literal">LONG VARBINARY</code></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMBLOB</code></a></td>
        </tr><tr>
          <td scope="row"><code class="literal">LONG VARCHAR</code></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMTEXT</code></a></td>
        </tr><tr>
          <td scope="row"><code class="literal">LONG</code></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">MEDIUMTEXT</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">MIDDLEINT</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">MEDIUMINT</code></a></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">NUMERIC</code></a></td>
          <td><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      数据类型映射发生在表创建时，之后丢弃原始类型规范。</font><font style="vertical-align: inherit;">如果您使用其他供应商使用的类型创建表并发出
       </font><font style="vertical-align: inherit;">
      语句，MySQL会使用等效的MySQL类型报告表结构。</font><font style="vertical-align: inherit;">例如：
    </font></font><code class="literal">DESCRIBE <em class="replaceable"><code>tbl_name</code></em></code><font style="vertical-align: inherit;"></font></p><pre class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (a BOOL, b FLOAT8, c LONG VARCHAR, d NUMERIC);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>DESCRIBE t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + ------ + ------ + --------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">字段| </font><font style="vertical-align: inherit;">类型| </font><font style="vertical-align: inherit;">空| </font><font style="vertical-align: inherit;">Key | </font><font style="vertical-align: inherit;">默认| </font><font style="vertical-align: inherit;">额外|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + ------ + ------ + --------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a | </font><font style="vertical-align: inherit;">tinyint（1）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">b | </font><font style="vertical-align: inherit;">双| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c | </font><font style="vertical-align: inherit;">mediumtext | </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">d | </font><font style="vertical-align: inherit;">十进制（10,0）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + ------ + ------ + --------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4行（0.01秒）</font></font><font></font>
</pre>
</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tbody><tr>
<td width="40%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/charset.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a></td>
<td width="20%" align="center"><a accesskey="u" href="/mysql-5.7-google-zh/data-types.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向上</font></font></a></td>
<td width="40%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/functions.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10章字符集，排序规则，Unicode</font></font></td>
<td width="20%" align="center"><a accesskey="h" href="/mysql-5.7-google-zh/index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">家</font></font></a></td>
<td width="40%" align="right" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12章函数和操作符</font></font></td>
</tr>
</tbody></table>
</div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./images/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>