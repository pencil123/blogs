<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>第12章函数和操作符</title>
<link rel="stylesheet" href="./images/mvl.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2">
<link rel="start" href="/mysql-5.7-google-zh/index.html" title="{书名}">
<link rel="up" href="/mysql-5.7-google-zh/functions.html" title="">
<link rel="prev" href="/mysql-5.7-google-zh/data-types.html" title="第11章数据类型">
<link rel="next" href="/mysql-5.7-google-zh/sql-syntax.html" title="第13章SQL语句语法">
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./images/translateelement.css"></head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tbody><tr>
<th colspan="3" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12章函数和操作符</font></font></th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/data-types.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a>&nbsp;</td>
<th width="60%" align="center"></th>
<td width="20%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/sql-syntax.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
</tbody></table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12章函数和操作符</font></font></h1>

</div>

</div>

</div>
<div class="toc">
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></b></p><dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#func-op-summary-ref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.1功能和操作员参考</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#type-conversion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2表达式评估中的类型转换</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#non-typed-operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3运营商</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#operator-precedence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.1运营商优先权</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#comparison-operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.2比较函数和操作符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#logical-operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.3逻辑运算符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#assignment-operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.4赋值运算符</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#control-flow-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.4控制流程功能</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#string-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5字符串函数</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#string-comparison-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.1字符串比较函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#regexp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.2正则表达式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#string-functions-charset"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.3字符集和函数结果整理</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#numeric-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6数字函数和操作符</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#arithmetic-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6.1算术运算符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#mathematical-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6.2数学函数</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#date-and-time-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.7日期和时间函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#mysql-calendar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.8 MySQL使用什么日历？</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-search"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9全文搜索功能</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-natural-language"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.1自然语言全文检索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-boolean"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.2布尔全文搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-query-expansion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.3带查询扩展的全文搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.4全文停用词</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-restrictions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.5全文限制</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-fine-tuning"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.6微调MySQL全文搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#full-text-adding-collation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.7添加全文索引的排序规则</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-search-ngram"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.8 ngram全文解析器</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-search-mecab"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.9 MeCab全文解析器插件</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#cast-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.10 Cast功能和操作符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#xml-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.11 XML函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#bit-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.12位功能和操作符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#encryption-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.13加密和压缩函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#information-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.14信息功能</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-analysis-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15空间分析函数</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-function-reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.1空间函数参考</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-function-argument-handling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.2通过空间函数处理参数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-wkt-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.3从WKT值创建几何值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-wkb-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.4从WKB值创建几何值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-mysql-specific-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.5创建几何值的MySQL专用函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-format-conversion-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.6几何格式转换函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-property-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7几何特性函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-operator-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.8空间操作员功能</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-relation-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.9测试几何对象之间空间关系的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-geohash-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.10空间地理散列函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-geojson-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.11空间GeoJSON函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-convenience-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.12空间便利功能</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16 JSON函数</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-function-reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.1 JSON函数参考</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-creation-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.2创建JSON值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-search-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.3搜索JSON值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-modification-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.4修改JSON值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-attribute-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.5返回JSON值属性的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-utility-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.6 JSON实用程序函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-path-syntax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.7 JSON路径语法</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gtid-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.17用于全局事务ID的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18 MySQL企业加密函数</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-installation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.1企业加密安装</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.2企业加密使用和示例</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-function-reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.3企业加密函数参考</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.4企业加密功能说明</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-functions-and-modifiers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19聚合（GROUP BY）函数</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.1聚合（GROUP BY）功能描述</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-modifiers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.2 GROUP BY修饰符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-handling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.3 MySQL处理GROUP BY</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-functional-dependence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.4检测功能依赖</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#miscellaneous-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.20杂项功能</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21精度数学</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-numbers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.1数值的类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-decimal-characteristics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.2 DECIMAL数据类型特征</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-expressions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.3表达式处理</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-rounding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.4舍入行为</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.5精确数学例子</font></font></a></span></dt></dl></dd></dl>
</div>
<a class="indexterm" name="idm140528090090592"></a><a class="indexterm" name="idm140528090089088"></a><a class="indexterm" name="idm140528090088016"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    表达式可以在几个点中使用
     </font></font><a class="link" href="/mysql-5.7-google-zh/glossary.html#glos_sql" title="SQL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，比如在
     </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句
     </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句时，在
     </font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个条款
     </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
     </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#delete" title="13.2.2 DELETE语法"><code class="literal">DELETE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
     </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">陈述，或
     </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    陈述。</font><font style="vertical-align: inherit;">可以使用文字值，列值，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置函数，存储函数，用户定义的函数和运算符</font><font style="vertical-align: inherit;">来编写表达式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本章介绍允许在MySQL中编写表达式的函数和运算符。</font><font style="vertical-align: inherit;">有关编写存储函数和用户定义函数的说明，请参见
     </font></font><a class="xref" href="/mysql-5.7-google-zh/stored-programs-views.html#stored-routines" title="23.2使用存储例程（过程和函数）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第23.2节“使用存储例程（过程和函数）”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
    </font></font><a class="xref" href="/mysql-5.7-google-zh/extending-mysql.html#adding-functions" title="28.4为MySQL添加新功能"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第28.4节“向MySQL添加新功能”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">描述服务器如何解释对不同类型函数的引用的规则</font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#function-resolution" title="9.2.4函数名称解析和解析"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
     </font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#function-resolution" title="9.2.4 Function Name Parsing and Resolution"><font style="vertical-align: inherit;">第9.2.4节“函数名称解析和解析”</font></a><font style="vertical-align: inherit;">。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非特定函数或运算符的文档中另有说明，否则</font><font style="vertical-align: inherit;">
    包含的表达式</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总是会生成一个</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      默认情况下，函数名和它后面的括号之间不能有空格。</font><font style="vertical-align: inherit;">这有助于MySQL解析器区分函数调用和对具有与函数相同名称的表或列的引用。</font><font style="vertical-align: inherit;">但是，函数参数周围的空格是允许的。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    您可以通过使用该</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#option_mysqld_sql-mode"><code class="option">--sql-mode=IGNORE_SPACE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">启动它，让MySQL服务器接受函数名称后面的空格
     </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（请参见
     </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）各个客户端程序可以通过使用</font></font><code class="literal">CLIENT_IGNORE_SPACE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    选项来</font><font style="vertical-align: inherit;">请求此行为</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-real-connect" title="27.8.7.54 mysql_real_connect（）"><code class="literal">mysql_real_connect()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无论哪种情况，所有功能名称都会成为保留字。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    为了简洁起见，本章中的大多数示例都</font><font style="vertical-align: inherit;">以缩略形式</font><font style="vertical-align: inherit;">显示</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font><font style="vertical-align: inherit;">的输出</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">而不是以这种格式显示示例：
  </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MOD(29,9);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">mod（29,9）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    改用这种格式：
  </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MOD(29,9);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font>
</pre>
<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="func-op-summary-ref"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.1功能和操作员参考</font></font></h2>
</div>
</div>
</div>

<div class="table">
<a name="idm140528090059344"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.1函数和操作符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists all functions and operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_abs"><code class="literal">ABS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回绝对值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_acos"><code class="literal">ACOS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反余弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_adddate"><code class="literal">ADDDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将时间值（间隔）添加到日期值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_addtime"><code class="literal">ADDTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      添加时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用AES解密
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用AES加密
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">&amp;&amp;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑AND
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      抑制ONLY_FULL_GROUP_BY值拒绝
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_area"><code class="literal">Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon或MultiPolygon区域
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsBinary()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKB
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ascii"><code class="literal">ASCII()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最左边字符的数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asin"><code class="literal">ASIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反正弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-equal"><code class="literal">=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      赋值（作为</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      语句的</font><font style="vertical-align: inherit;">一部分
       </font><font style="vertical-align: inherit;">，或作为语句中的</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句的
       </font><font style="vertical-align: inherit;">一部分</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      分配一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKT
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-decrypt"><code class="literal">ASYMMETRIC_DECRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用私钥或公钥解密密文
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-derive"><code class="literal">ASYMMETRIC_DERIVE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从非对称密钥导出对称密钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用私钥或公钥加密明文
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-sign"><code class="literal">ASYMMETRIC_SIGN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从摘要生成签名
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-verify"><code class="literal">ASYMMETRIC_VERIFY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      验证签名是否与摘要匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan"><code class="literal">ATAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反正切
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan2"><code class="literal">ATAN2()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ATAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回两个参数的反正切值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的平均值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      重复执行一个表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal">BETWEEN ... AND ...</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否在一个范围内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bin"><code class="literal">BIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个包含数字二进制表示的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将字符串转换为二进制字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位返回AND
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回设置的位数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-length"><code class="literal">BIT_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以位为单位返回参数的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位返回OR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回按位异或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位与
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-invert"><code class="literal">~</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位反转
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-or"><code class="literal">|</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-xor"><code class="literal">^</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位XOR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_buffer"><code class="literal">Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回距离几何体给定距离内的点的几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      案例操作员
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将某个值作为某种类型进行投射
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceil"><code class="literal">CEIL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不小于参数的最小整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceiling"><code class="literal">CEILING()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不小于参数的最小整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_centroid"><code class="literal">Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将质心作为一个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为每个传递的整数返回字符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数中的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      CHAR_LENGTH（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_charset"><code class="literal">CHARSET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的字符集
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_coalesce"><code class="literal">COALESCE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一个非NULL参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_coercibility"><code class="literal">COERCIBILITY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串参数的排序规则值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_collation"><code class="literal">COLLATION()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串参数的排序规则
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_compress"><code class="literal">COMPRESS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将结果作为二进制字符串返回
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回串联的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回与分隔符连接
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回连接的连接ID（线程ID）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_contains"><code class="literal">Contains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否包含另一个几何体的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在不同的数字库之间转换数字
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将某个值作为某种类型进行投射
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从一个时区转换到另一个时区
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convexhull"><code class="literal">ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的凸包
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cos"><code class="literal">COS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cot"><code class="literal">COT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余切
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回返回的行数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count-distinct"><code class="literal">COUNT(DISTINCT)</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回许多不同值的计数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_crc32"><code class="literal">CRC32()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算循环冗余校验值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建私钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-pub-key"><code class="literal">CREATE_ASYMMETRIC_PUB_KEY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建公钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      生成共享的DH秘密
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-digest"><code class="literal">CREATE_DIGEST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从字符串生成摘要
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_crosses"><code class="literal">Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否跨越另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curdate"><code class="literal">CURDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_DATE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      同义词CURDATE（）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_TIME</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      CURTIME（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_TIMESTAMP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOW（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_USER</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      经过验证的用户名和主机名
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curtime"><code class="literal">CURTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回默认（当前）数据库名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date"><code class="literal">DATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取日期或日期时间表达式的日期部分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将时间值（间隔）添加到日期值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按指定格式化日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从日期中减去时间值（时间间隔）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_datediff"><code class="literal">DATEDIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减去两个日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_day"><code class="literal">DAY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      DAYOFMONTH（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayname"><code class="literal">DAYNAME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回工作日的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回月份的日期（0-31）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofweek"><code class="literal">DAYOFWEEK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的周日指数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一年中的一天（1-366）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_decode"><code class="literal">DECODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.2）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解码使用ENCODE（）加密的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_default"><code class="literal">DEFAULT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回表格列的默认值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_degrees"><code class="literal">DEGREES()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将弧度转换为度数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解密一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加密一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dimension"><code class="literal">Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何尺寸
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_disjoint"><code class="literal">Disjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否不相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体与另一个几何体的距离
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_div"><code class="literal">DIV</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      整数划分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_divide"><code class="literal">/</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      司运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_elt"><code class="literal">ELT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回索引号处的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.2）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      编码一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加密一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_endpoint"><code class="literal">EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的结束点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_envelope"><code class="literal">Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      平等的运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      与运算符相等的NULL安全
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_equals"><code class="literal">Equals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exp"><code class="literal">EXP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提高权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_export-set"><code class="literal">EXPORT_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个字符串，使得对于值位中设置的每一位，您都会得到一个字符串，并且对于每个未设置的位，都会得到一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exteriorring"><code class="literal">ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的外部环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extract"><code class="literal">EXTRACT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取日期的一部分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用XPath符号从XML字符串提取值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_field"><code class="literal">FIELD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回后续参数中第一个参数的索引（位置）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第二个参数中第一个参数的索引位置
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_floor"><code class="literal">FLOOR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不大于参数的最大整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_format"><code class="literal">FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回格式化为指定小数位数的数字
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于带有LIMIT子句的SELECT，将返回的行数不存在LIMIT子句
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解码为base-64字符串并返回结果
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-days"><code class="literal">FROM_DAYS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将日期编号转换为日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将Unix时间戳格式化为日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeomCollFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeomCollFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrycollection"><code class="literal">GeometryCollection()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何构造几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometryn"><code class="literal">GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何集合中返回第N个几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrytype"><code class="literal">GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何类型的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeomFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回日期格式字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      获取一个命名锁
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_glength"><code class="literal">GLength()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than"><code class="literal">&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      大于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      大于或等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_greatest"><code class="literal">GREATEST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最大的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回连接的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_gtid-subset"><code class="literal">GTID_SUBSET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果子集中的所有GTID都处于设置状态，则返回true; </font><font style="vertical-align: inherit;">否则为false。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_gtid-subtract"><code class="literal">GTID_SUBTRACT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回集合中不在子集中的所有GTID。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回十进制或字符串值的十六进制表示形式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hour"><code class="literal">HOUR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取小时
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果/ else构造
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ifnull"><code class="literal">IFNULL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      空if / else构造
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_in"><code class="literal">IN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否在一组值中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回IP地址的数字值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从数值中返回IP地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回IPv6地址的数字值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从数值中返回IPv6地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_insert"><code class="literal">INSERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在指定的位置插入一个子字符串，直到指定的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_instr"><code class="literal">INSTR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一次出现的子串的索引
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_interiorringn"><code class="literal">InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的第N个内环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_intersects"><code class="literal">Intersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何体的MBR是否相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_interval"><code class="literal">INTERVAL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回小于第一个参数的参数的索引
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is"><code class="literal">IS</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      根据布尔值测试一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      指定的锁是否空闲
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否为IPv4地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4-compat"><code class="literal">IS_IPV4_COMPAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否是与IPv4兼容的地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4-mapped"><code class="literal">IS_IPV4_MAPPED()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否为IPv4映射地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv6"><code class="literal">IS_IPV6()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否为IPv6地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not"><code class="literal">IS NOT</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      根据布尔值测试一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not-null"><code class="literal">IS NOT NULL</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOT NULL值测试
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NULL值测试
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      指定的锁是否在使用中; </font><font style="vertical-align: inherit;">返回连接标识符如果为true
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isclosed"><code class="literal">IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否封闭和简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isempty"><code class="literal">IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      占位符功能
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isnull"><code class="literal">ISNULL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      测试参数是否为NULL
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_issimple"><code class="literal">IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-append"><code class="literal">JSON_APPEND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.9）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据追加到JSON文档
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array"><code class="literal">JSON_ARRAY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建JSON数组
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-append"><code class="literal">JSON_ARRAY_APPEND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据追加到JSON文档
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-insert"><code class="literal">JSON_ARRAY_INSERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      插入到JSON数组中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-arrayagg"><code class="literal">JSON_ARRAYAGG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将结果集作为单个JSON数组返回
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      评估路径后从JSON列返回值; </font><font style="vertical-align: inherit;">相当于JSON_EXTRACT（）。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains"><code class="literal">JSON_CONTAINS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档是否包含路径上的特定对象
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains-path"><code class="literal">JSON_CONTAINS_PATH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档是否包含路径上的任何数据
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-depth"><code class="literal">JSON_DEPTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档的最大深度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-extract"><code class="literal">JSON_EXTRACT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从JSON文档返回数据
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-inline-path"><code class="literal">-&gt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在评估路径并取消引用结果后，从JSON列返回值; </font><font style="vertical-align: inherit;">相当于JSON_UNQUOTE（JSON_EXTRACT（））。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据插入到JSON文档中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-keys"><code class="literal">JSON_KEYS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档中的键数组
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-length"><code class="literal">JSON_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档中的元素数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge"><code class="literal">JSON_MERGE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.22）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      合并JSON文档，保留重复的键。</font><font style="vertical-align: inherit;">已弃用的JSON_MERGE_PRESERVE（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-patch"><code class="literal">JSON_MERGE_PATCH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      合并JSON文档，替换重复键值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-preserve"><code class="literal">JSON_MERGE_PRESERVE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      合并JSON文档，保留重复的键
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-object"><code class="literal">JSON_OBJECT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建JSON对象
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-objectagg"><code class="literal">JSON_OBJECTAGG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将结果集作为单个JSON对象返回
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-pretty"><code class="literal">JSON_PRETTY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以可读格式打印JSON文档，每个数组元素或对象成员打印在新行上，相对于其父项缩进两个空格。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-quote"><code class="literal">JSON_QUOTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      引用JSON文档
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-remove"><code class="literal">JSON_REMOVE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从JSON文档中删除数据
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在JSON文档中替换值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-search"><code class="literal">JSON_SEARCH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档中的值的路径
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据插入到JSON文档中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-storage-size"><code class="literal">JSON_STORAGE_SIZE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      用于存储JSON文档的二进制表示的空间; </font><font style="vertical-align: inherit;">对于JSON列，是在插入文档时使用的空间，在任何部分更新之前
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON值的类型
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-unquote"><code class="literal">JSON_UNQUOTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      取消引用JSON值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-valid"><code class="literal">JSON_VALID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON值是否有效
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-day"><code class="literal">LAST_DAY</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的月份的最后一天
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      最后一个INSERT的AUTOINCREMENT列的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lcase"><code class="literal">LCASE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LOWER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最小的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_left"><code class="literal">LEFT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回指定的最左边的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      左移
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以字节为单位返回字符串的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than"><code class="literal">&lt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      少于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      少于或等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      简单的模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linestring"><code class="literal">LineString()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从Point值构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ln"><code class="literal">LN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的自然对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加载指定的文件
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">LOCALTIME</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOW（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">LOCALTIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOW（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_locate"><code class="literal">LOCATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一次出现的子串的位置
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一个参数的自然对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log10"><code class="literal">LOG10()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的基数为10的对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log2"><code class="literal">LOG2()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的基数为2的对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以小写形式返回参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lpad"><code class="literal">LPAD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串参数，用指定的字符串左填充
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ltrim"><code class="literal">LTRIM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      删除前导空格
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_make-set"><code class="literal">MAKE_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一组逗号分隔的字符串，这些字符串具有相应的位集
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_makedate"><code class="literal">MAKEDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从年份和年份创建日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_maketime"><code class="literal">MAKETIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建时间从小时，分钟，秒
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      阻塞，直到从机读取并应用所有更新到指定的位置
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      执行全文搜索
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最大值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否包含另一个几何体的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcoveredby"><code class="literal">MBRCoveredBy()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个MBR是否被另一个覆盖
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcovers"><code class="literal">MBRCovers()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个MBR是否覆盖另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否不相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequal"><code class="literal">MBREqual()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrintersects"><code class="literal">MBRIntersects()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何体的MBR是否相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbroverlaps"><code class="literal">MBROverlaps()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的MBR是否重叠
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrtouches"><code class="literal">MBRTouches()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否接触
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否在另一个几何体的MBR内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算MD5校验和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_microsecond"><code class="literal">MICROSECOND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从参数中返回微秒
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mid"><code class="literal">MID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从指定的位置开始返回一个子串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最小值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减号操作员
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_minute"><code class="literal">MINUTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从参数中返回分钟
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MLineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MLineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">MOD</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      模运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从过去的日期中返回月份
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_monthname"><code class="literal">MONTHNAME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回月份的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MPointFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiPoint
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MPointFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建多点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MPolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MPolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_multilinestring"><code class="literal">MultiLineString()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString值构造MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_multipoint"><code class="literal">MultiPoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从点值构造多点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_multipolygon"><code class="literal">MultiPolygon()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从Polygon值构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使列具有给定的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not"><code class="literal">NOT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">!</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定价值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-between"><code class="literal">NOT BETWEEN ... AND ...</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否不在一个值范围内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">!=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">&lt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      不等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_not-in"><code class="literal">NOT IN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否不在一组值中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定简单模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定REGEXP
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前日期和时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_nullif"><code class="literal">NULLIF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果expr1 = expr2，则返回NULL
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numgeometries"><code class="literal">NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何集合中几何的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numinteriorrings"><code class="literal">NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回多边形内环的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numpoints"><code class="literal">NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString中的点数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_oct"><code class="literal">OCT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个包含数字八进制表示的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_octet-length"><code class="literal">OCTET_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LENGTH（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回PASSWORD的4.1之前版本的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">OR</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ord"><code class="literal">ORD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数最左边字符的字符代码
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_overlaps"><code class="literal">Overlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的MBR是否重叠
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算并返回一个密码字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_period-add"><code class="literal">PERIOD_ADD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为一个年份添加句点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_period-diff"><code class="literal">PERIOD_DIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回期间之间的月数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pi"><code class="literal">PI()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回pi的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_point"><code class="literal">Point()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从坐标构造点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromtext"><code class="literal">PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      WKT构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromwkb"><code class="literal">PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointn"><code class="literal">PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString返回第N个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polygon"><code class="literal">Polygon()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString参数构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_position"><code class="literal">POSITION()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LOCATE（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pow"><code class="literal">POW()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将所提出的论据返回给定的权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_power"><code class="literal">POWER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将所提出的论据返回给定的权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/optimization.html#procedure-analyse" title="8.4.2.4使用PROCEDURE ANALYZE"><code class="literal">PROCEDURE ANALYSE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.18）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      分析查询的结果
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_quarter"><code class="literal">QUARTER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从日期参数中返回季度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_quote"><code class="literal">QUOTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      退出在SQL语句中使用的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_radians"><code class="literal">RADIANS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将参数转换为弧度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个随机的浮点值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_random-bytes"><code class="literal">RANDOM_BYTES()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个随机字节向量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-all-locks"><code class="literal">RELEASE_ALL_LOCKS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      释放所有当前命名的锁
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      释放指定的锁
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_repeat"><code class="literal">REPEAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      重复指定次数的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_replace"><code class="literal">REPLACE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      替换指定字符串的出现
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_reverse"><code class="literal">REVERSE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      反转字符串中的字符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_right"><code class="literal">RIGHT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回指定的最右边的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      右移
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      围绕论点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      更新的行数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rpad"><code class="literal">RPAD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      追加字符串指定的次数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rtrim"><code class="literal">RTRIM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      删除尾随空格
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_schema"><code class="literal">SCHEMA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      DATABASE（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将秒转换为'HH：MM：SS'格式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_second"><code class="literal">SECOND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第二个（0-59）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      USER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">SHA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算SHA-1 160位校验和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算SHA-2校验和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sign"><code class="literal">SIGN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的符号
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sin"><code class="literal">SIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的正弦值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sleep"><code class="literal">SLEEP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      睡几秒钟
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个soundex字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_sounds-like"><code class="literal">SOUNDS LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      比较声音
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_space"><code class="literal">SPACE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回指定数量的空格字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sqrt"><code class="literal">SQRT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的平方根
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_srid"><code class="literal">SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的空间参考系统ID
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon或MultiPolygon区域
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_AsWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKB
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asgeojson"><code class="literal">ST_AsGeoJSON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何生成GeoJSON对象
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_AsWKT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKT
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回距离几何体给定距离内的点的几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer-strategy"><code class="literal">ST_Buffer_Strategy()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为ST_Buffer（）生成策略选项
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-centroid"><code class="literal">ST_Centroid()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将质心作为一个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-contains"><code class="literal">ST_Contains()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否包含另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-convexhull"><code class="literal">ST_ConvexHull()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的凸包
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-crosses"><code class="literal">ST_Crosses()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否跨越另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-difference"><code class="literal">ST_Difference()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何形状的返回点设置差异
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-dimension"><code class="literal">ST_Dimension()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何尺寸
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-disjoint"><code class="literal">ST_Disjoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否与另一个几何体不相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体与另一个几何体的距离
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance-sphere"><code class="literal">ST_Distance_Sphere()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何体之间地球上的最小距离
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的结束点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-equals"><code class="literal">ST_Equals()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否与另一个几何相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的外部环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geohash"><code class="literal">ST_GeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      生成一个geohash值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ST_GeometryCollectionFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ST_GeomCollFromTxt()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeomCollFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_GeometryCollectionFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何集合中返回第N个几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometrytype"><code class="literal">ST_GeometryType()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何类型的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromgeojson"><code class="literal">ST_GeomFromGeoJSON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从GeoJSON对象生成几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_GeometryFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_GeometryFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的第N个内环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-intersection"><code class="literal">ST_Intersection()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的返回点集交集
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-intersects"><code class="literal">ST_Intersects()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否封闭和简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isempty"><code class="literal">ST_IsEmpty()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      占位符功能
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isvalid"><code class="literal">ST_IsValid()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否有效
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-latfromgeohash"><code class="literal">ST_LatFromGeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从geohash值返回纬度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_LineStringFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_LineStringFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-longfromgeohash"><code class="literal">ST_LongFromGeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从geohash值返回经度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-makeenvelope"><code class="literal">ST_MakeEnvelope()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      围绕两点的矩形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiLineStringFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiLineStringFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPointFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiPoint
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPointFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建多点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPolygonFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPolygonFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numgeometries"><code class="literal">ST_NumGeometries()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何集合中几何的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRing()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_NumInteriorRings()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回多边形内环的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numpoints"><code class="literal">ST_NumPoints()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString中的点数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-overlaps"><code class="literal">ST_Overlaps()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否与另一个重叠
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromgeohash"><code class="literal">ST_PointFromGeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将geohash值转换为POINT值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromtext"><code class="literal">ST_PointFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      WKT构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromwkb"><code class="literal">ST_PointFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString返回第N个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_PolygonFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_PolygonFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-simplify"><code class="literal">ST_Simplify()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回简化的几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-srid"><code class="literal">ST_SRID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的空间参考系统ID
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的起始点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-symdifference"><code class="literal">ST_SymDifference()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回点设置两个几何的对称差异
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-touches"><code class="literal">ST_Touches()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否碰到另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-union"><code class="literal">ST_Union()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的返回点集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-validate"><code class="literal">ST_Validate()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回验证的几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-within"><code class="literal">ST_Within()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否在另一个内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的X坐标
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-y"><code class="literal">ST_Y()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的Y坐标
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_startpoint"><code class="literal">StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的起始点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_std"><code class="literal">STD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev"><code class="literal">STDDEV()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回样本标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将字符串转换为日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      比较两个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_subdate"><code class="literal">SUBDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      用三个参数调用DATE_SUB（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substr"><code class="literal">SUBSTR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按照指定返回子字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按照指定返回子字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在指定的分隔符出现次数之前，从字符串中返回一个子字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_subtime"><code class="literal">SUBTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减去时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      退还款项
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回函数执行的时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      USER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_tan"><code class="literal">TAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的正切值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_time"><code class="literal">TIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取传递的表达式的时间部分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_time-format"><code class="literal">TIME_FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      格式为时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_time-to-sec"><code class="literal">TIME_TO_SEC()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回转换为秒的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timediff"><code class="literal">TIMEDIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减去时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      乘法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestamp"><code class="literal">TIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用单个参数，该函数返回日期或日期时间表达式; </font><font style="vertical-align: inherit;">有两个参数，即参数的总和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将时间间隔添加到日期时间表达式中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从日期时间表达式中减去一个时间间隔
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回转换为base-64字符串的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回转换为天的日期参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从Year 0开始，将日期或日期时间参数转换为秒数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_touches"><code class="literal">Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否碰到另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_trim"><code class="literal">TRIM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      删除前导和尾随空格
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_truncate"><code class="literal">TRUNCATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      截断到指定的小数位数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ucase"><code class="literal">UCASE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      UPPER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_unary-minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      改变参数的符号
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解压缩压缩的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uncompressed-length"><code class="literal">UNCOMPRESSED_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      压缩前返回字符串的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个包含数字的十六进制表示的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个Unix时间戳
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回替换XML片段
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      转换为大写
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      客户端提供的用户名和主机名
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前的UTC日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-time"><code class="literal">UTC_TIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前的UTC时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前的UTC日期和时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回通用唯一标识符（UUID）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个整数值的通用标识符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      确定密码的强度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_values"><code class="literal">VALUES()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      定义INSERT期间要使用的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准方差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回样本方差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_variance"><code class="literal">VARIANCE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准方差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_version"><code class="literal">VERSION()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个表示MySQL服务器版本的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_wait-for-executed-gtid-set"><code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      等待给定的GTID在从机上执行。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_wait-until-sql-thread-after-gtids"><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      等待给定的GTID在从机上执行。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回周数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回周日指数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回日期的日历周（1-53）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串的权重字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_within"><code class="literal">Within()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否在另一个几何体的MBR内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_x"><code class="literal">X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的X坐标
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_xor"><code class="literal">XOR</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑XOR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_y"><code class="literal">Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的Y坐标
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_year"><code class="literal">YEAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回年份
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一年和一周
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="type-conversion"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2表达式评估中的类型转换</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528088534784"></a><a class="indexterm" name="idm140528088533744"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当运算符与不同类型的操作数一起使用时，会发生类型转换以使操作数兼容。</font><font style="vertical-align: inherit;">一些转换隐式发生。</font><font style="vertical-align: inherit;">例如，MySQL会根据需要自动将数字转换为字符串，反之亦然。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1+'1';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT(2,' test');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2测试'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      也可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">将数字转换为字符串</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">转换发生隐式与该
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数，因为它期望字符串参数。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 38.8, CAST(38.8 AS CHAR);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 38.8，'38.8'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 38.8, CONCAT(38.8);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 38.8，'38.8'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关隐式数字到字符串转换的字符集以及适用于</font></font><code class="literal">CREATE TABLE ... SELECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      语句的</font><font style="vertical-align: inherit;">修改后的规则的信息，请参阅本节后面的内容</font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下规则描述了比较操作的转换方式：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果一个或两个参数都是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，比较的结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，除了</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-safe
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          等号比较运算符。</font><font style="vertical-align: inherit;">因为</font></font><code class="literal">NULL &lt;=&gt;
          NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果是真的。</font><font style="vertical-align: inherit;">不需要转换。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果比较操作中的两个参数都是字符串，则将它们作为字符串进行比较。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果两个参数都是整数，则将它们作为整数进行比较。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果不与数字进行比较，则将十六进制值视为二进制字符串。
        </font></font></p></li><li class="listitem"><p>
          <a class="indexterm" name="idm140528088513744"></a>

          <a class="indexterm" name="idm140528088512672"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

          如果其中一个参数是一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或一
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，而另一个参数是一个常量，则常量在执行比较之前转换为时间戳。</font><font style="vertical-align: inherit;">这样做对ODBC更友好。</font><font style="vertical-align: inherit;">这不是为了参数而完成的
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_in"><code class="literal">IN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了安全起见，在比较时总是使用完整的日期时间，日期或时间字符串。</font><font style="vertical-align: inherit;">例如，要在使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal">BETWEEN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期或时间值</font><font style="vertical-align: inherit;">时获得最佳结果
           </font><font style="vertical-align: inherit;">，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将值显式转换为所需的数据类型。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一个或多个表中的单行子查询不被视为常量。</font><font style="vertical-align: inherit;">例如，如果子查询返回要与某个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值</font><font style="vertical-align: inherit;">进行比较的整数</font><font style="vertical-align: inherit;">，则比较将以两个整数完成。</font><font style="vertical-align: inherit;">整数不会转换为时间值。</font><font style="vertical-align: inherit;">要将操作数作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">进行比较
           </font><font style="vertical-align: inherit;">，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式将子查询值转换为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果其中一个参数是十进制值，则比较取决于另一个参数。</font><font style="vertical-align: inherit;">如果另一个参数是十进制或整数值，则将参数作为十进制值进行比较，如果另一个参数为浮点值，则将参数作为浮点值进行比较。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在所有其他情况下，将参数作为浮点数（实数）进行比较。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关将值从一种时间类型转换为另一种时间类型的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-conversion" title="11.3.7日期和时间类型之间的转换"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.7节“日期和时间类型之间的转换”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON值的比较发生在两个层次上。</font><font style="vertical-align: inherit;">第一级比较基于比较值的JSON类型。</font><font style="vertical-align: inherit;">如果类型不同，则比较结果仅由哪种类型具有较高的优先级来确定。</font><font style="vertical-align: inherit;">如果这两个值具有相同的JSON类型，则会使用特定于类型的规则进行第二级比较。</font><font style="vertical-align: inherit;">为了比较JSON和非JSON值，将非JSON值转换为JSON，并将值作为JSON值进行比较。</font><font style="vertical-align: inherit;">有关详细信息，请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-comparison" title="JSON值的比较和排序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的比较和排序</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下示例说明了将字符串转换为比较操作的数字：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 &gt; '6x';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 7 &gt; '6x';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 0 &gt; 'x6';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 0 = 'x6';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为了将字符串列与数字进行比较，MySQL无法使用列上的索引来快速查找该值。</font><font style="vertical-align: inherit;">如果
       </font></font><em class="replaceable"><code>str_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是索引字符串列，则在以下语句中执行查找时不能使用索引：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WHERE </font></font><em class="replaceable"><code>str_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 1;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这样做的原因是，有许多不同的字符串可以转换为价值</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，例如
       </font></font><code class="literal">'1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">' 1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><code class="literal">'1a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用浮点数（或转换为浮点数的值）的比较是近似的，因为这些数字不准确。</font><font style="vertical-align: inherit;">这可能会导致看起来不一致的结果：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '18015376320243458' = 18015376320243458;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '18015376320243459' = 18015376320243459;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这样的结果可能会发生，因为这些值被转换为浮点数，浮点数只有53位的精度，并受四舍五入：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '18015376320243459'+0.0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.8015376320243e + 16</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      此外，从字符串到浮点的转换以及从整数到浮点的转换不一定以相同的方式发生。</font><font style="vertical-align: inherit;">CPU可以将整数转换为浮点数，而字符串则在涉及浮点乘法的操作中逐位转换。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      所显示的结果在不同的系统上会有所不同，并可能受到诸如计算机体系结构或编译器版本或优化级别等因素的影响。</font><font style="vertical-align: inherit;">避免这种问题的一种方法是使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样一个值，而不是将其隐式转换为浮点数：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST('18015376320243459' AS UNSIGNED) = 18015376320243459;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关浮点比较的更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#problems-with-float" title="B.5.4.8浮点值问题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.5.4.8节“浮点值问题”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该服务器包括</font></font><code class="literal">dtoa</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个转换库，为改进字符串或</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值与近似值（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）数字</font><font style="vertical-align: inherit;">之间的转换提供了基础
       </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          跨平台的转换结果保持一致，例如，消除了Unix与Windows之间的转换差异。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果以前的结果不能提供足够的精度，例如接近IEEE限值的值，则可准确表示值。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将数字转换为最佳精度的字符串格式。</font><font style="vertical-align: inherit;">其精度</font></font><code class="literal">dtoa</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">始终与标准C库函数</font><font style="vertical-align: inherit;">的精度</font><font style="vertical-align: inherit;">相同或更好。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由于该库生成的转换在某些情况下与非</font></font><code class="literal">dtoa</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font><font style="vertical-align: inherit;">有所不同，</font><font style="vertical-align: inherit;">因此依赖于以前结果的应用程序中存在不兼容的可能性。</font><font style="vertical-align: inherit;">例如，依赖于以前转换的特定准确结果的应用程序可能需要进行调整以适应更高的精度。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><code class="literal">dtoa</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库提供具有以下属性的转换。</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示具有</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或字符串表示</font><font style="vertical-align: inherit;">形式的值</font><font style="vertical-align: inherit;">，并</font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以本地二进制（IEEE）格式表示浮点数。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- &gt;
           </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换是以尽可能最高的精度完成的，返回的</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最短的字符串，它</font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在读回时</font><font style="vertical-align: inherit;">产生</font><font style="vertical-align: inherit;">，并按照IEEE规定的四舍五入原始二进制格式的最近值。
        </font></font></p></li><li class="listitem"><p>
          <em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- &gt;
           </font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换完成，这
           </font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是与输入的十进制字符串最接近的本机二进制数字
           </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些性质暗示</font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- &gt;
       </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- &gt; </font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      转换是无损除非</font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
       </font></font><code class="literal">-inf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">+inf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
       </font></font><code class="literal">NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">后面的值不被支持，因为SQL标准将它们定义为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or的
       </font><font style="vertical-align: inherit;">无效值
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- &gt;
       </font></font><em class="replaceable"><code>F</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- &gt; </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      转换，用于losslessness的充分条件是，
       </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用的精度15个或更少位数字，是不是反规范值，</font></font><code class="literal">-inf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">+inf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code class="literal">NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在某些情况下，即使</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      精度超过15位，</font><font style="vertical-align: inherit;">转换也是无损</font><font style="vertical-align: inherit;">的，但情况并非总是如此。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数值或时间值隐式转换为字符串会生成具有由</font><font style="vertical-align: inherit;">系统变量</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      和</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">确定的字符集和归类的</font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">（这些变量通常使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-names" title="13.7.4.3 SET NAMES语法"><code class="literal">SET NAMES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。有关连接字符集的信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-connection" title="10.4连接字符集和排序规则"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.4节“连接字符集和归类”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这意味着，这样的转换结果中的字符（非二进制的）字符串（一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGTEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值），除了在该连接字符集设置到壳体
       </font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，转换结果是一个二进制串（一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">LONGBLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值）。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于整数表达式，前面有关表达式</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估的</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评论
       </font><font style="vertical-align: inherit;">对于表达式</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分配的</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用有所不同</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">例如，在诸如此类的声明中：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t SELECT </font></font><em class="replaceable"><code>integer_expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在这种情况下，表达式中的表中的表具有类型</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于整数表达式的长度。</font><font style="vertical-align: inherit;">如果表达式的最大长度不适合an </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则用来代替。</font><font style="vertical-align: inherit;">长度取自</font><font style="vertical-align: inherit;">结果集元数据</font><font style="vertical-align: inherit;">的</font></font><code class="literal">max_length</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/connectors-apis.html#c-api-data-structures" title="27.8.5 C API数据结构"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第27.8.5节“C API数据结构”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">这意味着你可以强制一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用足够长的表达式：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t SELECT 000000000000000000000;
</font></font></pre>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="non-typed-operators"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3运营商</font></font></h2>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#operator-precedence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.1运营商优先权</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#comparison-operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.2比较函数和操作符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#logical-operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.3逻辑运算符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#assignment-operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.4赋值运算符</font></font></a></span></dt></dl>
</div>

<div class="table">
<a name="idm140528088411632"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.2运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists all operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">&amp;&amp;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑AND
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-equal"><code class="literal">=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      赋值（作为</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      语句的</font><font style="vertical-align: inherit;">一部分
       </font><font style="vertical-align: inherit;">，或作为语句中的</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句的
       </font><font style="vertical-align: inherit;">一部分</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      分配一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal">BETWEEN ... AND ...</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否在一个范围内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将字符串转换为二进制字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位与
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-invert"><code class="literal">~</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位反转
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-or"><code class="literal">|</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-xor"><code class="literal">^</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位XOR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      案例操作员
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_div"><code class="literal">DIV</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      整数划分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_divide"><code class="literal">/</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      司运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      平等的运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      与运算符相等的NULL安全
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than"><code class="literal">&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      大于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      大于或等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is"><code class="literal">IS</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      根据布尔值测试一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not"><code class="literal">IS NOT</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      根据布尔值测试一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not-null"><code class="literal">IS NOT NULL</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOT NULL值测试
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NULL值测试
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      评估路径后从JSON列返回值; </font><font style="vertical-align: inherit;">相当于JSON_EXTRACT（）。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-inline-path"><code class="literal">-&gt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在评估路径并取消引用结果后，从JSON列返回值; </font><font style="vertical-align: inherit;">相当于JSON_UNQUOTE（JSON_EXTRACT（））。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      左移
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than"><code class="literal">&lt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      少于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      少于或等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      简单的模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减号操作员
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">MOD</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      模运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not"><code class="literal">NOT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">!</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定价值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-between"><code class="literal">NOT BETWEEN ... AND ...</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否不在一个值范围内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">!=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">&lt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      不等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定简单模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定REGEXP
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">OR</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      右移
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_sounds-like"><code class="literal">SOUNDS LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      比较声音
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      乘法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_unary-minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      改变参数的符号
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_xor"><code class="literal">XOR</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑XOR
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="operator-precedence"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.1运营商优先权</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528088262864"></a><a class="indexterm" name="idm140528088261376"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        运算符优先级显示在以下列表中，从最高优先级到最低优先级。</font><font style="vertical-align: inherit;">一起显示在一行上的运算符具有相同的优先级。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">间隔</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BINARY，COLLATE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
！</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- （一元减号），〜（一元位反转）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
^</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*，/，DIV，％，MOD</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- ，+</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;&lt;，&gt;&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＆</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
=（比较），&lt;=&gt;，&gt; =，&gt;，&lt;=，&lt;，&lt;&gt;，！=，IS，LIKE，REGEXP，IN</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之间，案例，时间，然后，其他</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AND &amp;&amp;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
XOR</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OR，||</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
=（赋值），：=</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        优先级</font></font><code class="literal">=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于它是用作比较运算符（</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）还是用作赋值运算符（</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">当作为比较操作符使用，它具有相同的优先级
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than"><code class="literal">&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than"><code class="literal">&lt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">!=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is"><code class="literal">IS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_in"><code class="literal">IN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当用作赋值运算符时，它的优先级与
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.7.4.1节“变量赋值的SET语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#user-variables" title="9.4用户定义的变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.4节“用户定义的变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解释了MySQL如何确定</font></font><code class="literal">=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 应该适用。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于在表达式中出现在相同优先级别的运算符，评估从左到右进行，除了赋值从右向左评估。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一些运算符的含义取决于SQL模式：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            默认情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">||</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            是一个逻辑</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符。</font><font style="vertical-align: inherit;">在
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_pipes_as_concat"><code class="literal">PIPES_AS_CONCAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用的情况下，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">||</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是字符串连接，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-xor"><code class="literal">^</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一元运算符</font><font style="vertical-align: inherit;">之间具有优先级
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            默认情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not"><code class="literal">!</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            优先级高于</font></font><code class="literal">NOT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">随着
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_high_not_precedence"><code class="literal">HIGH_NOT_PRECEDENCE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not"><code class="literal">!</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
             </font></font><code class="literal">NOT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有相同的优先顺序。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><a class="indexterm" name="idm140528088221904"></a><a class="indexterm" name="idm140528088220832"></a><a class="indexterm" name="idm140528088219760"></a><a class="indexterm" name="idm140528088218272"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        运算符的优先级决定了表达式中条件的评估顺序。</font><font style="vertical-align: inherit;">要显式重写此顺序和组术语，请使用括号。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1+2*3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 7</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT (1+2)*3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 9</font></font><font></font>
</pre>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="comparison-operators"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.2比较函数和操作符</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528088212480"></a>
<div class="table">
<a name="idm140528088211440"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.3比较运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists comparison operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal">BETWEEN ... AND ...</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否在一个范围内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_coalesce"><code class="literal">COALESCE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一个非NULL参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      平等的运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      与运算符相等的NULL安全
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than"><code class="literal">&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      大于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      大于或等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_greatest"><code class="literal">GREATEST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最大的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_in"><code class="literal">IN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否在一组值中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_interval"><code class="literal">INTERVAL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回小于第一个参数的参数的索引
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is"><code class="literal">IS</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      根据布尔值测试一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not"><code class="literal">IS NOT</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      根据布尔值测试一个值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not-null"><code class="literal">IS NOT NULL</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOT NULL值测试
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NULL值测试
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isnull"><code class="literal">ISNULL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      测试参数是否为NULL
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最小的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than"><code class="literal">&lt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      少于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      少于或等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      简单的模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-between"><code class="literal">NOT BETWEEN ... AND ...</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否不在一个值范围内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">!=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">&lt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      不等于运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_not-in"><code class="literal">NOT IN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查一个值是否不在一组值中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定简单模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      比较两个字符串
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><a class="indexterm" name="idm140528088129360"></a><a class="indexterm" name="idm140528088128288"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        比较操作的结果是</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        （</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        （</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些操作适用于数字和字符串。</font><font style="vertical-align: inherit;">必要时，字符串会自动转换为数字和数字。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下关系比较运算符不仅可用于比较标量操作数，还可用于比较行操作数：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=&gt; &lt;&gt; = &lt;= &lt;&gt;！=
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节后面的那些操作符的描述详细介绍了它们如何与行操作数一起工作。</font><font style="vertical-align: inherit;">有关行子查询上下文中的行比较的其他示例，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#row-subqueries" title="13.2.10.5行子查询"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.2.10.5节“行子查询”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节中的一些函数返回除</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），
         </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">之外的值
         </font><font style="vertical-align: inherit;">。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        并且</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_greatest"><code class="literal">GREATEST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是这种功能的例子; </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2表达式评估中的类型转换"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.2节“表达式评估中的类型转换”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述了用于确定它们的返回值的由这些和类似函数执行的比较操作的规则。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要将值转换为特定类型以进行比较，可以使用该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font><font style="vertical-align: inherit;">字符串值可以使用转换为不同的字符集</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#cast-functions" title="12.10 Cast功能和操作符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.10节“演算函数和操作符”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，字符串比较不区分大小写，并使用当前字符集。</font><font style="vertical-align: inherit;">默认值是
         </font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（cp1252 West European），对英语也很适用。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_equal"></a><p>
            <a class="indexterm" name="idm140528088105424"></a>

            <a class="indexterm" name="idm140528088104352"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            等于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 = 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '0' = 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '0.0' = 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '0.01' = 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '.01' = 0.01;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于行比较，</font></font><code class="literal">(a, b) = (x, y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（a = x）AND（b = y）
</font></font></pre></li><li class="listitem"><a name="operator_equal-to"></a><p>
            <a class="indexterm" name="idm140528088091456"></a>

            <a class="indexterm" name="idm140528088089968"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a>
          </p><p>
            <code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 安全平等。</font><font style="vertical-align: inherit;">该运算符像</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">一样执行相等比较
             </font><font style="vertical-align: inherit;">，但是返回</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果两个操作数都是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一个操作数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><a class="indexterm" name="idm140528088079776"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            运算符等同于标准的SQL </font></font><code class="literal">IS NOT
            DISTINCT FROM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 &lt;=&gt; 1, NULL &lt;=&gt; NULL, 1 &lt;=&gt; NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1,1,0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 = 1, NULL = NULL, 1 = NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，NULL，NULL</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于行比较，</font></font><code class="literal">(a, b) &lt;=&gt; (x,
            y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（a &lt;=&gt; x）AND（b &lt;=&gt; y）
</font></font></pre></li><li class="listitem"><a name="operator_not-equal"></a><p>
            <a class="indexterm" name="idm140528088067440"></a>

            <a class="indexterm" name="idm140528088066352"></a>

            <a class="indexterm" name="idm140528088065264"></a>

            <a class="indexterm" name="idm140528088064192"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">!=</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            不等于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '.01' &lt;&gt; '0.01';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT .01 &lt;&gt; '0.01';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'zapp' &lt;&gt; 'zappp';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于行比较，</font></font><code class="literal">(a, b) &lt;&gt; (x,
            y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">(a, b) != (x, y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等同于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（a≠x）或（b≠y）
</font></font></pre></li><li class="listitem"><a name="operator_less-than-or-equal"></a><p>
            <a class="indexterm" name="idm140528088049568"></a>

            <a class="indexterm" name="idm140528088048464"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            小于或等于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 0.1 &lt;= 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于行比较，</font></font><code class="literal">(a, b) &lt;= (x, y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            相当于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（a &lt;x）OR（（a = x）AND（b &lt;= y））
</font></font></pre></li><li class="listitem"><a name="operator_less-than"></a><p>
            <a class="indexterm" name="idm140528088037264"></a>

            <a class="indexterm" name="idm140528088036176"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than"><code class="literal">&lt;</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            少于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 2 &lt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于行比较，</font></font><code class="literal">(a, b) &lt; (x, y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            相当于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（a &lt;x）OR（（a = x）AND（b &lt;y））
</font></font></pre></li><li class="listitem"><a name="operator_greater-than-or-equal"></a><p>
            <a class="indexterm" name="idm140528088024928"></a>

            <a class="indexterm" name="idm140528088023824"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            大于或等于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 2 &gt;= 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于行比较，</font></font><code class="literal">(a, b) &gt;= (x, y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            相当于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（a&gt; x）或（（a = x）AND（b&gt; = y））
</font></font></pre></li><li class="listitem"><a name="operator_greater-than"></a><p>
            <a class="indexterm" name="idm140528088012624"></a>

            <a class="indexterm" name="idm140528088011536"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_greater-than"><code class="literal">&gt;</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            比...更棒：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 2 &gt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于行比较，</font></font><code class="literal">(a, b) &gt; (x, y)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            相当于：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（a&gt; x）或（（a = x）AND（b&gt; y））
</font></font></pre></li><li class="listitem"><a name="operator_is"></a><p>
            <a class="indexterm" name="idm140528087999696"></a>

            <a class="indexterm" name="idm140528087998208"></a>

            <a class="indexterm" name="idm140528087996720"></a>

            <a class="indexterm" name="idm140528087995232"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is"><code class="literal">IS
            <em class="replaceable"><code>boolean_value</code></em></code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            测试针对一个布尔值，其中值
             </font></font><em class="replaceable"><code>boolean_value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是
             </font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
             </font></font><code class="literal">UNKNOWN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 IS TRUE, 0 IS FALSE, NULL IS UNKNOWN;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，1，1</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_is-not"></a><p>
            <a class="indexterm" name="idm140528087982608"></a>

            <a class="indexterm" name="idm140528087981120"></a>

            <a class="indexterm" name="idm140528087979632"></a>

            <a class="indexterm" name="idm140528087978144"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not"><code class="literal">IS NOT
            <em class="replaceable"><code>boolean_value</code></em></code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            测试针对一个布尔值，其中值
             </font></font><em class="replaceable"><code>boolean_value</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是
             </font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
             </font></font><code class="literal">UNKNOWN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 IS NOT UNKNOWN, 0 IS NOT UNKNOWN, NULL IS NOT UNKNOWN;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1,1,0</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_is-null"></a><p>
            <a class="indexterm" name="idm140528087965504"></a>

            <a class="indexterm" name="idm140528087964016"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            测试一个值是否是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 IS NULL, 0 IS NULL, NULL IS NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0，0，1</font></font><font></font>
</pre><p>
            <a class="indexterm" name="idm140528087956416"></a>

            <a class="indexterm" name="idm140528087955344"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

            要使用ODBC程序，MySQL在使用时支持以下额外功能</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS
            NULL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                变量设置为1，则在成功插入自动生成的</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的语句后
                 </font><font style="vertical-align: inherit;">，可以通过发出以下格式的语句来找到该值：
              </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WHERE </font></font><em class="replaceable"><code>auto_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是NULL
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果语句返回一行，则返回的值与调用该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                函数</font><font style="vertical-align: inherit;">的值相同
                 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息（包括多行插入后的返回值），请参见
                 </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#information-functions" title="12.14信息功能"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.14节“信息函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果未
                 </font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成功插入值，则该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                语句不返回任何行。
              </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过设置可以禁用通过比较
                 </font><font style="vertical-align: inherit;">
                检索</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
                 </font><font style="vertical-align: inherit;">的行为
                 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5 Server System Variables"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></a><font style="vertical-align: inherit;">。
              </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null = 0</code></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                默认值
                 </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是0。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                对于</font><font style="vertical-align: inherit;">声明为的列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                 </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以</font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用如下语句</font><font style="vertical-align: inherit;">找到特殊日期</font><font style="vertical-align: inherit;">：
              </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WHERE </font></font><em class="replaceable"><code>date_column</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是NULL
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                由于ODBC不支持</font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期值，</font><font style="vertical-align: inherit;">因此需要这样才能使某些ODBC应用程序正常工作
                 </font><font style="vertical-align: inherit;">。
              </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                请参阅
                 </font></font><a class="ulink" href="http://dev.mysql.com/doc/connector-odbc/en/connector-odbc-usagenotes-functionality-last-insert-id.html" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取自动递增值</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font><a class="ulink" href="http://dev.mysql.com/doc/connector-odbc/en/connector-odbc-configuration-connection-parameters.html" target="_top"><font style="vertical-align: inherit;">连接器/ ODBC连接参数中</font></a><font style="vertical-align: inherit;">的</font></font><code class="literal">FLAG_AUTO_IS_NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项
                 </font><font style="vertical-align: inherit;">说明
                 </font><font style="vertical-align: inherit;">。
</font></font><a class="ulink" href="http://dev.mysql.com/doc/connector-odbc/en/connector-odbc-configuration-connection-parameters.html" target="_top"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
</li><li class="listitem"><a name="operator_is-not-null"></a><p>
            <a class="indexterm" name="idm140528087922736"></a>

            <a class="indexterm" name="idm140528087921248"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NOT NULL</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            测试一个值是否不是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 IS NOT NULL, 0 IS NOT NULL, NULL IS NOT NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1,1,0</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_between"></a><p>
            <a class="indexterm" name="idm140528087910784"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal"><em class="replaceable"><code>expr</code></em>
            BETWEEN <em class="replaceable"><code>min</code></em> AND
            <em class="replaceable"><code>max</code></em></code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大于或等于</font></font><em class="replaceable"><code>min</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">且
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于
             </font></font><em class="replaceable"><code>max</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal">BETWEEN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则返回
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果所有参数的类型相同，则</font><font style="vertical-align: inherit;">这与表达式
             </font><font style="vertical-align: inherit;">相同。</font><font style="vertical-align: inherit;">否则，根据</font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2 Type Conversion in Expression Evaluation"><font style="vertical-align: inherit;">第12.2节“表达式评估中的类型转换”中</font></a><font style="vertical-align: inherit;">描述的规则进行
             </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2 Type Conversion in Expression Evaluation"><font style="vertical-align: inherit;">类型转换</font></a><font style="vertical-align: inherit;">，但将其应用于所有三个参数。
          </font></font><code class="literal">(<em class="replaceable"><code>min</code></em> &lt;=
            <em class="replaceable"><code>expr</code></em> AND
            <em class="replaceable"><code>expr</code></em> &lt;=
            <em class="replaceable"><code>max</code></em>)</code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2表达式评估中的类型转换"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 2 BETWEEN 1 AND 3, 2 BETWEEN 3 and 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 BETWEEN 2 AND 3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'b' BETWEEN 'a' AND 'c';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 2 BETWEEN 2 AND '3';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 2 BETWEEN 2 AND 'x-3';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            为了在使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_between"><code class="literal">BETWEEN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期或时间值</font><font style="vertical-align: inherit;">时获得最佳结果
             </font><font style="vertical-align: inherit;">，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式将值转换为所需的数据类型。</font><font style="vertical-align: inherit;">示例：如果将a </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与两个
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">进行比较
             </font><font style="vertical-align: inherit;">，请将这些</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">转换
             </font><font style="vertical-align: inherit;">为
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">如果使用字符串常量（例如与</font></font><code class="literal">'2001-1-1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a比较）</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则将该字符串转换为a </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="operator_not-between"></a><p>
            <a class="indexterm" name="idm140528087878880"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-between"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT BETWEEN <em class="replaceable"><code>min</code></em> AND
            <em class="replaceable"><code>max</code></em></code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这与之相同</font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">NOT
            (<em class="replaceable"><code>expr</code></em> BETWEEN
            <em class="replaceable"><code>min</code></em> AND
            <em class="replaceable"><code>max</code></em>)</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_coalesce"></a><p>
            <a class="indexterm" name="idm140528087869120"></a>

            <a class="indexterm" name="idm140528087867632"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_coalesce"><code class="literal">COALESCE(<em class="replaceable"><code>value</code></em>,...)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表</font><font style="vertical-align: inherit;">中的第一个非</font><font style="vertical-align: inherit;">值，或者</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回类型</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_coalesce"><code class="literal">COALESCE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            是参数类型的聚合类型。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COALESCE(NULL,1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COALESCE(NULL,NULL,NULL);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre></li><li class="listitem"><a name="function_greatest"></a><p>
            <a class="indexterm" name="idm140528087853536"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_greatest"><code class="literal">GREATEST(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,...)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用两个或更多参数，返回最大（最大值）参数。</font><font style="vertical-align: inherit;">参数使用与for相同的规则进行比较
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT GREATEST(2,0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT GREATEST(34.0,3.0,5.0,767.0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 767.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT GREATEST('B','A','C');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'C'</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_greatest"><code class="literal">GREATEST()</code></a><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
             </font><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_in"></a><p>
            <a class="indexterm" name="idm140528087837760"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_in"><code class="literal"><em class="replaceable"><code>expr</code></em>
            IN (<em class="replaceable"><code>value</code></em>,...)</code></a>
          </p><p><font style="vertical-align: inherit;"></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
             </font><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值等于</font></font><code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表</font><font style="vertical-align: inherit;">中的任何值，则</font><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果所有值都是常量，则根据类型</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和排序</font><font style="vertical-align: inherit;">来评估它们
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然后搜索该项目是使用二进制搜索完成的。</font></font><code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值列表完全由常量组成，</font><font style="vertical-align: inherit;">这意味着
             </font><font style="vertical-align: inherit;">非常快
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，根据</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2表达式评估中的类型转换"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.2节“表达式评估中的类型转换”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述的规则进行</font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2 Type Conversion in Expression Evaluation"><font style="vertical-align: inherit;">类型转换</font></a><font style="vertical-align: inherit;">，但应用于所有参数。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 2 IN (0,3,5,7);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'wefwf' IN ('wee','wefwf','weg');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p>
            <code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 可以用来比较行构造函数：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT (3,4) IN ((1,2), (3,4));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT (3,4) IN ((1,2), (3,5));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            您不应该在</font></font><code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表中</font><font style="vertical-align: inherit;">混合引用值和非引用值，
             </font><font style="vertical-align: inherit;">因为引用值（例如字符串）和未引用值（例如数字）的比较规则不同。</font><font style="vertical-align: inherit;">混合类型可能会导致结果不一致。</font><font style="vertical-align: inherit;">例如，不要写这样的
             </font></font><code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT val1 FROM tbl1 WHERE val1 IN（1,2，'a'）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            相反，这样写：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT val1 FROM tbl1 WHERE val1 IN（'1'，'2'，'a'）;
</font></font></pre><p><font style="vertical-align: inherit;"></font><code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表</font><font style="vertical-align: inherit;">
            中值的数量</font><font style="vertical-align: inherit;">仅受该</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">限制
             </font><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            为了符合SQL标准，</font></font><code class="literal">IN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不仅如果在左侧的表达</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也如果没有匹配在列表中找到，并在列表中表达式的一个</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <code class="literal">IN()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法也可以用来编写某些类型的子查询。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#any-in-some-subqueries" title="13.2.10.3使用ANY，IN或SOME的子查询"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.2.10.3节“使用ANY，IN或SOME的子查询”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_not-in"></a><p>
            <a class="indexterm" name="idm140528087806000"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_not-in"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT IN (<em class="replaceable"><code>value</code></em>,...)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这与之相同</font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">NOT
            (<em class="replaceable"><code>expr</code></em> IN
            (<em class="replaceable"><code>value</code></em>,...))</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_isnull"></a><p>
            <a class="indexterm" name="idm140528087796832"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_isnull"><code class="literal">ISNULL(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isnull"><code class="literal">ISNULL()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则返回
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ISNULL(1+1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ISNULL(1/0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_isnull"><code class="literal">ISNULL()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用来代替</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试一个值是否是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（一值比较，以</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总是产率</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isnull"><code class="literal">ISNULL()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            比较运算符</font><font style="vertical-align: inherit;">共享一些特殊行为
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_interval"></a><p>
            <a class="indexterm" name="idm140528087772448"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_interval"><code class="literal">INTERVAL(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>N1</code></em>,<em class="replaceable"><code>N2</code></em>,<em class="replaceable"><code>N3</code></em>,...)</code></a>
          </p><p><font style="vertical-align: inherit;"></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            &lt; </font></font><em class="replaceable"><code>N1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;
             </font></font><em class="replaceable"><code>N2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等等或
             </font></font><code class="literal">-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
             </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则
             </font><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所有参数都被视为整数。</font><font style="vertical-align: inherit;">它要求</font></font><em class="replaceable"><code>N1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            &lt; </font></font><em class="replaceable"><code>N2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;
             </font></font><em class="replaceable"><code>N3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font><code class="literal">...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            &lt; </font></font><em class="replaceable"><code>Nn</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能才能正常工作。</font><font style="vertical-align: inherit;">这是因为使用了二进制搜索（非常快）。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INTERVAL(23, 1, 15, 17, 30, 44, 200);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INTERVAL(10, 1, 10, 100, 1000);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INTERVAL(22, 23, 30, 44, 200);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre></li><li class="listitem"><a name="function_least"></a><p>
            <a class="indexterm" name="idm140528087752800"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,...)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用两个或更多参数，返回最小（最小值）参数。</font><font style="vertical-align: inherit;">使用以下规则比较参数：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果有任何争论</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">不需要比较。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果所有参数都是整数值，则将它们作为整数进行比较。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果至少有一个参数是双精度，则它们将作为双精度值进行比较。</font><font style="vertical-align: inherit;">否则，如果至少有一个参数是一个
                 </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，则将它们作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                值</font><font style="vertical-align: inherit;">进行比较</font><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果参数包含数字和字符串的混合，则将其作为数字进行比较。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果任何参数是非二进制（字符）字符串，则将参数作为非二进制字符串进行比较。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                在所有其他情况下，参数将作为二进制字符串进行比较。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回类型</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是比较参数类型的聚合类型。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LEAST(2,0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LEAST(34.0,3.0,5.0,767.0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LEAST('B','A','C');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'A'</font></font><font></font>
</pre></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="logical-operators"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.3逻辑运算符</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528087730656"></a><a class="indexterm" name="idm140528087729584"></a>
<div class="table">
<a name="idm140528087728096"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.4逻辑运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists logical operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">&amp;&amp;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑AND
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not"><code class="literal">NOT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">!</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定价值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">OR</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_xor"><code class="literal">XOR</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑XOR
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在SQL中，所有逻辑运算符来评估
         </font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="literal">UNKNOWN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">在MySQL中，这些实现为1（</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），0（</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">大多数情况下，对于不同的SQL数据库服务器来说是很常见的，尽管有些服务器可能会返回任何非零值
         </font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL评估任何非零</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">，非</font><font style="vertical-align: inherit;">值</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，以下声明全部评估为</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 10 IS TRUE;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT -10 IS TRUE;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'string' IS NOT NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- &gt; 1</font></font><font></font>
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_not"></a><p>
            <a class="indexterm" name="idm140528087690928"></a>

            <a class="indexterm" name="idm140528087689472"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not"><code class="literal">NOT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not"><code class="literal">!</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            逻辑NOT。</font><font style="vertical-align: inherit;">计算</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作数是否为</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果操作数非零，则</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOT 10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOT 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOT NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ! (1+1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ! 1+1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最后一个例子的产生</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是因为表达式的计算方式与
             </font></font><code class="literal">(!1)+1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="operator_and"></a><p>
            <a class="indexterm" name="idm140528087670272"></a>

            <a class="indexterm" name="idm140528087668816"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">&amp;&amp;</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            逻辑AND。</font><font style="vertical-align: inherit;">评估</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有操作数是否为非零值</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则返回</font><font style="vertical-align: inherit;">一个或多个操作数
             </font><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 AND 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 AND 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 AND NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 0 AND NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NULL AND 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_or"></a><p>
            <a class="indexterm" name="idm140528087651440"></a>

            <a class="indexterm" name="idm140528087649984"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">||</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            逻辑或。</font><font style="vertical-align: inherit;">当两个操作数都是非的时</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果是
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任何操作数不为零，
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则。</font><font style="vertical-align: inherit;">使用
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作数时，
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果另一个操作数不为零，
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则返回结果。</font><font style="vertical-align: inherit;">如果两个操作数都是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 OR 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 OR 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 0 OR 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 0 OR NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 OR NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_xor"></a><p>
            <a class="indexterm" name="idm140528087631088"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_xor"><code class="literal">XOR</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            逻辑XOR。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任一操作数为，则</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作数，计算
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">奇数个操作数是否为非零，否则</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 XOR 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 XOR 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 XOR NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 XOR 1 XOR 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p>
            <code class="literal">a XOR b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在数学上等于
             </font></font><code class="literal">(a AND (NOT b)) OR ((NOT a) and b)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="assignment-operators"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3.4赋值运算符</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528087614912"></a><a class="indexterm" name="idm140528087613840"></a>
<div class="table">
<a name="idm140528087612352"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.5分配运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists assignment operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-equal"><code class="literal">=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      赋值（作为</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      语句的</font><font style="vertical-align: inherit;">一部分
       </font><font style="vertical-align: inherit;">，或作为语句中的</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句的
       </font><font style="vertical-align: inherit;">一部分</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      分配一个值
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_assign-value"></a><p>
            <a class="indexterm" name="idm140528087594016"></a>

            <a class="indexterm" name="idm140528087592928"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            赋值运算符。</font><font style="vertical-align: inherit;">使操作员左侧的用户变量在其右侧取值。</font><font style="vertical-align: inherit;">右侧的值可能是一个字面值，另一个存储值的变量，或者是产生标量值的任何合法表达式，包括查询结果（假设该值为标量值）。</font><font style="vertical-align: inherit;">您可以在同一个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语句中</font><font style="vertical-align: inherit;">执行多个分配
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以在同一个语句中执行多个分配。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            与此不同
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            操作符不会被解释为比较操作符。</font><font style="vertical-align: inherit;">这意味着你可以
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任何有效的SQL语句中使用（不仅仅在
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语句中）为变量赋值。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL，NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1 := 1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2 := @var1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，1</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1:=COUNT(*) FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            您可以</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其他语句中
             </font><font style="vertical-align: inherit;">使用值赋值
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，例如
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，3，5，7</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE t1 SET c1 = 2 WHERE c1 = @var1:= 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
匹配行数：1更改：1警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2，3，5，7</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            虽然也可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            操作符</font><font style="vertical-align: inherit;">在单个SQL语句中设置和读取相同变量的值，但
             </font><font style="vertical-align: inherit;">不建议这样做。
            </font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#user-variables" title="9.4用户定义的变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.4节“用户定义的变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解释了为什么你应该避免这样做。
          </font></font></p></li><li class="listitem"><a name="operator_assign-equal"></a><p>
            <a class="indexterm" name="idm140528087560368"></a>

            <a class="indexterm" name="idm140528087559296"></a>

            <a class="indexterm" name="idm140528087557840"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-equal"><code class="literal">=</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该操作符用于执行两种情况下的值赋值，将在下两段中介绍。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在一个
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            声明中，</font></font><code class="literal">=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被视为一个赋值运算符，它使得操作符左侧的用户变量将值赋给它的右边。</font><font style="vertical-align: inherit;">（换句话说，在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语句中</font><font style="vertical-align: inherit;">使用时
             </font><font style="vertical-align: inherit;">，</font></font><code class="literal">=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它的处理方式与处理方式相同
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_assign-value"><code class="literal">:=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）右侧的值可能是字面值，另一个存储值的变量或产生标量值的任何合法表达式，包括一个查询（假设这个值是一个标量值）。</font><font style="vertical-align: inherit;">您可以在同一个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            语句中</font><font style="vertical-align: inherit;">执行多个分配
             </font><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在</font><font style="vertical-align: inherit;">声明</font><font style="vertical-align: inherit;">的</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款中
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也充当转让经营者; </font><font style="vertical-align: inherit;">然而，在这种情况下，它会导致在操作符左侧命名的列承担赋予右侧的值，前提</font><font style="vertical-align: inherit;">是满足</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件的</font><font style="vertical-align: inherit;">任何</font><font style="vertical-align: inherit;">条件</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以在</font><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">的同一</font></font><code class="literal">SET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">个子句中
             </font><font style="vertical-align: inherit;">进行多个分配
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在任何其他情况下，</font></font><code class="literal">=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都被视为
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比较运算符</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL，NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1 := 1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2 := @var1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @var1, @var2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.7.4.1节“变量赋值的SET语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.2.11节“UPDATE语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#subqueries" title="13.2.10子查询语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第</font></font></a><font style="vertical-align: inherit;"><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><font style="vertical-align: inherit;">13.2.10 </font></a><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#subqueries" title="13.2.10 Subquery Syntax"><font style="vertical-align: inherit;">节“子查询语法”</font></a><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="control-flow-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.4控制流程功能</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528087526960"></a><a class="indexterm" name="idm140528087525888"></a>
<div class="table">
<a name="idm140528087524400"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.6流量控制操作员</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists flow control operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      案例操作员
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果/ else构造
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ifnull"><code class="literal">IFNULL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      空if / else构造
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_nullif"><code class="literal">NULLIF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果expr1 = expr2，则返回NULL
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_case"></a><p>
          <a class="indexterm" name="idm140528087501168"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE
          <em class="replaceable"><code>value</code></em> WHEN
          [<em class="replaceable"><code>compare_value</code></em>] THEN
          <em class="replaceable"><code>result</code></em> [WHEN
          [<em class="replaceable"><code>compare_value</code></em>] THEN
          <em class="replaceable"><code>result</code></em> ...] [ELSE
          <em class="replaceable"><code>result</code></em>] END</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE WHEN
          [<em class="replaceable"><code>condition</code></em>] THEN
          <em class="replaceable"><code>result</code></em> [WHEN
          [<em class="replaceable"><code>condition</code></em>] THEN
          <em class="replaceable"><code>result</code></em> ...] [ELSE
          <em class="replaceable"><code>result</code></em>] END</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          第一个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法返回
           </font></font><em class="replaceable"><code>result</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个
           </font><font style="vertical-align: inherit;">
          比较是真的。</font><font style="vertical-align: inherit;">第二个语法返回第一个条件为true的结果。</font><font style="vertical-align: inherit;">如果没有比较或条件为真，</font><font style="vertical-align: inherit;">则返回</font><font style="vertical-align: inherit;">后的结果</font><font style="vertical-align: inherit;">或者</font><font style="vertical-align: inherit;">没有
           </font><font style="vertical-align: inherit;">部分。
</font></font><code class="literal"><em class="replaceable"><code>value</code></em>=<em class="replaceable"><code>compare_value</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">ELSE</code><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><code class="literal">ELSE</code><font style="vertical-align: inherit;"></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里描述</font><font style="vertical-align: inherit;">
            的</font><span class="emphasis"><em><font style="vertical-align: inherit;">表达式</font></em></span><font style="vertical-align: inherit;">的语法</font><font style="vertical-align: inherit;">与</font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#case" title="13.6.5.1 CASE Syntax"><font style="vertical-align: inherit;">第13.6.5.1节“CASE语法”中</font></a><font style="vertical-align: inherit;">描述
             </font><font style="vertical-align: inherit;">的SQL </font><span class="emphasis"><em><font style="vertical-align: inherit;">语句</font></em></span><font style="vertical-align: inherit;">略有不同
             </font><font style="vertical-align: inherit;">，以便在存储程序中使用。</font><font style="vertical-align: inherit;">该
             </font><font style="vertical-align: inherit;">声明不能有一个
             </font><font style="vertical-align: inherit;">子句，并且它以终止</font><font style="vertical-align: inherit;">而不是
             </font><font style="vertical-align: inherit;">。
</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE</code></a>
            <span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#case" title="13.6.5.1 CASE语法"><code class="literal">CASE</code></a>
            <span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#case" title="13.6.5.1 CASE语法"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#case" title="13.6.5.1 CASE语法"><code class="literal">CASE</code></a><font style="vertical-align: inherit;"></font><code class="literal">ELSE NULL</code><font style="vertical-align: inherit;"></font><code class="literal">END CASE</code><font style="vertical-align: inherit;"></font><code class="literal">END</code><font style="vertical-align: inherit;"></font></p>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表达式结果</font><font style="vertical-align: inherit;">
          的返回类型</font><font style="vertical-align: inherit;">是所有结果值的聚合类型。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT CASE 1 WHEN 1 THEN 'one'</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>WHEN 2 THEN 'two' ELSE 'more' END;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'一个'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CASE WHEN 1&gt;0 THEN 'true' ELSE 'false' END;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'true'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT CASE BINARY 'B'</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>WHEN 'a' THEN 1 WHEN 'b' THEN 2 END;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre></li><li class="listitem"><a name="function_if"></a><p>
          <a class="indexterm" name="idm140528087466448"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>,<em class="replaceable"><code>expr3</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （</font></font><code class="literal"><em class="replaceable"><code>expr1</code></em> &lt;&gt;
          0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal"><em class="replaceable"><code>expr1</code></em>
          &lt;&gt; NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，它返回</font></font><em class="replaceable"><code>expr3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            还有一个</font><span class="emphasis"><em><font style="vertical-align: inherit;">声明</font></em></span><font style="vertical-align: inherit;">，它不同于</font><font style="vertical-align: inherit;">这里描述</font><font style="vertical-align: inherit;">的
             </font><span class="emphasis"><em><font style="vertical-align: inherit;">功能</font></em></span><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
             </font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#if" title="13.6.5.2 IF Syntax"><font style="vertical-align: inherit;">第13.6.5.2节“IF语法”</font></a><font style="vertical-align: inherit;">。
</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#if" title="13.6.5.2 IF语法"><code class="literal">IF</code></a>
            <span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF()</code></a>
            <span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#if" title="13.6.5.2 IF语法"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果只有一个</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><em class="replaceable"><code>expr3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式地
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的结果类型
           </font><font style="vertical-align: inherit;">是非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式</font><font style="vertical-align: inherit;">的类型</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （存储到临时表时可能很重要）</font><font style="vertical-align: inherit;">
          的默认返回类型</font><font style="vertical-align: inherit;">计算如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><em class="replaceable"><code>expr3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成一个字符串，结果是一个字符串。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><em class="replaceable"><code>expr3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都是字符串，如果任何一个字符串区分大小写，结果将区分大小写。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><em class="replaceable"><code>expr3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">产生一个浮点值，结果是一个浮点值。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><em class="replaceable"><code>expr3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">产生一个整数，结果是一个整数。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(1&gt;2,2,3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(1&lt;2,'yes','no');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'是'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IF(STRCMP('test','test1'),'no','yes');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'不'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_ifnull"></a><p>
          <a class="indexterm" name="idm140528087431712"></a>

          <a class="indexterm" name="idm140528087430224"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ifnull"><code class="literal">IFNULL(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ifnull"><code class="literal">IFNULL()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">否则返回
           </font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IFNULL(1,0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IFNULL(NULL,10);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IFNULL(1/0,10);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IFNULL(1/0,'yes');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'是'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的默认返回值类型
           </font><font style="vertical-align: inherit;">
          是更为</font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">一般</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">两个表达式的，顺序</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">考虑基于表达式的表格或MySQL必须在内部存储由</font><font style="vertical-align: inherit;">临时表格</font><font style="vertical-align: inherit;">返回的值的情况</font><font style="vertical-align: inherit;">：
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ifnull"><code class="literal">IFNULL(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><code class="literal">STRING</code><font style="vertical-align: inherit;"></font><code class="literal">REAL</code><font style="vertical-align: inherit;"></font><code class="literal">INTEGER</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ifnull"><code class="literal">IFNULL()</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>CREATE TABLE tmp SELECT IFNULL(1,'test') AS test;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>DESCRIBE tmp;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------------- + ------ + ------ + --------- + --- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">字段| </font><font style="vertical-align: inherit;">类型| </font><font style="vertical-align: inherit;">空| </font><font style="vertical-align: inherit;">Key | </font><font style="vertical-align: inherit;">默认| </font><font style="vertical-align: inherit;">额外|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------------- + ------ + ------ + --------- + --- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">测试| </font><font style="vertical-align: inherit;">varbinary（4）| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------------- + ------ + ------ + --------- + --- ---- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这个例子中，</font></font><code class="literal">test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列</font><font style="vertical-align: inherit;">的类型</font><font style="vertical-align: inherit;">是</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（一个字符串类型）。
        </font></font></p></li><li class="listitem"><a name="function_nullif"></a><p>
          <a class="indexterm" name="idm140528087403408"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_nullif"><code class="literal">NULLIF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
           </font><font style="vertical-align: inherit;">为真，否则返回</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这与之相同
           </font><font style="vertical-align: inherit;">。
        </font></font><code class="literal"><em class="replaceable"><code>expr1</code></em> =
          <em class="replaceable"><code>expr2</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_case"><code class="literal">CASE WHEN
          <em class="replaceable"><code>expr1</code></em> =
          <em class="replaceable"><code>expr2</code></em> THEN NULL ELSE
          <em class="replaceable"><code>expr1</code></em> END</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回值与第一个参数具有相同的类型。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NULLIF(1,1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NULLIF(1,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数不相等，</font><font style="vertical-align: inherit;">
            MySQL会计算</font><font style="vertical-align: inherit;">两次。
</font></font></p>
</div>
</li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="string-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5字符串函数</font></font></h2>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#string-comparison-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.1字符串比较函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#regexp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.2正则表达式</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#string-functions-charset"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.3字符集和函数结果整理</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528087386880"></a><a class="indexterm" name="idm140528087385808"></a>
<div class="table">
<a name="idm140528087384320"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.7字符串运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists string operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ascii"><code class="literal">ASCII()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最左边字符的数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bin"><code class="literal">BIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个包含数字二进制表示的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-length"><code class="literal">BIT_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以位为单位返回参数的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为每个传递的整数返回字符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数中的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      CHAR_LENGTH（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回串联的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回与分隔符连接
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_elt"><code class="literal">ELT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回索引号处的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_export-set"><code class="literal">EXPORT_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个字符串，使得对于值位中设置的每一位，您都会得到一个字符串，并且对于每个未设置的位，都会得到一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_field"><code class="literal">FIELD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回后续参数中第一个参数的索引（位置）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第二个参数中第一个参数的索引位置
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_format"><code class="literal">FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回格式化为指定小数位数的数字
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解码为base-64字符串并返回结果
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回十进制或字符串值的十六进制表示形式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_insert"><code class="literal">INSERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在指定的位置插入一个子字符串，直到指定的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_instr"><code class="literal">INSTR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一次出现的子串的索引
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lcase"><code class="literal">LCASE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LOWER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_left"><code class="literal">LEFT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回指定的最左边的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以字节为单位返回字符串的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      简单的模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加载指定的文件
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_locate"><code class="literal">LOCATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一次出现的子串的位置
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以小写形式返回参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lpad"><code class="literal">LPAD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串参数，用指定的字符串左填充
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ltrim"><code class="literal">LTRIM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      删除前导空格
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_make-set"><code class="literal">MAKE_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一组逗号分隔的字符串，这些字符串具有相应的位集
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      执行全文搜索
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mid"><code class="literal">MID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从指定的位置开始返回一个子串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定简单模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定REGEXP
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_oct"><code class="literal">OCT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个包含数字八进制表示的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_octet-length"><code class="literal">OCTET_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LENGTH（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ord"><code class="literal">ORD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数最左边字符的字符代码
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_position"><code class="literal">POSITION()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LOCATE（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_quote"><code class="literal">QUOTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      退出在SQL语句中使用的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_repeat"><code class="literal">REPEAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      重复指定次数的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_replace"><code class="literal">REPLACE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      替换指定字符串的出现
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_reverse"><code class="literal">REVERSE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      反转字符串中的字符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_right"><code class="literal">RIGHT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回指定的最右边的字符数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rpad"><code class="literal">RPAD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      追加字符串指定的次数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rtrim"><code class="literal">RTRIM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      删除尾随空格
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个soundex字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_sounds-like"><code class="literal">SOUNDS LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      比较声音
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_space"><code class="literal">SPACE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回指定数量的空格字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      比较两个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substr"><code class="literal">SUBSTR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按照指定返回子字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按照指定返回子字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在指定的分隔符出现次数之前，从字符串中返回一个子字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回转换为base-64字符串的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_trim"><code class="literal">TRIM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      删除前导和尾随空格
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ucase"><code class="literal">UCASE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      UPPER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个包含数字的十六进制表示的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      转换为大写
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串的权重字符串
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果结果的长度大于</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值，
       </font><font style="vertical-align: inherit;">
      字符串值函数将返回</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-configuration" title="5.1.1配置服务器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.1节“配置服务器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于在字符串位置上操作的函数，第一个位置编号为1。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于具有长度参数的函数，非整数参数四舍五入到最接近的整数。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_ascii"></a><p>
          <a class="indexterm" name="idm140528087185696"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ascii"><code class="literal">ASCII(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串最左边字符的数字值</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是否为空字符串。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ascii"><code class="literal">ASCII()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于8位字符。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ASCII('2');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 50</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ASCII(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 50</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ASCII('dx');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 100</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          另请参阅该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ord"><code class="literal">ORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。
        </font></font></p></li><li class="listitem"><a name="function_bin"></a><p>
          <a class="indexterm" name="idm140528087168480"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_bin"><code class="literal">BIN(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回的二进制值的字符串表示
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个longlong（ </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">编号。</font><font style="vertical-align: inherit;">这相当于
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">如果
           </font><font style="vertical-align: inherit;">是</font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,10,2)</code></a><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT BIN(12);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1100'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_bit-length"></a><p>
          <a class="indexterm" name="idm140528087153504"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-length"><code class="literal">BIT_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以位</font><font style="vertical-align: inherit;">
          为单位返回字符串的长度
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT BIT_LENGTH('text');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 32</font></font><font></font>
</pre></li><li class="listitem"><a name="function_char"></a><p>
          <a class="indexterm" name="idm140528087143680"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR(<em class="replaceable"><code>N</code></em>,...
          [USING <em class="replaceable"><code>charset_name</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将每个参数解释
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为一个整数并返回一个由这些整数的代码值给出的字符组成的字符串。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被跳过。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHAR(77,121,83,81,'76');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'MySQL'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHAR(77,77.3,'77.3');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'MMM'</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大于255的参数被转换为多个结果字节。</font><font style="vertical-align: inherit;">例如，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR(256)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR(1,0)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR(256*256)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR(1,0,0)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(CHAR(1,0)), HEX(CHAR(256));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（CHAR（1,0））| </font><font style="vertical-align: inherit;">HEX（CHAR（256））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0100 | </font><font style="vertical-align: inherit;">0100 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(CHAR(1,0,0)), HEX(CHAR(256*256));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（CHAR（1,0,0））| </font><font style="vertical-align: inherit;">HEX（CHAR（256 * 256））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">010000 | </font><font style="vertical-align: inherit;">010000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          默认情况下</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个二进制字符串。</font><font style="vertical-align: inherit;">要在给定字符集中生成字符串，请使用可选</font></font><code class="literal">USING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHARSET(CHAR(X'65')), CHARSET(CHAR(X'65' USING utf8));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + -------------------------- ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CHARSET（CHAR（X'65'））| </font><font style="vertical-align: inherit;">CHARSET（CHAR（X'65'USING utf8））</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + -------------------------- ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">二进制| </font><font style="vertical-align: inherit;">utf8 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + -------------------------- ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><code class="literal">USING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定并且结果字符串对于给定字符集是非法的，则发出警告。</font><font style="vertical-align: inherit;">另外，如果启用严格的SQL模式，则结果
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将变为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_char-length"></a><p>
          <a class="indexterm" name="idm140528087112160"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_char-length"><code class="literal">CHAR_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串的长度
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以字符为单位。</font><font style="vertical-align: inherit;">多字节字符算作单个字符。</font><font style="vertical-align: inherit;">这意味着对于包含5个2字节字符的字符串，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_character-length"></a><p>
          <a class="indexterm" name="idm140528087100448"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_concat"></a><p>
          <a class="indexterm" name="idm140528087090800"></a>

          <a class="indexterm" name="idm140528087089728"></a>

          <a class="indexterm" name="idm140528087088656"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT(<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回连接参数所产生的字符串。</font><font style="vertical-align: inherit;">可能有一个或多个参数。</font><font style="vertical-align: inherit;">如果所有参数都是非二进制字符串，则结果是非二进制字符串。</font><font style="vertical-align: inherit;">如果参数包含任何二进制字符串，则结果是二进制字符串。</font><font style="vertical-align: inherit;">数字参数被转换为其等效的非二进制字符串形式。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
           </font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT('My', 'S', 'QL');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'MySQL'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT('My', NULL, 'QL');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT(14.3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '14 .3'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于带引号的字符串，可以通过将字符串放在一起进行连接：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'My' 'S' 'QL';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'MySQL'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_concat-ws"></a><p>
          <a class="indexterm" name="idm140528087071280"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat-ws"><code class="literal">CONCAT_WS(<em class="replaceable"><code>separator</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,...)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表与分隔符连接并且是一种特殊形式
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第一个参数是其余参数的分隔符。</font><font style="vertical-align: inherit;">分隔符被添加在要连接的字符串之间。</font><font style="vertical-align: inherit;">分隔符可以是一个字符串，其余的参数也一样。</font><font style="vertical-align: inherit;">如果分隔符是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT_WS(',','First name','Second name','Last Name');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'名，姓，名'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT_WS(',','First name',NULL,'Last Name');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'名字，姓氏'</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会跳过空字符串。</font><font style="vertical-align: inherit;">但是，它会</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在分隔符参数后</font><font style="vertical-align: inherit;">跳过任何</font><font style="vertical-align: inherit;">值。
        </font></font></p></li><li class="listitem"><a name="function_elt"></a><p>
          <a class="indexterm" name="idm140528087053392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_elt"><code class="literal">ELT(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,<em class="replaceable"><code>str3</code></em>,...)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_elt"><code class="literal">ELT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串列表</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">第th个元素：
           </font></font><em class="replaceable"><code>str1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><em class="replaceable"><code>str2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，等等。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或大于参数个数。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_elt"><code class="literal">ELT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的补充
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_field"><code class="literal">FIELD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ELT(1, 'Aa', 'Bb', 'Cc', 'Dd');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'Aa'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ELT(4, 'Aa', 'Bb', 'Cc', 'Dd');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'Dd'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_export-set"></a><p>
          <a class="indexterm" name="idm140528087032976"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_export-set"><code class="literal">EXPORT_SET(<em class="replaceable"><code>bits</code></em>,<em class="replaceable"><code>on</code></em>,<em class="replaceable"><code>off</code></em>[,<em class="replaceable"><code>separator</code></em>[,<em class="replaceable"><code>number_of_bits</code></em>]])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个字符串，使得对于该值中设置的每一位
           </font></font><em class="replaceable"><code>bits</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，都会得到一个
           </font></font><em class="replaceable"><code>on</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串，并且对于该值中未设置的每一位，都会得到一个</font></font><em class="replaceable"><code>off</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          字符串。</font></font><em class="replaceable"><code>bits</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从右到左检查</font><font style="vertical-align: inherit;">位</font><font style="vertical-align: inherit;">（从低位到高位）。</font><font style="vertical-align: inherit;">字符串从左到右添加到结果中，由</font></font><em class="replaceable"><code>separator</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">分隔</font><font style="vertical-align: inherit;">（缺省为逗号字符</font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">检查的位数由</font></font><em class="replaceable"><code>number_of_bits</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下式</font><font style="vertical-align: inherit;">给出
           </font><font style="vertical-align: inherit;">，如果未指定，缺省值为64。
          </font></font><em class="replaceable"><code>number_of_bits</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果大于64，它被无声地剪切为64.它被当作一个无符号整数，所以-1的值与64实际上是相同的。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXPORT_SET(5,'Y','N',',',4);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'Y，N，Y，N'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXPORT_SET(6,'1','0',',',10);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'0,1,1,0,0,0,0,0,0,0'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_field"></a><p>
          <a class="indexterm" name="idm140528087016592"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_field"><code class="literal">FIELD(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,<em class="replaceable"><code>str3</code></em>,...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回的索引（位置）</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          中</font></font><em class="replaceable"><code>str1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><em class="replaceable"><code>str2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><em class="replaceable"><code>str3</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表。</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          找不到，则</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果所有参数</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_field"><code class="literal">FIELD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都是字符串，则所有参数都以字符串形式进行比较 </font><font style="vertical-align: inherit;">如果所有参数都是数字，则将其作为数字进行比较。</font><font style="vertical-align: inherit;">否则，参数将被比较为double。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">失败与任何值的平等比较。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_field"><code class="literal">FIELD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的补充</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_elt"><code class="literal">ELT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FIELD('Bb', 'Aa', 'Bb', 'Cc', 'Dd', 'Ff');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FIELD('Gg', 'Aa', 'Bb', 'Cc', 'Dd', 'Ff');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre></li><li class="listitem"><a name="function_find-in-set"></a><p>
          <a class="indexterm" name="idm140528086994240"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_find-in-set"><code class="literal">FIND_IN_SET(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>strlist</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果字符串</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><em class="replaceable"><code>strlist</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子串</font><font style="vertical-align: inherit;">组成
           </font><font style="vertical-align: inherit;">的字符串列表中
           </font><font style="vertical-align: inherit;">
          ，</font><font style="vertical-align: inherit;">则
           </font><font style="vertical-align: inherit;">返回范围为1到1的值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">字符串列表是由由</font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">分隔的子字符串组成的字符串
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果第一个参数是一个常量字符串，而第二个参数是一个类型的列
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数被优化为使用位算术。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不在
           </font></font><em class="replaceable"><code>strlist</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或如果
           </font></font><em class="replaceable"><code>strlist</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是空字符串。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任一参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果第一个参数包含逗号，此函数无法正常工作（</font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）字符。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FIND_IN_SET('b','a,b,c,d');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font>
</pre></li><li class="listitem"><a name="function_format"></a><p>
          <a class="indexterm" name="idm140528086975136"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_format"><code class="literal">FORMAT(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>[,<em class="replaceable"><code>locale</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将数字</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化为像</font></font><code class="literal">'#,###,###.##'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">四舍五入到
           </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小数位</font><font style="vertical-align: inherit;">的格式</font><font style="vertical-align: inherit;">，并将结果作为字符串返回。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果没有小数点或小数部分。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可选的第三个参数可以指定区域设置用于结果号的小数点，千位分隔符和分隔符之间的分组。</font><font style="vertical-align: inherit;">允许的区域设置值与</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的合法值相同
           </font><font style="vertical-align: inherit;">（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#locale-support" title="10.15 MySQL服务器区域设置支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.15节“MySQL服务器区域设置支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">如果未指定区域设置，则默认为</font></font><code class="literal">'en_US'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FORMAT(12332.123456, 4);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '12,332.1235'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FORMAT(12332.1,4);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '12,332.1000'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FORMAT(12332.2,0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '12,332'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FORMAT(12332.2,2,'de_DE');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '12.332,20'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_from-base64"></a><p>
          <a class="indexterm" name="idm140528086956336"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-base64"><code class="literal">FROM_BASE64(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          采用使用base-64编码规则编码的字符串
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并将解码结果作为二进制字符串返回。</font><font style="vertical-align: inherit;">结果是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是有效的base-64字符串。</font><font style="vertical-align: inherit;">有关</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码和解码规则的详细信息，</font><font style="vertical-align: inherit;">请参阅说明</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_BASE64('abc'), FROM_BASE64(TO_BASE64('abc'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'JWJj'，'abc'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_hex"></a><p>
          <a class="indexterm" name="idm140528086942720"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX(<em class="replaceable"><code>str</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于字符串参数</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回十六进制字符串表示形式，</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中每个字符的每个字节</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          都转换为两个十六进制数字。</font><font style="vertical-align: inherit;">（因此多字节字符变为两位以上）。此操作的反转由该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">执行
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于数字参数</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理为longlong（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">数值</font><font style="vertical-align: inherit;">的十六进制字符串表示形式
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这相当于
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个操作的逆过程由执行
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,10,16)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV(HEX(<em class="replaceable"><code>N</code></em>),16,10)</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT X'616263', HEX('abc'), UNHEX(HEX('abc'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'abc'，616263，'abc'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(255), CONV(HEX(255),16,10);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'FF'，255</font></font><font></font>
</pre></li><li class="listitem"><a name="function_insert"></a><p>
          <a class="indexterm" name="idm140528086919024"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_insert"><code class="literal">INSERT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>,<em class="replaceable"><code>newstr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在位置开始子</font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          和</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长期被字符串替换的字符</font></font><em class="replaceable"><code>newstr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不在</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">的长度内，</font><font style="vertical-align: inherit;">则返回原始</font><font style="vertical-align: inherit;">字符串。</font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不在字符串其余部分的长度内，</font><font style="vertical-align: inherit;">则从位置替换字符串</font><font style="vertical-align: inherit;">的其余部分。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INSERT('Quadratic', 3, 4, 'What');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'QuWhattic'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INSERT('Quadratic', -1, 4, 'What');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'二次'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INSERT('Quadratic', 3, 100, 'What');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'QuWhat'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_instr"></a><p>
          <a class="indexterm" name="idm140528086901664"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_instr"><code class="literal">INSTR(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>substr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串</font></font><em class="replaceable"><code>substr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">第一次出现的子
           </font><font style="vertical-align: inherit;">串的位置
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这与双参数形式相同</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_locate"><code class="literal">LOCATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，只是参数的顺序相反。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INSTR('foobarbar', 'bar');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INSTR('xbar', 'foobar');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数是多字节安全的，并且仅在至少一个参数是二进制字符串时区分大小写。
        </font></font></p></li><li class="listitem"><a name="function_lcase"></a><p>
          <a class="indexterm" name="idm140528086888400"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_lcase"><code class="literal">LCASE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_lcase"><code class="literal">LCASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7中，</font></font><code class="literal">LCASE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">视图中使用的内容被重写为</font></font><code class="literal">LOWER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储视图的定义。</font><font style="vertical-align: inherit;">（Bug＃12844279）
        </font></font></p></li><li class="listitem"><a name="function_left"></a><p>
          <a class="indexterm" name="idm140528086876816"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_left"><code class="literal">LEFT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串中</font><font style="vertical-align: inherit;">最左边的</font><font style="vertical-align: inherit;">字符</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LEFT('foobarbar', 5);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'fooba'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_length"></a><p>
          <a class="indexterm" name="idm140528086864352"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串的长度
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以字节为单位。</font><font style="vertical-align: inherit;">多字节字符计为多个字节。</font><font style="vertical-align: inherit;">这意味着对于包含5个2字节字符的字符串，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LENGTH('text');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在</font></font><code class="literal">Length()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开放GIS空间功能被命名为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL中。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_load-file"></a><p>
          <a class="indexterm" name="idm140528086847840"></a>

          <a class="indexterm" name="idm140528086846768"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_load-file"><code class="literal">LOAD_FILE(<em class="replaceable"><code>file_name</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          读取文件并以字符串形式返回文件内容。</font><font style="vertical-align: inherit;">要使用此功能，该文件必须位于服务器主机上，必须指定文件的完整路径名称，并且您必须具有该</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_file"><code class="literal">FILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权。</font><font style="vertical-align: inherit;">该文件必须全部可读，其大小小于
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节。</font><font style="vertical-align: inherit;">如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量设置为非空目录名称，则要加载的文件必须位于该目录中。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果由于上述条件之一不满足而导致文件不存在或无法读取，则函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_filesystem"><code class="literal">character_set_filesystem</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          系统变量控制给定为文字字符串文件名的解释。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE t</code></strong>
          <strong class="userinput"><code>  SET blob_col=LOAD_FILE('/tmp/picture')</code></strong>
          <strong class="userinput"><code>  WHERE id=1;</code></strong>
</pre></li><li class="listitem"><a name="function_locate"></a><p>
          <a class="indexterm" name="idm140528086828752"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_locate"><code class="literal">LOCATE(<em class="replaceable"><code>substr</code></em>,<em class="replaceable"><code>str</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_locate"><code class="literal">LOCATE(<em class="replaceable"><code>substr</code></em>,<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          第一个语法返回字符串</font></font><em class="replaceable"><code>substr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">第一次出现的子</font><font style="vertical-align: inherit;">字符串的位置
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第二个语法从位置开始返回字符串</font></font><em class="replaceable"><code>substr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">第一次出现的子
           </font><font style="vertical-align: inherit;">串的
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置
           </font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>substr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不在，则
           </font><font style="vertical-align: inherit;">返回</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>substr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或者</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOCATE('bar', 'foobarbar');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOCATE('xbar', 'foobar');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOCATE('bar', 'foobarbar', 5);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 7</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数是多字节安全的，并且仅在至少一个参数是二进制字符串时区分大小写。
        </font></font></p></li><li class="listitem"><a name="function_lower"></a><p>
          <a class="indexterm" name="idm140528086808368"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据当前字符集映射</font><font style="vertical-align: inherit;">
          返回字符串，</font><font style="vertical-align: inherit;">其中所有字符都改为小写。</font><font style="vertical-align: inherit;">默认值是
           </font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（cp1252 West European）。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOWER('QUADRATICALLY');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'quadratically'</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当施加到二进制字符串（）是无效的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">要执行信箱转换，请将字符串转换为非二进制字符串：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @str = BINARY 'New York';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT LOWER(@str), LOWER(CONVERT(@str USING latin1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LOWER（@str）| </font><font style="vertical-align: inherit;">LOWER（CONVERT（@str USING latin1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">纽约| </font><font style="vertical-align: inherit;">纽约|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于Unicode字符集的归类，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据整理名称中的Unicode归类算法（UCA）版本（如果有）和UCA 4.0.0（如果未指定版本）进行工作。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">utf8_unicode_520_ci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据UCA 5.2.0进行工作，而
           </font></font><code class="literal">utf8_unicode_ci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据UCA 4.0.0进行工作。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-unicode-sets" title="10.10.1 Unicode字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.10.1节“Unicode字符集”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在以前版本的MySQL中，</font></font><code class="literal">LOWER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">视图中使用的内容被重写为
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lcase"><code class="literal">LCASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储视图的定义。</font><font style="vertical-align: inherit;">在MySQL 5.7中，
           </font></font><code class="literal">LOWER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下永远不会被重写，但</font></font><code class="literal">LCASE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在视图中使用</font><font style="vertical-align: inherit;">却被</font><font style="vertical-align: inherit;">重写为</font></font><code class="literal">LOWER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（Bug＃12844279）
        </font></font></p></li><li class="listitem"><a name="function_lpad"></a><p>
          <a class="indexterm" name="idm140528086778368"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_lpad"><code class="literal">LPAD(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>,<em class="replaceable"><code>padstr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，用</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">左填充</font></font><em class="replaceable"><code>padstr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到一定长度的</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符。</font><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长于
           </font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值缩短为</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LPAD('hi',4,'??');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'??嗨'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LPAD('hi',1,'??');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'h'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_ltrim"></a><p>
          <a class="indexterm" name="idm140528086764736"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ltrim"><code class="literal">LTRIM(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除前导空格字符</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LTRIM('  barbar');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'barbar'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_make-set"></a><p>
          <a class="indexterm" name="idm140528086754432"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_make-set"><code class="literal">MAKE_SET(<em class="replaceable"><code>bits</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个设置值（一个字符串，其中包含由</font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">分隔的子字符串</font><font style="vertical-align: inherit;">），由包含相应位的字符串组成
           </font></font><em class="replaceable"><code>bits</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font><em class="replaceable"><code>str1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于位0，
           </font></font><em class="replaceable"><code>str2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位1，依此类推。
          </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在值
           </font></font><em class="replaceable"><code>str1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><em class="replaceable"><code>str2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不附加到该结果。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKE_SET(1,'a','b','c');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'a'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKE_SET(1 | 4,'hello','nice','world');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'你好，世界'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKE_SET(1 | 4,'hello','nice',NULL,'world');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'你好'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKE_SET(0,'a','b','c');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;''</font></font><font></font>
</pre></li><li class="listitem"><a name="function_mid"></a><p>
          <a class="indexterm" name="idm140528086737312"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mid"><code class="literal">MID(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mid"><code class="literal">MID(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是一个同义词
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_oct"></a><p>
          <a class="indexterm" name="idm140528086724592"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_oct"><code class="literal">OCT(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回八进制值的字符串表示形式
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">longlong（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是数字。</font><font style="vertical-align: inherit;">这相当于
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">如果
           </font><font style="vertical-align: inherit;">是</font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,10,8)</code></a><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT OCT(12);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'14'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_octet-length"></a><p>
          <a class="indexterm" name="idm140528086709552"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_octet-length"><code class="literal">OCTET_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_octet-length"><code class="literal">OCTET_LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">LENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_ord"></a><p>
          <a class="indexterm" name="idm140528086699904"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ord"><code class="literal">ORD(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果字符串的最左边的字符
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是多字节字符，则返回该字符的代码，使用以下公式从其组成字节的数值中计算出来：
        </font></font></p><pre data-lang="clike" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  （第一字节码）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+（第二字节码* 256）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+（第三字节代码* 256 ^ 2）...</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果最左边的字符不是多字节字符，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ord"><code class="literal">ORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回与该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ascii"><code class="literal">ASCII()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">相同的值</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ORD('2');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 50</font></font><font></font>
</pre></li><li class="listitem"><a name="function_position"></a><p>
          <a class="indexterm" name="idm140528086685920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_position"><code class="literal">POSITION(<em class="replaceable"><code>substr</code></em>
          IN <em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_position"><code class="literal">POSITION(<em class="replaceable"><code>substr</code></em>
          IN <em class="replaceable"><code>str</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_locate"><code class="literal">LOCATE(<em class="replaceable"><code>substr</code></em>,<em class="replaceable"><code>str</code></em>)</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_quote"></a><p>
          <a class="indexterm" name="idm140528086674208"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_quote"><code class="literal">QUOTE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          引用一个字符串以产生可用作SQL语句中正确转义的数据值的结果。</font><font style="vertical-align: inherit;">该字符串以单引号括起来，每个反斜杠（</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），单引号（</font></font><code class="literal">'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），ASCII </font></font><code class="literal">NUL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和Ctrl + Z </font><font style="vertical-align: inherit;">实例</font><font style="vertical-align: inherit;">前面都带有反斜杠。</font><font style="vertical-align: inherit;">如果参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值是</font><font style="vertical-align: inherit;">不带单引号</font><font style="vertical-align: inherit;">的单词
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT QUOTE('Don\'t!');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'不要！'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT QUOTE(NULL);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><a class="indexterm" name="idm140528086662848"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关比较，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#string-literals" title="9.1.1字符串文字"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.1.1节“字符串文字”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="xref" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-real-escape-string-quote" title="27.8.7.56 mysql_real_escape_string_quote（）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第27.8.7.56节“mysql_real_escape_string_quote（）”中的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字字符串和C API中的引用规则</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_repeat"></a><p>
          <a class="indexterm" name="idm140528086657440"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_repeat"><code class="literal">REPEAT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>count</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回由</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复
           </font></font><em class="replaceable"><code>count</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次数</font><font style="vertical-align: inherit;">的字符串组成的字符串
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>count</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于1，则返回一个空字符串。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是
           </font></font><em class="replaceable"><code>count</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT REPEAT('MySQL', 3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'MySQLMySQLMySQL'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_replace"></a><p>
          <a class="indexterm" name="idm140528086643920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_replace"><code class="literal">REPLACE(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>from_str</code></em>,<em class="replaceable"><code>to_str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有出现的字符串</font></font><em class="replaceable"><code>from_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          被</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">替换的字符串</font></font><em class="replaceable"><code>to_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_replace"><code class="literal">REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在搜索时执行区分大小写的匹配
           </font></font><em class="replaceable"><code>from_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT REPLACE('www.mysql.com', 'w', 'Ww');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'WwWwWw.mysql.com'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_reverse"></a><p>
          <a class="indexterm" name="idm140528086630064"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_reverse"><code class="literal">REVERSE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符顺序颠倒</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT REVERSE('abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'cba'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_right"></a><p>
          <a class="indexterm" name="idm140528086619776"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_right"><code class="literal">RIGHT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          字符串中</font><font style="vertical-align: inherit;">最右边的</font><font style="vertical-align: inherit;">字符</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT RIGHT('foobarbar', 4);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'rbar'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_rpad"></a><p>
          <a class="indexterm" name="idm140528086607248"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_rpad"><code class="literal">RPAD(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>,<em class="replaceable"><code>padstr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，用</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">右键填充</font></font><em class="replaceable"><code>padstr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          到一定长度的</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符。</font><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长于
           </font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值缩短为</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT RPAD('hi',5,'?');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'嗨???'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT RPAD('hi',1,'?');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'h'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_rtrim"></a><p>
          <a class="indexterm" name="idm140528086593168"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_rtrim"><code class="literal">RTRIM(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除了尾随空格字符</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT RTRIM('barbar   ');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'barbar'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_soundex"></a><p>
          <a class="indexterm" name="idm140528086582864"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_soundex"><code class="literal">SOUNDEX(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从中返回一个soundex字符串</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">两个声音几乎相同的字符串应该有相同的soundex字符串。</font><font style="vertical-align: inherit;">一个标准的soundex字符串是四个字符长，但该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          函数返回一个任意长的字符串。</font><font style="vertical-align: inherit;">您可以使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果来获得标准的soundex字符串。</font><font style="vertical-align: inherit;">所有非字母字符
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都被忽略。</font><font style="vertical-align: inherit;">AZ范围之外的所有国际字母字符都视为元音。
</font></font></p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用时</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，应注意以下限制：
</font></font></p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              目前实施的这个功能只能用于英文字符串。</font><font style="vertical-align: inherit;">其他语言的字符串可能不会产生可靠的结果。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              不保证该函数能够对使用多字节字符集的字符串（包括字符串）提供一致的结果</font></font><code class="literal">utf-8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关更多信息，请参见错误＃22638。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SOUNDEX('Hello');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'H400'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SOUNDEX('Quadratically');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'Q36324'</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这个函数实现了原来的Soundex算法，而不是更受欢迎的增强版本（也由D. Knuth描述）。</font><font style="vertical-align: inherit;">不同之处在于，原始版本首先丢弃元音，然后重复第二次，而增强版本丢弃第一次重复，元音第二次重复。
</font></font></p>
</div>
</li><li class="listitem"><a name="operator_sounds-like"></a><p>
          <a class="indexterm" name="idm140528086561920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_sounds-like"><code class="literal"><em class="replaceable"><code>expr1</code></em>
          SOUNDS LIKE <em class="replaceable"><code>expr2</code></em></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这与之相同
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_soundex"><code class="literal">SOUNDEX(<em class="replaceable"><code>expr1</code></em>)
          = SOUNDEX(<em class="replaceable"><code>expr2</code></em>)</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_space"></a><p>
          <a class="indexterm" name="idm140528086552480"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_space"><code class="literal">SPACE(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回由</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          空格字符</font><font style="vertical-align: inherit;">组成的字符串</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SPACE(6);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;''</font></font><font></font>
</pre></li><li class="listitem"><a name="function_substr"></a><p>
          <a class="indexterm" name="idm140528086542720"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em> FOR
          <em class="replaceable"><code>len</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_substr"><code class="literal">SUBSTR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_substring"></a><p>
          <a class="indexterm" name="idm140528086525904"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em> FOR
          <em class="replaceable"><code>len</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          没有</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">的表单</font><font style="vertical-align: inherit;">返回从</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          位置开始</font><font style="vertical-align: inherit;">的字符串的子字符串</font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">带有</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">的表单</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置开始</font><font style="vertical-align: inherit;">返回一个</font><font style="vertical-align: inherit;">从字符串</font><font style="vertical-align: inherit;">开始
           </font><font style="vertical-align: inherit;">的子</font><font style="vertical-align: inherit;">字符串</font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用的表单
           </font></font><code class="literal">FROM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是标准的SQL语法。</font><font style="vertical-align: inherit;">也可以使用负值
           </font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，子字符串的开头是字符串</font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">末尾的字符，而不是开头。</font></font><em class="replaceable"><code>pos</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数的任何形式</font><font style="vertical-align: inherit;">都可以使用负值</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于所有形式</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，要从中提取子串的字符串中的第一个字符的位置被认为是
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING('Quadratically',5);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'ratically'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING('foobarbar' FROM 4);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'barbar'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING('Quadratically',5,6);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'ratica'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING('Sakila', -3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'ila'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING('Sakila', -5, 3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'aki'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING('Sakila' FROM -4 FOR 2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'ki'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于1，结果是空字符串。
        </font></font></p></li><li class="listitem"><a name="function_substring-index"></a><p>
          <a class="indexterm" name="idm140528086496128"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>delim</code></em>,<em class="replaceable"><code>count</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在分隔符出现</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前
           </font></font><em class="replaceable"><code>count</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">
          从字符串返回子字符串
           </font></font><em class="replaceable"><code>delim</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>count</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是肯定的，则返回最后一个分隔符左边的数字（从左数起）。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>count</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是负数，则返回最后一个分隔符右边的数字（从右数起）。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在搜索时执行区分大小写的匹配
           </font></font><em class="replaceable"><code>delim</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING_INDEX('www.mysql.com', '.', 2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'www.mysql'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBSTRING_INDEX('www.mysql.com', '.', -2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'mysql.com'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_to-base64"></a><p>
          <a class="indexterm" name="idm140528086480272"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-base64"><code class="literal">TO_BASE64(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将字符串参数转换为base-64编码形式，并将结果作为字符串与连接字符集和归类一起返回。</font><font style="vertical-align: inherit;">如果参数不是字符串，则在转换发生之前将其转换为字符串。</font><font style="vertical-align: inherit;">结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Base-64编码的字符串可以使用该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          函数</font><font style="vertical-align: inherit;">进行解码</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_BASE64('abc'), FROM_BASE64(TO_BASE64('abc'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'JWJj'，'abc'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          存在不同的base-64编码方案。</font><font style="vertical-align: inherit;">这些是由所使用的编码和解码规则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字母表值62的编码是
               </font></font><code class="literal">'+'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字母表值63的编码是
               </font></font><code class="literal">'/'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              编码输出由4个可打印字符组成。</font><font style="vertical-align: inherit;">输入数据的每个3字节都使用4个字符进行编码。</font><font style="vertical-align: inherit;">如果最后一个组不完整，则填充</font></font><code class="literal">'='</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符长度为4。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在编码输出的每76个字符后添加一个换行符，以将长输出分成多行。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              解码可识别并忽略换行符，回车符，制表符和空格。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><a name="function_trim"></a><p>
          <a class="indexterm" name="idm140528086456928"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_trim"><code class="literal">TRIM([{BOTH | LEADING | TRAILING}
          [<em class="replaceable"><code>remstr</code></em>] FROM]
          <em class="replaceable"><code>str</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_trim"><code class="literal">TRIM([<em class="replaceable"><code>remstr</code></em>
          FROM] <em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font><font style="vertical-align: inherit;">删除</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了所有
           </font></font><em class="replaceable"><code>remstr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前缀或后缀</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果没有任何说明符</font></font><code class="literal">BOTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">LEADING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code class="literal">TRAILING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被给出，</font></font><code class="literal">BOTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则被假定。
          </font></font><em class="replaceable"><code>remstr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可选的，如果没有指定，空格被删除。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRIM('  bar   ');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'酒吧'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRIM(LEADING 'x' FROM 'xxxbarxxx');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'barxxx'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRIM(BOTH 'x' FROM 'xxxbarxxx');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'酒吧'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRIM(TRAILING 'xyz' FROM 'barxxyz');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'barx'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p></li><li class="listitem"><a name="function_ucase"></a><p>
          <a class="indexterm" name="idm140528086437936"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ucase"><code class="literal">UCASE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ucase"><code class="literal">UCASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7中，</font></font><code class="literal">UCASE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">视图中使用的内容被重写为</font></font><code class="literal">UPPER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储视图的定义。</font><font style="vertical-align: inherit;">（Bug＃12844279）
        </font></font></p></li><li class="listitem"><a name="function_unhex"></a><p>
          <a class="indexterm" name="idm140528086425296"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于字符串参数</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">
          将</font><font style="vertical-align: inherit;">参数中的</font><font style="vertical-align: inherit;">每对字符解释为十六进制数字并将其转换为由数字表示的字节。</font><font style="vertical-align: inherit;">返回值是一个二进制字符串。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX(<em class="replaceable"><code>str</code></em>)</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNHEX('4D7953514C');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'MySQL'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT X'4D7953514C';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'MySQL'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNHEX(HEX('string'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'string'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(UNHEX('1267'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1267'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在参数字符串中的字符必须是合法的十六进制数字：</font></font><code class="literal">'0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...
           </font></font><code class="literal">'9'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'A'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...
           </font></font><code class="literal">'F'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'a'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...
           </font></font><code class="literal">'f'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数包含任何非十六进制数字，则结果为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNHEX('GG');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">UNHEX（'GG'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          阿</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可发生的结果，如果该参数
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，列，因为值是用0x00填充字节存储时，但这些字节不剥离上检索。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">'41'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被存储到</font></font><code class="literal">CHAR(3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中
           </font></font><code class="literal">'41&nbsp;'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并被检索为
           </font></font><code class="literal">'41'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（随着剥离的拖尾空间），因此</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列值返回</font></font><code class="literal">'A'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">相比之下
           </font></font><code class="literal">'41'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，存储在
           </font></font><code class="literal">BINARY(3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中
           </font></font><code class="literal">'41\0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且被检索为
           </font></font><code class="literal">'41\0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（尾随
           </font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节未被剥离）。
          </font></font><code class="literal">'\0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是合法的十六进制数字，所以
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为列值返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于一个数字参数</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其倒数
           </font><font style="vertical-align: inherit;">
          不会被执行</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
          改为</font><font style="vertical-align: inherit;">使用
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参阅说明
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX(<em class="replaceable"><code>N</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV(HEX(<em class="replaceable"><code>N</code></em>),16,10)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_upper"></a><p>
          <a class="indexterm" name="idm140528086383472"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据当前字符集映射</font><font style="vertical-align: inherit;">
          返回字符串，</font><font style="vertical-align: inherit;">其中所有字符均已更改为大写字符。</font><font style="vertical-align: inherit;">默认值是
           </font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（cp1252 West European）。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UPPER('Hej');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'HEJ'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请参阅说明</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以了解还适用于的信息
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这包括有关如何执行二进制串的大小写转换信息（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），用于这些功能是无效的，以及约壳体折叠的Unicode字符集的信息。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是多字节安全的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在以前版本的MySQL中，</font></font><code class="literal">UPPER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">视图中使用的内容被重写为
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ucase"><code class="literal">UCASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储视图的定义。</font><font style="vertical-align: inherit;">在MySQL 5.7中，
           </font></font><code class="literal">UPPER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下永远不会被重写，但</font></font><code class="literal">UCASE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在视图中使用</font><font style="vertical-align: inherit;">却被</font><font style="vertical-align: inherit;">重写为</font></font><code class="literal">UPPER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（Bug＃12844279）
        </font></font></p></li><li class="listitem"><a name="function_weight-string"></a><p>
          <a class="indexterm" name="idm140528086361312"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str</code></em>
          [AS {CHAR|BINARY}(<em class="replaceable"><code>N</code></em>)] [LEVEL
          <em class="replaceable"><code>levels</code></em>]
          [<em class="replaceable"><code>flags</code></em>])</code></a>
        </p><p>
          <code class="literal"><em class="replaceable"><code>levels</code></em>:
          <em class="replaceable"><code>N</code></em> [ASC|DESC|REVERSE] [,
          <em class="replaceable"><code>N</code></em> [ASC|DESC|REVERSE]] ...</code>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数返回输入字符串的权重字符串。</font><font style="vertical-align: inherit;">返回值是一个表示字符串的比较和排序值的二进制字符串。</font><font style="vertical-align: inherit;">它具有以下属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果
               </font><font style="vertical-align: inherit;">
              =
               </font><font style="vertical-align: inherit;">，那么</font><font style="vertical-align: inherit;">
              （</font><font style="vertical-align: inherit;">并且
               </font><font style="vertical-align: inherit;">被认为是相等的）
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str1</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str2</code></em>)</code></a><font style="vertical-align: inherit;"></font><code class="literal"><em class="replaceable"><code>str1</code></em> =
              <em class="replaceable"><code>str2</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str1</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str2</code></em><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果
               </font><font style="vertical-align: inherit;">
              &lt;
               </font><font style="vertical-align: inherit;">，那么</font><font style="vertical-align: inherit;">
              （</font><font style="vertical-align: inherit;">从前排序
               </font><font style="vertical-align: inherit;">）
</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str1</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str2</code></em>)</code></a><font style="vertical-align: inherit;"></font><code class="literal"><em class="replaceable"><code>str1</code></em> &lt;
              <em class="replaceable"><code>str2</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str1</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str2</code></em><font style="vertical-align: inherit;"></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个用于内部使用的调试功能。</font><font style="vertical-align: inherit;">它的行为可以在MySQL版本之间无需通知而改变。</font><font style="vertical-align: inherit;">它可以用于排序规则的测试和调试，尤其是在您添加新的排序规则时。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#adding-collation" title="10.13将排序规则添加到字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.13节“为字符集添加排序规则”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这份清单简要地总结了这些论点。</font><font style="vertical-align: inherit;">更多细节在列表之后的讨论中给出。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：输入字符串表达式。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">AS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句：可选; </font><font style="vertical-align: inherit;">将输入字符串转换为给定的类型和长度。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">LEVEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句：可选; </font><font style="vertical-align: inherit;">指定返回值的权重级别。
            </font></font></p></li><li class="listitem"><p>
              <em class="replaceable"><code>flags</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">： 可选的; </font><font style="vertical-align: inherit;">没用过。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          输入字符串，</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个字符串表达式。</font><font style="vertical-align: inherit;">如果输入是一个非二进制（字符）串，诸如</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，则返回值将包含该字符串核对权重。</font><font style="vertical-align: inherit;">如果输入是二进制（字节）字符串，如a
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value，则返回值与输入相同（二进制字符串中每个字节的权重是字节值）。</font><font style="vertical-align: inherit;">如果输入是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @s = _latin1 'AB' COLLATE latin1_swedish_ci;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@s | </font><font style="vertical-align: inherit;">HEX（@s）| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（@s））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">AB | </font><font style="vertical-align: inherit;">4142 | </font><font style="vertical-align: inherit;">4142 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @s = _latin1 'ab' COLLATE latin1_swedish_ci;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@s | </font><font style="vertical-align: inherit;">HEX（@s）| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（@s））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ab | </font><font style="vertical-align: inherit;">6162 | </font><font style="vertical-align: inherit;">4142 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @s = CAST('AB' AS BINARY);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@s | </font><font style="vertical-align: inherit;">HEX（@s）| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（@s））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">AB | </font><font style="vertical-align: inherit;">4142 | </font><font style="vertical-align: inherit;">4142 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @s = CAST('ab' AS BINARY);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@s | </font><font style="vertical-align: inherit;">HEX（@s）| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（@s））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ab | </font><font style="vertical-align: inherit;">6162 | </font><font style="vertical-align: inherit;">6162 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          前面的例子
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用来显示
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果。</font><font style="vertical-align: inherit;">由于结果是二进制值，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此当结果包含非打印值时可以特别有用，以可打印的形式显示它：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @s = CONVERT(X'C39F' USING utf8) COLLATE utf8_czech_ci;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(@s));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（@s））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0FEA0FEA |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回值，值的数据类型是</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其长度在最大长度范围内
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则数据类型为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">AS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句可能会将输入字符串转换为非二进制或二进制字符串，并将其强制为给定的长度：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">AS CHAR(<em class="replaceable"><code>N</code></em>)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将字符串转换为非二进制字符串，并将其右侧的空格填充为一定长度的
               </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符。
              </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须至少为1.如果
               </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于输入字符串的长度，则字符串将被截断为
               </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符。</font><font style="vertical-align: inherit;">截断不会发生警告。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">AS BINARY(<em class="replaceable"><code>N</code></em>)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              是类似的，但将字符串转换为二进制字符串，
               </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以字节（不是字符）度量，填充使用</font></font><code class="literal">0x00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字节（不是空格）。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET NAMES 'latin1';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING('ab' AS CHAR(4)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（'ab'AS CHAR（4）））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">41422020 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET NAMES 'utf8';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING('ab' AS CHAR(4)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（'ab'AS CHAR（4）））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0041004200200020 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING('ab' AS BINARY(4)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（'ab'AS BINARY（4）））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">61620000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"></font><code class="literal">LEVEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以给出</font><font style="vertical-align: inherit;">
          该</font><font style="vertical-align: inherit;">条款来指定返回值应包含特定归类级别的权重。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在</font></font><em class="replaceable"><code>levels</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面的说明符
           </font></font><code class="literal">LEVEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字可被给予或者作为由逗号分隔的一个或多个整数的列表，或为一个范围用破折号分开两个整数的。</font><font style="vertical-align: inherit;">标点符号周围的空白不重要。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1级</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LEVEL 2，3，5</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等级1-3</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          任何小于1的级别都被视为1.任何大于输入字符串归类最大值的级别都将被视为归类的最大值。</font><font style="vertical-align: inherit;">每个排序规则的最大值不同，但从不大于6。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在一个级别列表中，级别必须按递增顺序给出。</font><font style="vertical-align: inherit;">在一定范围内，如果第二个数字小于第一个数字，则将其视为第一个数字（例如，4-2与4-4相同）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果该</font></font><code class="literal">LEVEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句被省略，MySQL将假定</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">排序的最大级别</font><font style="vertical-align: inherit;">在哪里
           </font><font style="vertical-align: inherit;">。
        </font></font><code class="literal">LEVEL 1 -
          <em class="replaceable"><code>max</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>max</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><code class="literal">LEVEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用列表语法（不是范围句法）指定，则任何级别的数字都可以跟随这些修饰符：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">ASC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：不加修改地返回重量。</font><font style="vertical-align: inherit;">这是默认设置。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：返回按位倒置的权重（例如，</font></font><code class="literal">0x78f0 DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=
               </font></font><code class="literal">0x870f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">REVERSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：以相反的顺序返回权重（即，反转字符串的权重，第一个字符为最后一个，最后一个为第一个字符）。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例子：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（0x007fff LEVEL 1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">007FFF |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1 DESC));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（0x007fff LEVEL 1 DESC））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">FF8000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1 REVERSE));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（0x007fff LEVEL 1 REVERSE））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">FF7F00 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1 DESC REVERSE));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">HEX（WEIGHT_STRING（0x007fff LEVEL 1 DESC REVERSE））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0080FF |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><em class="replaceable"><code>flags</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款目前尚未使用。
</font></font></p></li></ul>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="string-comparison-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.1字符串比较函数</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528086255008"></a><a class="indexterm" name="idm140528086253920"></a>
<div class="table">
<a name="idm140528086252432"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.8字符串比较运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists string comparison operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      简单的模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定简单模式匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      比较两个字符串
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果一个字符串函数被赋予一个二进制字符串作为参数，那么结果字符串也是一个二进制字符串。</font><font style="vertical-align: inherit;">转换为字符串的数字被视为二进制字符串。</font><font style="vertical-align: inherit;">这只影响比较。
      </font></font></p><a class="indexterm" name="idm140528086234944"></a><a class="indexterm" name="idm140528086233456"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通常，如果字符串比较中的任何表达式区分大小写，则会以区分大小写的方式执行比较。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_like"></a><p>
            <a class="indexterm" name="idm140528086228176"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal"><em class="replaceable"><code>expr</code></em>
            LIKE <em class="replaceable"><code>pat</code></em> [ESCAPE
            '<em class="replaceable"><code>escape_char</code></em>']</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用SQL模式进行模式匹配。</font><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="literal">TRUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="literal">FALSE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">如果其中之一
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
             </font></font><em class="replaceable"><code>pat</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该模式不需要是文字字符串。</font><font style="vertical-align: inherit;">例如，它可以被指定为一个字符串表达式或表列。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            根据SQL标准，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在每个字符的基础上执行匹配，因此可以产生与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比较运算符</font><font style="vertical-align: inherit;">不同的结果
             </font><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'ä' LIKE 'ae' COLLATE latin1_german2_ci;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">'ä'LIKE'ae'COLLATE latin1_german2_ci |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'ä' = 'ae' COLLATE latin1_german2_ci;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">'ä'='ae'COLLATE latin1_german2_ci |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            特别地，尾部空格是显著，这是不为真</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与所执行的比较</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            操作符：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'a' = 'a ', 'a' LIKE 'a ';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">'a'='a'| </font><font style="vertical-align: inherit;">'a'LIKE'a'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有了</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用的图案以下两个通配符：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 匹配任意数量的字符，甚至是零个字符。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 恰好匹配一个字符。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'David!' LIKE 'David_';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'David!' LIKE '%D%v%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要测试通配符的文字实例，请在其前面加上转义字符。</font><font style="vertical-align: inherit;">如果不指定</font></font><code class="literal">ESCAPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符，
             </font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则假定。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">\%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配一个</font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                字符。
              </font></font></p></li><li class="listitem"><p>
                <code class="literal">\_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配一个</font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                字符。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'David!' LIKE 'David\_';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'David_' LIKE 'David\_';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要指定不同的转义字符，请使用以下
             </font></font><code class="literal">ESCAPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'David_' LIKE 'David|_' ESCAPE '|';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            转义序列应该是空的或一个字符长。</font><font style="vertical-align: inherit;">表达式必须在执行时作为常量进行计算。</font><font style="vertical-align: inherit;">如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_backslash_escapes"><code class="literal">NO_BACKSLASH_ESCAPES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了
             </font><font style="vertical-align: inherit;">SQL模式，则序列不能为空。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以下两条语句说明除非其中一个操作数区分大小写（使用区分大小写的归类或二进制字符串），否则字符串比较不区分大小写：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'abc' LIKE 'ABC';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'abc' LIKE _latin1 'ABC' COLLATE latin1_general_cs;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'abc' LIKE _latin1 'ABC' COLLATE latin1_bin;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'abc' LIKE BINARY 'ABC';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为标准SQL的扩展，MySQL允许
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用数字表达式。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 10 LIKE '1%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由于MySQL在字符串中使用C转义语法（例如，</font></font><code class="literal">\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了表示换行符），所以您必须</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">任何</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串中的</font><font style="vertical-align: inherit;">任何值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，要搜索</font></font><code class="literal">\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请将其指定为</font></font><code class="literal">\\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要搜索
               </font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请将其指定为
               </font></font><code class="literal">\\\\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">这是因为反斜杠被解析器剥离了一次，并且当匹配模式匹配时，反斜杠被匹配。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              例外：在模式字符串的末尾，反斜杠可以被指定为</font></font><code class="literal">\\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在字符串的末尾，反斜杠代表它自己，因为没有任何后续的转义。</font><font style="vertical-align: inherit;">假设一个表格包含以下值：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT filename FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文件名|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\ |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\程序|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\ Programs \ |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              要测试以反斜杠结尾的值，可以使用以下任一模式匹配值：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT filename, filename LIKE '%\\' FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文件名| </font><font style="vertical-align: inherit;">文件名LIKE'％\\'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\ | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\程序| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\ Programs \ | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + --------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT filename, filename LIKE '%\\\\' FROM t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文件名| </font><font style="vertical-align: inherit;">文件名LIKE'％\\\\'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\ | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\程序| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">C：\ Programs \ | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + ----------------------- +</font></font><font></font>
</pre>
</div>
</li><li class="listitem"><a name="operator_not-like"></a><p>
            <a class="indexterm" name="idm140528086158448"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT LIKE <em class="replaceable"><code>pat</code></em> [ESCAPE
            '<em class="replaceable"><code>escape_char</code></em>']</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这与之相同</font><font style="vertical-align: inherit;">。
</font></font><code class="literal">NOT
            (<em class="replaceable"><code>expr</code></em> LIKE
            <em class="replaceable"><code>pat</code></em> [ESCAPE
            '<em class="replaceable"><code>escape_char</code></em>'])</code><font style="vertical-align: inherit;"></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              涉及</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal">NOT
              LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与包含列比较的
               </font><font style="vertical-align: inherit;">聚合查询</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能会产生意外的结果。</font><font style="vertical-align: inherit;">例如，请考虑下表和数据：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE foo（bar VARCHAR（10））;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO foo VALUES（NULL），（NULL）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              查询</font></font><code class="literal">SELECT COUNT(*) FROM foo WHERE bar LIKE
              '%baz%';</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">你可能会认为</font></font><code class="literal">SELECT COUNT(*) FROM foo WHERE bar
              NOT LIKE '%baz%';</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会返回
               </font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，情况并非如此：第二个查询返回</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是因为
               </font><font style="vertical-align: inherit;">总是回报
               </font><font style="vertical-align: inherit;">，无论价值如何
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于涉及</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">或的</font><font style="vertical-align: inherit;">比较的
               </font><font style="vertical-align: inherit;">聚合查询也是如此</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，您必须明确地测试</font><font style="vertical-align: inherit;">使用
               </font><font style="vertical-align: inherit;">（而不是
               </font><font style="vertical-align: inherit;">），如下所示：
            </font></font><code class="literal">NULL NOT LIKE
              <em class="replaceable"><code>expr</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT
              RLIKE</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT
              REGEXP</code></a><font style="vertical-align: inherit;"></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT COUNT（*）FROM foo WHERE bar NOT LIKE'％baz％'or bar IS NULL;
</font></font></pre>
</div>
</li><li class="listitem"><a name="function_strcmp"></a><p>
            <a class="indexterm" name="idm140528086130720"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_strcmp"><code class="literal">STRCMP(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_strcmp"><code class="literal">STRCMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据当前排序顺序，如果第一个参数小于第二个参数</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则
             </font><font style="vertical-align: inherit;">返回
             </font><font style="vertical-align: inherit;">字符串相同，
             </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则返回。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STRCMP('text', 'text2');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STRCMP('text2', 'text');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STRCMP('text', 'text');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_strcmp"><code class="literal">STRCMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 使用参数的排序来执行比较。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @s1 = _latin1 'x' COLLATE latin1_general_ci;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @s2 = _latin1 'X' COLLATE latin1_general_ci;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @s3 = _latin1 'x' COLLATE latin1_general_cs;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @s4 = _latin1 'X' COLLATE latin1_general_cs;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT STRCMP(@s1, @s2), STRCMP(@s3, @s4);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">STRCMP（@ s1，@ s2）| </font><font style="vertical-align: inherit;">STRCMP（@ s3，@ s4）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + ------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果排序规则不兼容，则必须将其中一个参数转换为与其他参数兼容。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-collation-coercibility" title="10.8.4表达式中的排序强制性"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.8.4节“表达式中的校对可压缩性”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STRCMP(@s1, @s3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1267（HY000）：非法混合排序（latin1_general_ci，IMPLICIT）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和（latin1_general_cs，IMPLICIT）用于操作'strcmp'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STRCMP(@s1, @s3 COLLATE latin1_general_ci);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">STRCMP（@ s1，@ s3 COLLATE latin1_general_ci）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font>
</pre></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="regexp"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.2正则表达式</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528086106240"></a><a class="indexterm" name="idm140528086105168"></a><a class="indexterm" name="idm140528086104096"></a><a class="indexterm" name="idm140528086103008"></a>
<div class="table">
<a name="idm140528086101520"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.9正则表达式运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists regular expression operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      否定REGEXP
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符串是否匹配正则表达式
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        正则表达式是指定复杂搜索模式的有效方法。</font><font style="vertical-align: inherit;">本节讨论可用于正则表达式匹配的运算符，并举例说明一些可用于正则表达式运算的特殊字符和结构。</font><font style="vertical-align: inherit;">另见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/tutorial.html#pattern-matching" title="3.3.4.7模式匹配"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3.3.4.7节“模式匹配”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL使用Henry Spencer的正则表达式实现，这是为了符合POSIX 1003.2。</font><font style="vertical-align: inherit;">MySQL使用扩展版本来支持SQL语句中的正则表达式模式匹配操作。</font><font style="vertical-align: inherit;">本节不包含亨利斯宾塞</font></font><code class="literal">regex(7)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手册页中的</font><font style="vertical-align: inherit;">所有详细信息
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该手册页包含在MySQL源代码发行版中，位于该
         </font></font><code class="filename">regex.7</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录下的
         </font></font><code class="filename">regex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#regexp-operators" title="正则表达式运算符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正则表达式运算符</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#regexp-syntax" title="正则表达式语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正则表达式语法</font></font></a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="regexp-operators"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正则表达式运算符</font></font></h4>

</div>

</div>

</div>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_not-regexp"></a><p>
              <a class="indexterm" name="idm140528086074864"></a>

              <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
              NOT REGEXP <em class="replaceable"><code>pat</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
              NOT RLIKE <em class="replaceable"><code>pat</code></em></code></a>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这与之相同</font><font style="vertical-align: inherit;">。
            </font></font><code class="literal">NOT
              (<em class="replaceable"><code>expr</code></em> REGEXP
              <em class="replaceable"><code>pat</code></em>)</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="operator_regexp"></a><p>
              <a class="indexterm" name="idm140528086063440"></a>

              <a class="indexterm" name="idm140528086062368"></a>

              <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
              REGEXP <em class="replaceable"><code>pat</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
              RLIKE <em class="replaceable"><code>pat</code></em></code></a>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果字符串</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配由模式指定的正则表达式，则
               </font><font style="vertical-align: inherit;">返回1;否则返回</font></font><em class="replaceable"><code>pat</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0。</font><font style="vertical-align: inherit;">如果其中之一
               </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
               </font></font><em class="replaceable"><code>pat</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p>
              <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">RLIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该模式可以是扩展的正则表达式，正则表达式语法中讨论了其
               </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#regexp-syntax" title="正则表达式语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该模式不需要是文字字符串。</font><font style="vertical-align: inherit;">例如，它可以被指定为一个字符串表达式或表列。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                由于MySQL在字符串中使用C转义语法（例如，</font></font><code class="literal">\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了表示换行符），所以您必须</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                使用</font><font style="vertical-align: inherit;">任何</font><font style="vertical-align: inherit;">您在</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                参数中</font><font style="vertical-align: inherit;">使用的</font><font style="vertical-align: inherit;">任意值</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              正则表达式操作在决定字符类型并执行比较时使用字符集和字符串表达式和模式参数的排序规则。</font><font style="vertical-align: inherit;">如果参数具有不同的字符集或排序规则，则按</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-collation-coercibility" title="10.8.4表达式中的排序强制性"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.8.4节“表达式中的排序规则校验”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述适用强制性规则
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任一参数是二进制字符串，则参数将以区分大小写的方式作为二进制字符串处理。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'Michael!' REGEXP '.*';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“迈克尔！” </font><font style="vertical-align: inherit;">REGEXP'。*'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'new*\n*line' REGEXP 'new\\*.\\*line';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">'new * \ n * line'REGEXP'new \\ *。\\ * line'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'a' REGEXP '^[a-d]';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">'a'REGEXP'^ [ad]'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'a' REGEXP 'A', 'a' REGEXP BINARY 'A';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">'a'REGEXP'A'| </font><font style="vertical-align: inherit;">'a'REGEXP BINARY'A'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ----------------------- +</font></font><font></font>
</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">RLIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                在逐个字节的方式运营工作，所以他们没有多字节安全，可能产生与多字节字符集意想不到的效果。</font><font style="vertical-align: inherit;">另外，即使给定的排序规则将它们视为相等，这些运算符也会按字节值比较字符，而重音字符可能不会相等。
</font></font></p>
</div>
</li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="regexp-syntax"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正则表达式语法</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          正则表达式描述了一组字符串。</font><font style="vertical-align: inherit;">最简单的正则表达式就是没有特殊字符的正则表达式。</font><font style="vertical-align: inherit;">例如，正则表达式
           </font></font><code class="literal">hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><code class="literal">hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，没有别的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          非平凡的正则表达式使用某些特殊的构造，以便它们可以匹配多个字符串。</font><font style="vertical-align: inherit;">例如，正则表达式</font></font><code class="literal">hello|world</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含
           </font></font><code class="literal">|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交替运算符并匹配</font></font><code class="literal">hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">world</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          作为一个更复杂的实例中，正则表达式
           </font></font><code class="literal">B[an]*s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配的任何串的
           </font></font><code class="literal">Bananas</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">Baaaaas</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">Bs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和任何其他字符串开头的
           </font></font><code class="literal">B</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，与结束</font></font><code class="literal">s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和含有任何数目的</font></font><code class="literal">a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在字符之间。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符的</font><font style="vertical-align: inherit;">
          正则表达式
           </font><font style="vertical-align: inherit;">可以使用以下任何特殊字符和结构：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">^</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配字符串的开头。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'fo\nfo' REGEXP '^fo$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                   - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'fofo' REGEXP '^fo';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                      - &gt; 1
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">$</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配字符串的结尾。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'fo\no' REGEXP '^fo\no$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                 - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'fo\no' REGEXP '^fo$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                    - &gt; 0
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">.</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配任何字符（包括回车符和换行符）。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'fofo' REGEXP '^f.*$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                    - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'fo\r\nfo' REGEXP '^f.*$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                - &gt; 1
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">a*</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配零个或多个</font></font><code class="literal">a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字符的</font><font style="vertical-align: inherit;">任何序列</font><font style="vertical-align: inherit;">。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Ban' REGEXP '^Ba*n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                     - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Baaan' REGEXP '^Ba*n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                   - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Bn' REGEXP '^Ba*n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                      - &gt; 1
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">a+</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配一个或多个</font></font><code class="literal">a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字符的</font><font style="vertical-align: inherit;">任何序列</font><font style="vertical-align: inherit;">。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Ban' REGEXP '^Ba+n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                     - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Bn' REGEXP '^Ba+n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                      - &gt; 0
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">a?</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配零个或一个</font></font><code class="literal">a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Bn' REGEXP '^Ba?n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                      - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Ban' REGEXP '^Ba?n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                     - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'Baan' REGEXP '^Ba?n';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                    - &gt; 0
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">de|abc</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              轮换; </font><font style="vertical-align: inherit;">匹配任一序列
               </font></font><code class="literal">de</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">abc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'pi' REGEXP 'pi|apa';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                     - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'axe' REGEXP 'pi|apa';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                    - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'apa' REGEXP 'pi|apa';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                    - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'apa' REGEXP '^(pi|apa)$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'pi' REGEXP '^(pi|apa)$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                 - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'pix' REGEXP '^(pi|apa)$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                - &gt; 0
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">(abc)*</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配序列的零个或多个实例
               </font></font><code class="literal">abc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'pi' REGEXP '^(pi)*$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                    - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'pip' REGEXP '^(pi)*$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                   - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'pipi' REGEXP '^(pi)*$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                  - &gt; 1
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">{1}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">{2,3}</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              重复;
              </font><font style="vertical-align: inherit;">和
               </font><font style="vertical-align: inherit;">
              符号提供了一种更一般的方式来编写正则表达式，该正则表达式匹配模式的以前原子（或</font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">片段</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">多次出现</font><font style="vertical-align: inherit;">。
              </font><font style="vertical-align: inherit;">并且
               </font><font style="vertical-align: inherit;">是整数。
</font></font><code class="literal">{<em class="replaceable"><code>n</code></em>}</code><font style="vertical-align: inherit;"></font><code class="literal">{<em class="replaceable"><code>m</code></em>,<em class="replaceable"><code>n</code></em>}</code><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><em class="replaceable"><code>m</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">a*</code>
                </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  可以写成</font></font><code class="literal">a{0,}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">a+</code>
                </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  可以写成</font></font><code class="literal">a{1,}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">a?</code>
                </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  可以写成</font></font><code class="literal">a{0,1}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              更准确地说，
               </font><font style="vertical-align: inherit;">匹配的是</font><font style="vertical-align: inherit;">实例
               </font><font style="vertical-align: inherit;">。
              </font><font style="vertical-align: inherit;">
              匹配</font><font style="vertical-align: inherit;">或更多的实例
               </font><font style="vertical-align: inherit;">。
              </font><font style="vertical-align: inherit;">通过
               </font><font style="vertical-align: inherit;">包容性</font><font style="vertical-align: inherit;">实例进行
               </font><font style="vertical-align: inherit;">
              匹配</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果两个
               </font><font style="vertical-align: inherit;">和
               </font><font style="vertical-align: inherit;">给出，
               </font><font style="vertical-align: inherit;">必须小于或等于
               </font><font style="vertical-align: inherit;">。
            </font></font><code class="literal">a{<em class="replaceable"><code>n</code></em>}</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"></font><code class="literal">a</code><font style="vertical-align: inherit;"></font><code class="literal">a{<em class="replaceable"><code>n</code></em>,}</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"></font><code class="literal">a</code><font style="vertical-align: inherit;"></font><code class="literal">a{<em class="replaceable"><code>m</code></em>,<em class="replaceable"><code>n</code></em>}</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>m</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"></font><code class="literal">a</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>m</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>m</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"></font></p><p>
              <em class="replaceable"><code>m</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
               </font></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须在范围从
               </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">RE_DUP_MAX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （默认255），包括端值。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'abcde' REGEXP 'a[bcd]{2}e';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">              - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'abcde' REGEXP 'a[bcd]{3}e';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">              - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'abcde' REGEXP 'a[bcd]{1,10}e';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">           - &gt; 1
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">[a-dX]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">[^a-dX]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配任何字符，该字符（或不是，如果
               </font></font><code class="literal">^</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被使用）任一</font></font><code class="literal">a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">甲
               </font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其它两个字符之间的字符形成一个所有字符从所述第一字符向所述第二匹配范围。</font><font style="vertical-align: inherit;">例如，
               </font></font><code class="literal">[0-9]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配任何十进制数字。</font><font style="vertical-align: inherit;">要包含一个文字</font></font><code class="literal">]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符，它必须紧跟在左括号之后
               </font></font><code class="literal">[</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要包含一个文字
               </font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符，它必须首先写入或最后写入。</font><font style="vertical-align: inherit;">任何在a中没有定义的特殊含义的字符</font></font><code class="literal">[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 配对只匹配自己。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'aXbc' REGEXP '[a-dXYZ]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                 - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'aXbc' REGEXP '^[a-dXYZ]$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">               - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'aXbc' REGEXP '^[a-dXYZ]+$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">              - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'aXbc' REGEXP '^[^a-dXYZ]+$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">             - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'gheis' REGEXP '^[^a-dXYZ]+$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'gheisa' REGEXP '^[^a-dXYZ]+$';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">           - &gt; 0
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">[.characters.]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在括号表达式中（使用</font></font><code class="literal">[</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">书写
               </font></font><code class="literal">]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），匹配该整理元素的字符序列。
              </font></font><code class="literal">characters</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是单个字符还是字符名称</font></font><code class="literal">newline</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">下表列出了允许的字符名称。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              下表显示了允许的字符名称及其匹配的字符。</font><font style="vertical-align: inherit;">对于以数值形式给出的字符，值以八进制表示。
</font></font></p>
<div class="informaltable">
<table summary="Permissible character names and characters they match. To save space, the column pairing of Name and Character are presented in a four column table format in this order: Name, Character, Name, Character. For characters given as numeric values, the values are represented in octal."><colgroup><col width="25%"><col width="25%"><col width="25%"><col width="25%"></colgroup><thead><tr>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font></font></th>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font></font></th>
                </tr></thead><tbody><tr>
                  <td scope="row"><code class="literal">NUL</code></td>
                  <td><code class="literal">0</code></td>
                  <td><code class="literal">SOH</code></td>
                  <td><code class="literal">001</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">STX</code></td>
                  <td><code class="literal">002</code></td>
                  <td><code class="literal">ETX</code></td>
                  <td><code class="literal">003</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">EOT</code></td>
                  <td><code class="literal">004</code></td>
                  <td><code class="literal">ENQ</code></td>
                  <td><code class="literal">005</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">ACK</code></td>
                  <td><code class="literal">006</code></td>
                  <td><code class="literal">BEL</code></td>
                  <td><code class="literal">007</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">alert</code></td>
                  <td><code class="literal">007</code></td>
                  <td><code class="literal">BS</code></td>
                  <td><code class="literal">010</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">backspace</code></td>
                  <td><code class="literal">'\b'</code></td>
                  <td><code class="literal">HT</code></td>
                  <td><code class="literal">011</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">tab</code></td>
                  <td><code class="literal">'\t'</code></td>
                  <td><code class="literal">LF</code></td>
                  <td><code class="literal">012</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">newline</code></td>
                  <td><code class="literal">'\n'</code></td>
                  <td><code class="literal">VT</code></td>
                  <td><code class="literal">013</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">vertical-tab</code></td>
                  <td><code class="literal">'\v'</code></td>
                  <td><code class="literal">FF</code></td>
                  <td><code class="literal">014</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">form-feed</code></td>
                  <td><code class="literal">'\f'</code></td>
                  <td><code class="literal">CR</code></td>
                  <td><code class="literal">015</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">carriage-return</code></td>
                  <td><code class="literal">'\r'</code></td>
                  <td><code class="literal">SO</code></td>
                  <td><code class="literal">016</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">SI</code></td>
                  <td><code class="literal">017</code></td>
                  <td><code class="literal">DLE</code></td>
                  <td><code class="literal">020</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">DC1</code></td>
                  <td><code class="literal">021</code></td>
                  <td><code class="literal">DC2</code></td>
                  <td><code class="literal">022</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">DC3</code></td>
                  <td><code class="literal">023</code></td>
                  <td><code class="literal">DC4</code></td>
                  <td><code class="literal">024</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">NAK</code></td>
                  <td><code class="literal">025</code></td>
                  <td><code class="literal">SYN</code></td>
                  <td><code class="literal">026</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">ETB</code></td>
                  <td><code class="literal">027</code></td>
                  <td><code class="literal">CAN</code></td>
                  <td><code class="literal">030</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">EM</code></td>
                  <td><code class="literal">031</code></td>
                  <td><code class="literal">SUB</code></td>
                  <td><code class="literal">032</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">ESC</code></td>
                  <td><code class="literal">033</code></td>
                  <td><code class="literal">IS4</code></td>
                  <td><code class="literal">034</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">FS</code></td>
                  <td><code class="literal">034</code></td>
                  <td><code class="literal">IS3</code></td>
                  <td><code class="literal">035</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">GS</code></td>
                  <td><code class="literal">035</code></td>
                  <td><code class="literal">IS2</code></td>
                  <td><code class="literal">036</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">RS</code></td>
                  <td><code class="literal">036</code></td>
                  <td><code class="literal">IS1</code></td>
                  <td><code class="literal">037</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">US</code></td>
                  <td><code class="literal">037</code></td>
                  <td><code class="literal">space</code></td>
                  <td><code class="literal">'&nbsp;'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">exclamation-mark</code></td>
                  <td><code class="literal">'!'</code></td>
                  <td><code class="literal">quotation-mark</code></td>
                  <td><code class="literal">'"'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">number-sign</code></td>
                  <td><code class="literal">'#'</code></td>
                  <td><code class="literal">dollar-sign</code></td>
                  <td><code class="literal">'$'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">percent-sign</code></td>
                  <td><code class="literal">'%'</code></td>
                  <td><code class="literal">ampersand</code></td>
                  <td><code class="literal">'&amp;'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">apostrophe</code></td>
                  <td><code class="literal">'\''</code></td>
                  <td><code class="literal">left-parenthesis</code></td>
                  <td><code class="literal">'('</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">right-parenthesis</code></td>
                  <td><code class="literal">')'</code></td>
                  <td><code class="literal">asterisk</code></td>
                  <td><code class="literal">'*'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">plus-sign</code></td>
                  <td><code class="literal">'+'</code></td>
                  <td><code class="literal">comma</code></td>
                  <td><code class="literal">','</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">hyphen</code></td>
                  <td><code class="literal">'-'</code></td>
                  <td><code class="literal">hyphen-minus</code></td>
                  <td><code class="literal">'-'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">period</code></td>
                  <td><code class="literal">'.'</code></td>
                  <td><code class="literal">full-stop</code></td>
                  <td><code class="literal">'.'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">slash</code></td>
                  <td><code class="literal">'/'</code></td>
                  <td><code class="literal">solidus</code></td>
                  <td><code class="literal">'/'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">zero</code></td>
                  <td><code class="literal">'0'</code></td>
                  <td><code class="literal">one</code></td>
                  <td><code class="literal">'1'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">two</code></td>
                  <td><code class="literal">'2'</code></td>
                  <td><code class="literal">three</code></td>
                  <td><code class="literal">'3'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">four</code></td>
                  <td><code class="literal">'4'</code></td>
                  <td><code class="literal">five</code></td>
                  <td><code class="literal">'5'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">six</code></td>
                  <td><code class="literal">'6'</code></td>
                  <td><code class="literal">seven</code></td>
                  <td><code class="literal">'7'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">eight</code></td>
                  <td><code class="literal">'8'</code></td>
                  <td><code class="literal">nine</code></td>
                  <td><code class="literal">'9'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">colon</code></td>
                  <td><code class="literal">':'</code></td>
                  <td><code class="literal">semicolon</code></td>
                  <td><code class="literal">';'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">less-than-sign</code></td>
                  <td><code class="literal">'&lt;'</code></td>
                  <td><code class="literal">equals-sign</code></td>
                  <td><code class="literal">'='</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">greater-than-sign</code></td>
                  <td><code class="literal">'&gt;'</code></td>
                  <td><code class="literal">question-mark</code></td>
                  <td><code class="literal">'?'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">commercial-at</code></td>
                  <td><code class="literal">'@'</code></td>
                  <td><code class="literal">left-square-bracket</code></td>
                  <td><code class="literal">'['</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">backslash</code></td>
                  <td><code class="literal">'\\'</code></td>
                  <td><code class="literal">reverse-solidus</code></td>
                  <td><code class="literal">'\\'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">right-square-bracket</code></td>
                  <td><code class="literal">']'</code></td>
                  <td><code class="literal">circumflex</code></td>
                  <td><code class="literal">'^'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">circumflex-accent</code></td>
                  <td><code class="literal">'^'</code></td>
                  <td><code class="literal">underscore</code></td>
                  <td><code class="literal">'_'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">low-line</code></td>
                  <td><code class="literal">'_'</code></td>
                  <td><code class="literal">grave-accent</code></td>
                  <td><code class="literal">'`'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">left-brace</code></td>
                  <td><code class="literal">'{'</code></td>
                  <td><code class="literal">left-curly-bracket</code></td>
                  <td><code class="literal">'{'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">vertical-line</code></td>
                  <td><code class="literal">'|'</code></td>
                  <td><code class="literal">right-brace</code></td>
                  <td><code class="literal">'}'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">right-curly-bracket</code></td>
                  <td><code class="literal">'}'</code></td>
                  <td><code class="literal">tilde</code></td>
                  <td><code class="literal">'~'</code></td>
                </tr><tr>
                  <td scope="row"><code class="literal">DEL</code></td>
                  <td><code class="literal">177</code></td>
                  <td></td>
                  <td></td>
</tr></tbody></table>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT '~' REGEXP '[[.~.]]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                     - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT '~' REGEXP '[[.tilde.]]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                 - &gt; 1
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">[=character_class=]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在括号表达式中（使用</font></font><code class="literal">[</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">书写
               </font></font><code class="literal">]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
               </font></font><code class="literal">[=character_class=]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示等价类。</font><font style="vertical-align: inherit;">它匹配具有相同排序规则值的所有字符，包括自身。</font><font style="vertical-align: inherit;">例如，如果
               </font></font><code class="literal">o</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">(+)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个等价类的成员，
               </font></font><code class="literal">[[=o=]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">[[=(+)=]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">[o(+)]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都是同义。</font><font style="vertical-align: inherit;">等价类不能用作范围的端点。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">[:character_class:]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在括号表达式（使用</font></font><code class="literal">[</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">书写
               </font></font><code class="literal">]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中，
               </font></font><code class="literal">[:character_class:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示与所有属于该类的字符匹配的字符类。</font><font style="vertical-align: inherit;">下表列出了标准类名。</font><font style="vertical-align: inherit;">这些名称代表</font></font><code class="literal">ctype(3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手册页中</font><font style="vertical-align: inherit;">定义的字符类</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特定的语言环境可能会提供其他类名称。</font><font style="vertical-align: inherit;">字符类不能用作范围的端点。
</font></font></p>
<div class="informaltable">
<table summary="Character class names and the meaning of each class."><colgroup><col width="20%"><col width="80%"></colgroup><thead><tr>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符类名称</font></font></th>
                  <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
                </tr></thead><tbody><tr>
                  <td scope="row"><code class="literal">alnum</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字母数字字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">alpha</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字母字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">blank</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">cntrl</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">digit</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">graph</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">lower</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小写字母字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">print</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形或空间字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">punct</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标点符号</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">space</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空格，制表符，换行符和回车符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">upper</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大写字母字符</font></font></td>
                </tr><tr>
                  <td scope="row"><code class="literal">xdigit</code></td>
                  <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">十六进制数字字符</font></font></td>
</tr></tbody></table>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'justalnums' REGEXP '[[:alnum:]]+';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">       - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT '!!' REGEXP '[[:alnum:]]+';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">               - &gt; 0
</font></font></pre></li><li class="listitem"><p>
              <code class="literal">[[:&lt;:]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
              </font></font><code class="literal">[[:&gt;:]]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              这些标记代表单词边界。</font><font style="vertical-align: inherit;">它们分别匹配单词的开头和结尾。</font><font style="vertical-align: inherit;">单词是单词字符之前或之后没有的单词字符序列。</font><font style="vertical-align: inherit;">单词字符是类中的字母数字字符</font></font><code class="literal">alnum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              或下划线（</font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT 'a word a' REGEXP '[[:&lt;:]]word[[:&gt;:]]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">   - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT 'a xword a' REGEXP '[[:&lt;:]]word[[:&gt;:]]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  - &gt; 0
</font></font></pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要在正则表达式中使用特殊字符的文字实例，请在其前面加上两个反斜杠（\）字符。</font><font style="vertical-align: inherit;">MySQL解析器解释其中一个反斜杠，而正则表达式库解释另一个反斜杠。</font><font style="vertical-align: inherit;">例如，要匹配</font></font><code class="literal">1+2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含特殊</font></font><code class="literal">+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">，只有最后一个正则表达式是正确的：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT '1+2' REGEXP '1+2';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                       - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT '1+2' REGEXP '1\+2';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                      - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT '1+2' REGEXP '1\\+2';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                     - &gt; 1
</font></font></pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="string-functions-charset"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.3字符集和函数结果整理</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL有许多运算符和函数返回一个字符串。</font><font style="vertical-align: inherit;">本节回答以下问题：这种字符串的字符集和排序规则是什么？
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于接受字符串输入并将字符串结果作为输出返回的简单函数，输出的字符集和归类与主体输入值的字符集和归类相同。</font><font style="vertical-align: inherit;">例如，
         </font><font style="vertical-align: inherit;">
        返回一个字符串，其字符串和排序规则与
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这同样适用
         </font><font style="vertical-align: inherit;">，
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER(<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_instr"><code class="literal">INSTR()</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lcase"><code class="literal">LCASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ltrim"><code class="literal">LTRIM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mid"><code class="literal">MID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_repeat"><code class="literal">REPEAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_replace"><code class="literal">REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_reverse"><code class="literal">REVERSE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_right"><code class="literal">RIGHT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rpad"><code class="literal">RPAD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rtrim"><code class="literal">RTRIM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_substring"><code class="literal">SUBSTRING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_trim"><code class="literal">TRIM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ucase"><code class="literal">UCASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_replace"><code class="literal">REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能，与所有其他功能，始终忽略字符串输入的核对，并执行一个区分大小写的比较。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果字符串输入或函数结果是二进制字符串，则该字符串具有</font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集和归类。</font><font style="vertical-align: inherit;">这可以通过使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_charset"><code class="literal">CHARSET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_collation"><code class="literal">COLLATION()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">来检查
         </font><font style="vertical-align: inherit;">，它们都返回</font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制字符串参数：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHARSET(BINARY 'a'), COLLATION(BINARY 'a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CHARSET（BINARY'a'）| </font><font style="vertical-align: inherit;">COLLATION（BINARY'a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">二进制| </font><font style="vertical-align: inherit;">二进制|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于组合多个字符串输入并返回单个字符串输出的操作，</font><font style="vertical-align: inherit;">标准SQL </font><font style="vertical-align: inherit;">的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚合规则</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于确定结果的归类：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果明确</font><font style="vertical-align: inherit;">出现，请使用
             </font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">COLLATE
            <em class="replaceable"><code>Y</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果明确</font><font style="vertical-align: inherit;">并</font><font style="vertical-align: inherit;">发生，请提出错误。
          </font></font><code class="literal">COLLATE
            <em class="replaceable"><code>Y</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">COLLATE
            <em class="replaceable"><code>Z</code></em></code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            否则，如果所有排序规则都是
             </font></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则使用
             </font></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            否则，结果没有整理。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，使用</font><font style="vertical-align: inherit;">，得到的排序规则是</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这同样适用</font></font><code class="literal">CASE ... WHEN a THEN b WHEN b THEN c
        COLLATE <em class="replaceable"><code>X</code></em> END</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">||</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_elt"><code class="literal">ELT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_greatest"><code class="literal">GREATEST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_if"><code class="literal">IF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_least"><code class="literal">LEAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于转换为字符数据的操作，字符集和从操作产生的字符串的排序规则被定义
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决定默认的连接字符集和校对系统变量（见</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-connection" title="10.4连接字符集和排序规则"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.4节，“连接字符集和校对”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">） 。</font><font style="vertical-align: inherit;">这仅适用于</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_format"><code class="literal">FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_space"><code class="literal">SPACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从MySQL 5.7.19开始，对于虚拟生成的列的表达式，前面的原理发生了异常。</font><font style="vertical-align: inherit;">在这样的表达式中，</font><font style="vertical-align: inherit;">无论连接字符集如何，</font><font style="vertical-align: inherit;">表格字符集都用于
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果对字符集函数返回的结果的字符集或排序规则有任何疑问，请使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_charset"><code class="literal">CHARSET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_collation"><code class="literal">COLLATION()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数来查找：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT USER(), CHARSET(USER()), COLLATION(USER());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ----------------- + -------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">USER（）| </font><font style="vertical-align: inherit;">CHARSET（USER（））| </font><font style="vertical-align: inherit;">COLLATION（USER（））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ----------------- + -------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">test @ localhost | </font><font style="vertical-align: inherit;">utf8 | </font><font style="vertical-align: inherit;">utf8_general_ci |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- + ----------------- + -------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHARSET(COMPRESS('abc')), COLLATION(COMPRESS('abc'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + ---------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">CHARSET（COMPRESS（'abc'））| </font><font style="vertical-align: inherit;">COLLATION（COMPRESS（'abc'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + ---------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">二进制| </font><font style="vertical-align: inherit;">二进制|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + ---------------------- ------ +</font></font><font></font>
</pre>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="numeric-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6数字函数和操作符</font></font></h2>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#arithmetic-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6.1算术运算符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#mathematical-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6.2数学函数</font></font></a></span></dt></dl>
</div>

<div class="table">
<a name="idm140528085490640"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.10数字函数和操作符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists numeric functions and operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_abs"><code class="literal">ABS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回绝对值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_acos"><code class="literal">ACOS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反余弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asin"><code class="literal">ASIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反正弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan"><code class="literal">ATAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反正切
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan2"><code class="literal">ATAN2()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ATAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回两个参数的反正切值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceil"><code class="literal">CEIL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不小于参数的最小整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceiling"><code class="literal">CEILING()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不小于参数的最小整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在不同的数字库之间转换数字
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cos"><code class="literal">COS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cot"><code class="literal">COT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余切
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_crc32"><code class="literal">CRC32()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算循环冗余校验值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_degrees"><code class="literal">DEGREES()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将弧度转换为度数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_div"><code class="literal">DIV</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      整数划分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_divide"><code class="literal">/</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      司运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exp"><code class="literal">EXP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提高权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_floor"><code class="literal">FLOOR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不大于参数的最大整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ln"><code class="literal">LN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的自然对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一个参数的自然对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log10"><code class="literal">LOG10()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的基数为10的对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log2"><code class="literal">LOG2()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的基数为2的对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减号操作员
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">MOD</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      模运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pi"><code class="literal">PI()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回pi的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pow"><code class="literal">POW()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将所提出的论据返回给定的权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_power"><code class="literal">POWER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将所提出的论据返回给定的权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_radians"><code class="literal">RADIANS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将参数转换为弧度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个随机的浮点值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      围绕论点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sign"><code class="literal">SIGN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的符号
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sin"><code class="literal">SIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的正弦值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sqrt"><code class="literal">SQRT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的平方根
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_tan"><code class="literal">TAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的正切值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      乘法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_truncate"><code class="literal">TRUNCATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      截断到指定的小数位数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_unary-minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      改变参数的符号
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="arithmetic-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6.1算术运算符</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528085362560"></a>
<div class="table">
<a name="idm140528085361072"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.11算术运算符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists arithmetic operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_div"><code class="literal">DIV</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      整数划分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_divide"><code class="literal">/</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      司运营商
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减号操作员
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">MOD</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      模运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      乘法运算符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_unary-minus"><code class="literal">-</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      改变参数的符号
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通常的算术运算符可用。</font><font style="vertical-align: inherit;">结果根据以下规则确定：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在</font><font style="vertical-align: inherit;">，，和
             </font><font style="vertical-align: inherit;">的情况下
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">
            如果两个操作数都是整数</font><font style="vertical-align: inherit;">，则结果以</font><font style="vertical-align: inherit;">（64位）精度</font><font style="vertical-align: inherit;">计算</font><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果两个操作数都是整数，并且其中任何一个都是无符号的，则结果是一个无符号整数。</font><font style="vertical-align: inherit;">对于减法，如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启用</font><font style="vertical-align: inherit;">了
             </font><font style="vertical-align: inherit;">SQL模式，即使任何操作数未经签名，结果也会被签名。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果任何一个操作数
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_divide"><code class="literal">/</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal">%</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个真正的或字符串值，其结果的精度与最大精度运算的精度。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在执行除法
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_divide"><code class="literal">/</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时，使用两个精确值操作数时的结果比例是第一个操作数的比例加上</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_div_precision_increment"><code class="literal">div_precision_increment</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量</font><font style="vertical-align: inherit;">的值
             </font><font style="vertical-align: inherit;">（默认为4）。</font><font style="vertical-align: inherit;">例如，表达式的结果的</font></font><code class="literal">5.05 / 0.014</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小数位数为六位（</font></font><code class="literal">360.714286</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些规则适用于每个操作，因此嵌套计算意味着每个组件的精度。</font><font style="vertical-align: inherit;">因此，
         </font></font><code class="literal">(14620 / 9432456) / (24250 / 9432456)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先解决</font></font><code class="literal">(0.0014) / (0.0026)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，最终结果有8个小数位（</font></font><code class="literal">0.60288653</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        由于这些规则及其应用方式，应注意确保计算的组件和子组件使用适当的精度级别。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#cast-functions" title="12.10 Cast功能和操作符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.10节“演算函数和操作符”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关数值表达式求值中处理溢出的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#out-of-range-and-overflow" title="11.2.6超出范围和溢出处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.2.6节“超出范围和溢出处理”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        算术运算符适用于数字。</font><font style="vertical-align: inherit;">对于其他类型的值，可能会有替代操作。</font><font style="vertical-align: inherit;">例如，要添加日期值，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#date-and-time-functions" title="12.7日期和时间函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.7节“日期和时间函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p><a class="indexterm" name="idm140528085302240"></a><a class="indexterm" name="idm140528085300752"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_plus"></a><p>
            <a class="indexterm" name="idm140528085297184"></a>

            <a class="indexterm" name="idm140528085296112"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            加成：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 3+5;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 8</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_minus"></a><p>
            <a class="indexterm" name="idm140528085287152"></a>

            <a class="indexterm" name="idm140528085286080"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            减法：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 3-5;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -2</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_unary-minus"></a><p>
            <a class="indexterm" name="idm140528085277184"></a>

            <a class="indexterm" name="idm140528085276112"></a>

            <a class="indexterm" name="idm140528085274624"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_unary-minus"><code class="literal">-</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一元减号。</font><font style="vertical-align: inherit;">该操作符更改操作数的符号。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT - 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -2</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果该运算符与a一起使用
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值也是a </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着您应该避免使用</font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能具有-2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">63</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的整数</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
</li><li class="listitem"><a name="operator_times"></a><p>
            <a class="indexterm" name="idm140528085260992"></a>

            <a class="indexterm" name="idm140528085259920"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_times"><code class="literal">*</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            乘法：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 3*5;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 15</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 18014398509481984*18014398509481984.0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 324518553658426726783156020576256.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 18014398509481984*18014398509481984;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;超出范围的错误</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最后一个表达式会产生一个错误，因为整数乘法的结果超出了64位</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算</font><font style="vertical-align: inherit;">范围
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#numeric-types" title="11.2数字类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.2节“数字类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
          </font></font></p></li><li class="listitem"><a name="operator_divide"></a><p>
            <a class="indexterm" name="idm140528085246832"></a>

            <a class="indexterm" name="idm140528085245760"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_divide"><code class="literal">/</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            师：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 3/5;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0.60</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            除以零产生</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 102/(1-1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非在其结果转换为整数的上下文中执行，否则将</font><font style="vertical-align: inherit;">
            使用</font><font style="vertical-align: inherit;">算术</font><font style="vertical-align: inherit;">计算除法
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="operator_div"></a><p>
            <a class="indexterm" name="idm140528085231520"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_div"><code class="literal">DIV</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            整数划分。</font><font style="vertical-align: inherit;">从除法结果中舍弃小数点右侧的小数部分。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果任一操作数具有非整数类型，则</font><font style="vertical-align: inherit;">
            在将结果转换为之前</font><font style="vertical-align: inherit;">，操作数将转换为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并使用</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">算术进行
             </font><font style="vertical-align: inherit;">分割</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果结果超出
             </font></font><code class="literal">BIGINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围，则会发生错误。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 5 DIV 2, -5 DIV 2, 5 DIV -2, -5 DIV -2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2，-2，-2，2</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_mod"></a><p>
            <a class="indexterm" name="idm140528085216704"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            % <em class="replaceable"><code>M</code></em></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            MOD <em class="replaceable"><code>M</code></em></code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            模数操作。</font><font style="vertical-align: inherit;">返回</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除以
             </font><font style="vertical-align: inherit;">的余数
             </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关更多信息，请参见</font><a class="xref" href="/mysql-5.7-google-zh/functions.html#mathematical-functions" title="12.6.2数学函数"><font style="vertical-align: inherit;">第12.6.2节“数学函数”中</font></a><font style="vertical-align: inherit;">关于</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            函数</font><font style="vertical-align: inherit;">的描述</font><font style="vertical-align: inherit;">。
</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#mathematical-functions" title="12.6.2数学函数"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mathematical-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.6.2数学函数</font></font></h3>

</div>

</div>

</div>

<div class="table">
<a name="idm140528085205552"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.12数学函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists mathematical functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_abs"><code class="literal">ABS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回绝对值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_acos"><code class="literal">ACOS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反余弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asin"><code class="literal">ASIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反正弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan"><code class="literal">ATAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回反正切
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan2"><code class="literal">ATAN2()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ATAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回两个参数的反正切值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceil"><code class="literal">CEIL()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不小于参数的最小整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceiling"><code class="literal">CEILING()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不小于参数的最小整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在不同的数字库之间转换数字
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cos"><code class="literal">COS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余弦
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cot"><code class="literal">COT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余切
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_crc32"><code class="literal">CRC32()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算循环冗余校验值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_degrees"><code class="literal">DEGREES()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将弧度转换为度数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exp"><code class="literal">EXP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提高权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_floor"><code class="literal">FLOOR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回不大于参数的最大整数值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ln"><code class="literal">LN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的自然对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第一个参数的自然对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log10"><code class="literal">LOG10()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的基数为10的对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log2"><code class="literal">LOG2()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的基数为2的对数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回余数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pi"><code class="literal">PI()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回pi的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pow"><code class="literal">POW()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将所提出的论据返回给定的权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_power"><code class="literal">POWER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将所提出的论据返回给定的权力
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_radians"><code class="literal">RADIANS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将参数转换为弧度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个随机的浮点值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      围绕论点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sign"><code class="literal">SIGN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的符号
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sin"><code class="literal">SIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的正弦值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sqrt"><code class="literal">SQRT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的平方根
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_tan"><code class="literal">TAN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的正切值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_truncate"><code class="literal">TRUNCATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      截断到指定的小数位数
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        所有数学函数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在发生错误时都会</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">。
</font></font></p><a class="indexterm" name="idm140528085099504"></a><a class="indexterm" name="idm140528085098432"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_abs"></a><p>
            <a class="indexterm" name="idm140528085094448"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_abs"><code class="literal">ABS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的绝对值</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ABS(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ABS(-32);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 32</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该功能可以安全地与</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">一起使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_acos"></a><p>
            <a class="indexterm" name="idm140528085082224"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_acos"><code class="literal">ACOS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其余弦的余弦值，即余弦值</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不在范围内</font></font><code class="literal">-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则
             </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ACOS(1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ACOS(1.0001);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ACOS(0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.5707963267949</font></font><font></font>
</pre></li><li class="listitem"><a name="function_asin"></a><p>
            <a class="indexterm" name="idm140528085067920"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asin"><code class="literal">ASIN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回正弦</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的正弦值，即正弦值为的值</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不在范围内</font></font><code class="literal">-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则
             </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ASIN(0.2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0.20135792079033</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ASIN('foo');</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ASIN（'foo'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1行，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">级别| </font><font style="vertical-align: inherit;">代码| </font><font style="vertical-align: inherit;">留言|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">警告| </font><font style="vertical-align: inherit;">1292 | </font><font style="vertical-align: inherit;">截断错误的DOUBLE值：'foo'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- --------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_atan"></a><p>
            <a class="indexterm" name="idm140528085053104"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan"><code class="literal">ATAN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其正切的值，即正切值的值
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ATAN(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.1071487177941</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ATAN(-2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1.1071487177941</font></font><font></font>
</pre></li><li class="listitem"><a name="function_atan2"></a><p>
            <a class="indexterm" name="idm140528085042032"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan2"><code class="literal">ATAN(<em class="replaceable"><code>Y</code></em>,<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_atan2"><code class="literal">ATAN2(<em class="replaceable"><code>Y</code></em>,<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回两个变量</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和的
             </font><font style="vertical-align: inherit;">反正切
             </font></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它与计算反正切的相似之处在于</font><font style="vertical-align: inherit;">，两个参数的符号都用于确定结果的象限。
          </font></font><code class="literal"><em class="replaceable"><code>Y</code></em> /
            <em class="replaceable"><code>X</code></em></code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ATAN(-2,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -0.78539816339745</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ATAN2(PI(),0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.5707963267949</font></font><font></font>
</pre></li><li class="listitem"><a name="function_ceil"></a><p>
            <a class="indexterm" name="idm140528085026512"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceil"><code class="literal">CEIL(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceil"><code class="literal">CEIL()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceiling"><code class="literal">CEILING()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_ceiling"></a><p>
            <a class="indexterm" name="idm140528085016176"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ceiling"><code class="literal">CEILING(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回不小于的最小整数值
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CEILING(1.23);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CEILING(-1.23);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于精确值数字参数，返回值具有精确值数字类型。</font><font style="vertical-align: inherit;">对于字符串或浮点参数，返回值具有浮点类型。
          </font></font></p></li><li class="listitem"><a name="function_conv"></a><p>
            <a class="indexterm" name="idm140528085004992"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>from_base</code></em>,<em class="replaceable"><code>to_base</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在不同的数字基础之间转换数字。</font><font style="vertical-align: inherit;">返回数字的字符串表示
             </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从基地转换
             </font></font><em class="replaceable"><code>from_base</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到基座
             </font></font><em class="replaceable"><code>to_base</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
             </font><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">参数
             </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被解释为一个整数，但可以指定为整数或字符串。</font><font style="vertical-align: inherit;">最小基数是</font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和最大基数是
             </font></font><code class="literal">36</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>from_base</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是负数，
             </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则视为有符号数字。</font><font style="vertical-align: inherit;">否则，</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">视为未签名。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_conv"><code class="literal">CONV()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以64位精度工作。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONV('a',16,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1010'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONV('6E',18,8);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'172'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONV(-17,10,-18);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'-H'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONV(10+'10'+'10'+X'0a',10,10);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'40'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_cos"></a><p>
            <a class="indexterm" name="idm140528084985024"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_cos"><code class="literal">COS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回余弦值</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以弧度给出。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COS(PI());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font>
</pre></li><li class="listitem"><a name="function_cot"></a><p>
            <a class="indexterm" name="idm140528084974784"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_cot"><code class="literal">COT(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的余切值</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COT(12);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1.5726734063977</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COT(0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;超出范围的错误</font></font><font></font>
</pre></li><li class="listitem"><a name="function_crc32"></a><p>
            <a class="indexterm" name="idm140528084964192"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_crc32"><code class="literal">CRC32(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            计算循环冗余校验值并返回一个32位无符号值。</font><font style="vertical-align: inherit;">结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该参数预计是一个字符串，并且（如果可能的话）被视为一个，如果它不是。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CRC32('MySQL');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3259397556</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CRC32('mysql');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2501908538</font></font><font></font>
</pre></li><li class="listitem"><a name="function_degrees"></a><p>
            <a class="indexterm" name="idm140528084952352"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_degrees"><code class="literal">DEGREES(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从弧度转换为度数</font><font style="vertical-align: inherit;">的参数</font><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DEGREES(PI());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 180</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DEGREES(PI() / 2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 90</font></font><font></font>
</pre></li><li class="listitem"><a name="function_exp"></a><p>
            <a class="indexterm" name="idm140528084941760"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_exp"><code class="literal">EXP(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">（自然对数的底数）
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该函数的反函数是</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（仅使用单个参数）或</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_ln"><code class="literal">LN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXP(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 7.3890560989307</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXP(-2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0.13533528323661</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXP(0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre></li><li class="listitem"><a name="function_floor"></a><p>
            <a class="indexterm" name="idm140528084927360"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_floor"><code class="literal">FLOOR(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回不大于的最大整数值
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FLOOR(1.23), FLOOR(-1.23);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，-2</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于精确值数字参数，返回值具有精确值数字类型。</font><font style="vertical-align: inherit;">对于字符串或浮点参数，返回值具有浮点类型。
          </font></font></p></li><li class="listitem"><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_format"><code class="literal">FORMAT(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            将数字</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化为像</font></font><code class="literal">'#,###,###.##'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">四舍五入到
             </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小数位</font><font style="vertical-align: inherit;">的格式</font><font style="vertical-align: inherit;">，并将结果作为字符串返回。</font><font style="vertical-align: inherit;">有关细节，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#string-functions" title="12.5字符串函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.5节“字符串函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140528084911408"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX(N_or_S)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该函数可用于获取十进制数或字符串的十六进制表示形式; </font><font style="vertical-align: inherit;">它的表现方式因论证的类型而异。</font><font style="vertical-align: inherit;">有关详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#string-functions" title="12.5字符串函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.5节“字符串函数”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此函数的说明
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_ln"></a><p>
            <a class="indexterm" name="idm140528084905232"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_ln"><code class="literal">LN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回自然对数
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">也就是碱基</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ê</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的对数
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于0.0E0，函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且（从MySQL 5.7.4开始）报告一个警告</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无效的对数参数</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LN(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0.69314718055995</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LN(-2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这个功能与
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个函数的反函数是
             </font><font style="vertical-align: inherit;">函数。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exp"><code class="literal">EXP()</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_log"></a><p>
            <a class="indexterm" name="idm140528084888752"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>B</code></em>,<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果用一个参数调用，该函数返回的自然对数</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于0.0E0，函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且（从MySQL 5.7.4开始）报告一个警告</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无效的对数参数</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该函数的反函数（当用单个参数调用时）就是</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exp"><code class="literal">EXP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            函数。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0.69314718055995</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG(-2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果用两个参数调用，该函数返回</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基数
             </font><font style="vertical-align: inherit;">的对数</font></font><em class="replaceable"><code>B</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于0，或者</font></font><em class="replaceable"><code>B</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于1，则</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG(2,65536);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 16</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG(10,100);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG(1,100);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>B</code></em>,<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            相当于
             </font><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>) /
            LOG(<em class="replaceable"><code>B</code></em>)</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_log2"></a><p>
            <a class="indexterm" name="idm140528084862192"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_log2"><code class="literal">LOG2(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的基数为2的对数
             </font></font><code class="literal"><em class="replaceable"><code>X</code></em></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于0.0E0，函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且（从MySQL 5.7.4开始）报告一个警告</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无效的对数参数</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG2(65536);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 16</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG2(-100);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_log2"><code class="literal">LOG2()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于确定数字要存储多少位是非常有用的。</font><font style="vertical-align: inherit;">该功能等同于表达式
             </font><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>) /
            LOG(2)</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_log10"></a><p>
            <a class="indexterm" name="idm140528084846128"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_log10"><code class="literal">LOG10(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回以10为底的对数
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于0.0E0，函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且（从MySQL 5.7.4开始）报告一个警告</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无效的对数参数</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG10(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0.30102999566398</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG10(100);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LOG10(-100);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_log10"><code class="literal">LOG10(<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            相当于
             </font><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_log"><code class="literal">LOG(10,<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_mod"></a><p>
            <a class="indexterm" name="idm140528084828752"></a>

            <a class="indexterm" name="idm140528084827680"></a>

            <a class="indexterm" name="idm140528084826608"></a>

            <a class="indexterm" name="idm140528084825536"></a>

            <a class="indexterm" name="idm140528084824464"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>M</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            % <em class="replaceable"><code>M</code></em></code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            MOD <em class="replaceable"><code>M</code></em></code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            模数操作。</font><font style="vertical-align: inherit;">返回</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除以
             </font><font style="vertical-align: inherit;">的余数
             </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MOD(234, 10);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 253 % 7;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MOD(29,9);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 29 MOD 9;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该功能可以安全地与</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">一起使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 也适用于具有小数部分的值，并返回除法后的确切余数：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MOD(34.5,3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.5</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD(<em class="replaceable"><code>N</code></em>,0)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_pi"></a><p>
            <a class="indexterm" name="idm140528084800416"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pi"><code class="literal">PI()</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回π（pi）的值。</font><font style="vertical-align: inherit;">显示的默认小数位数是7，但MySQL在内部使用完整的双精度值。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT PI();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3.141593</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT PI()+0.000000000000000000;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3.141592653589793116</font></font><font></font>
</pre></li><li class="listitem"><a name="function_pow"></a><p>
            <a class="indexterm" name="idm140528084789536"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pow"><code class="literal">POW(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>Y</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提升到权力的值</font></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT POW(2,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT POW(2,-2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0.25</font></font><font></font>
</pre></li><li class="listitem"><a name="function_power"></a><p>
            <a class="indexterm" name="idm140528084777504"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_power"><code class="literal">POWER(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>Y</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这是一个同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pow"><code class="literal">POW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_radians"></a><p>
            <a class="indexterm" name="idm140528084768688"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_radians"><code class="literal">RADIANS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从度数转换为弧度</font><font style="vertical-align: inherit;">的参数</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（注意π弧度等于180度。）
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT RADIANS(90);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.5707963267949</font></font><font></font>
</pre></li><li class="listitem"><a name="function_rand"></a><p>
            <a class="indexterm" name="idm140528084758624"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND([<em class="replaceable"><code>N</code></em>])</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font><font style="vertical-align: inherit;">&lt;= </font><font style="vertical-align: inherit;">&lt;
             </font></font><em class="replaceable"><code>v</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围内
             </font><font style="vertical-align: inherit;">的随机浮点值
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要获取</font><font style="vertical-align: inherit;">&lt;=
             </font><font style="vertical-align: inherit;">&lt;
             </font><font style="vertical-align: inherit;">范围内
             </font><font style="vertical-align: inherit;">的随机整数
             </font><font style="vertical-align: inherit;">，请使用表达式
             </font><font style="vertical-align: inherit;">
            - </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，要获取</font><font style="vertical-align: inherit;">&lt;=
             </font><font style="vertical-align: inherit;">&lt; </font><font style="vertical-align: inherit;">范围内的随机整数</font><font style="vertical-align: inherit;">，请使用以下语句：
          </font></font><code class="literal">0</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>v</code></em><font style="vertical-align: inherit;"></font><code class="literal">1.0</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>R</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>i</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>R</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>j</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_floor"><code class="literal">FLOOR(<em class="replaceable"><code>i</code></em>
            + RAND() * (<em class="replaceable"><code>j</code></em></code></a><font style="vertical-align: inherit;"></font><code class="literal"><em class="replaceable"><code>i</code></em>))</code><font style="vertical-align: inherit;"></font><code class="literal">7</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>R</code></em><font style="vertical-align: inherit;"></font><code class="literal">12</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT FLOOR（7 +（RAND（）* 5））;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">了整数参数</font><font style="vertical-align: inherit;">，则将其用作种子值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                在初始化参数不变的情况下，当语句准备好时，种子会在执行前初始化一次。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                使用非常量初始化参数（例如列名称）时，将使用每次调用的值初始化种子
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这种行为的一个含义是，对于相同的参数值，
             </font><font style="vertical-align: inherit;">
            每次返回相同的值，从而产生可重复的列值序列。</font><font style="vertical-align: inherit;">在以下示例中，由</font><font style="vertical-align: inherit;">两个</font><font style="vertical-align: inherit;">值生成的值的顺序
             </font><font style="vertical-align: inherit;">相同。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND(<em class="replaceable"><code>N</code></em>)</code></a><font style="vertical-align: inherit;"></font><code class="literal">RAND(3)</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (i INT);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.42秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t VALUES(1),(2),(3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，3行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：3重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i, RAND() FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我| </font><font style="vertical-align: inherit;">RAND（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0.61914388706828 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">0.93845168309142 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">0.83482678498591 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i, RAND(3) FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我| </font><font style="vertical-align: inherit;">兰德（3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0.90576975597606 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">0.37307905813035 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">0.14808605345719 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i, RAND() FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我| </font><font style="vertical-align: inherit;">RAND（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0.35877890638893 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">0.28941420772058 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">0.37073435016976 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i, RAND(3) FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我| </font><font style="vertical-align: inherit;">兰德（3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0.90576975597606 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">0.37307905813035 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">0.14808605345719 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3行（0.01秒）</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一个
             </font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中针对每行（在从一个表中选择时）或行组合（在从多表连接中选择时）进行评估。</font><font style="vertical-align: inherit;">因此，出于优化目的，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它不是一个常数值，不能用于索引优化。</font><font style="vertical-align: inherit;">有关更多信息，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#function-optimization" title="8.2.1.17函数调用优化"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.2.1.17节“函数调用优化”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用带有</font><font style="vertical-align: inherit;">或者</font><font style="vertical-align: inherit;">子句中的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            值</font><font style="vertical-align: inherit;">的列</font><font style="vertical-align: inherit;">可能会产生意想不到的结果，因为对于任一子句，</font><font style="vertical-align: inherit;">
            可以对同一行对表达式进行多次评估，每次都返回不同的结果。</font><font style="vertical-align: inherit;">如果目标是以随机顺序检索行，则可以使用如下所示的语句：
          </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"></font><code class="literal">GROUP
            BY</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDER BY RAND（）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要从一组行中选择一个随机样本，请</font></font><code class="literal">ORDER BY RAND()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下内容</font><font style="vertical-align: inherit;">结合
             </font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM table1，table2 WHERE a = b AND c &lt;d ORDER BY RAND（）LIMIT 1000;
</font></font></pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并不意味着是一个完美的随机生成器。</font><font style="vertical-align: inherit;">这是一种快速生成随需数据的方式，可以在相同MySQL版本的平台之间移植。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
             </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
             </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（错误＃49222）
          </font></font></p></li><li class="listitem"><a name="function_round"></a><p>
            <a class="indexterm" name="idm140528084708592"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND(<em class="replaceable"><code>X</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            将参数四舍五入</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
             </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小数位。</font><font style="vertical-align: inherit;">舍入算法取决于数据类型
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果未指定，则默认为0。</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            可能是负数，导致</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数值小数点左侧的数字
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变为零。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(-1.23);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(-1.58);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(1.58);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(1.298, 1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(1.298, 0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(23.298, -1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 20</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回值与第一个参数具有相同的类型（假设它是整数，双精度或十进制）。</font><font style="vertical-align: inherit;">这意味着对于整数参数，结果是一个整数（无小数位）：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(150.000,2), ROUND(150,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">圆（150.000,2）| </font><font style="vertical-align: inherit;">圆（150,2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">150.00 | </font><font style="vertical-align: inherit;">150 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + -------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 根据第一个参数的类型使用以下规则：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                对于准确值数值，
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">采用
                 </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">圆的一半远离零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向最近</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则：用或大于0.5小数部分的值被四舍五入到若为阳性或向下，如果下一个整数的下一个整数负。</font><font style="vertical-align: inherit;">（换句话说，它是从零开始舍去的。）如果小数部分小于.5，则数值向下取整为下一个整数，如果是负数，则向下取整。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                对于近似值数字，结果取决于C库。</font><font style="vertical-align: inherit;">在许多系统上，这意味着
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用“舍入到最近的偶数”规则：将任何小数部分的值舍入到最接近的偶数整数。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以下示例显示了精确值和近似值的舍入方式不同：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(2.5), ROUND(25E-1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ROUND（2.5）| </font><font style="vertical-align: inherit;">圆（25E-1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + -------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#precision-math" title="12.21精度数学"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.21节“精度数学”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_sign"></a><p>
            <a class="indexterm" name="idm140528084676816"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sign"><code class="literal">SIGN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回参数的符号为</font></font><code class="literal">-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，根据是否</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是负数，零或正。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SIGN(-32);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SIGN(0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SIGN(234);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre></li><li class="listitem"><a name="function_sin"></a><p>
            <a class="indexterm" name="idm140528084663440"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sin"><code class="literal">SIN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回正弦值</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以弧度给出。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SIN(PI());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.2246063538224e-16</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(SIN(PI()));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre></li><li class="listitem"><a name="function_sqrt"></a><p>
            <a class="indexterm" name="idm140528084652464"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sqrt"><code class="literal">SQRT(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回非负数的平方根
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SQRT(4);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SQRT(20);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4.4721359549996</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SQRT(-16);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre></li><li class="listitem"><a name="function_tan"></a><p>
            <a class="indexterm" name="idm140528084641088"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_tan"><code class="literal">TAN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回其中的正切值</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以弧度给出。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TAN(PI());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1.2246063538224e-16</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TAN(PI()+1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.5574077246549</font></font><font></font>
</pre></li><li class="listitem"><a name="function_truncate"></a><p>
            <a class="indexterm" name="idm140528084630000"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_truncate"><code class="literal">TRUNCATE(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回数字</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，截断为</font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小数位。</font><font style="vertical-align: inherit;">如果
             </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果没有小数点或小数部分。
            </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能是负数，导致
             </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数值小数点左侧的数字</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变为零。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRUNCATE(1.223,1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRUNCATE(1.999,1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.9</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRUNCATE(1.999,0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRUNCATE(-1.999,1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1.9</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRUNCATE(122,-2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       - &gt; 100</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TRUNCATE(10.28*100,0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       - &gt; 1028</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            所有数字四舍五入到零。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="date-and-time-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.7日期和时间函数</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528084612688"></a><a class="indexterm" name="idm140528084611616"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节介绍可用于操作时间值的功能。</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-types" title="11.3日期和时间类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3节“日期和时间类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以获取每种日期和时间类型具有的值范围以及可指定值的有效格式的说明。
</font></font></p>
<div class="table">
<a name="idm140528084608784"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.13日期和时间函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists date and time functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_adddate"><code class="literal">ADDDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将时间值（间隔）添加到日期值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_addtime"><code class="literal">ADDTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      添加时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从一个时区转换到另一个时区
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curdate"><code class="literal">CURDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_DATE</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      同义词CURDATE（）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_TIME</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      CURTIME（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_TIMESTAMP</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOW（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curtime"><code class="literal">CURTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date"><code class="literal">DATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取日期或日期时间表达式的日期部分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将时间值（间隔）添加到日期值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按指定格式化日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从日期中减去时间值（时间间隔）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_datediff"><code class="literal">DATEDIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减去两个日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_day"><code class="literal">DAY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      DAYOFMONTH（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayname"><code class="literal">DAYNAME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回工作日的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回月份的日期（0-31）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofweek"><code class="literal">DAYOFWEEK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的周日指数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一年中的一天（1-366）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extract"><code class="literal">EXTRACT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取日期的一部分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-days"><code class="literal">FROM_DAYS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将日期编号转换为日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将Unix时间戳格式化为日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回日期格式字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hour"><code class="literal">HOUR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取小时
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-day"><code class="literal">LAST_DAY</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的月份的最后一天
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">LOCALTIME</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOW（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">LOCALTIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      NOW（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_makedate"><code class="literal">MAKEDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从年份和年份创建日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_maketime"><code class="literal">MAKETIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建时间从小时，分钟，秒
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_microsecond"><code class="literal">MICROSECOND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从参数中返回微秒
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_minute"><code class="literal">MINUTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从参数中返回分钟
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从过去的日期中返回月份
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_monthname"><code class="literal">MONTHNAME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回月份的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前日期和时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_period-add"><code class="literal">PERIOD_ADD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为一个年份添加句点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_period-diff"><code class="literal">PERIOD_DIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回期间之间的月数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_quarter"><code class="literal">QUARTER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从日期参数中返回季度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将秒转换为'HH：MM：SS'格式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_second"><code class="literal">SECOND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回第二个（0-59）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将字符串转换为日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_subdate"><code class="literal">SUBDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      用三个参数调用DATE_SUB（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_subtime"><code class="literal">SUBTIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减去时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回函数执行的时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_time"><code class="literal">TIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提取传递的表达式的时间部分
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_time-format"><code class="literal">TIME_FORMAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      格式为时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_time-to-sec"><code class="literal">TIME_TO_SEC()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回转换为秒的参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timediff"><code class="literal">TIMEDIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      减去时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestamp"><code class="literal">TIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用单个参数，该函数返回日期或日期时间表达式; </font><font style="vertical-align: inherit;">有两个参数，即参数的总和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将时间间隔添加到日期时间表达式中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从日期时间表达式中减去一个时间间隔
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回转换为天的日期参数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从Year 0开始，将日期或日期时间参数转换为秒数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个Unix时间戳
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前的UTC日期
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-time"><code class="literal">UTC_TIME()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前的UTC时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回当前的UTC日期和时间
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回周数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回周日指数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回日期的日历周（1-53）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_year"><code class="literal">YEAR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回年份
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一年和一周
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这是一个使用日期函数的示例。</font><font style="vertical-align: inherit;">以下查询将选择具有</font></font><em class="replaceable"><code>date_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近30天内</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">所有行</font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>SELECT <em class="replaceable"><code>something</code></em> FROM <em class="replaceable"><code>tbl_name</code></em></code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY) &lt;= <em class="replaceable"><code>date_col</code></em>;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该查询还选择日期处于未来的行。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      期望日期值的函数通常接受日期时间值并忽略时间部分。</font><font style="vertical-align: inherit;">期望时间值的函数通常接受日期时间值并忽略日期部分。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在查询执行开始时，每个查询只返回一次返回当前日期或时间的函数。</font><font style="vertical-align: inherit;">这意味着对一个函数（如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单个查询）的</font><font style="vertical-align: inherit;">多次引用
       </font><font style="vertical-align: inherit;">总是会产生相同的结果。</font><font style="vertical-align: inherit;">（对于我们而言，单一的查询还包括对存储程序的调用（存储程序，触发器或事件）以及所有子程序由该程序调用。）这个原则也适用于</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curdate"><code class="literal">CURDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curtime"><code class="literal">CURTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-time"><code class="literal">UTC_TIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和他们的任何同义词。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能于一体的连接的当前时区，这可作为的值返回值</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_time_zone"><code class="literal">time_zone</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      系统变量。</font><font style="vertical-align: inherit;">另外，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假设它的参数是当前时区中的日期时间值。</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#time-zone-support" title="5.1.10 MySQL服务器时区支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.10节“MySQL服务器时区支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      某些日期函数可以与</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期或不完整的日期</font><font style="vertical-align: inherit;">一起使用</font></font><code class="literal">'2001-11-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而其他</font><font style="vertical-align: inherit;">日期函数</font><font style="vertical-align: inherit;">则不能。</font><font style="vertical-align: inherit;">提取日期部分的函数通常与未完成的日期一起工作，因此可以返回0，否则可能会得到非零值。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DAYOFMONTH('2001-11-00'), MONTH('2005-00-00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0，0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      其他函数预计完成日期并返回未
       </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成日期。</font><font style="vertical-align: inherit;">这些包括执行日期算术的函数或将日期的部分映射到名称的函数。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2006-05-00',INTERVAL 1 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DAYNAME('2006-05-00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当传递一个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date"><code class="literal">DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数值作为它们的参数</font><font style="vertical-align: inherit;">时，几个函数更加严格，
       </font><font style="vertical-align: inherit;">并且拒绝不完整的日期，其中一天的零部分。</font><font style="vertical-align: inherit;">这些功能被影响：
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-day"><code class="literal">LAST_DAY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（允许零天一部分）， ，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font><font style="vertical-align: inherit;">。
    </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于分数秒</font></font><code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      值的支持，以达到微秒级精度。</font><font style="vertical-align: inherit;">带时态参数的函数接受小数秒的值。</font><font style="vertical-align: inherit;">时间函数的返回值包括适当的小数秒。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_adddate"></a><p>
          <a class="indexterm" name="idm140528084353392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_adddate"><code class="literal">ADDDATE(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_adddate"><code class="literal">ADDDATE(<em class="replaceable"><code>expr</code></em>,<em class="replaceable"><code>days</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当用</font></font><code class="literal">INTERVAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二个参数</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">形式</font><font style="vertical-align: inherit;">调用时</font><font style="vertical-align: inherit;">，它</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_adddate"><code class="literal">ADDDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">相关函数</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_subdate"><code class="literal">SUBDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font></font><code class="literal">INTERVAL</code>
          <em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">论证的</font><font style="vertical-align: inherit;">信息</font><font style="vertical-align: inherit;">，请参阅讨论</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2008-01-02', INTERVAL 31 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2008-02-02'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ADDDATE('2008-01-02', INTERVAL 31 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2008-02-02'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当以</font></font><em class="replaceable"><code>days</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二个参数</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">形式</font><font style="vertical-align: inherit;">调用时</font><font style="vertical-align: inherit;">，MySQL将其视为要添加到的整数天数</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ADDDATE('2008-01-02', 31);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2008-02-02'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_addtime"></a><p>
          <a class="indexterm" name="idm140528084328848"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_addtime"><code class="literal">ADDTIME(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_addtime"><code class="literal">ADDTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了
           </font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对
           </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并返回结果。
          </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是时间或日期时间表达式，并且</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是时间表达式。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ADDTIME('2007-12-31 23:59:59.999999', '1 1:1:1.000002');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2008-01-02 01：01：01.000001'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ADDTIME('01:00:00.999999', '02:00:00.999998');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '03：00：01.999997'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_convert-tz"></a><p>
          <a class="indexterm" name="idm140528084315072"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert-tz"><code class="literal">CONVERT_TZ(<em class="replaceable"><code>dt</code></em>,<em class="replaceable"><code>from_tz</code></em>,<em class="replaceable"><code>to_tz</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将日期</font></font><em class="replaceable"><code>dt</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">从给定的时区</font><font style="vertical-align: inherit;">转换为</font><font style="vertical-align: inherit;">给出</font></font><em class="replaceable"><code>from_tz</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的时区，</font></font><em class="replaceable"><code>to_tz</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并返回结果值。</font><font style="vertical-align: inherit;">时区按</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#time-zone-support" title="5.1.10 MySQL服务器时区支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.10节“MySQL服务器时区支持”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述进行指定
           </font><font style="vertical-align: inherit;">。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数无效，则</font><font style="vertical-align: inherit;">返回此函数
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果该值</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在从</font></font><em class="replaceable"><code>from_tz</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC </font><font style="vertical-align: inherit;">转换</font><font style="vertical-align: inherit;">为支持的</font><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">范围之外，则
           </font><font style="vertical-align: inherit;">不会发生转换。</font><font style="vertical-align: inherit;">该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围在</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-type-overview" title="11.1.2日期和时间类型概述"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.1.2节“日期和时间类型概述”中进行了描述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONVERT_TZ('2004-01-01 12:00:00','GMT','MET');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-01-01 13:00:00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONVERT_TZ('2004-01-01 12:00:00','+00:00','+10:00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-01-01 22:00:00'</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要使用诸如</font></font><code class="literal">'MET'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或的
             </font><font style="vertical-align: inherit;">命名时区</font></font><code class="literal">'Europe/Moscow'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，必须正确设置时区表。</font><font style="vertical-align: inherit;">有关说明</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#time-zone-support" title="5.1.10 MySQL服务器时区支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
             </font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#time-zone-support" title="5.1.10 MySQL服务器时区支持"><font style="vertical-align: inherit;">第5.1.10节“MySQL服务器时区支持”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_curdate"></a><p>
          <a class="indexterm" name="idm140528084292624"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_curdate"><code class="literal">CURDATE()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据函数是在字符串还是数字上下文中使用，</font><font style="vertical-align: inherit;">
          将当前日期返回为值in
           </font></font><code class="literal">'YYYY-MM-DD'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YYYYMMDD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CURDATE();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2008-06-13'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CURDATE() + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 20080613</font></font><font></font>
</pre></li><li class="listitem"><a name="function_current-date"></a><p>
          <a class="indexterm" name="idm140528084281280"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curdate"><code class="literal">CURDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_current-time"></a><p>
          <a class="indexterm" name="idm140528084269568"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-time"><code class="literal">CURRENT_TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-time"><code class="literal">CURRENT_TIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-time"><code class="literal">CURRENT_TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curtime"><code class="literal">CURTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_current-timestamp"></a><p>
          <a class="indexterm" name="idm140528084257392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_curtime"></a><p>
          <a class="indexterm" name="idm140528084245216"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_curtime"><code class="literal">CURTIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据函数是在字符串还是数字上下文中使用，</font><font style="vertical-align: inherit;">
          将当前时间作为值</font></font><code class="literal">'HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">HHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该值以当前时区表示。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">参数指定从0到6的小数秒精度，则返回值包含该许多数字的小数部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CURTIME();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '23：50：26'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CURTIME() + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 235026.000000</font></font><font></font>
</pre></li><li class="listitem"><a name="function_date"></a><p>
          <a class="indexterm" name="idm140528084231664"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_date"><code class="literal">DATE(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          提取日期或日期时间表达式的日期部分
           </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE('2003-12-31 01:02:03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-12-31'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_datediff"></a><p>
          <a class="indexterm" name="idm140528084221680"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_datediff"><code class="literal">DATEDIFF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_datediff"><code class="literal">DATEDIFF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回报
           </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
           </font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示为从一个日期到另一个日期的价值。</font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          并且</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是日期或日期和时间表达式。</font><font style="vertical-align: inherit;">计算中只使用数值的日期部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATEDIFF('2010-11-30 23:59:59','2010-12-31');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -31</font></font><font></font>
</pre></li><li class="listitem"><a name="function_date-add"></a><p>
          <a class="indexterm" name="idm140528084207120"></a>

          <a class="indexterm" name="idm140528084206048"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这些函数执行日期算术。</font><font style="vertical-align: inherit;">该
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数指定开始日期或日期时间值。
          </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个表达式，指定要从开始日期添加或减去的时间间隔值。</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个字符串; </font><font style="vertical-align: inherit;">它可能以一个</font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消极的时间间隔开始。
          </font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个关键字，表示应该解释表达式的单位。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">INTERVAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字和
           </font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符不区分大小写。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个</font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">参数
           </font><font style="vertical-align: inherit;">的预期形式
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="unit values and the expected expr argument for each value."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
              <th scope="col"><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 值</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预期</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">MICROSECOND</code></td>
              <td><code class="literal">MICROSECONDS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SECOND</code></td>
              <td><code class="literal">SECONDS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">MINUTE</code></td>
              <td><code class="literal">MINUTES</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">HOUR</code></td>
              <td><code class="literal">HOURS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">DAY</code></td>
              <td><code class="literal">DAYS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">WEEK</code></td>
              <td><code class="literal">WEEKS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">MONTH</code></td>
              <td><code class="literal">MONTHS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">QUARTER</code></td>
              <td><code class="literal">QUARTERS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">YEAR</code></td>
              <td><code class="literal">YEARS</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">SECOND_MICROSECOND</code></td>
              <td><code class="literal">'SECONDS.MICROSECONDS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">MINUTE_MICROSECOND</code></td>
              <td><code class="literal">'MINUTES:SECONDS.MICROSECONDS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">MINUTE_SECOND</code></td>
              <td><code class="literal">'MINUTES:SECONDS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">HOUR_MICROSECOND</code></td>
              <td><code class="literal">'HOURS:MINUTES:SECONDS.MICROSECONDS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">HOUR_SECOND</code></td>
              <td><code class="literal">'HOURS:MINUTES:SECONDS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">HOUR_MINUTE</code></td>
              <td><code class="literal">'HOURS:MINUTES'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">DAY_MICROSECOND</code></td>
              <td><code class="literal">'DAYS HOURS:MINUTES:SECONDS.MICROSECONDS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">DAY_SECOND</code></td>
              <td><code class="literal">'DAYS HOURS:MINUTES:SECONDS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">DAY_MINUTE</code></td>
              <td><code class="literal">'DAYS HOURS:MINUTES'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">DAY_HOUR</code></td>
              <td><code class="literal">'DAYS HOURS'</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">YEAR_MONTH</code></td>
              <td><code class="literal">'YEARS-MONTHS'</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回值取决于参数：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果第一个参数是一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）值，或者如果第一个参数是一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              和</font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值使用
               </font></font><code class="literal">HOURS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MINUTES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><code class="literal">SECONDS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              否则字符串。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了确保结果是
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您可以使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将第一个参数转换为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL允许</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">中的任何标点分隔符
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">表中显示的是建议的分隔符。</font><font style="vertical-align: inherit;">如果该
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，你的计算只涉及</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MONTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">DAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分（即，没有时间部分），结果是一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">否则，结果就是一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          日期算术也可以
           </font></font><code class="literal">INTERVAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">一起使用
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><code class="literal">date</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ INTERVAL </font><font style="vertical-align: inherit;">-  INTERVAL</font></font><em class="replaceable"><code>expr</code></em> <em class="replaceable"><code>unit</code></em>
<code class="literal">date</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>expr</code></em> <em class="replaceable"><code>unit</code></em>
</pre><p>
          <code class="literal">INTERVAL <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em></code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果另一侧的表达式是日期或日期时间值，</font><font style="vertical-align: inherit;">则允许在</font><font style="vertical-align: inherit;">操作员的</font><font style="vertical-align: inherit;">任一侧
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          操作员，</font><font style="vertical-align: inherit;">只允许在右侧使用，因为从时间间隔中减去日期或日期时间值是没有意义的。
        </font></font><code class="literal">INTERVAL <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em></code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '2008-12-31 23:59:59' + INTERVAL 1 SECOND;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2009-01-01 00:00:00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INTERVAL 1 DAY + '2008-12-31';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2009-01-01'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '2005-01-01' - INTERVAL 1 SECOND;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-12-31 23:59:59'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2000-12-31 23:59:59',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                INTERVAL 1 SECOND);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2001-01-01 00:00:00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2010-12-31 23:59:59',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                INTERVAL 1 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2011-01-01 23:59:59'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2100-12-31 23:59:59',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                INTERVAL '1:1' MINUTE_SECOND);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2101-01-01 00:01:00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_SUB('2005-01-01 00:00:00',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                INTERVAL '1 1:1:1' DAY_SECOND);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-12-30 22:58:59'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('1900-01-01 00:00:00',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                INTERVAL '-1 10' DAY_HOUR);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1899-12-30 14:00:00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_SUB('1998-01-02', INTERVAL 31 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1997-12-02'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('1992-12-31 23:59:59.000002',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;            </font></font><strong class="userinput"><code>INTERVAL '1.999999' SECOND_MICROSECOND);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1993-01-01 00：00：01.000001'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您指定的时间间隔值太短（不包括</font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">预期的所有时间间隔部分
           </font><font style="vertical-align: inherit;">），MySQL会假定您已经忽略了时间间隔值的最左侧部分。</font><font style="vertical-align: inherit;">例如，如果你指定</font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><code class="literal">DAY_SECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，价值
           </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预计将有天，小时，分钟和秒部分。</font><font style="vertical-align: inherit;">如果您指定了一个值
           </font></font><code class="literal">'1:10'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，MySQL假定缺少日期和小时部分，并且该值表示分钟和秒。</font><font style="vertical-align: inherit;">换句话说，它</font></font><code class="literal">'1:10' DAY_SECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          被解释为与它等同的方式
           </font></font><code class="literal">'1:10' MINUTE_SECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这与MySQL解释的方式类似
          </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 值表示经过时间而不是一天的时间。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因为</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被视为一个字符串，所以如果您指定一个非字符串值，请小心
           </font></font><code class="literal">INTERVAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，使用间隔指定符</font></font><code class="literal">HOUR_MINUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">6/4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估</font></font><code class="literal">1.5000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为1小时，5000分钟：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 6/4;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.5000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2009-01-01', INTERVAL 6/4 HOUR_MINUTE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2009-01-04 12:20:00'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了确保按照您的预期解释区间值，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用操作。</font><font style="vertical-align: inherit;">将其</font></font><code class="literal">6/4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">视为1小时5分钟，将其转换为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有单个小数位</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST(6/4 AS DECIMAL(3,1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1.5</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('1970-01-01 12:00:00',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                INTERVAL CAST(6/4 AS DECIMAL(3,1)) HOUR_MINUTE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1970-01-01 13:05:00'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果添加或减去包含时间部分的日期值，结果会自动转换为日期时间值：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2013-01-01', INTERVAL 1 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2013-01-02'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2013-01-01', INTERVAL 1 HOUR);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2013-01-01 01:00:00'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您添加</font></font><code class="literal">MONTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">YEAR_MONTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且结果日期的某一天大于新月份的最大日期，则该日期将调整为新月份中的最大日期：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2009-01-30', INTERVAL 1 MONTH);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2009-02-28'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          日期算术操作需要完整的日期，并且不适用于日期不完整
           </font></font><code class="literal">'2006-07-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或日期格式不正确的日期：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_ADD('2006-07-00', INTERVAL 1 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT '2005-03-32' + INTERVAL 1 MONTH;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre></li><li class="listitem"><a name="function_date-format"></a><p>
          <a class="indexterm" name="idm140528084038288"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT(<em class="replaceable"><code>date</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">
          格式化</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串中</font><font style="vertical-align: inherit;">
          可能使用以下说明
           </font><font style="vertical-align: inherit;">符。</font><font style="vertical-align: inherit;">该
           </font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符在格式说明符字符之前是必需的。
</font></font></p>
<div class="informaltable">
<table summary="Specifier characters for the DATE_FORMAT function that may be used in the format string and provides a description of each specifier character."><colgroup><col width="20%"><col width="70%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">%a</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩写周日名称（</font></font><code class="literal">Sun</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">Sat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%b</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简称月名（</font></font><code class="literal">Jan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">Dec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%c</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">月，数字（</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%D</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个月的一天，英语后缀（</font></font><code class="literal">0th</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">1st</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">2nd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                 </font></font><code class="literal">3rd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，...）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%d</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">31</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%e</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字（</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">31</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%f</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微秒（</font></font><code class="literal">000000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">999999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%H</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小时（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%h</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小时（</font></font><code class="literal">01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%I</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小时（</font></font><code class="literal">01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%i</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分钟，数字（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">59</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%j</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一年中的某一天（</font></font><code class="literal">001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">366</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%k</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小时（</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%l</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小时（</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%M</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">月份名称（</font></font><code class="literal">January</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">December</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%m</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">月，数字（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%p</code></td>
              <td><code class="literal">AM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 要么 </font></font><code class="literal">PM</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">%r</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间，12小时（</font></font><code class="literal">hh:mm:ss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后面
                 </font></font><code class="literal">AM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code class="literal">PM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%S</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">59</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%s</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">59</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%T</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间，24小时（</font></font><code class="literal">hh:mm:ss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%U</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">53</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），其中星期日是一周的第一天;
                </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式0</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%u</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周（</font></font><code class="literal">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">53</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），星期一是一周中的第一天;
                </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式1</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%V</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周（</font></font><code class="literal">01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">53</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），其中星期日是一周的第一天;
                </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式2; </font><font style="vertical-align: inherit;">使用
                </font></font><code class="literal">%X</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">%v</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周（</font></font><code class="literal">01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">53</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），星期一是一周中的第一天;
                </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式3; </font><font style="vertical-align: inherit;">使用
                </font></font><code class="literal">%x</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">%W</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平日名称（</font></font><code class="literal">Sunday</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.. </font></font><code class="literal">Saturday</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%w</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期几（</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=星期日.. </font></font><code class="literal">6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=星期六）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%X</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期日是一周中的第一天的星期数，数字，四位数; </font><font style="vertical-align: inherit;">使用</font></font><code class="literal">%V</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">%x</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期几，星期一是一周的第一天，数字，四位数; </font><font style="vertical-align: inherit;">使用</font></font><code class="literal">%v</code></td>
            </tr><tr>
              <td scope="row"><code class="literal">%Y</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年份，数字，四位数字</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%y</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年份，数字（两位数字）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%%</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字面</font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">%<em class="replaceable"><code>x</code></em></code></td>
              <td><em class="replaceable"><code>x</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，对于</font><font style="vertical-align: inherit;">以上未列出的</font><font style="vertical-align: inherit;">任何
                 </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><em class="replaceable"><code>x</code></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span><font style="vertical-align: inherit;"></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          月和天符范围以零开始由于这样的事实是，MySQL允许不完整的日期，如的存储</font></font><code class="literal">'2014-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于日期和月份名称和缩写的语言由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值控制
           </font><font style="vertical-align: inherit;">（</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#locale-support" title="10.15 MySQL服务器区域设置支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.15节“MySQL服务器区域设置支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于</font></font><code class="literal">%U</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">%u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">%V</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">%v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明符，看到的描述
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关模式值的信息的功能。</font><font style="vertical-align: inherit;">该模式会影响星期编号的发生。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个字符串，其中包含字符集和归类
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以便它可以返回包含非ASCII字符的月份和星期几名称。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_FORMAT('2009-10-04 22:23:00', '%W %M %Y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2009年10月的星期天'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_FORMAT('2007-10-04 22:23:00', '%H:%i:%s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '22：23：00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_FORMAT('1900-10-04 22:23:00',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                '%D %y %a %d %m %b %j');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'4th 00四月04 10月277'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT DATE_FORMAT('1997-10-04 22:23:00',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                '%H %k %I %r %T %S %w');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '22 22 10 10:23:00 PM 22:23:00 00 6'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_FORMAT('1999-01-01', '%X %V');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'1998 52'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_FORMAT('2006-06-00', '%d');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'00'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_date-sub"></a><p>
          <a class="indexterm" name="idm140528083861808"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_day"></a><p>
          <a class="indexterm" name="idm140528083852496"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_day"><code class="literal">DAY(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_day"><code class="literal">DAY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_dayname"></a><p>
          <a class="indexterm" name="idm140528083842832"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayname"><code class="literal">DAYNAME(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回工作日的名称
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">用于名称的语言由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值控制
           </font><font style="vertical-align: inherit;">（</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#locale-support" title="10.15 MySQL服务器区域设置支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.15节“MySQL服务器区域设置支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DAYNAME('2007-02-03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'星期六'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_dayofmonth"></a><p>
          <a class="indexterm" name="idm140528083830944"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个月的一天
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在范围
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至</font></font><code class="literal">31</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为日期，如
           </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">'2008-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个零日部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DAYOFMONTH('2007-02-03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3</font></font><font></font>
</pre></li><li class="listitem"><a name="function_dayofweek"></a><p>
          <a class="indexterm" name="idm140528083817504"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofweek"><code class="literal">DAYOFWEEK(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回周日指数</font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=星期日，</font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=星期一，...，</font></font><code class="literal">7</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期六）。</font><font style="vertical-align: inherit;">这些索引值对应于ODBC标准。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DAYOFWEEK('2007-02-03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 7</font></font><font></font>
</pre></li><li class="listitem"><a name="function_dayofyear"></a><p>
          <a class="indexterm" name="idm140528083805456"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofyear"><code class="literal">DAYOFYEAR(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一年中的某一天，
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code class="literal">366</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DAYOFYEAR('2007-02-03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 34</font></font><font></font>
</pre></li><li class="listitem"><a name="function_extract"></a><p>
          <a class="indexterm" name="idm140528083794240"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_extract"><code class="literal">EXTRACT(<em class="replaceable"><code>unit</code></em>
          FROM <em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extract"><code class="literal">EXTRACT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数使用与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
           </font><font style="vertical-align: inherit;">相同类型的单位说明符
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但从日期中提取部分而不是执行日期算术。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXTRACT(YEAR FROM '2009-07-02');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       - &gt; 2009</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXTRACT(YEAR_MONTH FROM '2009-07-02 01:02:03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       - &gt; 200907</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT EXTRACT(DAY_MINUTE FROM '2009-07-02 01:02:03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       - &gt; 20102</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT EXTRACT(MICROSECOND</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;                </font></font><strong class="userinput"><code>FROM '2003-01-02 10:30:00.000123');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 123</font></font><font></font>
</pre></li><li class="listitem"><a name="function_from-days"></a><p>
          <a class="indexterm" name="idm140528083777392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-days"><code class="literal">FROM_DAYS(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定一个天数</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FROM_DAYS(730669);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2000-07-03'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-days"><code class="literal">FROM_DAYS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与旧日期谨慎。</font><font style="vertical-align: inherit;">它不适用于公历出现之前的值（1582）。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#mysql-calendar" title="12.8 MySQL使用什么日历？"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.8节“MySQL使用的日历？”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_from-unixtime"></a><p>
          <a class="indexterm" name="idm140528083763712"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME(<em class="replaceable"><code>unix_timestamp</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME(<em class="replaceable"><code>unix_timestamp</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据函数是在字符串还是数字上下文中使用</font><font style="vertical-align: inherit;">
          ，将</font></font><em class="replaceable"><code>unix_timestamp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">的表示形式返回
           </font><font style="vertical-align: inherit;">为值in </font></font><code class="literal">'YYYY-MM-DD HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">YYYYMMDDHHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式。</font><font style="vertical-align: inherit;">该值以当前时区表示。
          </font></font><em class="replaceable"><code>unix_timestamp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个内部时间戳值，例如由</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">产生的
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出，结果将根据</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          字符串进行</font><font style="vertical-align: inherit;">格式化，该</font><font style="vertical-align: inherit;">字符串与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的条目中列出的方式相同</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FROM_UNIXTIME(1447430881);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2015-11-13 10:08:01'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FROM_UNIXTIME(1447430881) + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 20151113100801</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT FROM_UNIXTIME(UNIX_TIMESTAMP(),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;                      </font></font><strong class="userinput"><code>'%Y %D %M %h:%i:%s %x');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2015年11月13日10:08:01 2015'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          注意：如果使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值和Unix时间戳值</font><font style="vertical-align: inherit;">之间进行转换</font><font style="vertical-align: inherit;">，转换是有损的，因为映射在两个方向上都不是一一对应的。</font><font style="vertical-align: inherit;">有关详细信息，请参阅该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">的说明
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_get-format"></a><p>
          <a class="indexterm" name="idm140528083737680"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT({DATE|TIME|DATETIME},
          {'EUR'|'USA'|'JIS'|'ISO'|'INTERNAL'})</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回格式字符串。</font><font style="vertical-align: inherit;">该功能</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">和
           </font><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">结合使用非常有用
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          第一个和第二个参数的可能值会导致几种可能的格式字符串（对于使用的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明符</font><font style="vertical-align: inherit;">，请参阅</font><font style="vertical-align: inherit;">函数描述中</font><font style="vertical-align: inherit;">的表格
           </font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">ISO格式是指ISO 9075，而不是ISO 8601。
</font></font></p>
<div class="informaltable">
<table summary="Function calls for the GET_FORMAT function along with results for each function call."><colgroup><col width="60%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数调用</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'USA')</code></a></td>
              <td><code class="literal">'%m.%d.%Y'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'JIS')</code></a></td>
              <td><code class="literal">'%Y-%m-%d'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'ISO')</code></a></td>
              <td><code class="literal">'%Y-%m-%d'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'EUR')</code></a></td>
              <td><code class="literal">'%d.%m.%Y'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'INTERNAL')</code></a></td>
              <td><code class="literal">'%Y%m%d'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'USA')</code></a></td>
              <td><code class="literal">'%Y-%m-%d %H.%i.%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'JIS')</code></a></td>
              <td><code class="literal">'%Y-%m-%d %H:%i:%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'ISO')</code></a></td>
              <td><code class="literal">'%Y-%m-%d %H:%i:%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'EUR')</code></a></td>
              <td><code class="literal">'%Y-%m-%d %H.%i.%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'INTERNAL')</code></a></td>
              <td><code class="literal">'%Y%m%d%H%i%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'USA')</code></a></td>
              <td><code class="literal">'%h:%i:%s %p'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'JIS')</code></a></td>
              <td><code class="literal">'%H:%i:%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'ISO')</code></a></td>
              <td><code class="literal">'%H:%i:%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'EUR')</code></a></td>
              <td><code class="literal">'%H.%i.%s'</code></td>
            </tr><tr>
              <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'INTERNAL')</code></a></td>
              <td><code class="literal">'%H%i%s'</code></td>
</tr></tbody></table>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以用作第一个参数
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-format"><code class="literal">GET_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在这种情况下，该函数返回与for相同的值
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_FORMAT('2003-10-03',GET_FORMAT(DATE,'EUR'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '03 .10.2003'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('10.31.2003',GET_FORMAT(DATE,'USA'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-10-31'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_hour"></a><p>
          <a class="indexterm" name="idm140528083656272"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_hour"><code class="literal">HOUR(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回小时</font></font><em class="replaceable"><code>time</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回值的范围是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要
           </font></font><code class="literal">23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间的日值。</font><font style="vertical-align: inherit;">但是，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的范围</font><font style="vertical-align: inherit;">实际上要大得多，所以</font></font><code class="literal">HOUR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以返回大于</font></font><code class="literal">23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HOUR('10:05:03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HOUR('272:59:59');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 272</font></font><font></font>
</pre></li><li class="listitem"><a name="function_last-day"></a><p>
          <a class="indexterm" name="idm140528083641568"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-day"><code class="literal">LAST_DAY(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          输入日期或日期时间值并返回该月份最后一天的相应值。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数无效，则</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_DAY('2003-02-05');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-02-28'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_DAY('2004-02-05');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-02-29'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_DAY('2004-01-01 01:01:01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-01-31'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_DAY('2003-03-32');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre></li><li class="listitem"><a name="function_localtime"></a><p>
          <a class="indexterm" name="idm140528083628896"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtime"><code class="literal">LOCALTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_localtimestamp"></a><p>
          <a class="indexterm" name="idm140528083616800"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_makedate"></a><p>
          <a class="indexterm" name="idm140528083604704"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_makedate"><code class="literal">MAKEDATE(<em class="replaceable"><code>year</code></em>,<em class="replaceable"><code>dayofyear</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回给定年份和日期值的日期。
          </font></font><em class="replaceable"><code>dayofyear</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须大于0或结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKEDATE(2011,31), MAKEDATE(2011,32);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2011-01-31'，'2011-02-01'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKEDATE(2011,365), MAKEDATE(2014,365);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2011-12-31'，'2014-12-31'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKEDATE(2011,0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre></li><li class="listitem"><a name="function_maketime"></a><p>
          <a class="indexterm" name="idm140528083591920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_maketime"><code class="literal">MAKETIME(<em class="replaceable"><code>hour</code></em>,<em class="replaceable"><code>minute</code></em>,<em class="replaceable"><code>second</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回从计算出的时间值
           </font></font><em class="replaceable"><code>hour</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><em class="replaceable"><code>minute</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><em class="replaceable"><code>second</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><em class="replaceable"><code>second</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数可以有小数部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MAKETIME(12,15,30);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '12：15：30'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_microsecond"></a><p>
          <a class="indexterm" name="idm140528083579376"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_microsecond"><code class="literal">MICROSECOND(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从时间或日期时间表达式中返回微秒
           </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为范围从</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至</font><font style="vertical-align: inherit;">的范围内的数字
           </font></font><code class="literal">999999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MICROSECOND('12:00:00.123456');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 123456</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MICROSECOND('2009-12-31 23:59:59.000010');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 10</font></font><font></font>
</pre></li><li class="listitem"><a name="function_minute"></a><p>
          <a class="indexterm" name="idm140528083567200"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_minute"><code class="literal">MINUTE(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回分钟</font></font><em class="replaceable"><code>time</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，范围</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">59</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MINUTE('2008-02-03 10:05:03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 5</font></font><font></font>
</pre></li><li class="listitem"><a name="function_month"></a><p>
          <a class="indexterm" name="idm140528083555936"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个月</font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在范围内</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以</font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">供1- 12月，或</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为日期，如
           </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">'2008-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个零一个月的一部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MONTH('2008-02-03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font>
</pre></li><li class="listitem"><a name="function_monthname"></a><p>
          <a class="indexterm" name="idm140528083542496"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_monthname"><code class="literal">MONTHNAME(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回月份的全名
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">用于名称的语言由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值控制
           </font><font style="vertical-align: inherit;">（</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#locale-support" title="10.15 MySQL服务器区域设置支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.15节“MySQL服务器区域设置支持”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MONTHNAME('2008-02-03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'二月'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_now"></a><p>
          <a class="indexterm" name="idm140528083530640"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据函数是在字符串还是数字上下文中使用，</font><font style="vertical-align: inherit;">
          将当前日期和时间作为值</font></font><code class="literal">'YYYY-MM-DD HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">YYYYMMDDHHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该值以当前时区表示。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">参数指定从0到6的小数秒精度，则返回值包含该许多数字的小数部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOW();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2007-12-15 23:50:26'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOW() + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 20071215235026.000000</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个表示语句开始执行的时间的常量时间。</font><font style="vertical-align: inherit;">（在存储的函数或触发器内，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回函数或触发语句开始执行的时间。）这与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回执行的确切时间</font><font style="vertical-align: inherit;">的行为不同
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOW(), SLEEP(2), NOW();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NOW（）| </font><font style="vertical-align: inherit;">睡眠（2）| </font><font style="vertical-align: inherit;">NOW（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2006-04-12 13:47:36 | </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">2006-04-12 13:47:36 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SYSDATE(), SLEEP(2), SYSDATE();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">SYSDATE（）| </font><font style="vertical-align: inherit;">睡眠（2）| </font><font style="vertical-align: inherit;">SYSDATE（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2006-04-12 13:47:44 | </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">2006-04-12 13:47:46 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          另外，该</font></font><code class="literal">SET TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明会影响返回的值，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但不会
           </font><font style="vertical-align: inherit;">影响该值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着二进制日志中的时间戳设置对调用无效</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将时间戳设置为非零值会导致每次后续调用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回该值。</font><font style="vertical-align: inherit;">将时间戳设置为零将取消此效果，以便</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再次返回当前日期和时间。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关这</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两种功能之间差异的更多信息，</font><font style="vertical-align: inherit;">请参阅说明
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_period-add"></a><p>
          <a class="indexterm" name="idm140528083500704"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_period-add"><code class="literal">PERIOD_ADD(<em class="replaceable"><code>P</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为期间</font><font style="vertical-align: inherit;">
          添加</font><font style="vertical-align: inherit;">月份
           </font></font><em class="replaceable"><code>P</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（格式
           </font></font><code class="literal">YYMM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YYYYMM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">以格式返回值</font></font><code class="literal">YYYYMM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">注意周期参数</font></font><em class="replaceable"><code>P</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
           </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个日期值。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT PERIOD_ADD(200801,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 200803</font></font><font></font>
</pre></li><li class="listitem"><a name="function_period-diff"></a><p>
          <a class="indexterm" name="idm140528083487024"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_period-diff"><code class="literal">PERIOD_DIFF(<em class="replaceable"><code>P1</code></em>,<em class="replaceable"><code>P2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回期间</font></font><em class="replaceable"><code>P1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font><font style="vertical-align: inherit;">之间的月数
           </font></font><em class="replaceable"><code>P2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><em class="replaceable"><code>P1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          并</font></font><em class="replaceable"><code>P2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应采用格式
           </font></font><code class="literal">YYMM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YYYYMM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">注意周期参数</font></font><em class="replaceable"><code>P1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><em class="replaceable"><code>P2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          日期值。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT PERIOD_DIFF(200802,200703);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 11</font></font><font></font>
</pre></li><li class="listitem"><a name="function_quarter"></a><p>
          <a class="indexterm" name="idm140528083472736"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_quarter"><code class="literal">QUARTER(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一年中的季度，
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code class="literal">4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT QUARTER('2008-04-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2</font></font><font></font>
</pre></li><li class="listitem"><a name="function_second"></a><p>
          <a class="indexterm" name="idm140528083461440"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_second"><code class="literal">SECOND(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回秒</font></font><em class="replaceable"><code>time</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，范围</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code class="literal">59</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SECOND('10:05:03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3</font></font><font></font>
</pre></li><li class="listitem"><a name="function_sec-to-time"></a><p>
          <a class="indexterm" name="idm140528083450240"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME(<em class="replaceable"><code>seconds</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>seconds</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，将其转换为小时，分钟和秒数作为
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">结果范围受限于
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型的范围。</font><font style="vertical-align: inherit;">如果参数与该范围之外的值相对应，则会发生警告。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SEC_TO_TIME(2378);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '00：39：38'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SEC_TO_TIME(2378) + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3938</font></font><font></font>
</pre></li><li class="listitem"><a name="function_str-to-date"></a><p>
          <a class="indexterm" name="idm140528083436960"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_str-to-date"><code class="literal">STR_TO_DATE(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这是该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">的反面
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它需要一个字符串</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和一个格式字符串</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font><font style="vertical-align: inherit;">如果格式字符串包含日期和时间部分，则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值;如果字符串仅包含日期或时间部分，则</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">值
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">如果从中提取的日期，时间或日期时间值</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是非法的，则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并产生警告。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          服务器扫描</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">试图匹配</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它。</font><font style="vertical-align: inherit;">格式字符串可以包含以</font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">开头的文字字符和格式说明符</font><font style="vertical-align: inherit;">。</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字面上的</font><font style="vertical-align: inherit;">字符
           </font><font style="vertical-align: inherit;">必须与字面上相匹配
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">格式说明符
           </font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须与中的日期或时间部分匹配</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关可以使用</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明符</font><font style="vertical-align: inherit;">，请参阅
           </font><font style="vertical-align: inherit;">功能说明。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('01,5,2013','%d,%m,%Y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2013-05-01'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('May 1, 2013','%M %d,%Y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2013-05-01'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          扫描从头开始，
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现不匹配则</font><font style="vertical-align: inherit;">失败
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最后的额外字符将</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被忽略。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('a09:30:17','a%h:%i:%s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '09：30：17'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('a09:30:17','%h:%i:%s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('09:30:17a','%h:%i:%s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '09：30：17'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          未指定的日期或时间部分的值为0，因此不完全指定的值会
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成一些或全部部分设置为0的结果：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('abc','abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'0000-00-00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('9','%m');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'0000-09-00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('9','%s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '00：00：09'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          日期值部分的范围检查如
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3.1节“DATE，DATETIME和TIMESTAMP类型”中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着，例如，
           </font><font style="vertical-align: inherit;">除非SQL模式被设置为禁止这些值，否则允许</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期或部分值为0的日期。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('00/00/0000', '%m/%d/%Y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'0000-00-00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('04/31/2004', '%m/%d/%Y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-04-31'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font><font style="vertical-align: inherit;">启用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_date"><code class="literal">NO_ZERO_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_in_date"><code class="literal">NO_ZERO_IN_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL模式，则不允许零日期或部分日期。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退货
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并产生警告：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET sql_mode = '';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT STR_TO_DATE('15:35:00', '%H:%i:%s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">STR_TO_DATE（'15：35：00'，'％H：％i：％s'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">15:35:00 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET sql_mode = 'NO_ZERO_IN_DATE';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT STR_TO_DATE('15:35:00', '%h:%i:%s');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">STR_TO_DATE（'15：35：00'，'％h：％i：％s'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：警告</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1411</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：函数str_to_date错误的日期时间值：'15：35：00'</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            您无法使用格式</font></font><code class="literal">"%X%V"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将年份字符串转换为日期，因为如果该星期与月份边界交叉，年份和星期的组合不会唯一标识年份和月份。</font><font style="vertical-align: inherit;">要将年份转换为日期，您还应该指定星期几：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT STR_TO_DATE('200442 Monday', '%X%V %W');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-10-18'</font></font><font></font>
</pre>
</div>
</li><li class="listitem"><a name="function_subdate"></a><p>
          <a class="indexterm" name="idm140528083383808"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_subdate"><code class="literal">SUBDATE(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_subdate"><code class="literal">SUBDATE(<em class="replaceable"><code>expr</code></em>,<em class="replaceable"><code>days</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当用</font></font><code class="literal">INTERVAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二个参数</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">形式</font><font style="vertical-align: inherit;">调用时</font><font style="vertical-align: inherit;">，它</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_subdate"><code class="literal">SUBDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font></font><code class="literal">INTERVAL</code>
          <em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">论证的</font><font style="vertical-align: inherit;">信息</font><font style="vertical-align: inherit;">，请参阅讨论</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATE_SUB('2008-01-02', INTERVAL 31 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2007-12-02'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBDATE('2008-01-02', INTERVAL 31 DAY);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2007-12-02'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          第二种形式可以使用一个整数值
           </font></font><em class="replaceable"><code>days</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，它被解释为从日期或日期时间表达式中减去的天数</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBDATE('2008-01-02 12:00:00', 31);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2007-12-02 12:00:00'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_subtime"></a><p>
          <a class="indexterm" name="idm140528083362192"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_subtime"><code class="literal">SUBTIME(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_subtime"><code class="literal">SUBTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
           </font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示为与格式相同的值</font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是时间或日期时间表达式，并且</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是时间表达式。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBTIME('2007-12-31 23:59:59.999999','1 1:1:1.000002');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2007-12-30 22：58：58.999997'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SUBTIME('01:00:00.999999', '02:00:00.999998');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'-00：59：59.999999'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_sysdate"></a><p>
          <a class="indexterm" name="idm140528083347872"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据函数是在字符串还是数字上下文中使用，</font><font style="vertical-align: inherit;">
          将当前日期和时间作为值</font></font><code class="literal">'YYYY-MM-DD HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">YYYYMMDDHHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">参数指定从0到6的小数秒精度，则返回值包含该许多数字的小数部分。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回它执行的时间。</font><font style="vertical-align: inherit;">这与以下行为不同
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，后者返回一个表示语句开始执行的时间的常量时间。</font><font style="vertical-align: inherit;">（在存储的函数或触发器中，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回函数或触发语句开始执行的时间。）
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NOW(), SLEEP(2), NOW();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NOW（）| </font><font style="vertical-align: inherit;">睡眠（2）| </font><font style="vertical-align: inherit;">NOW（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2006-04-12 13:47:36 | </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">2006-04-12 13:47:36 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SYSDATE(), SLEEP(2), SYSDATE();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">SYSDATE（）| </font><font style="vertical-align: inherit;">睡眠（2）| </font><font style="vertical-align: inherit;">SYSDATE（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2006-04-12 13:47:44 | </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">2006-04-12 13:47:46 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ---------- + ---------------- ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          另外，该</font></font><code class="literal">SET TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明会影响返回的值，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但不会
           </font><font style="vertical-align: inherit;">影响该值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着二进制日志中的时间戳设置对调用无效</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使在同一个语句中也可以返回不同的值，并且不受影响</font></font><code class="literal">SET TIMESTAMP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所以如果使用基于语句的二进制日志记录，则它是不确定的，因此对于复制是不安全的。</font><font style="vertical-align: inherit;">如果这是一个问题，您可以使用基于行的日志记录。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或者，您可以使用该
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#option_mysqld_sysdate-is-now"><code class="option">--sysdate-is-now</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项使其</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成为别名</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_now"><code class="literal">NOW()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果主设备和从设备都使用此选项，则此功能起作用。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          非确定性性质
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也意味着索引不能用于评估引用它的表达式。
        </font></font></p></li><li class="listitem"><a name="function_time"></a><p>
          <a class="indexterm" name="idm140528083316448"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_time"><code class="literal">TIME(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          提取时间或日期时间表达式的时间部分
           </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将其作为字符串返回。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIME('2003-12-31 01:02:03');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '01：02：03'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIME('2003-12-31 01:02:03.000123');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '01：02：03.000123'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_timediff"></a><p>
          <a class="indexterm" name="idm140528083303136"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_timediff"><code class="literal">TIMEDIFF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_timediff"><code class="literal">TIMEDIFF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
           </font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以时间值表示。
          </font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是时间或日期和时间表达式，但都必须是相同的类型。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回的结果</font></font><code class="literal">TIMEDIFF()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅限于</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">允许范围
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">或者，您可以使用其中任何一个函数，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个</font><font style="vertical-align: inherit;">函数
           </font><font style="vertical-align: inherit;">都会返回整数。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT TIMEDIFF('2000:01:01 00:00:00',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;                 </font></font><strong class="userinput"><code>'2000:01:01 00:00:00.000001');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'-00：00：00.000001'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT TIMEDIFF('2008-12-31 23:59:59.000001',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>                '2008-12-30 01:01:01.000002');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '46：58：57.999999'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_timestamp"></a><p>
          <a class="indexterm" name="idm140528083282080"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestamp"><code class="literal">TIMESTAMP(<em class="replaceable"><code>expr</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestamp"><code class="literal">TIMESTAMP(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用单个参数，该函数将日期或日期时间表达式</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为日期时间值返回。</font><font style="vertical-align: inherit;">有两个参数，它将时间表达式添加</font></font><em class="replaceable"><code>expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到日期或日期时间表达式中</font></font><em class="replaceable"><code>expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并将结果作为日期时间值返回。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIMESTAMP('2003-12-31');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-12-31 00:00:00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIMESTAMP('2003-12-31 12:00:00','12:00:00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2004-01-01 00:00:00'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_timestampadd"></a><p>
          <a class="indexterm" name="idm140528083268176"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD(<em class="replaceable"><code>unit</code></em>,<em class="replaceable"><code>interval</code></em>,<em class="replaceable"><code>datetime_expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将整数表达式添加
           </font></font><em class="replaceable"><code>interval</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到日期或日期时间表达式中</font></font><em class="replaceable"><code>datetime_expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为单元</font></font><em class="replaceable"><code>interval</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将被给定
           </font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，它应为以下值中的一个：</font></font><code class="literal">MICROSECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （微秒）， ，</font></font><code class="literal">SECOND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MINUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">HOUR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">DAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">WEEK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MONTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">QUARTER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">YEAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值可以使用其中一个关键字指定，或以前缀
           </font></font><code class="literal">SQL_TSI_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，
           </font></font><code class="literal">DAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">SQL_TSI_DAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都是合法的。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIMESTAMPADD(MINUTE,1,'2003-01-02');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-01-02 00:01:00'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIMESTAMPADD(WEEK,1,'2003-01-02');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-01-09'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_timestampdiff"></a><p>
          <a class="indexterm" name="idm140528083245616"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF(<em class="replaceable"><code>unit</code></em>,<em class="replaceable"><code>datetime_expr1</code></em>,<em class="replaceable"><code>datetime_expr2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>datetime_expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
          </font></font><em class="replaceable"><code>datetime_expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">其中
           </font></font><em class="replaceable"><code>datetime_expr1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><em class="replaceable"><code>datetime_expr2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有日期或日期时间表达式。</font><font style="vertical-align: inherit;">一个表达可能是一个日期，另一个表达可能是日期时间; </font><font style="vertical-align: inherit;">日期值</font></font><code class="literal">'00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在必要</font><font style="vertical-align: inherit;">时被视为具有时间部分的日期时间</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果单位（一个整数）由</font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">给出
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">其合法值
           </font></font><em class="replaceable"><code>unit</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">描述中列出的相同
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIMESTAMPDIFF(MONTH,'2003-02-01','2003-05-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIMESTAMPDIFF(YEAR,'2002-05-01','2001-01-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 128885</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该函数的date或datetime参数的顺序</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestamp"><code class="literal">TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与使用2个参数调用时</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的顺序相反
             </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_time-format"></a><p>
          <a class="indexterm" name="idm140528083226640"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_time-format"><code class="literal">TIME_FORMAT(<em class="replaceable"><code>time</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">类似
           </font><font style="vertical-align: inherit;">，但
           </font></font><em class="replaceable"><code>format</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串可能只包含小时，分钟，秒和微秒的格式说明符。</font><font style="vertical-align: inherit;">其他说明符产生一个</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值或
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果该</font></font><em class="replaceable"><code>time</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值中包含一个小时的部分是大于</font></font><code class="literal">23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则
           </font></font><code class="literal">%H</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">%k</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小时的格式说明产生比通常范围大的值
           </font></font><code class="literal">0..23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">其他小时格式说明符产生小时值模12。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIME_FORMAT('100:00:00', '%H %k %h %I %l');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'100 100 04 04 4'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_time-to-sec"></a><p>
          <a class="indexterm" name="idm140528083209632"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_time-to-sec"><code class="literal">TIME_TO_SEC(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><em class="replaceable"><code>time</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，转换为秒。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIME_TO_SEC('22:23:00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 80580</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TIME_TO_SEC('00:39:38');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2378</font></font><font></font>
</pre></li><li class="listitem"><a name="function_to-days"></a><p>
          <a class="indexterm" name="idm140528083199040"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定一个日期</font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回一个天数（从0年开始的天数）。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_DAYS(950501);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 728779</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_DAYS('2007-10-07');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 733321</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不适用于公历出现之前的值（1582），因为它没有考虑到日历变更时丢失的日期。</font><font style="vertical-align: inherit;">对于1582年之前的日期（以及可能在其他地区的较晚一年），此功能的结果不可靠。</font><font style="vertical-align: inherit;">有关详细信息</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#mysql-calendar" title="12.8 MySQL使用什么日历？"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#mysql-calendar" title="12.8 MySQL使用什么日历？"><font style="vertical-align: inherit;">第12.8节“MySQL使用的日历？”</font></a><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请记住，MySQL使用</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-types" title="11.3日期和时间类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3节“日期和时间类型”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的规则将日期中的两位数年份值转换为四位数形式
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，
           </font></font><code class="literal">'2008-10-07'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><code class="literal">'08-10-07'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被看作是相同的日期：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_DAYS('2008-10-07'), TO_DAYS('08-10-07');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 733687，733687</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL中，零日期被定义为
           </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即使这个日期本身被认为是无效的。</font><font style="vertical-align: inherit;">这意味着，
           </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">'0000-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回此处显示的值：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_DAYS('0000-00-00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">to_days（'0000-00-00'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1行，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">级别| </font><font style="vertical-align: inherit;">代码| </font><font style="vertical-align: inherit;">留言|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">警告| </font><font style="vertical-align: inherit;">1292 | </font><font style="vertical-align: inherit;">不正确的日期时间值：'0000-00-00'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_DAYS('0000-01-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">to_days（'0000-01-01'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无论</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_allow_invalid_dates"><code class="literal">ALLOW_INVALID_DATES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL服务器模式是否启用，情况</font><font style="vertical-align: inherit;">都是如此
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_to-seconds"></a><p>
          <a class="indexterm" name="idm140528083171248"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-seconds"><code class="literal">TO_SECONDS(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定日期或日期时间</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回自第0年以来的秒数。如果
           </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是有效的日期或日期时间值，则返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_SECONDS(950501);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 62966505600</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_SECONDS('2009-11-29');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 63426672000</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_SECONDS('2009-11-29 13:43:32');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 63426721412</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_SECONDS( NOW() );</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 63426721458</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          类似的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">TO_SECONDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并不打算用于公历出现之前的值（1582），因为它没有考虑日历改变时丢失的日子。</font><font style="vertical-align: inherit;">对于1582年之前的日期（以及可能在其他地区的较晚一年），此功能的结果不可靠。</font><font style="vertical-align: inherit;">有关详细信息</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#mysql-calendar" title="12.8 MySQL使用什么日历？"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#mysql-calendar" title="12.8 MySQL使用什么日历？"><font style="vertical-align: inherit;">第12.8节“MySQL使用的日历？”</font></a><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          就像</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">TO_SECONDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#date-and-time-types" title="11.3日期和时间类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.3节“日期和时间类型”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的规则将日期中的两位数年份值转换为四位数形式
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL中，零日期被定义为
           </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即使这个日期本身被认为是无效的。</font><font style="vertical-align: inherit;">这意味着，
           </font></font><code class="literal">'0000-00-00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">'0000-01-01'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回此处显示的值：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_SECONDS('0000-00-00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TO_SECONDS（'0000-00-00'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1行，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">级别| </font><font style="vertical-align: inherit;">代码| </font><font style="vertical-align: inherit;">留言|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">警告| </font><font style="vertical-align: inherit;">1292 | </font><font style="vertical-align: inherit;">不正确的日期时间值：'0000-00-00'|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + -------------------------------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT TO_SECONDS('0000-01-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">TO_SECONDS（'0000-01-01'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">86400 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          无论</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_allow_invalid_dates"><code class="literal">ALLOW_INVALID_DATES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL服务器模式是否启用，情况</font><font style="vertical-align: inherit;">都是如此
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_unix-timestamp"></a><p>
          <a class="indexterm" name="idm140528083141152"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果不带参数调用，则返回一个Unix时间戳（自</font></font><code class="literal">'1970-01-01 00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC </font><font style="vertical-align: inherit;">以来的秒数</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">如果未给出参数或参数不包含小数秒部分，或者给出的参数包含小数秒部分，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">返回值为整数
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数调用，它会以自</font></font><code class="literal">'1970-01-01 00:00:00'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC </font><font style="vertical-align: inherit;">以来的秒数的形式返回参数的值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所述
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数可以是一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串，或在多个</font></font><code class="literal">YYMMDD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">YYMMDDHHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">YYYYMMDD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
           </font></font><code class="literal">YYYYMMDDHHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式。</font><font style="vertical-align: inherit;">如果参数包含时间部分，则可以选择包含小数部分。</font><font style="vertical-align: inherit;">服务器将解释
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为当前时区中的值，并将其转换为UTC的内部值。</font><font style="vertical-align: inherit;">客户可以按照</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#time-zone-support" title="5.1.10 MySQL服务器时区支持"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.10节“MySQL服务器时区支持”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述设置其时区
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNIX_TIMESTAMP();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1447431666</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNIX_TIMESTAMP('2015-11-13 10:20:19');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1447431619</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNIX_TIMESTAMP('2015-11-13 10:20:19.012');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1447431619.012</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">上使用时</font><font style="vertical-align: inherit;">，该函数直接返回内部时间戳值，不会有任何隐式的</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串到Unix时间戳</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          转换。</font><font style="vertical-align: inherit;">如果你传递了一个超出范围的日期
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它会返回
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">值的有效范围与</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font><font style="vertical-align: inherit;">相同</font><font style="vertical-align: inherit;">：从
           </font></font><code class="literal">'1970-01-01 00:00:01.000000'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC到
           </font></font><code class="literal">'2038-01-19 03:14:07.999999'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTC。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          注意：如果使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值和Unix时间戳值</font><font style="vertical-align: inherit;">之间进行转换</font><font style="vertical-align: inherit;">，转换是有损的，因为映射在两个方向上都不是一一对应的。</font><font style="vertical-align: inherit;">例如，由于本地时区更改的惯例，有可能两个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射两个
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值到同​​一个Unix时间戳值。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将该值映射回原始
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值中的一个。</font><font style="vertical-align: inherit;">以下是一个使用</font><font style="vertical-align: inherit;">时区中的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的示例</font></font><code class="literal">CET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNIX_TIMESTAMP('2005-03-27 03:00:00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">UNIX_TIMESTAMP（'2005-03-27 03:00:00'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1111885200 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNIX_TIMESTAMP('2005-03-27 02:00:00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">UNIX_TIMESTAMP（'2005-03-27 02:00:00'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1111885200 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT FROM_UNIXTIME(1111885200);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">FROM_UNIXTIME（1111885200）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2005-03-27 03:00:00 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果你想减去
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，你可能想把结果转换为有符号整数。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#cast-functions" title="12.10 Cast功能和操作符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.10节“演算函数和操作符”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_utc-date"></a><p>
          <a class="indexterm" name="idm140528083089136"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-date"><code class="literal">UTC_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据函数是在字符串还是数字上下文中使用，</font><font style="vertical-align: inherit;">
          将当前UTC日期作为值</font></font><code class="literal">'YYYY-MM-DD'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">YYYYMMDD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UTC_DATE(), UTC_DATE() + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-08-14'，20030814</font></font><font></font>
</pre></li><li class="listitem"><a name="function_utc-time"></a><p>
          <a class="indexterm" name="idm140528083077312"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-time"><code class="literal">UTC_TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-time"><code class="literal">UTC_TIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据函数是在字符串还是数字上下文中使用，</font><font style="vertical-align: inherit;">
          将当前UTC时间作为输入值</font></font><code class="literal">'HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">HHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">参数指定从0到6的小数秒精度，则返回值包含该许多数字的小数部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UTC_TIME(), UTC_TIME() + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'18：07：53'，180753.000000</font></font><font></font>
</pre></li><li class="listitem"><a name="function_utc-timestamp"></a><p>
          <a class="indexterm" name="idm140528083064048"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据函数是在字符串还是数字上下文中使用，</font><font style="vertical-align: inherit;">
          将当前UTC日期和时间作为值</font></font><code class="literal">'YYYY-MM-DD HH:MM:SS'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">YYYYMMDDHHMMSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>fsp</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">参数指定从0到6的小数秒精度，则返回值包含该许多数字的小数部分。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UTC_TIMESTAMP(), UTC_TIMESTAMP() + 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'2003-08-14 18:08:04'，20030814180804.000000</font></font><font></font>
</pre></li><li class="listitem"><a name="function_week"></a><p>
          <a class="indexterm" name="idm140528083050784"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK(<em class="replaceable"><code>date</code></em>[,<em class="replaceable"><code>mode</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此函数返回的周数
           </font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的双参数形式
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许你指定星期是否在周日或周一，以及是否返回值应在范围从启动</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          到</font></font><code class="literal">53</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者从</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
           </font></font><code class="literal">53</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          省略参数，</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_default_week_format"><code class="literal">default_week_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则使用系统变量</font><font style="vertical-align: inherit;">的值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表描述了</font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">如何
           </font><font style="vertical-align: inherit;">工作。
</font></font></p>
<div class="informaltable">
<table summary="Now the mode argument of the WEEK function works. For each mode value, the table lists the first day of the week, the range, and a description of week 1."><colgroup><col width="10%"><col width="20%"><col width="20%"><col width="50%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一周的第一天</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一周是第一周...</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今年有一个星期天</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期一</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今年有4天或更多天</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今年有一个星期天</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期一</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今年有4天或更多天</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今年有4天或更多天</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">五</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期一</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在今年的一个星期一</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今年有4天或更多天</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期一</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1-53</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在今年的一个星期一</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于</font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有的意义价值
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有4个或更多天，今年</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1988年：周根据ISO 8601编号：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果包含1月1日的一周在新的一年中有4天或更多天，那么这是第1周。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              否则，这是上一年的最后一周，下一周是第1周。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEK('2008-02-20');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 7</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEK('2008-02-20',0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 7</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEK('2008-02-20',1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 8</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEK('2008-12-31',1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 53</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请注意，如果日期落入在上周的前一年，MySQL的返回</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果你不使用
           </font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code class="literal">7</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为可选的
           </font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT YEAR('2000-01-01'), WEEK('2000-01-01',0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 2000，0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有人可能会争辩说，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          应该返回，</font></font><code class="literal">52</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为给定的日期实际上发生在1999年的第52周。
           </font><font style="vertical-align: inherit;">而是</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回，
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以便返回值是
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定年份中的周数</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ” </font><span class="quote"><font style="vertical-align: inherit;">。</font></span><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当与日期提取日期部分的其他功能结合</font><font style="vertical-align: inherit;">使用时，可以使用该</font><font style="vertical-align: inherit;">功能。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果你喜欢就包含了一周的指定日期的第一天计算一年的结果，使用
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code class="literal">7</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为可选
           </font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEK('2000-01-01',2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 52</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或者，使用该
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT YEARWEEK('2000-01-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 199952</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MID(YEARWEEK('2000-01-01'),5,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'52'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_weekday"></a><p>
          <a class="indexterm" name="idm140528082962240"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekday"><code class="literal">WEEKDAY(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回星期几索引</font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=星期一，</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=星期二，... </font></font><code class="literal">6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=星期日）。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEKDAY('2008-02-03 22:23:00');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 6</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEKDAY('2007-11-06');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre></li><li class="listitem"><a name="function_weekofyear"></a><p>
          <a class="indexterm" name="idm140528082949520"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回日期的日历星期作为从</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至</font><font style="vertical-align: inherit;">的范围中的数字</font></font><code class="literal">53</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个兼容性功能，相当于
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK(<em class="replaceable"><code>date</code></em>,3)</code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WEEKOFYEAR('2008-02-20');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 8</font></font><font></font>
</pre></li><li class="listitem"><a name="function_year"></a><p>
          <a class="indexterm" name="idm140528082935680"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_year"><code class="literal">YEAR(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回年</font></font><em class="replaceable"><code>date</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，范围</font></font><code class="literal">1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至</font></font><code class="literal">9999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT YEAR('1987-01-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1987</font></font><font></font>
</pre></li><li class="listitem"><a name="function_yearweek"></a><p>
          <a class="indexterm" name="idm140528082923216"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_yearweek"><code class="literal">YEARWEEK(<em class="replaceable"><code>date</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_yearweek"><code class="literal">YEARWEEK(<em class="replaceable"><code>date</code></em>,<em class="replaceable"><code>mode</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个日期的年份和星期。</font><font style="vertical-align: inherit;">结果中的年份可能与年度第一周和最后一周的日期争论的年份不同。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个</font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">论证的作用与</font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数
           </font><font style="vertical-align: inherit;">完全相同</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于单参数语法，使用</font></font><em class="replaceable"><code>mode</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值0。</font><font style="vertical-align: inherit;">不像</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，价值
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_default_week_format"><code class="literal">default_week_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会影响</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT YEARWEEK('1987-01-01');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 198652</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          需要注意的是周数是从什么不同的
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数将返回（</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的可选参数
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_week"><code class="literal">WEEK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后返回周中的给定年份的情况下。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-calendar"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.8 MySQL使用什么日历？</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528082900496"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL使用所谓的</font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格雷戈里日历</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      每个从Julian转换到Gregorian日历的国家在转换期间至少要丢弃十天。</font><font style="vertical-align: inherit;">要看看它是如何工作的，考虑1582年10月份，当第一个Julian到格里高利的转换发生时。
</font></font></p>
<div class="informaltable">
<table summary="The month of October 1582, when the first Julian-to-Gregorian switch occurred. Table headings are days of the week and table rows list the dates for each day of the week. The table is intended to illustrate that there are no dates between October 4 and October 15."><colgroup><col width="14%"><col width="14%"><col width="14%"><col width="14%"><col width="14%"><col width="14%"><col width="14%"></colgroup><thead><tr>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期一</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期二</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期三</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期四</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期五</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期六</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星期日</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">29</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三十</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      10月4日到10月15日之间没有日期。这种不连续性被称为
       </font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">割接</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">割接前的任何日期都是Julian，割接后的任何日期均为Gregorian。</font><font style="vertical-align: inherit;">割接日期不存在。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      应用于未实际使用的日期的日历被称为</font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proleptic</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，如果我们假设从来没有割礼，并且公历规则总是统治，那么我们就有一个格雷戈里的日历。</font><font style="vertical-align: inherit;">这是MySQL所使用的，正如标准SQL所要求的那样。</font><font style="vertical-align: inherit;">出于这个原因，切割之前的日期存储为MySQL
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
      </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须调整数值以补偿差异。</font><font style="vertical-align: inherit;">认识到所有国家都不会同时发生割接，这一点很重要，发生的越晚，失去的天数就越多。</font><font style="vertical-align: inherit;">例如，在英国，发生在1752年，9月2日星期三之后是9月14日星期四。俄罗斯一直持续到1918年的Julian日历，在这个过程中失去了13天，以及通常被称为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10月革命</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> “</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发生在11月根据公历。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="fulltext-search"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9全文搜索功能</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-natural-language"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.1自然语言全文检索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-boolean"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.2布尔全文搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-query-expansion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.3带查询扩展的全文搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.4全文停用词</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-restrictions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.5全文限制</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-fine-tuning"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.6微调MySQL全文搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#full-text-adding-collation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.7添加全文索引的排序规则</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-search-ngram"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.8 ngram全文解析器</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#fulltext-search-mecab"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.9 MeCab全文解析器插件</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528082854000"></a><a class="indexterm" name="idm140528082852512"></a><a class="indexterm" name="idm140528082851440"></a><a class="indexterm" name="idm140528082850368"></a><p><a name="function_match"></a>
      <a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH
      (<em class="replaceable"><code>col1</code></em>,<em class="replaceable"><code>col2</code></em>,...)
      AGAINST (<em class="replaceable"><code>expr</code></em>
      [<em class="replaceable"><code>search_modifier</code></em>])</code></a>
    </p><pre data-lang="sql" class="programlisting"><em class="replaceable"><code>search_modifier:</code></em><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       在自然语言模式下</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     | </font><font style="vertical-align: inherit;">具有查询扩展的自然语言模式</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     | </font><font style="vertical-align: inherit;">在布尔模式</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     | </font><font style="vertical-align: inherit;">查询扩展</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL支持全文索引和搜索：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL中的全文索引是类型的索引
           </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          全文索引只能使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，并且只能用于创建</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始，</font></font><code class="literal">MySQL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了支持中文，日文和韩文（CJK）的内置全文ngram解析器，以及适用于日文的可安装MeCab全文解析器插件。</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-search-ngram" title="12.9.8 ngram全文解析器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.8节“ngram全文解析器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-search-mecab" title="12.9.9 MeCab全文解析器插件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.9节“MeCab全文解析器插件”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概述了解析差异</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          甲</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引定义可以在被给予</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的语句中创建表时，或者稍后使用添加
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><code class="literal">CREATE INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于大型数据集，将数据加载到没有</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">的表中</font><font style="vertical-align: inherit;">并在此之后创建索引要比将数据加载到具有现有</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">的表中</font><font style="vertical-align: inherit;">要快得多</font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      全文搜索使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH() ... AGAINST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法</font><font style="vertical-align: inherit;">来执行
       </font><font style="vertical-align: inherit;">。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">采用逗号分隔的列表来命名要搜索的列。
      </font></font><code class="literal">AGAINST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要一个字符串来搜索，以及一个可选的修饰符，指示要执行的搜索类型。</font><font style="vertical-align: inherit;">搜索字符串必须是查询评估期间不变的字符串值。</font><font style="vertical-align: inherit;">这就排除了，例如，一个表列，因为它对每一行都不相同。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有三种全文搜索类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          自然语言搜索将搜索字符串解释为自然人类语言中的短语（自由文本中的短语）。</font><font style="vertical-align: inherit;">除了双引号（“）字符外，没有特殊的操作符，停用词列表适用。有关停用词列表的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.4节”全文</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停用词
           </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;">“</font></a><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          全文搜索是自然语言搜索，如果</font></font><code class="literal">IN NATURAL LANGUAGE MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">了
           </font><font style="vertical-align: inherit;">修饰符或者没有给出修饰符。</font><font style="vertical-align: inherit;">有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-natural-language" title="12.9.1自然语言全文检索"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.1节“自然语言全文搜索”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          布尔搜索使用特殊查询语言的规则解释搜索字符串。</font><font style="vertical-align: inherit;">该字符串包含要搜索的单词。</font><font style="vertical-align: inherit;">它还可以包含操作符，用于指定要求，以便匹配行中必须存在或不存在单词，或者应该比平常更高或更低。</font><font style="vertical-align: inherit;">搜索索引中省略某些常用词（停用词），并且如果存在于搜索字符串中则不匹配。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">IN BOOLEAN MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修饰符指定一个布尔搜索。</font><font style="vertical-align: inherit;">有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-boolean" title="12.9.2布尔全文搜索"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.2节“布尔全文搜索”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          查询扩展搜索是对自然语言搜索的修改。</font><font style="vertical-align: inherit;">搜索字符串用于执行自然语言搜索。</font><font style="vertical-align: inherit;">然后，搜索返回的最相关行中的单词将被添加到搜索字符串中，并再次执行搜索。</font><font style="vertical-align: inherit;">该查询返回第二个搜索的行。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">IN NATURAL LANGUAGE MODE WITH
          QUERY EXPANSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">WITH QUERY
          EXPANSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改指定查询扩展搜索。</font><font style="vertical-align: inherit;">有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-query-expansion" title="12.9.3带查询扩展的全文搜索"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.3节“使用查询扩展的全文搜索”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询性能的</font><font style="vertical-align: inherit;">信息</font><font style="vertical-align: inherit;">，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#column-indexes" title="8.3.4列索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.3.4节“列索引”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关</font></font><code class="literal">InnoDB</code>
      <code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引的</font><font style="vertical-align: inherit;">更多信息</font><font style="vertical-align: inherit;">，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-fulltext-index" title="14.8.2.4 InnoDB FULLTEXT索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第14.8.2.4节“InnoDB FULLTEXT索引”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      全文搜索的限制在</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-restrictions" title="12.9.5全文限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.5节“全文限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中列出
       </font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#myisam-ftdump" title="4.6.2 myisam_ftdump  - 显示全文索引信息"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisam_ftdump</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具转储的内容</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文索引。</font><font style="vertical-align: inherit;">这对调试全文查询可能有帮助。</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#myisam-ftdump" title="4.6.2 myisam_ftdump  - 显示全文索引信息"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.6.2节“ </font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisam_ftdump</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 显示全文索引信息”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-natural-language"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.1自然语言全文检索</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，或者使用</font></font><code class="literal">IN NATURAL LANGUAGE
        MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修饰符，该
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数针对</font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本集合</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行自然语言搜索
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">集合是包含在</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引中</font><font style="vertical-align: inherit;">的一个或多个列的集合
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">搜索字符串作为参数给出</font></font><code class="literal">AGAINST()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于表中的每一行，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个相关性值; </font><font style="vertical-align: inherit;">也就是说，搜索字符串与该列中</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所列</font><font style="vertical-align: inherit;">列中该行中的文本之间的相似性度量</font><font style="vertical-align: inherit;">。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE articles (</code></strong>
          <strong class="userinput"><code>id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,</code></strong>
          <strong class="userinput"><code>title VARCHAR(200),</code></strong>
          <strong class="userinput"><code>body TEXT,</code></strong>
          <strong class="userinput"><code>FULLTEXT (title,body)</code></strong>
        <strong class="userinput"><code>) ENGINE=InnoDB;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.08秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO articles (title,body) VALUES</code></strong>
        <strong class="userinput"><code>('MySQL Tutorial','DBMS stands for DataBase ...'),</code></strong>
        <strong class="userinput"><code>('How To Use MySQL Well','After you went through a ...'),</code></strong>
        <strong class="userinput"><code>('Optimizing MySQL','In this tutorial we will show ...'),</code></strong>
        <strong class="userinput"><code>('1001 MySQL Tricks','1. Never run mysqld as root. 2. ...'),</code></strong>
        <strong class="userinput"><code>('MySQL vs. YourSQL','In the following database comparison ...'),</code></strong>
        <strong class="userinput"><code>('MySQL Security','When configured properly, MySQL ...');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，6行受影响（0.01秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：6重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM articles</code></strong>
        <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
        <strong class="userinput"><code>AGAINST ('database' IN NATURAL LANGUAGE MODE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------- + ------------------------ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">标题| </font><font style="vertical-align: inherit;">body |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------- + ------------------------ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">MySQL教程| </font><font style="vertical-align: inherit;">DBMS代表DataBase ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">MySQL与YourSQL | </font><font style="vertical-align: inherit;">在以下数据库比较中... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------- + ------------------------ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，搜索以不区分大小写的方式执行。</font><font style="vertical-align: inherit;">要执行区分大小写的全文搜索，请使用索引列的二进制排序规则。</font><font style="vertical-align: inherit;">例如，使用</font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集的列可以分配一个排序规则，</font></font><code class="literal">latin1_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以便对全文搜索区分大小写。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一个</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">使用时
         </font><font style="vertical-align: inherit;">，如前面所示的示例中那样，返回的行将首先以最高的相关性自动排序。</font><font style="vertical-align: inherit;">相关性值是非负浮点数。</font><font style="vertical-align: inherit;">零相关意味着没有相似性。</font><font style="vertical-align: inherit;">相关性的计算基于行（文档）中的单词数，行中唯一字的数量，集合中单词的总数以及包含特定单词的行数。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          术语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以与术语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交替使用</font><font style="vertical-align: inherit;">，并且这两个术语都是指行的索引部分。</font><font style="vertical-align: inherit;">术语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集合</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          是指索引列并包含所有行。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了简单计数匹配，您可以使用如下查询：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COUNT(*) FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('database' IN NATURAL LANGUAGE MODE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可能会发现重写查询的速度更快，如下所示：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT</code></strong>
    <strong class="userinput"><code>COUNT(IF(MATCH (title,body) AGAINST ('database' IN NATURAL LANGUAGE MODE), 1, NULL))</code></strong>
    <strong class="userinput"><code>AS count</code></strong>
    <strong class="userinput"><code>FROM articles;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">count |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.03秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        第一个查询会执行一些额外的工作（按相关性对结果进行排序），但也可以使用基于该</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">的索引查找
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果搜索匹配几行，索引查找可能会使第一个查询更快。</font><font style="vertical-align: inherit;">第二个查询执行全表扫描，如果搜索项存在于大多数行中，则可能比索引查找更快。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于自然语言全文搜索，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数中</font><font style="vertical-align: inherit;">指定的列</font><font style="vertical-align: inherit;">必须与表中某些</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引中</font><font style="vertical-align: inherit;">包含的列相同</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于前面的查询，请注意</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数（</font></font><code class="literal">title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中命名的列与</font></font><code class="literal">article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        索引</font><font style="vertical-align: inherit;">定义中指定</font><font style="vertical-align: inherit;">的列</font><font style="vertical-align: inherit;">相同
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要搜索</font></font><code class="literal">title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="literal">body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单独</font><font style="vertical-align: inherit;">搜索</font><font style="vertical-align: inherit;">，您需要</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个列</font><font style="vertical-align: inherit;">创建单独的
         </font><font style="vertical-align: inherit;">索引。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您还可以执行布尔搜索或使用查询扩展进行搜索。</font><font style="vertical-align: inherit;">这些搜索类型在
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-boolean" title="12.9.2布尔全文搜索"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.2节“布尔全文搜索”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-query-expansion" title="12.9.3带查询扩展的全文搜索"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.3节“使用查询扩展的全文搜索”中进行了介绍</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用索引的全文搜索只能从</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        子句中</font><font style="vertical-align: inherit;">的单个表命名列，</font><font style="vertical-align: inherit;">因为索引不能跨越多个表。</font><font style="vertical-align: inherit;">对于
         </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，可以在没有索引的情况下执行布尔搜索（尽管速度更慢），在这种情况下，可以从多个表格命名列。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        前面的例子是一个基本的例子，它展示了如何使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数在按照相关性递减的顺序返回行</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">功能。</font><font style="vertical-align: inherit;">下一个示例显示如何显式检索相关性值。</font><font style="vertical-align: inherit;">返回的行没有排序，因为该
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句既不包含</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也不</font><font style="vertical-align: inherit;">包含
         </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        子句：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT id, MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('Tutorial' IN NATURAL LANGUAGE MODE) AS score</code></strong>
    <strong class="userinput"><code>FROM articles;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">分数|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0.22764469683170319 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">0.22764469683170319 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置6行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        下面的例子更复杂。</font><font style="vertical-align: inherit;">该查询返回相关性值，并按相关性递减的顺序对行进行排序。</font><font style="vertical-align: inherit;">要实现这个结果，请指定
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两次：一次在
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表中，一次在
         </font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中。</font><font style="vertical-align: inherit;">这不会导致额外的开销，因为MySQL优化器注意到这两个
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用是相同的，并且只调用一次全文搜索代码。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT id, body, MATCH (title,body) AGAINST</code></strong>
    <strong class="userinput"><code>('Security implications of running MySQL as root'</code></strong>
    <strong class="userinput"><code>IN NATURAL LANGUAGE MODE) AS score</code></strong>
    <strong class="userinput"><code>FROM articles WHERE MATCH (title,body) AGAINST</code></strong>
    <strong class="userinput"><code>('Security implications of running MySQL as root'</code></strong>
    <strong class="userinput"><code>IN NATURAL LANGUAGE MODE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------- + ------ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">body | </font><font style="vertical-align: inherit;">分数|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------- + ------ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">1.永远不要以root身份运行mysqld。</font><font style="vertical-align: inherit;">2. ... | </font><font style="vertical-align: inherit;">1.5219271183014 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">如果配置正确，MySQL ... | </font><font style="vertical-align: inherit;">1.3114095926285 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------- + ------ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        包含在双引号（</font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）字符中的短语仅与包含短语的行相匹配</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为它是键入的</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">全文引擎将短语拆分为单词并</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在单词</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">索引中</font><font style="vertical-align: inherit;">执行搜索</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">非字字符不需要完全匹配：短语搜索只要求匹配包含与该短语完全相同的单词并且以相同的顺序。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">"test
        phrase"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><code class="literal">"test, phrase"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果该短语不包含索引中的单词，则结果为空。</font><font style="vertical-align: inherit;">例如，如果所有单词都是停用词或短于索引单词的最小长度，则结果为空。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现将真字单词（字母，数字和下划线）的任何序列视为单词。</font><font style="vertical-align: inherit;">该序列也可能包含撇号（</font></font><code class="literal">'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），但不能超过一个。</font><font style="vertical-align: inherit;">这意味着</font></font><code class="literal">aaa'bbb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被视为一个词，但</font></font><code class="literal">aaa''bbb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被视为两个词。</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析器</font><font style="vertical-align: inherit;">剥离单词开头或结尾的撇号</font><font style="vertical-align: inherit;">;
        </font></font><code class="literal">'aaa'bbb'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将被解析为
         </font></font><code class="literal">aaa'bbb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        内置的</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析器通过查找特定的分隔符字符来确定单词开始和结束的位置; </font><font style="vertical-align: inherit;">例如</font></font><code class="literal">&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（空格），
         </font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（逗号）和</font></font><code class="literal">.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（句点）。</font><font style="vertical-align: inherit;">如果单词不是用分隔符分隔的（例如中文），内置</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析器无法确定单词开始或结束的位置。</font><font style="vertical-align: inherit;">为了能够将这些语言中的单词或其他索引术语添加到</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用内置</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析器</font><font style="vertical-align: inherit;">的
         </font><font style="vertical-align: inherit;">索引中
         </font><font style="vertical-align: inherit;">，必须对它们进行预处理，以便它们被任意分隔符分隔。</font><font style="vertical-align: inherit;">或者，从MySQL 5.7.6开始，您可以创建
        </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 使用ngram解析器插件（适用于中文，日文或韩文）或MeCab解析器插件（适用于日文）。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以编写一个替换内置全文分析器的插件。</font><font style="vertical-align: inherit;">有关细节，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/extending-mysql.html#plugin-api" title="28.2 MySQL插件API"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第28.2节“MySQL插件API”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如解析器插件源代码，请参阅</font></font><code class="filename">plugin/fulltext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL源码分发</font><font style="vertical-align: inherit;">的
         </font><font style="vertical-align: inherit;">目录。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在全文搜索中会忽略一些单词：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            任何太短的词都会被忽略。</font><font style="vertical-align: inherit;">通过全文搜索找到的单词的默认最小长度为</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引的</font><font style="vertical-align: inherit;">三个字符</font><font style="vertical-align: inherit;">，或四个字符的搜索索引</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">：您可以通过创建索引之前设置一个配置选项来控制截止
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            的配置选项</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引，或</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            为</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此行为不适用于
               </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用ngram分析器的索引。</font><font style="vertical-align: inherit;">对于ngram解析器，令牌长度由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              选项</font><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            停用词列表中的词将被忽略。</font><font style="vertical-align: inherit;">停用词是一个词，例如</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">some</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是很常见的，它被认为具有零语义值。</font><font style="vertical-align: inherit;">有一个内置的停用词列表，但它可以被用户定义的列表覆盖。</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引和
             </font><font style="vertical-align: inherit;">相关配置选项的停用词列表和相关配置选项是不同
             </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font><font style="vertical-align: inherit;">停用词处理由配置选项来控制
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_enable_stopword"><code class="literal">innodb_ft_enable_stopword</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            用于</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索的索引，并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于
             </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那些。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.4节“全文</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停用词</font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;">”</font></a><font style="vertical-align: inherit;">以查看默认停用词列表以及如何更改它们。</font><font style="vertical-align: inherit;">可以按照</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-fine-tuning" title="12.9.6微调MySQL全文搜索"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.6节“微调MySQL全文搜索”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述更改默认的最小字长
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        集合和查询中的每个正确单词都根据其在集合或查询中的重要性加权。</font><font style="vertical-align: inherit;">因此，许多文献中出现的词的权重较低，因为它在这个特定集合中的语义价值较低。</font><font style="vertical-align: inherit;">相反，如果这个词很少，它会得到更高的分量。</font><font style="vertical-align: inherit;">单词的权重组合起来计算行的相关性。</font><font style="vertical-align: inherit;">这种技术对于大型集合效果最好。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MyISAM限制
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于非常小的表格，单词分布没有充分反映其语义值，并且此模型有时可能会为</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">上的搜索索引产生奇怪的结果
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，虽然</font><font style="vertical-align: inherit;">前面显示</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">表格的</font><font style="vertical-align: inherit;">每一行中都存在
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一词，但</font></font><code class="literal">articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引中</font><font style="vertical-align: inherit;">搜索该单词</font><font style="vertical-align: inherit;">不会产生任何结果：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('MySQL' IN NATURAL LANGUAGE MODE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空集（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          搜索结果为空，因为
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至少在50％的行中存在，因此被有效地视为停用词。</font><font style="vertical-align: inherit;">这种过滤技术更适用于大数据集，您可能不希望结果集从1GB表中返回每隔一行，而小数据集可能会导致流行术语的结果不佳。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当您首次尝试全文搜索以查看其工作方式时，50％的阈值可能会让您大吃一惊，并使
           </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格更适合用全文搜索进行实验。</font><font style="vertical-align: inherit;">如果您创建
           </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格并仅插入一行或两行文本，则文本中的每个单词至少出现在50％的行中。</font><font style="vertical-align: inherit;">因此，只有表格包含更多行时，搜索才会返回任何结果。</font><font style="vertical-align: inherit;">需要绕过50％限制的用户可以在</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">上创建搜索索引
           </font><font style="vertical-align: inherit;">，或者使用</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-boolean" title="12.9.2布尔全文搜索"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.2节“布尔全文搜索”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍的布尔搜索模式</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-boolean"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.2布尔全文搜索</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528082669696"></a><a class="indexterm" name="idm140528082668656"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL可以使用</font></font><code class="literal">IN BOOLEAN MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修饰符</font><font style="vertical-align: inherit;">执行布尔全文搜索
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用此修饰符，某些字符在搜索字符串的单词的开头或结尾处具有特殊含义。</font><font style="vertical-align: inherit;">在下面的查询中，
         </font></font><code class="literal">+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符分别表示一个词必须存在或不存在，以便匹配发生。</font><font style="vertical-align: inherit;">因此，查询将检索包含单词</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但
         </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含单词
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YourSQL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的所有行</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM articles WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('+MySQL -YourSQL' IN BOOLEAN MODE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ----------------------- + -------------------- ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">标题| </font><font style="vertical-align: inherit;">body |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ----------------------- + -------------------- ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">MySQL教程| </font><font style="vertical-align: inherit;">DBMS代表DataBase ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">如何使用MySQL好| </font><font style="vertical-align: inherit;">在你经历了......之后</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">优化MySQL | </font><font style="vertical-align: inherit;">在本教程中，我们将显示... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">1001 MySQL技巧| </font><font style="vertical-align: inherit;">1.永远不要以root身份运行mysqld。</font><font style="vertical-align: inherit;">2. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">MySQL安全| </font><font style="vertical-align: inherit;">如果配置正确，MySQL ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ----------------------- + -------------------- ----------------- +</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在实现这个特性时，MySQL使用有时被称为</font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐含布尔逻辑的东西</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中，
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 代表 </font></font><code class="literal">AND</code>
            </p></li><li class="listitem"><p>
              <code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 代表 </font></font><code class="literal">NOT</code>
            </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              [ </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有操作员</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]暗示
              </font></font><code class="literal">OR</code>
</p></li></ul>
</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        布尔全文搜索具有以下特征：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            它们不会自动按照相关性递减的顺序对行进行分类。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表需要
             </font><font style="vertical-align: inherit;">表达式的</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有列上的索引
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来执行布尔查询。</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使没有</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引，</font><font style="vertical-align: inherit;">针对</font><font style="vertical-align: inherit;">搜索索引的</font><font style="vertical-align: inherit;">布尔查询
             </font><font style="vertical-align: inherit;">也可以工作</font><font style="vertical-align: inherit;">，尽管以这种方式执行的搜索会很慢。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最小和最大字长全文参数适用于</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用内置</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析器和MeCab分析器插件</font><font style="vertical-align: inherit;">创建的索引</font><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            并
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            用于</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引。
            </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最小和最大字长全文参数不适用于</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用ngram分析器创建的索引。</font><font style="vertical-align: inherit;">ngram标记大小由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">定义
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            停止字适用，通过控制
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_enable_stopword"><code class="literal">innodb_ft_enable_stopword</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引，并
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
             </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那些。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文搜索不支持在单个搜索词上使用多个运算符，如下例所示：</font></font><code class="literal">'++apple'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在单个搜索词上使用多个运算符会使标准输出返回语法错误。</font><font style="vertical-align: inherit;">MyISAM全文搜索将成功处理相同的搜索，忽略除搜索词紧邻的运算符以外的所有运算符。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文搜索仅支持前导加号或减号。</font><font style="vertical-align: inherit;">例如，
             </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持
             </font></font><code class="literal">'+apple'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但不支持
             </font></font><code class="literal">'apple+'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">指定尾随加号或减号会导致</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报告语法错误。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文搜索不支持使用通配符（</font></font><code class="literal">'+*'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），加号和减号组合（</font></font><code class="literal">'+-'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或领先加号和减号组合（</font></font><code class="literal">'+-apple'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">前导加号</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些无效查询返回语法错误。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文搜索不支持</font></font><code class="literal">@</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在布尔</font><font style="vertical-align: inherit;">全文搜索中使用该</font><font style="vertical-align: inherit;">符号。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">@</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符号被保留用于</font></font><code class="literal">@distance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            邻近搜索运算符。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            他们不使用适用于</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引</font><font style="vertical-align: inherit;">的50％阈值
             </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        布尔全文搜索功能支持以下运算符：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">+</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            前导或尾随加号表示该单词
             </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出现在每个返回的行中。</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只支持领先加号。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">-</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            前导或尾随减号表示该单词</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不得</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出现在任何返回的行中。</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只支持前导减号。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            注意：</font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作符仅用于排除其他搜索项匹配的行。</font><font style="vertical-align: inherit;">因此，只包含前面的项的布尔模式搜索
             </font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回空结果。</font><font style="vertical-align: inherit;">它不返回</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除包含任何排除术语的行之外的所有行。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span>
          </p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （没有操作员）
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            默认情况下（既不</font><font style="vertical-align: inherit;">指定</font></font><code class="literal">+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也不
             </font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定），这个单词是可选的，但包含它的行的额定值更高。</font><font style="vertical-align: inherit;">这模仿</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH() ...
            AGAINST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font><code class="literal">IN BOOLEAN
            MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修饰符</font><font style="vertical-align: inherit;">的行为</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">@<em class="replaceable"><code>distance</code></em></code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该操作符</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">表格上</font><font style="vertical-align: inherit;">工作</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它测试两个或更多的单词是否都在距离彼此特定的距离内开始，用单词测量。</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">
            操作符</font><font style="vertical-align: inherit;">之前立即在双引号字符串内指定搜索词
             </font><font style="vertical-align: inherit;">，例如，</font></font><code class="literal">@<em class="replaceable"><code>distance</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">MATCH(col1) AGAINST('"word1
            word2 word3" @8' IN BOOLEAN MODE)</code>
          </p></li><li class="listitem"><p>
            <code class="literal">&gt; &lt;</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这两个运算符用于更改单词对分配给某行的相关性值的贡献。</font><font style="vertical-align: inherit;">该
             </font></font><code class="literal">&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商的贡献增加以及</font></font><code class="literal">&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商降低它。</font><font style="vertical-align: inherit;">请参阅此列表后面的示例。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">( )</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            括号将单词分组为子表达式。</font><font style="vertical-align: inherit;">带括号的组可以嵌套。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">~</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            前面的代字符作为否定运算符，导致该单词对行相关性的贡献为负。</font><font style="vertical-align: inherit;">这对标记</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">噪音</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字</font><font style="vertical-align: inherit;">很有用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">包含这样一个单词的行被评为低于其他单词，但并不完全排除在外，就像
             </font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作员一样。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">*</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            星号用作截断（或通配符）运算符。</font><font style="vertical-align: inherit;">与其他操作符不同，它被
             </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到要影响的单词上。</font><font style="vertical-align: inherit;">如果它们以</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作符</font><font style="vertical-align: inherit;">之前的单词开始，则单词匹配
             </font><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果用截断运算符指定了一个单词，则它不会从布尔查询中剥离，即使它太短或停用词也是如此。</font><font style="vertical-align: inherit;">无论一个字太短从确定
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            设置为</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表，或
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对
             </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。</font><font style="vertical-align: inherit;">这些选项不适用于</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用ngram分析器的索引。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            通配单词被认为是必须出现在一个或多个单词开头的前缀。</font><font style="vertical-align: inherit;">如果最小单词长度为4，则搜索
             </font><font style="vertical-align: inherit;">
            可能会返回比搜索更少的行
             </font><font style="vertical-align: inherit;">，因为第二个查询会忽略过短的搜索词
             </font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">'+<em class="replaceable"><code>word</code></em> +the*'</code><font style="vertical-align: inherit;"></font><code class="literal">'+<em class="replaceable"><code>word</code></em> +the'</code><font style="vertical-align: inherit;"></font><code class="literal">the</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
            <code class="literal">"</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            包含在双引号（</font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）字符中的短语仅与包含短语的行相匹配</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为它是键入的</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">全文引擎将短语拆分为单词并</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在单词</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">索引中</font><font style="vertical-align: inherit;">执行搜索
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">非字字符不需要完全匹配：短语搜索仅需要匹配包含与短语完全相同的单词并且以相同的顺序。</font><font style="vertical-align: inherit;">例如，
             </font></font><code class="literal">"test phrase"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><code class="literal">"test,
            phrase"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果该短语不包含索引中的单词，则结果为空。</font><font style="vertical-align: inherit;">单词可能不在索引中，因为这些因素的组合：如果它们不存在于文本中，是停用词或比索引单词的最小长度短。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例演示了一些使用布尔全文操作符的搜索字符串：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">'apple banana'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找至少包含其中一个单词的行。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">'+apple +juice'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找包含两个单词的行。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">'+apple macintosh'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找包含单词</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apple</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行，但如果它们也包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macintosh</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则排名更高的行
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">'+apple -macintosh'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找包含单词</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apple</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但不
             </font><font style="vertical-align: inherit;">包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macintosh</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的行</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">'+apple ~macintosh'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找包含单词</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apple</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的行，但如果该行还包含单词</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macintosh</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则将其评估为低于行不</font><font style="vertical-align: inherit;">包含的单词</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这
             </font><font style="vertical-align: inherit;">比搜索</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更柔和</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"></font><code class="literal">'+apple
            -macintosh'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macintosh</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的存在
             </font><font style="vertical-align: inherit;">导致该行根本不被返回。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">'+apple +(&gt;turnover &lt;strudel)'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">苹果</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">营业额</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">苹果</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“果</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">馅奶酪卷</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（以任何顺序）</font><font style="vertical-align: inherit;">的单词的行</font><font style="vertical-align: inherit;">，但将</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">苹果营业额</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ” </font></font></span><font style="vertical-align: inherit;"><span class="quote"><span class="quote"><font style="vertical-align: inherit;">评为</font></span></span><font style="vertical-align: inherit;">高于</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">苹果馅</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">'apple*'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apple</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apples</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">applesauce</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">applet</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”等词的行</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">'"some words"'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            查找包含精确短语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些单词</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行（例如，包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些智慧词</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但不包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些噪音词</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的行</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">请注意，</font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            包含该短语的字符是划定该短语的运算符字符。</font><font style="vertical-align: inherit;">它们不是包含搜索字符串本身的引号。
</font></font></p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-boolean-innodb-relevancy-ranking"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB布尔模式搜索的相关性排名</font></font></h4>

</div>

</div>

</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文搜索基于</font></font><a class="ulink" href="http://sphinxsearch.com/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sphinx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文搜索引擎进行</font><font style="vertical-align: inherit;">建模，所
           </font><font style="vertical-align: inherit;">使用的算法基于
           </font></font><a class="ulink" href="http://en.wikipedia.org/wiki/Okapi_BM25" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BM25</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          和
           </font></font><a class="ulink" href="http://en.wikipedia.org/wiki/TF-IDF" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TF-IDF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          排名算法。</font><font style="vertical-align: inherit;">由于这些原因，
           </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔全文搜索的</font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关性排名</font><font style="vertical-align: inherit;">可能与</font><font style="vertical-align: inherit;">相关性排名</font><font style="vertical-align: inherit;">不同</font><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">词频 - 逆文档频率</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          （</font></font><code class="literal">TF-IDF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）加权系统的变体来为给定的全文搜索查询排列文档的相关性。</font><font style="vertical-align: inherit;">该
           </font></font><code class="literal">TF-IDF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权重是基于一个字如何频繁地出现在文档中，通过字如何频繁地出现在集合中的所有文件偏移。</font><font style="vertical-align: inherit;">换句话说，单词出现在文档中的频率越高，单词出现在文档集合中的频率越低，文档排名越高。
</font></font></p>
<h5><a name="idm140528082522624"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何计算相关性排名</font></font></h5>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          术语frequency（</font></font><code class="literal">TF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）值是单词出现在文档中的次数。</font></font><code class="literal">IDF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用以下公式计算词</font><font style="vertical-align: inherit;">的逆文档频率（</font><font style="vertical-align: inherit;">）值，其中
           </font></font><code class="literal">total_records</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是集合中</font></font><code class="literal">matching_records</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的记录数</font><font style="vertical-align: inherit;">，并且</font><font style="vertical-align: inherit;">是搜索词显示的记录数。
        </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ {IDF} = log10（$ {total_records} / $ {matching_records}）  </font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当文档多次包含单词时，IDF值将乘以TF值：
        </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ {TF} * $ {IDF}</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用</font></font><code class="literal">TF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">IDF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值，使用以下公式计算文档的相关性排名：
        </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ {rank} = $ {TF} * $ {IDF} * $ {IDF}</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下面的例子演示了这个公式。
</font></font></p>
<h5><a name="idm140528082512448"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单词搜索的相关性排名</font></font></h5>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此示例演示单字搜索的相关性排名计算。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; CREATE TABLE文章（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
title VARCHAR（200），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主体，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FULLTEXT（标题，正文）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = InnoDB;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（1.04秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; INSERT INTO文章（标题，正文）VALUES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'MySQL教程'，'这个数据库教程...'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（“如何使用MySQL”，“经过......之后”），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'优化数据库'，'在这个数据库教程中...'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'MySQL vs. YourSQL'，'比较数据库...'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'MySQL安全'，'正确配置，MySQL ...'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'数据库，数据库，数据库'，'数据库数据库数据库'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'1001 MySQL Tricks'，'1.永远不会以root身份运行mysqld。2. ...'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'MySQL全文索引'，'MySQL全文索引使用..'）;                  </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，8行受影响（0.06秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：8重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SELECT id，title，body，MATCH（title，body）AGAINST（'数据库'BOOLEAN模式）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AS评分FROM文章ORDER BY评分DESC;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------ + ------------- ------------------------ + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">标题| </font><font style="vertical-align: inherit;">body | </font><font style="vertical-align: inherit;">分数|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------ + ------------- ------------------------ + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">数据库，数据库，数据库| </font><font style="vertical-align: inherit;">数据库数据库数据库 </font><font style="vertical-align: inherit;">1.0886961221694946 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">优化您的数据库| </font><font style="vertical-align: inherit;">在这个数据库教程中... | </font><font style="vertical-align: inherit;">0.36289870738983154 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">MySQL教程| </font><font style="vertical-align: inherit;">这个数据库教程... </font><font style="vertical-align: inherit;">0.18144935369491577 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">如何使用MySQL | </font><font style="vertical-align: inherit;">在你经历了......之后 </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">MySQL与YourSQL | </font><font style="vertical-align: inherit;">比较数据库...时 </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">MySQL安全| </font><font style="vertical-align: inherit;">如果配置正确，MySQL ... | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">7 | </font><font style="vertical-align: inherit;">1001 MySQL技巧| </font><font style="vertical-align: inherit;">1.永远不要以root身份运行mysqld。</font><font style="vertical-align: inherit;">2. ... | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">8 | </font><font style="vertical-align: inherit;">MySQL全文索引| </font><font style="vertical-align: inherit;">MySQL全文索引使用.. | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------ + ------------- ------------------------ + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
集合中的8行（0.00秒）</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          共有8条记录，其中3条与</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索条件</font><font style="vertical-align: inherit;">相匹配
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第一个记录（</font></font><code class="literal">id 6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）包含搜索词6次，并具有相关性排名
           </font></font><code class="literal">1.0886961221694946</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该排名值使用</font></font><code class="literal">TF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值6（
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索项在记录中出现6次
           </font></font><code class="literal">id 6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和</font></font><code class="literal">IDF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值0.42596873216370745计算，其计算方式如下（其中8是记录总数，3是记录数搜索项出现在）：
        </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ {IDF} = log10（8/3）= 0.42596873216370745</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><code class="literal">TF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">IDF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值接着输入到排名公式：
        </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ {rank} = $ {TF} * $ {IDF} * $ {IDF}</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL命令行客户端中执行计算会返回排名值1.088696164686938。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SELECT 6 * log10（8/3）* log10（8/3）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 * log10（8/3）* log10（8/3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1.088696164686938 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font></pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            您可能会注意到该</font></font><code class="literal">SELECT ... MATCH ...
            AGAINST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句和MySQL命令行客户端（</font></font><code class="literal">1.0886961221694946</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
             </font></font><code class="literal">1.088696164686938</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）所</font><font style="vertical-align: inherit;">返回的排名值略有不同</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">不同之处在于整数和浮动/双精度之间的转换是如何由内部执行的</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（以及相关的精度和舍入决定），以及它们在别处如何执行，如MySQL命令行客户机或其他类型的计算器。
</font></font></p>
</div>
<h5><a name="idm140528082490160"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多词搜索的相关性排名</font></font></h5>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此示例演示基于上</font></font><code class="literal">articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个示例中使用</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">表和数据</font><font style="vertical-align: inherit;">的多字全文搜索的相关度排名计算
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您搜索多个单词，则相关性排名值是每个单词的相关性排名值的总和，如下面的公式所示：
        </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ {ID}} $ {IDF} * $ {IDF} * $ {TF} * $ {IDF} * $ {IDF}</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          执行两项搜索（'mysql tutorial'）会返回以下结果：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SELECT id，title，body，MATCH（title，body）AGAINST（'BOOLEAN MODE'中的'mysql tutorial'）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    AS评分FROM文章ORDER BY评分DESC;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------ + ------------- ------------------------ + ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">标题| </font><font style="vertical-align: inherit;">body | </font><font style="vertical-align: inherit;">分数|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------ + ------------- ------------------------ + ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">MySQL教程| </font><font style="vertical-align: inherit;">这个数据库教程... </font><font style="vertical-align: inherit;">0.7405621409416199 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">优化您的数据库| </font><font style="vertical-align: inherit;">在这个数据库教程中... | </font><font style="vertical-align: inherit;">0.3624762296676636 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">MySQL安全| </font><font style="vertical-align: inherit;">如果配置正确，MySQL ... | </font><font style="vertical-align: inherit;">0.031219376251101494 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">8 | </font><font style="vertical-align: inherit;">MySQL全文索引| </font><font style="vertical-align: inherit;">MySQL全文索引使用.. | </font><font style="vertical-align: inherit;">0.031219376251101494 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">如何使用MySQL | </font><font style="vertical-align: inherit;">在你经历了......之后 </font><font style="vertical-align: inherit;">0.015609688125550747 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">MySQL与YourSQL | </font><font style="vertical-align: inherit;">比较数据库...时 </font><font style="vertical-align: inherit;">0.015609688125550747 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">7 | </font><font style="vertical-align: inherit;">1001 MySQL技巧| </font><font style="vertical-align: inherit;">1.永远不要以root身份运行mysqld。</font><font style="vertical-align: inherit;">2. ... | </font><font style="vertical-align: inherit;">0.015609688125550747 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">数据库，数据库，数据库| </font><font style="vertical-align: inherit;">数据库数据库数据库 </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------------------ + ------------- ------------------------ + ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
集合中的8行（0.00秒）</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在第一个记录（</font></font><code class="literal">id 8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中，'mysql'出现一次，'tutorial'出现两次。</font><font style="vertical-align: inherit;">'mysql'有6个匹配记录，'tutorial'有两个匹配记录。</font><font style="vertical-align: inherit;">在将这些值插入到多字搜索的排名公式中时，MySQL命令行客户端返回预期的排名值：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SELECT（1 * log10（8/6）* log10（8/6））+（2 * log10（8/2）* log10（8/2））;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">（1 * log10（8/6）* log10（8/6））+（2 * log10（8/2）* log10（8/2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0.7405621541938003 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font></pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"></font><code class="literal">SELECT ... MATCH ... AGAINST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面的例子解释</font><font style="vertical-align: inherit;">
            了</font><font style="vertical-align: inherit;">语句和MySQL命令行客户端</font><font style="vertical-align: inherit;">返回的排名值的细微差别
             </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-query-expansion"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.3带查询扩展的全文搜索</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528082476080"></a><a class="indexterm" name="idm140528082475008"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        全文搜索支持查询扩展（特别是其变体</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">盲查询扩展</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">当搜索短语太短时这通常是有用的，这通常意味着用户依赖于全文搜索引擎缺乏的隐含知识。</font><font style="vertical-align: inherit;">例如，搜索</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的用户
         </font><font style="vertical-align: inherit;">可能确实意味着
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB2</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RDBMS</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都是应与</font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">数据库</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">匹配的短语
        </font></font><span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也应该退还。</font><font style="vertical-align: inherit;">这是隐含的知识。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        盲查询扩展（也称为自动相关性反馈）通过添加</font></font><code class="literal">WITH QUERY
        EXPANSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">IN NATURAL LANGUAGE MODE WITH
        QUERY EXPANSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跟随搜索词组</font><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它通过执行两次搜索来工作，其中第二次搜索的搜索短语是与第一次搜索中与几个最高度相关的文档连接的原始搜索短语。</font><font style="vertical-align: inherit;">因此，如果这些文档中的一个包含单词
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和单词</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则第二个搜索将查找包含单词</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的文档，
         </font><font style="vertical-align: inherit;">即使它们不包含单词
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例显示了这种差异：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('database' IN NATURAL LANGUAGE MODE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------- + ------------------------ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">标题| </font><font style="vertical-align: inherit;">body |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------- + ------------------------ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">MySQL教程| </font><font style="vertical-align: inherit;">DBMS代表DataBase ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">MySQL与YourSQL | </font><font style="vertical-align: inherit;">在以下数据库比较中... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------------------- + ------------------------ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('database' WITH QUERY EXPANSION);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ----------------------- + -------------------- ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">标题| </font><font style="vertical-align: inherit;">body |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ----------------------- + -------------------- ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">MySQL与YourSQL | </font><font style="vertical-align: inherit;">在以下数据库比较中... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">MySQL教程| </font><font style="vertical-align: inherit;">DBMS代表DataBase ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">优化MySQL | </font><font style="vertical-align: inherit;">在本教程中，我们将显示... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">MySQL安全| </font><font style="vertical-align: inherit;">如果配置正确，MySQL ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">如何使用MySQL好| </font><font style="vertical-align: inherit;">在你经历了......之后</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">1001 MySQL技巧| </font><font style="vertical-align: inherit;">1.永远不要以root身份运行mysqld。</font><font style="vertical-align: inherit;">2. ... |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ----------------------- + -------------------- ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置6行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        另一个例子可能是搜索Georges Simenon关于Maigret的书籍，当用户不确定如何拼写
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maigret</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”时</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一种用于搜索</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Megre和不情愿的证人</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">认定只有</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">梅格雷和不情愿的见证人</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无查询扩展。</font><font style="vertical-align: inherit;">使用查询扩展的搜索</font><font style="vertical-align: inherit;">将在第二遍中</font><font style="vertical-align: inherit;">查找所有带有</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maigret</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字样的图书
         </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          由于盲查询扩展往往通过返回不相关的文档来显着增加噪声，因此仅在搜索短语较短时才使用它。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-stopwords"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.4全文停用词</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528082454336"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用服务器字符集和归类（</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_collation_server"><code class="literal">collation_server</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">的值）加载并搜索停用词列表以查找全文查询
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">假命中或遗漏如果停止字的文件或使用全文索引或搜索列有一个字符集或整理从不同的可能发生的禁用词查找</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_collation_server"><code class="literal">collation_server</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        停用词查找的大小写敏感取决于服务器排序规则。</font><font style="vertical-align: inherit;">例如，如果排序规则是</font></font><code class="literal">latin1_swedish_ci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找，则查找是</font><font style="vertical-align: inherit;">不区分大小写的</font><font style="vertical-align: inherit;">，而如果排序规则是</font></font><code class="literal">latin1_general_cs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font><font style="vertical-align: inherit;">，则查找是区分大小写的
         </font></font><code class="literal">latin1_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords-stopwords-for-innodb-search-indexes" title="InnoDB搜索索引的停用词"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB搜索索引的停用词</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords-stopwords-for-myisam-search-indexes" title="MyISAM搜索索引的停用词"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MyISAM搜索索引的停用词</font></font></a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="fulltext-stopwords-stopwords-for-innodb-search-indexes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB搜索索引的停用词</font></font></h4>

</div>

</div>

</div>
<p>
          <code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个相对较短的默认停用词表，因为来自技术，文学和其他来源的文档通常使用短词作为关键词或重要短语。</font><font style="vertical-align: inherit;">例如，你可能会搜索
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是或不是</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，期望得到一个明智的结果，而不是忽略所有这些词。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查看默认</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停用词列表，请查询该
           </font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#innodb-ft-default-stopword-table" title="24.31.9 INFORMATION_SCHEMA INNODB_FT_DEFAULT_STOPWORD表"><code class="literal">INFORMATION_SCHEMA.INNODB_FT_DEFAULT_STOPWORD</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_DEFAULT_STOPWORD;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">关于|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">一个|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">作为|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">在|处</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">由|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">com |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">de |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">en |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">为|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">来自|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">如何|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">在|中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">它|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">la |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">的|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">在|上</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">或|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">那| |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">这| |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">到|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">是|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">什么|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">当|时</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">在哪里|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">谁|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">将| |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">用|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">und |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">www |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一套36行（0.00秒）</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要为所有</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">定义自己的停用词列表
           </font><font style="vertical-align: inherit;">，请定义一个与表具有相同结构的
           </font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#innodb-ft-default-stopword-table" title="24.31.9 INFORMATION_SCHEMA INNODB_FT_DEFAULT_STOPWORD表"><code class="literal">INNODB_FT_DEFAULT_STOPWORD</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表，使用停用词填充它，并</font><font style="vertical-align: inherit;">
          在创建全文索引之前</font><font style="vertical-align: inherit;">将该
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          选项的值设置为表单中的值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">停用词表必须有一个</font><font style="vertical-align: inherit;">名为的列</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例演示了为其创建和配置新的全局停用词表</font><font style="vertical-align: inherit;">。
        </font></font><code class="literal"><em class="replaceable"><code>db_name</code></em>/<em class="replaceable"><code>table_name</code></em></code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"></font><code class="literal">value</code><font style="vertical-align: inherit;"></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建一个新的停用词表</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; CREATE TABLE my_stopwords（value VARCHAR（30））ENGINE = INNODB;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 插入停用词（为简单起见，在本例中使用单个停用词）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; INSERT INTO my_stopwords（value）VALUES（'Ishmael'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 创建表格</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; CREATE TABLE opens_lines（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
opening_line文字（500），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作者VARCHAR（200），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
title VARCHAR（200）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = InnoDB;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 将数据插入表格</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; INSERT INTO opening_lines（opening_line，author，title）VALUES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'叫我伊斯梅尔'，'赫尔曼梅尔维尔'，'莫比迪克'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'尖叫天空'，'Thomas Pynchon'，'Gravity''s Rainbow'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'我是一个看不见的人'，'拉尔夫埃里森'，'看不见的人'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'现在在哪里？现在谁？现在？'，'塞缪尔·贝克特'，'不可思议的'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'这是一见钟情'，'约瑟夫海勒'，'Catch-22'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'所有这些都发生了，或多或少'，'Kurt Vonnegut'，'屠宰场五'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'达洛维夫人说她会自己买花'，'弗吉尼亚伍尔夫'，'达洛维夫人'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（'很高兴燃烧'，'Ray Bradbury'，'华氏451'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，8行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：8重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 将innodb_ft_server_stopword_table选项设置为新的停用词表</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SET GLOBAL innodb_ft_server_stopword_table ='test / my_stopwords';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 创建全文索引（如果没有定义FTS_DOC_ID列，则重建表格）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; CREATE FULLTEXT INDEX idx ON opens_lines（opening_line）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响，1个警告（1.17秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：0重复：0警告：1</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过查询单词来验证指定的停用词（'Ishmael'）没有出现
           </font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#innodb-ft-index-table-table" title="24.31.12 INFORMATION_SCHEMA INNODB_FT_INDEX_TABLE表"><code class="literal">INFORMATION_SCHEMA.INNODB_FT_INDEX_TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            默认情况下，长度小于3个字符或长度大于84个字符的单词不会出现在
             </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文搜索索引中。</font><font style="vertical-align: inherit;">最大和最小字长值可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            和
             </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            变量</font><font style="vertical-align: inherit;">进行配置
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此默认行为不适用于ngram分析器插件。</font><font style="vertical-align: inherit;">ngram标记大小由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">定义
             </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SET GLOBAL innodb_ft_aux_table ='test / opening_lines';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;选择单词FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_TABLE LIMIT 15;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">word |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">跨越|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">全部|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">烧伤|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">购买|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">调用|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">| |来</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">dalloway |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">第一| |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲜花|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">发生了|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">自己|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">隐形|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">少| |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爱|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">男人|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
15行（0.00秒）</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要逐个创建停用词列表，请创建其他停用词表并</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在创建全文索引之前</font><font style="vertical-align: inherit;">使用该
           </font><font style="vertical-align: inherit;">选项指定要使用的停用词表。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-stopwords-stopwords-for-myisam-search-indexes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MyISAM搜索索引的停用词</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          停止字文件被加载并使用搜索
           </font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果
           </font></font><code class="literal">character_set_server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
           </font></font><code class="literal">ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">utf16le</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code class="literal">utf32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="indexterm" name="idm140528082404080"></a>

          <a class="indexterm" name="idm140528082402592"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

          要覆盖MyISAM表的默认停用词列表，请设置</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）变量值应该是包含停用词列表的文件的路径名，或者用于禁用停用词过滤的空字符串。</font><font style="vertical-align: inherit;">服务器在数据目录中查找文件，除非给出绝对路径名来指定不同的目录。</font><font style="vertical-align: inherit;">更改此变量的值或停用词文件的内容后，重新启动服务器并重建</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          停用词列表是自由格式，用任何非字母数字字符（如换行符，空格或逗号）隔开停用词。</font><font style="vertical-align: inherit;">例外是下划线字符（</font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和单个撇号（</font></font><code class="literal">'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），它们被视为单词的一部分。</font><font style="vertical-align: inherit;">停用词列表的字符集是服务器的默认字符集; </font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-server" title="10.3.2服务器字符集和校对"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.3.2节“服务器字符集和校对”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下列表显示了</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引</font><font style="vertical-align: inherit;">的默认停用词
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在MySQL源码分发中，你可以在</font></font><code class="filename">storage/myisam/ft_static.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">找到这个列表
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个人的能力大约在上面</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后实际上也是如此</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再次反对并不是全部允许</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
几乎已经一个人允许</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
也尽管总是在其中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一个和另一个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
无论如何任何人都无论如何</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
反正任何地方都会出现欣赏</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
适当的都不在身边</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了询问相关的问题</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
很容易变得可用</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因为变得变得越来越</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之前在后面相信</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下面旁边除了最好更好</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
超越两者之间的短暂但</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由c'mon c来的可以</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不能不能造成原因</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
肯定会有明显的变化</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
com因此而来</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
考虑考虑包含包含</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
相应的可能目前无法实现</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
绝对描述尽管没有</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不同的做不做</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在期间不要做下来</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个教育，例如八个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其他地方尤其如此</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等甚至每一个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个人每个人都到处都是</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了很少的几个例子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第五，第五个跟随</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前者为前者</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
四从进一步得到</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
得到给予放弃</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
去得到了</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
问候几乎没有发生</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
没有没有</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他因此而来帮助你</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
她在这里这里在此处</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这里她自己嗨</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他自己有希望</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不管怎么样，但我会</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果我忽略了，我也是</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
立即在确实</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表明表示内在</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而不是进入内部</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
它它会是它的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本身只是保持不变</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近才知道知道</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
后者后者最少少</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
免得让我们喜欢</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能看起来很少看</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能主要有很多</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我的意思是同时只是可能的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更主要的是多数</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必须以我自己的名字命名</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
几乎是必要的需求</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不需要新的东西</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下九个没有人没有</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
没有人通常也不通常</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
没有什么新颖的东西现在显然不存</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
经常关闭哦</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，一旦有一次</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
只有上或其他</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其他人应该是我们的我们的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们自己在外面超过整体</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自己特别特别是每个可能</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
据推测，请加上可能</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能提供了很好的qv</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
相当合理</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分别为无关</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正确的说相同的锯说</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
说第二次看到</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
似乎似乎似乎看起来似乎</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
看到自我明智派遣</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
严重认真七个几个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
她应该不应该从六岁开始</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所以有人某人莫名其妙</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
某些时候某些时候有时某处</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
很快抱歉指定了指定</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仍然是这样的可靠</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
t的采取告诉倾向      </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比感谢thanx感谢</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
那就是他们的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他们自己然后从那里</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
那里因此在那里</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在那里它们就是这些</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他们会按照他们的想法去做</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第三个彻底彻底的那些</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管贯穿始终贯穿三次</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从而一起也拿走了</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
真正朝着尝试的方向迈进</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尝试尝试两次两个联合国</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不幸的是，除非不太可能</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在我们身上使用</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常使用有用的用途</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
价值各种非常通过即</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vs想要的不是</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们会尽我们所能的方式</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们欢迎你去</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不是什么时候什么</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何时何地何时何地何地</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而其中无论哪里</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
无论谁去哪里</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
谁是谁的谁是谁的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为什么愿意愿意</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在没有不会怀疑会</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不会，但你会</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
你会是你的你的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
你自己自己为零        </font></font><font></font>
</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-restrictions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.5全文限制</font></font></h3>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            全文搜索仅支持
             </font><font style="vertical-align: inherit;">表格</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            分区表不支持全文搜索。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/partitioning.html#partitioning-limitations" title="22.6分区的限制和限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第22.6节“分区的限制和限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            全文搜索可以用于大多数多字节字符集。</font><font style="vertical-align: inherit;">Unicode的例外是
             </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用字符集，但不能使用</font></font><code class="literal">ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集。</font><font style="vertical-align: inherit;">尽管
             </font><font style="vertical-align: inherit;">无法使用列上的</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引
             </font></font><code class="literal">ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但您可以</font></font><code class="literal">IN BOOLEAN MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code class="literal">ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有此索引</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">上</font><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">搜索
             </font><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该言论</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也适用于
             </font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并为言论
             </font></font><code class="literal">ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也适用于
             </font></font><code class="literal">utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">utf16le</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">utf32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            诸如中文和日文的表意语言没有单词分隔符。</font><font style="vertical-align: inherit;">因此，内置的全文分析器</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法确定这些语言和其他语言中词语的开始和结束位置</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在MySQL 5.7.6中，提供了一个支持中文，日文和韩文的基于字符的ngram全文分析器（CJK）和一个支持日文的基于单词的MeCab分析器插件，可用于</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">MySIAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            尽管支持在单个表中使用多个字符集，但</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引中的</font><font style="vertical-align: inherit;">所有列
             </font><font style="vertical-align: inherit;">必须使用相同的字符集和归类。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列列表必须完全在一些列的列表匹配
             </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的表索引的定义，除非这</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
             </font></font><code class="literal">IN BOOLEAN MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个
             </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。</font><font style="vertical-align: inherit;">对于
             </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，布尔模式搜索可以在非索引列上完成，尽管它们可能很慢。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            参数</font></font><code class="literal">AGAINST()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是查询评估期间不变的字符串值。</font><font style="vertical-align: inherit;">这就排除了，例如，一个表列，因为它对每一行都不相同。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            索引提示对</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            搜索的</font><font style="vertical-align: inherit;">限制</font><font style="vertical-align: inherit;">比对非</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索的</font><font style="vertical-align: inherit;">限制更多</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#index-hints" title="8.9.4索引提示"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.9.4节“索引提示”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有DML操作（</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#delete" title="13.2.2 DELETE语法"><code class="literal">DELETE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）与全文索引以事务处理涉及列提交时间。</font><font style="vertical-align: inherit;">例如，对于一个</font></font><code class="literal">INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            操作，插入的字符串被标记并分解成单独的单词。</font><font style="vertical-align: inherit;">当事务被提交时，单个词将被添加到全文索引表中。</font><font style="vertical-align: inherit;">因此，全文搜索仅返回提交的数据。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于全文搜索，'％'字符不是受支持的通配符。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-fine-tuning"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.6微调MySQL全文搜索</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL的全文搜索功能几乎没有用户可调参数。</font><font style="vertical-align: inherit;">如果您有MySQL源代码发布版，您可以对全文搜索行为施加更多控制权，因为某些更改需要修改源代码。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/installing.html#source-installation" title="2.9从源代码安装MySQL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2.9节“从源代码安装MySQL”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        全文搜索仔细调整以获得有效性。</font><font style="vertical-align: inherit;">在大多数情况下修改默认行为实际上会降低效果。</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非你知道你在做什么，否则不要改变MySQL的来源</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本部分中描述的大多数全文本变量必须在服务器启动时设置。</font><font style="vertical-align: inherit;">需要重新启动服务器才能更改它们; </font><font style="vertical-align: inherit;">它们在服务器运行时不能被修改。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        某些变量更改要求您重建</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的
         </font><font style="vertical-align: inherit;">索引。</font><font style="vertical-align: inherit;">这部分内容将在稍后介绍。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-word-length" title="配置最小和最大字长"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置最小和最大字长</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-natural-language-threshold" title="配置自然语言搜索阈值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置自然语言搜索阈值</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-modify-boolean-operators" title="修改布尔全文搜索运算符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改布尔全文搜索运算符</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-modify-character-set" title="字符集修改"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集修改</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-rebuild-innodb-indexes" title="重建InnoDB全文索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重建InnoDB全文索引</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-optimize" title="优化InnoDB全文索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化InnoDB全文索引</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-rebuild-myisam-indexes" title="重建MyISAM全文索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重建MyISAM全文索引</font></font></a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="fulltext-word-length"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置最小和最大字长</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要索引词的最小和最大长度由被定义
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于
           </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引，以及
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于
           </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最小和最大字长全文参数不适用于</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用ngram分析器创建的索引。</font><font style="vertical-align: inherit;">ngram标记大小由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">定义
             </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          更改任何这些选项后，重建
           </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引以使更改生效。</font><font style="vertical-align: inherit;">例如，要使两个字符的单词可搜索，可以将以下行放在选项文件中：
        </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
innodb_ft_min_token_size = 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的ft_min_word_len = 2</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          然后重新启动服务器并重建您的
           </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引。</font><font style="vertical-align: inherit;">有关
           </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，请参阅</font><font style="vertical-align: inherit;">以下有关重建</font><font style="vertical-align: inherit;">全文索引</font><font style="vertical-align: inherit;">的说明中</font><font style="vertical-align: inherit;">关于</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#myisamchk" title="4.6.3 myisamchk  -  MyISAM表维护实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisamchk</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的备注
           </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-natural-language-threshold"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置自然语言搜索阈值</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引，自然语言搜索的50％阈值由所选择的特定加权方案确定。</font><font style="vertical-align: inherit;">要禁用它，请在以下行中查找
           </font></font><code class="filename">storage/myisam/ftdefs.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="c" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#define GWS_IN_USE GWS_PROB
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将该行更改为：
        </font></font></p><pre data-lang="c" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#define GWS_IN_USE GWS_FREQ
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          然后重新编译MySQL。</font><font style="vertical-align: inherit;">在这种情况下，不需要重建索引。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            通过进行这种更改，您会</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">严重</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
            降低MySQL为该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_match"><code class="literal">MATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            函数</font><font style="vertical-align: inherit;">提供足够的相关性值的能力</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您确实需要搜索这些常用词汇，那么最好使用搜索功能，</font></font><code class="literal">IN
            BOOLEAN MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">50％的阈值。
</font></font></p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-modify-boolean-operators"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改布尔全文搜索运算符</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要更改用于</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">布尔全文搜索的运算符
           </font><font style="vertical-align: inherit;">，请设置
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_boolean_syntax"><code class="literal">ft_boolean_syntax</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量。</font><font style="vertical-align: inherit;">（</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有相同的设置。）可以在服务器运行时更​​改此变量，但您必须有权
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_super"><code class="literal">SUPER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样做。</font><font style="vertical-align: inherit;">在这种情况下不需要重建索引。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中描述了有关如何设置此变量的规则。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-modify-character-set"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集修改</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于内置的全文分析器，您可以通过多种方式更改被视为单词字符的字符集，如下面的列表所述。</font><font style="vertical-align: inherit;">进行修改后，重建每个包含任何</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引的</font><font style="vertical-align: inherit;">表的</font><font style="vertical-align: inherit;">索引。</font><font style="vertical-align: inherit;">假设你想把连字符（' - '）当作单词字符。</font><font style="vertical-align: inherit;">使用这些方法之一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              修改MySQL源代码：在
               </font></font><code class="filename">storage/innobase/handler/ha_innodb.cc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              （for </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或in
               </font></font><code class="filename">storage/myisam/ftdefs.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（for
               </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中，查看
               </font></font><code class="literal">true_word_char()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">misc_word_char()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宏。</font><font style="vertical-align: inherit;">添加
               </font></font><code class="literal">'-'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到其中一个宏并重新编译MySQL。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              修改字符集文件：这不需要重新编译。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">true_word_char()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              宏使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符类型</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表来区分字母和数字与其他字符。</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以</font></font><code class="literal">&lt;ctype&gt;&lt;map&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其中一个字符集XML文件中</font><font style="vertical-align: inherit;">编辑</font><font style="vertical-align: inherit;">数组</font><font style="vertical-align: inherit;">的内容，
               </font><font style="vertical-align: inherit;">以指定它
               </font></font><code class="literal">'-'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字母”。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后使用给定的字符集作为
               </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引。</font><font style="vertical-align: inherit;">有关</font></font><code class="literal">&lt;ctype&gt;&lt;map&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组格式的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#character-arrays" title="10.12.1字符定义数组"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.12.1节“字符定义数组”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              为索引列使用的字符集添加新的排序规则，并更改列以使用该排序规则。</font><font style="vertical-align: inherit;">有关添加排序</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#adding-collation" title="10.13将排序规则添加到字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般信息，请参见</font><a class="xref" href="/mysql-5.7-google-zh/charset.html#adding-collation" title="10.13将排序规则添加到字符集"><font style="vertical-align: inherit;">第10.13节“将排序规则添加到字符集”</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关全文索引的具体示例，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#full-text-adding-collation" title="12.9.7添加全文索引的排序规则"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.7节“为全文索引添加整理”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-rebuild-innodb-indexes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重建InnoDB全文索引</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果修改了影响索引的全文变量（</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_enable_stopword"><code class="literal">innodb_ft_enable_stopword</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你必须重建</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行更改后的索引。修改
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量，不能被动态设置，需要重新启动服务器，并重建索引。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要重建</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引的
           </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表，使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
           </font></font><code class="literal">DROP INDEX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">ADD INDEX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          选项删除并重新创建每个索引。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-optimize"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化InnoDB全文索引</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#optimize-table" title="13.7.2.4 OPTIMIZE TABLE语法"><code class="literal">OPTIMIZE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在具有全文索引的表上</font><font style="vertical-align: inherit;">
          运行时</font><font style="vertical-align: inherit;">，将重建全文索引，删除已删除的文档ID并在可能的情况下合并同一单词的多个条目。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要优化全文索引，请启用
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_optimize_fulltext_only"><code class="literal">innodb_optimize_fulltext_only</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          并运行</font></font><code class="literal">OPTIMIZE TABLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; set GLOBAL innodb_optimize_fulltext_only = ON;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; OPTIMIZE TABLE opens_lines;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ---------- + ---------- + ------ ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">表| </font><font style="vertical-align: inherit;">操作| </font><font style="vertical-align: inherit;">Msg_type | </font><font style="vertical-align: inherit;">Msg_text |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ---------- + ---------- + ------ ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">test.opening_lines | </font><font style="vertical-align: inherit;">优化| </font><font style="vertical-align: inherit;">状态| </font><font style="vertical-align: inherit;">好的|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ---------- + ---------- + ------ ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）    </font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为避免大型表格上的全文索引冗长的重建时间，可以使用该
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_num_word_optimize"><code class="literal">innodb_ft_num_word_optimize</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          选项分阶段执行优化。</font><font style="vertical-align: inherit;">该
           </font></font><code class="literal">innodb_ft_num_word_optimize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项定义每次</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#optimize-table" title="13.7.2.4 OPTIMIZE TABLE语法"><code class="literal">OPTIMIZE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行时</font><font style="vertical-align: inherit;">优化的字数
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认设置是2000，这意味着每次</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#optimize-table" title="13.7.2.4 OPTIMIZE TABLE语法"><code class="literal">OPTIMIZE
          TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行</font><font style="vertical-align: inherit;">时都优化了2000个单词</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">随后的
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#optimize-table" title="13.7.2.4 OPTIMIZE TABLE语法"><code class="literal">OPTIMIZE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作从前一个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#optimize-table" title="13.7.2.4 OPTIMIZE TABLE语法"><code class="literal">OPTIMIZE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作结束的</font><font style="vertical-align: inherit;">地方继续
           </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="fulltext-rebuild-myisam-indexes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重建MyISAM全文索引</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果修改影响索引的全文变量（</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或，
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或者更改停止词文件本身，则必须</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在进行更改并重新启动服务器之后</font><font style="vertical-align: inherit;">重新生成
           </font><font style="vertical-align: inherit;">索引。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要重建</font><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">的</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引，
           </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行</font></font><code class="literal">QUICK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复操作</font><font style="vertical-align: inherit;">就足够了
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>REPAIR TABLE <em class="replaceable"><code>tbl_name</code></em> QUICK;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或者，</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如刚刚所述</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在某些情况下，这可能比修复操作更快。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个包含任何</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引的</font><font style="vertical-align: inherit;">表格都</font><font style="vertical-align: inherit;">必须按照所示进行修复。</font><font style="vertical-align: inherit;">否则，对该表的查询可能会产生不正确的结果，并且对该表的修改将导致服务器将该表视为已损坏并需要修复。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#myisamchk" title="4.6.3 myisamchk  -  MyISAM表维护实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisamchk</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行修改</font></font><code class="literal">MyISAM </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表索引（例如修复或分析）的操作，则
           </font><font style="vertical-align: inherit;">除非另行指定，否则</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将使用</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺省</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文参数值</font><font style="vertical-align: inherit;">重建索引以
           </font><font style="vertical-align: inherit;">获取最小字长，最大字长和停用词文件。</font><font style="vertical-align: inherit;">这可能会导致查询失败。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          发生该问题是因为这些参数只能由服务器知道。</font><font style="vertical-align: inherit;">它们不存储在</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          索引文件中。</font><font style="vertical-align: inherit;">为了避免这个问题，如果你已经修改服务器所使用的最小或最大字长或停止字文件值，指定相同的
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对价值观
           </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#myisamchk" title="4.6.3 myisamchk  -  MyISAM表维护实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisamchk的</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，你使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqld" title="4.3.1 mysqld  -  MySQL服务器"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的mysqld</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，如果您将最小字长设置为3，则可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#myisamchk" title="4.6.3 myisamchk  -  MyISAM表维护实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisamchk</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复表格，
           </font><font style="vertical-align: inherit;">如下所示：
        </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisamchk --recover --ft_min_word_len = 3 </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.MYI
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了确保</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#myisamchk" title="4.6.3 myisamchk  -  MyISAM表维护实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisamchk的</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和服务器使用相同的值进行全文参数，将每一项都在</font></font><code class="literal">[mysqld]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">[myisamchk]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项文件的部分：
        </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的ft_min_word_len = 3</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[myisamchk的]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的ft_min_word_len = 3</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          到使用替代</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#myisamchk" title="4.6.3 myisamchk  -  MyISAM表维护实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myisamchk的</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于
           </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表索引修改是使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE语法"><code class="literal">REPAIR TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#analyze-table" title="13.7.2.1 ANALYZE TABLE语法"><code class="literal">ANALYZE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#optimize-table" title="13.7.2.4 OPTIMIZE TABLE语法"><code class="literal">OPTIMIZE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">这些语句由服务器执行，它知道要使用的正确的全文参数值。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="full-text-adding-collation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.7添加全文索引的排序规则</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节介绍如何使用内置的全文本解析器为全文搜索添加新的排序规则。</font><font style="vertical-align: inherit;">样本排序规则类似于</font></font><code class="literal">latin1_swedish_ci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code class="literal">'-'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符视为字母而不是标点符号，以便将其作为字符字符进行索引。</font><font style="vertical-align: inherit;">有关添加排序</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#adding-collation" title="10.13将排序规则添加到字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般信息在</font><a class="xref" href="/mysql-5.7-google-zh/charset.html#adding-collation" title="10.13将排序规则添加到字符集"><font style="vertical-align: inherit;">第10.13节“将排序规则添加到字符集”中给出</font></a><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">假定您已经阅读过并熟悉相关文件。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要为全文索引添加归类，请使用以下过程。</font><font style="vertical-align: inherit;">此处的说明为简单字符集</font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#adding-collation" title="10.13将排序规则添加到字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加排序规则</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如
         </font><a class="xref" href="/mysql-5.7-google-zh/charset.html#adding-collation" title="10.13将排序规则添加到字符集"><font style="vertical-align: inherit;">第10.13节“向列表添加排序规则”中所述</font></a><font style="vertical-align: inherit;">，可以使用描述字符集属性的配置文件创建列表。</font><font style="vertical-align: inherit;">对于复杂的字符集（如Unicode），请使用描述字符集属性的C源文件创建归类。
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            为</font></font><code class="filename">Index.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font><font style="vertical-align: inherit;">添加排序规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">排序规则ID必须是未使用的，因此如果您的系统上已经使用了该ID，请选择一个不同于1000的值。
          </font></font></p><pre data-lang="xml" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;charset name =“latin1”&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;collat​​ion name =“latin1_fulltext_ci”id =“1000”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/字符集&gt;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在</font></font><code class="filename">latin1.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">声明排序顺序
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，可以从</font></font><code class="literal">latin1_swedish_ci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下位置</font><font style="vertical-align: inherit;">复制订单
             </font><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="xml" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;collat​​ion name =“latin1_fulltext_ci”&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;地图&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 11 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
20 21 22 23 24 25 26 27 28 29 2A 2B 2C 2D 2E 2F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
30 31 32 33 34 35 36 37 38 39 3A 3B 3C 3D 3E 3F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
40 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
50 51 52 53 54 55 56 57 58 59 5A 5B 5C 5D 5E 5F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
60 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
50 51 52 53 54 55 56 57 58 59 5A 7B 7C 7D 7E 7F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
80 81 82 83 84 85 86 87 88 89 8A 8B 8C 8D 8E 8F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
90 91 92 93 94 95 96 97 98 99 9A 9B 9C 9D 9E 9F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 AA AB AC AD AE AF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B0 B1 B2 B3 B4 B5 B6 B7 B8 B9 BA BB BC BD BE BF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
41 41 41 41 5C 5B 5C 43 45 45 45 45 49 49 49 49</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
44 4E 4F 4F 4F 4F 5D D7 D8 55 55 55 59 59 DE DF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
41 41 41 41 5C 5B 5C 43 45 45 45 45 49 49 49 49</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
44 4E 4F 4F 4F 4F 5D F7 D8 55 55 55 59 59 DE FF</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/地图&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/核对&gt;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            修改中的</font></font><code class="literal">ctype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组
             </font></font><code class="filename">latin1.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将对应于0x2D（这是</font></font><code class="literal">'-'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">代码
             </font><font style="vertical-align: inherit;">）的值从10（标点符号）更改为01（小写字母）。</font><font style="vertical-align: inherit;">在下面的数组中，这是第四行中的元素，结尾是第三个值。
          </font></font></p><pre data-lang="xml" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;CTYPE&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;地图&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
20 20 20 20 20 20 20 20 20 28 28 28 28 28 20 20</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
48 10 10 10 10 10 10 10 10 10 10 10 10 </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">01</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
84 84 84 84 84 84 84 84 84 84 10 10 10 10 10 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 81 81 81 81 81 81 01 01 01 01 01 01 01 01 01</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
01 01 01 01 01 01 01 01 01 01 01 10 10 10 10 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 82 82 82 82 82 82 02 02 02 02 02 02 02 02 02</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
02 02 02 02 02 02 02 02 02 02 02 10 10 10 10 20</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 00 10 02 10 10 10 10 10 10 01 10 01 00 01 00</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00 10 10 10 10 10 10 10 10 10 02 10 02 00 02 01</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
48 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
01 01 01 01 01 01 01 10 01 01 01 01 01 01 01 02</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
02 02 02 02 02 02 02 02 02 02 02 02 02 02 02 02</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
02 02 02 02 02 02 02 10 02 02 02 02 02 02 02 02</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/地图&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/ CTYPE&gt;</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            重新启动服务器。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要使用新的排序规则，请将其包括在要使用它的列的定义中：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>DROP TABLE IF EXISTS t1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.13秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t1 (</code></strong>
    <strong class="userinput"><code>a TEXT CHARACTER SET latin1 COLLATE latin1_fulltext_ci,</code></strong>
    <strong class="userinput"><code>FULLTEXT INDEX(a)</code></strong>
    <strong class="userinput"><code>) ENGINE=InnoDB;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.47秒）</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            测试排序规则以验证连字符是否被视为单词字符：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t1 VALUEs ('----'),('....'),('abcd');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，3行受影响（0.22秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：3重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t1 WHERE MATCH a AGAINST ('----' IN BOOLEAN MODE);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">---- |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-search-ngram"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.8 ngram全文解析器</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        内置的MySQL全文分析器使用单词之间的空格作为分隔符来确定单词开始和结束的位置，这是使用不使用单词分隔符的表意语言时的限制。</font><font style="vertical-align: inherit;">为了解决这个限制，MySQL提供了一个支持中文，日文和韩文（CJK）的ngram全文分析器。</font><font style="vertical-align: inherit;">支持与</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and
         </font><font style="vertical-align: inherit;">一起使用ngram全文分析器</font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL还为日语提供MeCab全文分析器插件，将文档标记为有意义的单词。</font><font style="vertical-align: inherit;">有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-search-mecab" title="12.9.9 MeCab全文解析器插件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.9节“MeCab全文解析器插件”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ngram是</font></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自给定序列文本</font><font style="vertical-align: inherit;">的连续
         </font><font style="vertical-align: inherit;">字符序列。</font><font style="vertical-align: inherit;">ngram解析器将一系列文本标记为连续的</font></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">序列</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，您可以</font><font style="vertical-align: inherit;">为</font><font style="vertical-align: inherit;">使用ngram全文分析器的</font><font style="vertical-align: inherit;">不同值</font><font style="vertical-align: inherit;">标记</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abcd</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n = 1：'a'，'b'，'c'，'d'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n = 2：'ab'，'bc'，'cd'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n = 3：'abc'，'bcd'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n = 4：'abcd'</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL 5.7.6中引入的ngram全文分析器是一个内置的服务器插件。</font><font style="vertical-align: inherit;">与其他内置服务器插件一样，它在服务器启动时自动加载。
      </font></font></p><p><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-search" title="12.9全文搜索功能"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9节“全文搜索函数”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        描述的全文搜索语法
         </font><font style="vertical-align: inherit;">适用于ngram分析器插件。</font><font style="vertical-align: inherit;">本节介绍解析行为的差异。</font><font style="vertical-align: inherit;">全文相关的配置选项，除了最小和最大字长选项（</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）也适用。
</font></font></p>
<h4><a name="idm140528082151824"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置ngram令牌大小</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ngram解析器的默认ngram标记大小为2（bigram）。</font><font style="vertical-align: inherit;">例如，令牌大小为2时，ngram解析器将字符串</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abc def</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析</font><font style="vertical-align: inherit;">为四个令牌：
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ef</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ngram标记大小可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置选项</font><font style="vertical-align: inherit;">进行
         </font><font style="vertical-align: inherit;">配置，配置选项的最小值为1，最大值为10。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通常，</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其设置为您要搜索的最大标记的大小。</font><font style="vertical-align: inherit;">如果您只打算搜索单个字符，请将其设置
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为1.较小的标记大小会生成较小的全文搜索索引和更快的搜索。</font><font style="vertical-align: inherit;">如果您需要搜索由多个字符组成的单词，请进行相应设置
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， “ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日快乐</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><span lang="zh-cn" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日快乐</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简体中国，在
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><span lang="zh-cn" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><span lang="zh-cn" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快乐</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻译为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快乐</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要搜索诸如此类的双字符单词，请将其设置</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为2或更高的值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        作为只读变量，
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只能设置为启动字符串的一部分或配置文件中的一部分：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            启动字符串：
          </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqld --ngram_token_size = 2</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            配置文件：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ngram_token_size = 2</font></font></pre></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下面的最小和最大字长配置选项被忽略的</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是使用NGRAM解析器指标：
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<h4><a name="idm140528082124512"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个使用ngram Parser的FULLTEXT索引</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要创建</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个使用NGRAM解析器指数，指定</font></font><code class="literal">WITH PARSER ngram</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><code class="literal">CREATE INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例演示如何使用</font></font><code class="literal">ngram</code> <code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">创建表
         </font><font style="vertical-align: inherit;">，插入示例数据（简体中文文本）以及查看</font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#innodb-ft-index-cache-table" title="24.31.11 INFORMATION_SCHEMA INNODB_FT_INDEX_CACHE表"><code class="literal">INFORMATION_SCHEMA.INNODB_FT_INDEX_CACHE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表中的</font><font style="vertical-align: inherit;">标记化数据
         </font><font style="vertical-align: inherit;">。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; USE测试;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; CREATE TABLE文章（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      title VARCHAR（200），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      主体，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      FULLTEXT（标题，正文）WITH PARSER ngram</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ）ENGINE = InnoDB CHARACTER SET utf8mb4;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SET NAMES utf8mb4;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO文章（标题，正文）VALUES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ '数据库管理'， '在本教程中我将向你展示如何管理数据库'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ '数据库应用开发'， '学习开发数据库应用程序'）;</font></font><font></font>
    <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SET GLOBAL innodb_ft_aux_table =“test / articles”;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_CACHE ORDER BY doc_id，position;</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要将</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">添加</font><font style="vertical-align: inherit;">到现有表中，可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><code class="literal">CREATE INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE文章（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      title VARCHAR（200），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      主体</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     ）ENGINE = InnoDB CHARACTER SET utf8;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ALTER TABLE文章ADD FULLTEXT INDEX ft_index（title，body）WITH PARSER ngram;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃ 要么：</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FULLTEXT INDEX ft_index ON文章（标题，正文）WITH PARSER ngram;</font></font><font></font>
</pre>
<h4><a name="idm140528082107632"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngram Parser空间处理</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        解析时，ngram解析器消除了空格。</font><font style="vertical-align: inherit;">例如：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab cd</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被解析为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cd</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span>
          </p></li><li class="listitem"><p>
            <span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被解析为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span>
</p></li></ul>
</div>
<h4><a name="idm140528082102384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngram解析器停止词处理</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        内置的MySQL全文分析器将单词与停用词列表中的条目进行比较。</font><font style="vertical-align: inherit;">如果一个单词等于停用词列表中的一个条目，则将该单词从索引中排除。</font><font style="vertical-align: inherit;">对于ngram解析器，停用词处理的执行方式不同。</font><font style="vertical-align: inherit;">除了排除与停用词列表中的条目相等的标记之外，ngram分析器不包括</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含有</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停用词的</font><font style="vertical-align: inherit;">标记
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，假设
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size=2</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a，b</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的文档</font><font style="vertical-align: inherit;">被解析为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        和</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，b</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果逗号（</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）被定义为停用词，则两者都是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，b</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不包含在索引中，因为它们包含逗号。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，ngram解析器使用默认的停用词列表，其中包含英语停用词列表。</font><font style="vertical-align: inherit;">对于适用于中文，日文或韩文的停用词表，您必须创建您自己的。</font><font style="vertical-align: inherit;">有关创建停用词列表的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.4节“全文</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停用词
         </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;">”</font></a><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        长度大于</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被忽略的</font><font style="vertical-align: inherit;">停用词
         </font><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="idm140528082093344"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngram解析器术语搜索</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自然语言模式</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索，搜索词将转换为ngram术语的联合。</font><font style="vertical-align: inherit;">例如，字符串</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（假设
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size=2</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）被转换为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab bc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">给定两个文件，一个包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，另一个包含
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，搜索术语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab bc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配这两个文件。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔模式搜索</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，搜索词将转换为ngram短语搜索。</font><font style="vertical-align: inherit;">例如，字符串“ABC”（假设
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size=2</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）转换为“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‘ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AB BC</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ’ </font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”。</font><font style="vertical-align: inherit;">考虑到两个文件，一个包含“AB”和其他含有“ABC”，搜索短语“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‘ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AB BC</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ’</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”只匹配包含“ABC”的文件。
</font></font></p>
<h4><a name="idm140528082084944"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngram解析器通配符搜索</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        由于</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngram索引仅包含ngram，并且不包含有关术语开头的信息，所以通配符搜索可能会返回意外的结果。</font><font style="vertical-align: inherit;">以下行为适用于使用ngram </font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索索引的</font><font style="vertical-align: inherit;">通配符搜索
         </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果通配符搜索的前缀项短于ngram标记大小，则查询返回包含以前缀项开始的ngram标记的所有索引行。</font><font style="vertical-align: inherit;">例如，假设
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size=2</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a *</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将返回以</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开头的所有行
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果通配符搜索的前缀项长于ngram标记大小，则将前缀项转换为一个ngram短语，并忽略通配符运算符。</font><font style="vertical-align: inherit;">例如，假定
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ngram_token_size"><code class="literal">ngram_token_size=2</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，一个
             </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ABC</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符搜索被转换为
             </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AB BC</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<h4><a name="idm140528082075424"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngram解析器短语搜索</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        短语搜索转换为ngram短语搜索。</font><font style="vertical-align: inherit;">例如，搜索短语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被转换为
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab bc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其返回包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab bc</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        搜索短语</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abc def</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab bc de ef</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它返回包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abc def</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ab bc de ef</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">包含</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abcdef</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font><font style="vertical-align: inherit;">不会被返回。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-search-mecab"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.9.9 MeCab全文解析器插件</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        内置的MySQL全文分析器使用单词之间的空格作为分隔符来确定单词开始和结束的位置，这是使用不使用单词分隔符的表意语言时的限制。</font><font style="vertical-align: inherit;">为了解决日语的限制，MySQL提供了一个MeCab全文分析器插件。</font><font style="vertical-align: inherit;">MeCab全文分析器插件支持与</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><code class="literal">InnoDB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and
         </font><font style="vertical-align: inherit;">一起使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/storage-engines.html#myisam-storage-engine" title="15.2 MyISAM存储引擎"><code class="literal">MyISAM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL还提供了一个支持日语的ngram全文分析器插件。</font><font style="vertical-align: inherit;">有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-search-ngram" title="12.9.8 ngram全文解析器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.8节“ngram全文解析器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL 5.7.6中引入的MeCab全文分析器插件是日文的全文分析器插件，它将一系列文本标记为有意义的单词。</font><font style="vertical-align: inherit;">例如，仲裁处标记化
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース管理</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        （</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）插入
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        （</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和
         </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        （</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">相比之下，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#fulltext-search-ngram" title="12.9.8 ngram全文解析器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文分析器将文本标记为连续的</font></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">序列
         </font><font style="vertical-align: inherit;">，其中
        </font></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 代表1到10之间的数字。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        除了将文本标记为有意义的单词之外，MeCab索引通常小于ngram索引，并且MeCab全文搜索通常更快。</font><font style="vertical-align: inherit;">一个缺点是，与ngram全文分析器相比，MeCab全文分析器可能需要更长的时间来标记文档。
      </font></font></p><p><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-search" title="12.9全文搜索功能"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9节“全文搜索功能”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        描述的全文搜索语法
         </font><font style="vertical-align: inherit;">适用于MeCab分析器插件。</font><font style="vertical-align: inherit;">本节介绍解析行为的差异。</font><font style="vertical-align: inherit;">全文相关的配置选项也适用。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关MeCab分析器的更多信息，请参阅</font><font style="vertical-align: inherit;">Github上</font><font style="vertical-align: inherit;">的
         </font></font><a class="ulink" href="http://taku910.github.io/mecab/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MeCab：另一种词性分析和形态分析器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目。
</font></font></p>
<h4><a name="idm140528082053904"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装MeCab解析器插件</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MeCab解析器插件需要</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在受支持的Fedora，Debian和Ubuntu平台（系统</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本太旧的</font><font style="vertical-align: inherit;">Ubuntu 12.04除外</font><font style="vertical-align: inherit;">）中，MySQL会动态链接到系统
         </font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装（如果安装到默认位置）。</font><font style="vertical-align: inherit;">在其他受支持的类Unix平台上，它
         </font></font><code class="filename">libmecab.so</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是静态链接的
         </font></font><code class="filename">libpluginmecab.so</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，位于MySQL插件目录中。</font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含在MySQL二进制文件中，位于
         </font></font><code class="filename"><em class="replaceable"><code>MYSQL_HOME</code></em>\lib\mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以安装</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用本机的包管理实用程序（在Fedora，Debian和Ubuntu的），或者你可以建立</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从源代码。</font><font style="vertical-align: inherit;">有关安装</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用本机软件包管理实用程序的信息，请参阅
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#install-mecab-binary" title="从二进制分发安装MeCab（可选）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从二进制分发版安装MeCab（可选）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果你想建立
         </font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从源代码，看到
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#build-mecab-from-source" title="从源安装MeCab（可选）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大厦仲裁处从源代码（可选）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在Windows上，</font></font><code class="filename">libmecab.dll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在MySQL </font></font><code class="filename">bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录中</font><font style="vertical-align: inherit;">找到</font><font style="vertical-align: inherit;">。
        </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于
         </font></font><code class="filename"><em class="replaceable"><code>MYSQL_HOME</code></em>/lib/mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要安装和配置MeCab分析器插件，请执行以下步骤：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在MySQL配置文件中，将</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_mecab_rc_file"><code class="literal">mecab_rc_file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置选项</font><font style="vertical-align: inherit;">设置为配置文件
             </font><font style="vertical-align: inherit;">的位置，该</font></font><code class="literal">mecabrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            配置文件是MeCab的配置文件。</font><font style="vertical-align: inherit;">如果您正在使用随MySQL分发的MeCab软件包，则该</font></font><code class="literal">mecabrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件位于
             </font></font><code class="filename">MYSQL_HOME/lib/mecab/etc/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
松mecabrc文件= MYSQL_HOME / LIB /仲裁处的/ etc / mecabrc</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><code class="literal">loose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前缀是一个
             </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option-modifiers" title="4.2.5程序选项修饰符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项修改</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_mecab_rc_file"><code class="literal">mecab_rc_file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在MeCaB解析器插件安装之前，</font><font style="vertical-align: inherit;">该
             </font><font style="vertical-align: inherit;">选项不被MySQL识别，但在尝试安装MeCaB解析器插件之前必须先设置该选项。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">loose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前缀允许您重新启动MySQL，而不会遇到由于无法识别的变量而导致的错误。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果您使用自己的MeCab安装，或从源代码构建MeCab，则</font></font><code class="filename">mecabrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            配置文件</font><font style="vertical-align: inherit;">的位置</font><font style="vertical-align: inherit;">可能会有所不同。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关MySQL配置文件及其位置的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#option-files" title="4.2.6使用选项文件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.2.6节“使用选项文件”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            同样在MySQL配置文件中，将最小标记大小设置为1或2，这是推荐用于MeCab分析器的值。</font><font style="vertical-align: inherit;">对于</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表，最小令牌大小由</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            配置选项</font><font style="vertical-align: inherit;">定义，
             </font><font style="vertical-align: inherit;">默认值为3.对于
             </font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表，最小令牌大小由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值4定义。
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的[mysqld]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
innodb_ft_min_token_size = 1</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            修改</font></font><code class="filename">mecabrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置文件以指定要使用的字典。</font><font style="vertical-align: inherit;">在
             </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与MySQL二进制分布包包括三个字典（</font></font><code class="literal">ipadic_euc-jp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">ipadic_sjis</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
             </font></font><code class="literal">ipadic_utf-8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><code class="filename">mecabrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与MySQL打包</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">配置文件包含和输入类似于以下内容：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dicdir = / path / to / mysql / lib / mecab / lib / mecab / dic / ipadic_euc-jp</font></font></pre><p><font style="vertical-align: inherit;"></font><code class="filename">ipadic_utf-8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，</font><font style="vertical-align: inherit;">
            要使用该</font><font style="vertical-align: inherit;">字典，请修改该条目，如下所示：
          </font></font></p><pre data-lang="ini" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dicdir = </font></font><em class="replaceable"><code>MYSQL_HOME</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ lib / mecab / dic / ipadic_utf-8</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果您正在使用自己的MeCab安装或从源代码构建MeCab </font></font><code class="literal">dicdir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            ，则</font></font><code class="filename">mecabrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">的默认</font><font style="vertical-align: inherit;">条目</font><font style="vertical-align: inherit;">将不同，字典及其位置也会不同。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              安装MeCab分析器插件后，您可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_mecab_charset"><code class="literal">mecab_charset</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态变量查看MeCab使用的字符集。</font><font style="vertical-align: inherit;">随MySQL提供的三个MeCab字典支持以下字符集。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  该</font></font><code class="literal">ipadic_euc-jp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">词典支持</font></font><code class="literal">ujis</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">eucjpms</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  该</font></font><code class="literal">ipadic_sjis</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">词典支持</font></font><code class="literal">sjis</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">cp932</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  该</font></font><code class="literal">ipadic_utf-8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">词典支持</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集。
</font></font></p></li></ul>
</div>
<p>
              <a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_mecab_charset"><code class="literal">mecab_charset</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只报告第一个支持的字符集。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">ipadic_utf-8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字典支持</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
              </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#statvar_mecab_charset"><code class="literal">mecab_charset</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总是报告</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何时使用该字典。
</font></font></p>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            重新启动MySQL。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            安装MeCab分析器插件：
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MeCab解析器插件是使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#install-plugin" title="13.7.3.3安装PLUGIN语法"><code class="literal">INSTALL PLUGIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法</font><font style="vertical-align: inherit;">安装的
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">插件名称是</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，共享库名称是</font></font><code class="filename">libpluginmecab.so</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关安装插件的其他信息，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-plugin-loading" title="5.5.1安装和卸载插件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.5.1节“安装和卸载插件”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装插件mecab SONAME'libpluginmecab.so';
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一旦安装，MeCab解析器插件会在每次正常MySQL重新启动时加载。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            验证MeCab分析器插件是使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-plugins" title="13.7.5.25 SHOW PLUGINS语法"><code class="literal">SHOW PLUGINS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">加载的
             </font><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; SHOW PLUGINS;</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            一个</font></font><code class="literal">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插件应该出现在插件列表中。
</font></font></p></li></ol>
</div>
<h4><a name="idm140528081974480"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个使用MeCab解析器的FULLTEXT索引</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要创建</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个使用仲裁处解析器指数，指定</font></font><code class="literal">WITH PARSER ngram</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><code class="literal">CREATE INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        此示例演示如何创建一个包含</font></font><code class="literal">mecab</code> <code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">的表
         </font><font style="vertical-align: inherit;">，插入示例数据以及查看</font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#innodb-ft-index-cache-table" title="24.31.11 INFORMATION_SCHEMA INNODB_FT_INDEX_CACHE表"><code class="literal">INFORMATION_SCHEMA.INNODB_FT_INDEX_CACHE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表中的</font><font style="vertical-align: inherit;">标记化数据
         </font><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; USE测试;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; CREATE TABLE文章（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      title VARCHAR（200），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      主体，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      FULLTEXT（标题，正文）WITH PARSER mecab</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ）ENGINE = InnoDB CHARACTER SET utf8;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SET NAMES utf8;</font></font><font></font>
    <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; INSERT INTO文章（标题，正文）VALUES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ 'データベース管理'， 'このチュートリアルでは，私はどのようにデータベースを管理する方法を绍介します'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ 'データベースアプリケーション开発'， 'データベースアプリケーションを开発することを学ぶ'）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SET GLOBAL innodb_ft_aux_table =“test / articles”;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_CACHE ORDER BY doc_id，position;</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要将</font></font><code class="literal">FULLTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font><font style="vertical-align: inherit;">添加</font><font style="vertical-align: inherit;">到现有表中，可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-index" title="13.1.14 CREATE INDEX语法"><code class="literal">CREATE INDEX</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE文章（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      title VARCHAR（200），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      主体</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     ）ENGINE = InnoDB CHARACTER SET utf8;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ALTER TABLE文章ADD FULLTEXT INDEX ft_index（title，body）WITH PARSER mecab;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃ 要么：</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FULLTEXT INDEX ft_index ON文章（标题，正文）WITH PARSER mecab;</font></font></pre>
<h4><a name="idm140528081957424"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MeCab解析器空间处理</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MeCab分析器在查询字符串中使用空格作为分隔符。</font><font style="vertical-align: inherit;">例如，仲裁处解析器标记化
         </font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为
         </font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="idm140528081954096"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MeCab解析器停止词处理</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，MeCab分析器使用默认的停用词列表，其中包含一个简短的英语停用词表。</font><font style="vertical-align: inherit;">对于适用于日语的停用词表，您必须创建您自己的。</font><font style="vertical-align: inherit;">有关创建停用词列表的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.9.4节“全文</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停用词
         </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#fulltext-stopwords" title="12.9.4全文停用词"><font style="vertical-align: inherit;">”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="idm140528081952032"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MeCab解析器术语搜索</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于自然语言模式搜索，搜索词将转换为标记联合。</font><font style="vertical-align: inherit;">例如，将数据
         </font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为数据</font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT COUNT（*）FROM articles WHERE MATCH（title，body）AGAINST（'自然语言模式'中的'数据管理'）;</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于布尔模式搜索，搜索词将转换为搜索短语。</font><font style="vertical-align: inherit;">例如，将数据
         </font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为数据</font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT COUNT（*）FROM WHERE MATCH（title，body）AGAINST（'BOOLEAN MODE'中的'数据管理'）;</font></font></pre>
<h4><a name="idm140528081945168"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MeCab解析器通配符搜索</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通配符搜索术语不被标记。</font><font style="vertical-align: inherit;">在前缀</font><span lang="ja" class="phrase"><font style="vertical-align: inherit;">データベース管理</font></span><font style="vertical-align: inherit;">上
         </font><font style="vertical-align: inherit;">搜索数据库
         </font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理*</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT COUNT（*）FROM articles WHERE MATCH（title，body）AGAINST（'数据库*'在BOOLEAN模式中）;</font></font></pre>
<h4><a name="idm140528081941424"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MeCab解析器短语搜索</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        短语被标记。</font><font style="vertical-align: inherit;">例如，
         </font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被标记为</font></font><span lang="ja" class="phrase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース管理</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT COUNT（*）FROM articles WHERE MATCH（title，body）AGAINST（''数据管理''在BOOLEAN模式中）;</font></font></pre>
<h4><a name="install-mecab-binary"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从二进制分发安装MeCab（可选）</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节将介绍如何安装</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        并</font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从一个二进制分发使用本机软件包管理工具。</font><font style="vertical-align: inherit;">例如，在Fedora上，您可以使用Yum执行安装：
      </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yum mecab-devel</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在Debian或Ubuntu上，您可以执行APT安装：
      </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apt-get install mecab</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
apt-get安装mecab-ipadic</font></font></pre>
<h4><a name="build-mecab-from-source"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从源安装MeCab（可选）</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您想</font><font style="vertical-align: inherit;">从源代码</font><font style="vertical-align: inherit;">构建</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面提供了基本的安装步骤。</font><font style="vertical-align: inherit;">有关更多信息，请参阅MeCab文档。
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            下载的tar.gz包</font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            ，并</font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从
             </font></font><a class="ulink" href="http://taku910.github.io/mecab/#download" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://taku910.github.io/mecab/#download</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">截至2016年2月，最新的可用软件包是
             </font></font><code class="filename">mecab-0.996.tar.gz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
            </font></font><code class="filename">mecab-ipadic-2.7.0-20070801.tar.gz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            安装 </font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tar zxfv mecab-0.996.tar</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cd mecab-0.996</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。/配置</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
进行检查</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
苏</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
进行安装</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            安装 </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tar zxfv mecab-ipadic-2.7.0-20070801.tar</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cd mecab-ipadic-2.7.0-20070801</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。/配置</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
苏</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
进行安装</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用</font></font><a class="link" href="/mysql-5.7-google-zh/installing.html#option_cmake_with_mecab"><code class="option">WITH_MECAB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMake选项</font><font style="vertical-align: inherit;">编译MySQL
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将</font></font><a class="link" href="/mysql-5.7-google-zh/installing.html#option_cmake_with_mecab"><code class="option">WITH_MECAB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为
             </font></font><code class="literal">system</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您已安装
             </font></font><code class="filename">mecab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
            </font></font><code class="filename">mecab-ipadic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到默认位置。
          </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-DWITH_MECAB =系统</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果您定义了自定义安装目录，请设置
            </font></font><a class="link" href="/mysql-5.7-google-zh/installing.html#option_cmake_with_mecab"><code class="option">WITH_MECAB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为自定义目录。</font><font style="vertical-align: inherit;">例如：
</font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-DWITH_MECAB = /路径/到/仲裁处</font></font></pre></li></ol>
</div>

</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="cast-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.10 Cast功能和操作符</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528081908672"></a><a class="indexterm" name="idm140528081907632"></a><a class="indexterm" name="idm140528081906560"></a><a class="indexterm" name="idm140528081905072"></a><a class="indexterm" name="idm140528081904000"></a>
<div class="table">
<a name="idm140528081902512"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.14演员功能和操作员</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists cast functions and operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将字符串转换为二进制字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将某个值作为某种类型进行投射
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将某个值作为某种类型进行投射
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      Cast函数和运算符可以将值从一种数据类型转换为另一种数据类型。
    </font></font></p><p>
      <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 与
      </font></font><code class="literal">USING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句提供了一种在不同字符集之间转换数据的方法：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换（</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><em class="replaceable"><code>transcoding_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在MySQL中，转码名称与相应的字符集名称相同。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      例子：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT CONVERT（_latin1'Müller'USING utf8）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO utf8_table（utf8_column）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    SELECT CONVERT（latin1_column USING utf8）FROM latin1_table;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      你也可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有
       </font></font><code class="literal">USING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      字符集之间转换字符串的
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONVERT（</font></font><em class="replaceable"><code>string</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，CHAR [（</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）] CHARACTER SET</font></font><em class="replaceable"><code>charset_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CAST（</font></font><em class="replaceable"><code>string</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS CHAR [（</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）] CHARACTER SET</font></font><em class="replaceable"><code>charset_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      例子：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT CONVERT（'test'，CHAR CHARACTER SET utf8）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT CAST（'test'AS CHAR CHARACTER SET utf8）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您</font><font style="vertical-align: inherit;">按刚才所示进行</font><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">，则生成的字符集和排序规则是
       </font><font style="vertical-align: inherit;">和默认排序规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果省略
       </font><font style="vertical-align: inherit;">，结果字符集和校对规则由定义
       </font><font style="vertical-align: inherit;">和
       </font><font style="vertical-align: inherit;">决定默认的连接字符集和校对系统变量（参见</font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-connection" title="10.4连接字符集和排序规则"><font style="vertical-align: inherit;">第10.4节，“连接字符集和校对”</font></a><font style="vertical-align: inherit;">）。
    </font></font><code class="literal">CHARACTER SET
      <em class="replaceable"><code>charset_name</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>charset_name</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>charset_name</code></em><font style="vertical-align: inherit;"></font><code class="literal">CHARACTER SET
      <em class="replaceable"><code>charset_name</code></em></code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-connection" title="10.4连接字符集和排序规则"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"></font><code class="literal">COLLATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font><font style="vertical-align: inherit;">一个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用中</font><font style="vertical-align: inherit;">不允许</font><font style="vertical-align: inherit;">
      使用</font><font style="vertical-align: inherit;">子句
       </font><font style="vertical-align: inherit;">，但可以将其应用于函数结果。</font><font style="vertical-align: inherit;">例如，这是合法的：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT CAST（'test'AS CHAR CHARACTER SET utf8）COLLATE utf8_bin;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      但这是非法的：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT CAST（'test'AS CHAR CHARACTER SET utf8 COLLATE utf8_bin）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通常情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由于二进制字符串使用的</font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集与lettercase的概念没有对照，因此不能以</font><font style="vertical-align: inherit;">大小写不敏感的方式</font><font style="vertical-align: inherit;">比较</font><font style="vertical-align: inherit;">值或其他二进制字符串</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要执行不区分大小写的比较，请使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数将该值转换为非二进制字符串。</font><font style="vertical-align: inherit;">结果字符串的比较使用它的排序规则。</font><font style="vertical-align: inherit;">例如，如果转换结果字符集具有不区分大小写的排序规则，则
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作不区分大小写：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT'A'LIKE CONVERT（</font></font><em class="replaceable"><code>blob_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用latin1）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  从 </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要使用不同的字符集，请</font></font><code class="literal">latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在前面的语句中</font><font style="vertical-align: inherit;">替换其名称
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要为已转换的字符串指定特定的排序规则，请使用
       </font></font><code class="literal">COLLATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面的子句
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用之后</font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT'A'LIKE CONVERT（</font></font><em class="replaceable"><code>blob_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用latin1）COLLATE latin1_german1_ci</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  FROM</font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;
</font></font></pre><p>
      <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 和
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以更一般地用于比较以不同字符集表示的字符串。</font><font style="vertical-align: inherit;">例如，这些字符串的比较会导致错误，因为它们具有不同的字符集：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @s1 = _latin1 'abc', @s2 = _latin2 'abc';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @s1 = @s2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1267（HY000）：非法混合排序（latin1_swedish_ci，IMPLICIT）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和（latin2_general_ci，IMPLICIT）用于操作'='</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将其中一个字符串转换为与另一个字符集兼容的字符集可以使比较无误地发生：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @s1 = CONVERT(@s2 USING latin1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@ s1 = CONVERT（@ s2使用latin1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为字符串常量，另一种方式来指定字符集是使用字符集导引器（</font></font><code class="literal">_latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><code class="literal">_latin2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面的例子中是导引器的实例）。</font><font style="vertical-align: inherit;">与其他转换函数不同
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将字符串从一个字符集转换为另一个字符集，导入器将字符串文字指定为具有特定字符集，而不涉及转换。</font><font style="vertical-align: inherit;">有关更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-introducer" title="10.3.8字符集介绍器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.3.8节“字符集导入器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符集转换在二进制字符串的字母转换之前也很有用。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_lower"><code class="literal">LOWER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_upper"><code class="literal">UPPER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接应用于二进制字符串时无效，因为lettercase的概念不适用。</font><font style="vertical-align: inherit;">要执行二进制字符串的lettercase转换，首先将其转换为非二进制字符串：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @str = BINARY 'New York';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT LOWER(@str), LOWER(CONVERT(@str USING latin1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LOWER（@str）| </font><font style="vertical-align: inherit;">LOWER（CONVERT（@str USING latin1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">纽约| </font><font style="vertical-align: inherit;">纽约|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- + ----------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您在使用转换的索引列
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，MySQL可能无法有效使用索引。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      转换函数对于在a中创建具有特定类型的列非常有用
      </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE ...
      SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句中</font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>CREATE TABLE new_table SELECT CAST('2000-01-01' AS DATE) AS c1;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SHOW CREATE TABLE new_table\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       表：new_table</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建表：CREATE TABLE`new_table`（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `c1`日期DEFAULT NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = InnoDB DEFAULT CHARSET = latin1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      转换函数对于按</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">词法顺序</font><font style="vertical-align: inherit;">对</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">进行排序很有用
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通常情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用内部数值</font><font style="vertical-align: inherit;">对</font><font style="vertical-align: inherit;">列进行</font><font style="vertical-align: inherit;">排序</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将值转换
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为词法排序结果：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"></font><em class="replaceable"><code>enum_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CAST（按</font></font><em class="replaceable"><code>enum_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符）</font><font style="vertical-align: inherit;">选择</font><font style="vertical-align: inherit;">FROM </font><font style="vertical-align: inherit;">ORDER BY </font><font style="vertical-align: inherit;">;
</font></font></pre><p>
      <a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果将它用作更复杂表达式的一部分，也会更改结果
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT('Date: ',CAST(NOW() AS
      DATE))</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于时间值，几乎不需要用于
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以不同格式提取数据。</font><font style="vertical-align: inherit;">相反，使用功能，例如
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extract"><code class="literal">EXTRACT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_time-format"><code class="literal">TIME_FORMAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#date-and-time-functions" title="12.7日期和时间函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.7节“日期和时间函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要将字符串转换为数字，除了在数字上下文中使用字符串值之外，通常不需要执行任何操作：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1+'1';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       - &gt; 2</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于十六进制和位文字也是如此，默认情况下它们是二进制字符串：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT X'41', X'41'+0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'A'，65</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT b'1100001', b'1100001'+0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'a'，97</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在算术运算中使用的字符串在表达式求值期间转换为浮点数。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在字符串上下文中使用的数字被转换为字符串：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONCAT('hello you ',2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'你好你2'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关将数字隐式转换为字符串的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#type-conversion" title="12.2表达式评估中的类型转换"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.2节“表达式评估中的类型转换”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL支持有符号和无符号64位值的算术运算。</font><font style="vertical-align: inherit;">对于</font><font style="vertical-align: inherit;">其中一个操作数是无符号整数的</font><font style="vertical-align: inherit;">数字运算符（如
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_plus"><code class="literal">+</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_minus"><code class="literal">-</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），结果默认为无符号（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#arithmetic-functions" title="12.6.1算术运算符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.6.1节“算术运算符”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">要覆盖它，请使用</font></font><code class="literal">SIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或转换</font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      运算符将值分别转换为有符号或无符号的64位整数。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 - 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST(1 - 2 AS UNSIGNED);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 18446744073709551615</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST(CAST(1 - 2 AS UNSIGNED) AS SIGNED);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果任一操作数是浮点值，则结果是浮点值，并且不受前面的规则影响。</font><font style="vertical-align: inherit;">（在这种情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列值被视为浮点值。）
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CAST(1 AS UNSIGNED) - 2.0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; -1.0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      SQL模式会影响转换操作的结果（请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">例子：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于将</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期字符串转换为日期，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">SQL模式启用</font><font style="vertical-align: inherit;">时</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并产生警告
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_zero_date"><code class="literal">NO_ZERO_DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于整数相减，如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了
           </font><font style="vertical-align: inherit;">SQL模式，即使任何操作数未经签名，相减结果也会被签名。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下列表描述了可用的演员功能和操作员：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_binary"></a><p>
          <a class="indexterm" name="idm140528081767984"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a>
          <em class="replaceable"><code>expr</code></em>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作者将所表达为二进制字符串。</font><font style="vertical-align: inherit;">常用的方法
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是强制字符串比较逐字节完成，而不是逐个字符完成，实际上区分大小写。</font><font style="vertical-align: inherit;">该
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商还导致比较尾随空格是显著。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'a' = 'A';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT BINARY 'a' = 'A';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'a' = 'a ';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT BINARY 'a' = 'a ';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相比之下， </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影响整个操作; </font><font style="vertical-align: inherit;">它可以在具有相同结果的操作数之前给出。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了将字符串表达式转换为二进制字符串，这些结构是等同的：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BINARY </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CAST（</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为BINARY）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CONVERT（</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用二进制）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果值是字符串文字，则可以将其指定为二进制字符串，而不使用</font></font><code class="literal">_binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集Introducer </font><font style="vertical-align: inherit;">进行任何转换
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 'a' = 'A';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT _binary 'a' = 'A';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关介绍人的信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-introducer" title="10.3.8字符集介绍器"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.3.8节“字符集介绍人”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式中</font><font style="vertical-align: inherit;">
          的</font><font style="vertical-align: inherit;">运算符与</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符列定义中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">属性的</font><font style="vertical-align: inherit;">效果不同
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">用该</font></font><code class="literal">BINARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">定义的字符列
           </font><font style="vertical-align: inherit;">被分配了表默认字符集和该字符集的binary（</font></font><code class="literal">_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）排序规则。</font><font style="vertical-align: inherit;">每个非二进制字符集都有一个</font></font><code class="literal">_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">排序规则。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集</font><font style="vertical-align: inherit;">的二进制排序规则</font><font style="vertical-align: inherit;">是</font></font><code class="literal">utf8_bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所以如果表默认字符集是</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个列定义是等价的：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CHAR（10）BINARY</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHAR（10）CHARACTER SET utf8 COLLATE utf8_bin</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用</font></font><code class="literal">CHARACTER SET binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的定义</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
          </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柱导致列与相应的二进制字符串的数据类型进行处理。</font><font style="vertical-align: inherit;">例如，以下几对定义是等价的：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CHAR（10）CHARACTER SET二进制</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BINARY（10）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VARCHAR（10）CHARACTER SET二进制</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VARBINARY（10）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TEXT CHARACTER SET二进制</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BLOB</font></font><font></font>
</pre></li><li class="listitem"><a name="function_cast"></a><p>
          <a class="indexterm" name="idm140528081728208"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>expr</code></em> AS
          <em class="replaceable"><code>type</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数接受任何类型的表达式并生成指定类型的结果值，类似于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是标准的SQL语法。
        </font></font></p></li><li class="listitem"><a name="function_convert"></a><p>
          <a class="indexterm" name="idm140528081714272"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT(<em class="replaceable"><code>expr</code></em>,<em class="replaceable"><code>type</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT(<em class="replaceable"><code>expr</code></em>
          USING <em class="replaceable"><code>transcoding_name</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数接受任何类型的表达式并生成指定类型的结果值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font><font style="vertical-align: inherit;">
          的</font><font style="vertical-align: inherit;">语法</font><font style="vertical-align: inherit;">讨论
           </font><font style="vertical-align: inherit;">也适用于
           </font><font style="vertical-align: inherit;">，这是等同的。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT(<em class="replaceable"><code>expr</code></em>,
          <em class="replaceable"><code>type</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>expr</code></em> AS
          <em class="replaceable"><code>type</code></em>)</code></a><font style="vertical-align: inherit;"></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT(... USING ...)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是标准的SQL语法。</font><font style="vertical-align: inherit;">非</font></font><code class="literal">USING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形式
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是ODBC语法。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用
           </font></font><code class="literal">USING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同的字符集之间转换数据。</font><font style="vertical-align: inherit;">在MySQL中，转码名称与相应的字符集名称相同。</font><font style="vertical-align: inherit;">例如，此语句将</font></font><code class="literal">'abc'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺省字符集中</font><font style="vertical-align: inherit;">的字符串转换为</font><font style="vertical-align: inherit;">字符集中相应的字符串
           </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT CONVERT（'abc'USING utf8）;
</font></font></pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convert"><code class="literal">CONVERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有
           </font></font><code class="literal">USING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">采取表达式和
           </font></font><em class="replaceable"><code>type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值指定结果类型。</font><font style="vertical-align: inherit;">这些</font></font><em class="replaceable"><code>type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是允许的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">BINARY[(<em class="replaceable"><code>N</code></em>)]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生一个带有</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font><font style="vertical-align: inherit;">的字符串
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">如何影响比较的描述，</font><font style="vertical-align: inherit;">请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.4.2节“BINARY和VARBINARY类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">可选长度
               </font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">
              则会导致强制使用不超过
               </font><font style="vertical-align: inherit;">参数的字节。</font><font style="vertical-align: inherit;">比</font><font style="vertical-align: inherit;">字节</font><font style="vertical-align: inherit;">短的值</font><font style="vertical-align: inherit;">用</font><font style="vertical-align: inherit;">字节</font><font style="vertical-align: inherit;">填充</font><font style="vertical-align: inherit;">到长度为
               </font><font style="vertical-align: inherit;">。
            </font></font><code class="literal">BINARY(<em class="replaceable"><code>N</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><code class="literal">0x00</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
              <code class="literal">CHAR[(<em class="replaceable"><code>N</code></em>)]
              [<em class="replaceable"><code>charset_info</code></em>]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生一个带有</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font><font style="vertical-align: inherit;">的字符串
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">了可选长度</font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">
              则会导致演员使用不超过
               </font><font style="vertical-align: inherit;">参数的字符。</font><font style="vertical-align: inherit;">对于短于</font><font style="vertical-align: inherit;">字符的</font><font style="vertical-align: inherit;">值，不会出现填充
               </font><font style="vertical-align: inherit;">。
            </font></font><code class="literal">CHAR(<em class="replaceable"><code>N</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在没有</font></font><em class="replaceable"><code>charset_info</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句
               </font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的情况下，使用默认字符集生成一个字符串。</font><font style="vertical-align: inherit;">要明确指定字符集，这些</font></font><em class="replaceable"><code>charset_info</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是允许的：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">CHARACTER SET
                  <em class="replaceable"><code>charset_name</code></em></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：使用给定的字符集生成一个字符串。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">ASCII</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：速记
                   </font></font><code class="literal">CHARACTER SET latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">UNICODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：速记
                   </font></font><code class="literal">CHARACTER SET ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在所有情况下，该字符串都具有字符集的默认排序规则。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">DATE</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">DATETIME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">DECIMAL[(<em class="replaceable"><code>M</code></em>[,<em class="replaceable"><code>D</code></em>])]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">如果给出了选项</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，则它们指定最大位数（精度）和小数点后面的位数（标度）。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （在MySQL 5.7.8中添加）
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">有关在</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他类型</font><font style="vertical-align: inherit;">之间转换值的规则的详细信息
               </font><font style="vertical-align: inherit;">，请参阅
               </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-comparison" title="JSON值的比较和排序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的比较和排序</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">NCHAR[(<em class="replaceable"><code>N</code></em>)]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              喜欢</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但产生与国家字符集的字符串。</font><font style="vertical-align: inherit;">参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-national" title="10.3.7国家字符集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.3.7节“国家字符集”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              与之</font><font style="vertical-align: inherit;">
              不同</font></font><code class="literal">CHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">NCHAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不允许指定结尾字符集信息。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">SIGNED [INTEGER]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              生成一个有符号的整数值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">TIME</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              产生一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">UNSIGNED [INTEGER]</code>
            </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              生成一个无符号的整数值。
</font></font></p></li></ul>
</div>
</li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="xml-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.11 XML函数</font></font></h2>

</div>

</div>

</div>

<div class="table">
<a name="idm140528081633072"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.15 XML函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists XML functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用XPath符号从XML字符串提取值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回替换XML片段
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节讨论MySQL中的XML和相关功能。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过使用该</font><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">调用它们，</font><font style="vertical-align: inherit;">可以</font><font style="vertical-align: inherit;">
        在</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端中
         </font><font style="vertical-align: inherit;">从MySQL获取XML格式的输出
         </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysql_xml"><code class="option">--xml</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.5.1节“ </font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  MySQL命令行工具”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysqldump" title="4.5.4 mysqldump  - 数据库备份程序"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.5.4节“ </font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqldump</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 数据库备份程序”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提供了两个提供基本XPath 1.0（XML路径语言，版本1.0）功能的函数。</font><font style="vertical-align: inherit;">有关XPath语法和用法的一些基本信息将在本节后面提供; </font><font style="vertical-align: inherit;">但是，对这些主题的深入讨论超出了本手册的范围，您应该参考
       </font></font><a class="ulink" href="http://www.w3.org/TR/xpath" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML Path Language（XPath）1.0标准</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取明确的信息。</font><font style="vertical-align: inherit;">对于那些XPath新手或希望进行基础知识复习的人来说，一个有用的资源是</font></font><a class="ulink" href="http://www.zvon.org/xxl/XPathTutorial/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zvon.org XPath教程</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font><a class="ulink" href="http://www.zvon.org/xxl/XPathTutorial/" target="_top"><font style="vertical-align: inherit;">教程</font></a><font style="vertical-align: inherit;">有几种语言版本。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些职能仍在发展中。</font><font style="vertical-align: inherit;">我们将继续改进MySQL 5.7及更高版本中XML和XPath功能的这些和其他方面。</font><font style="vertical-align: inherit;">您可以讨论这些问题，提出关于它们的问题，并在</font></font><a class="ulink" href="http://forums.mysql.com/list.php?44" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL XML用户论坛中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得来自其他用户的帮助</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      与这些函数一起使用的XPath表达式支持用户变量和本地存储的程序变量。</font><font style="vertical-align: inherit;">用户变量被弱检查; </font><font style="vertical-align: inherit;">对存储程序本地的变量进行强烈检查（另请参阅Bug＃26518）：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户变量（弱检查）。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            不检查</font><font style="vertical-align: inherit;">
            使用语法
             </font><font style="vertical-align: inherit;">（即用户变量）的变量。</font><font style="vertical-align: inherit;">如果变量的类型错误或者以前没有分配过值，则服务器不会发出警告或错误。</font><font style="vertical-align: inherit;">这也意味着用户对任何印刷错误负全部责任，因为如果（例如）</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">预期的</font><font style="vertical-align: inherit;">地方使用，
             </font><font style="vertical-align: inherit;">将不会给出警告
             </font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">$@<em class="replaceable"><code>variable_name</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">$@myvariable</code><font style="vertical-align: inherit;"></font><code class="literal">$@myvariable</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET @xml = '&lt;a&gt;&lt;b&gt;X&lt;/b&gt;&lt;b&gt;Y&lt;/b&gt;&lt;/a&gt;';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SET @i =1, @j = 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @i, ExtractValue(@xml, '//b[$@i]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@i | </font><font style="vertical-align: inherit;">ExtractValue（@xml，'// b [$ @ i]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">X |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @j, ExtractValue(@xml, '//b[$@j]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@j | </font><font style="vertical-align: inherit;">ExtractValue（@xml，'// b [$ @ j]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">Y |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @k, ExtractValue(@xml, '//b[$@k]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@k | </font><font style="vertical-align: inherit;">ExtractValue（@xml，'// b [$ @ k]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储程序中的变量（强力检查）。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            当在存储程序中调用这些函数时，可以声明</font><font style="vertical-align: inherit;">
            使用该语法的变量并将其
             </font><font style="vertical-align: inherit;">与这些函数一起使用。</font><font style="vertical-align: inherit;">这些变量对于定义它们的存储程序是局部的，并且强烈检查类型和值。
          </font></font><code class="literal">$<em class="replaceable"><code>variable_name</code></em></code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>DELIMITER |</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>CREATE PROCEDURE myproc ()</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>BEGIN</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;    </font></font><strong class="userinput"><code>DECLARE i INT DEFAULT 1;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;   </font></font><strong class="userinput"><code>DECLARE xml VARCHAR(25) DEFAULT '&lt;a&gt;X&lt;/a&gt;&lt;a&gt;Y&lt;/a&gt;&lt;a&gt;Z&lt;/a&gt;';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;    </font></font><strong class="userinput"><code>WHILE i &lt; 4 DO</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>SELECT xml, i, ExtractValue(xml, '//a[$i]');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>SET i = i+1;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;    </font></font><strong class="userinput"><code>END WHILE;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>END |</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>DELIMITER ;</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CALL myproc();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">xml | </font><font style="vertical-align: inherit;">我| </font><font style="vertical-align: inherit;">ExtractValue（xml，'// a [$ i]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">&lt;a&gt; X &lt;/a&gt; &lt;a&gt; Y &lt;/a&gt; &lt;a&gt; Z &lt;/a&gt; | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">X |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">xml | </font><font style="vertical-align: inherit;">我| </font><font style="vertical-align: inherit;">ExtractValue（xml，'// a [$ i]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">&lt;a&gt; X &lt;/a&gt; &lt;a&gt; Y &lt;/a&gt; &lt;a&gt; Z &lt;/a&gt; | </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">Y |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">xml | </font><font style="vertical-align: inherit;">我| </font><font style="vertical-align: inherit;">ExtractValue（xml，'// a [$ i]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">&lt;a&gt; X &lt;/a&gt; &lt;a&gt; Y &lt;/a&gt; &lt;a&gt; Z &lt;/a&gt; | </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">Z |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- + --- + ------------------ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font>
</pre><p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为参数传入的存储例程中的XPath表达式中使用的变量也受到严格检查。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      包含用户变量或存储程序本地变量的表达式必须符合包含XPath 1.0规范中给定变量的XPath表达式的规则（除符号外）。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        用于存储XPath表达式的用户变量被视为空字符串。</font><font style="vertical-align: inherit;">因此，将XPath表达式存储为用户变量是不可能的。</font><font style="vertical-align: inherit;">（Bug＃32911）
</font></font></p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_extractvalue"></a><p>
          <a class="indexterm" name="idm140528081577904"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue(<em class="replaceable"><code>xml_frag</code></em>,
          <em class="replaceable"><code>xpath_expr</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要两个字符串参数，一个XML标记片段
           </font></font><em class="replaceable"><code>xml_frag</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和一个XPath表达式
           </font></font><em class="replaceable"><code>xpath_expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（也称为
           </font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定位器</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）; </font><font style="vertical-align: inherit;">它将返回</font></font><code class="literal">CDATA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个文本节点</font><font style="vertical-align: inherit;">的text（</font><font style="vertical-align: inherit;">），该节点是由XPath表达式匹配的一个或多个元素的子元素。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用此功能相当于使用</font></font><em class="replaceable"><code>xpath_expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加后</font><font style="vertical-align: inherit;">执行匹配</font></font><code class="literal">/text()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">换句话说，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue('&lt;a&gt;&lt;b&gt;Sakila&lt;/b&gt;&lt;/a&gt;',
          '/a/b')</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue('&lt;a&gt;&lt;b&gt;Sakila&lt;/b&gt;&lt;/a&gt;',
          '/a/b/text()')</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">产生相同的结果。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果找到多个匹配项，则每个匹配元素的第一个子文本节点的内容将作为单个空格分隔的字符串返回（按匹配的顺序）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果为表达式（包括隐式</font></font><code class="literal">/text()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">找到没有匹配的文本节点</font><font style="vertical-align: inherit;">- 无论</font><font style="vertical-align: inherit;">出于</font><font style="vertical-align: inherit;">何种原因，只要
           </font></font><em class="replaceable"><code>xpath_expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效，并且
           </font></font><em class="replaceable"><code>xml_frag</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由正确嵌套和关闭的元素组成 - 则返回空字符串。</font><font style="vertical-align: inherit;">在空元素上的匹配和完全不匹配之间没有区别。</font><font style="vertical-align: inherit;">这是设计。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您需要确定是否找不到匹配的元素，</font></font><em class="replaceable"><code>xml_frag</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font><font style="vertical-align: inherit;">找到了</font><font style="vertical-align: inherit;">这样的元素但不包含子文本节点，则应该测试使用XPath </font></font><code class="literal">count()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的表达式的结果
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，这两个语句都会返回一个空字符串，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b/&gt;&lt;/a&gt;', '/a/b');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; &lt;b /&gt; &lt;/a&gt;'，'/ a / b'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;c/&gt;&lt;/a&gt;', '/a/b');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; &lt;c /&gt; &lt;/a&gt;'，'/ a / b'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          但是，您可以使用以下命令确定是否确实存在匹配的元素：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b/&gt;&lt;/a&gt;', 'count(/a/b)');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; &lt;b /&gt; &lt;/a&gt;'，'count（/ a / b）'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;c/&gt;&lt;/a&gt;', 'count(/a/b)');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; &lt;c /&gt; &lt;/a&gt;'，'count（/ a / b）'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅返回
             </font></font><code class="literal">CDATA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且不会返回可能包含在匹配标记中的任何标记，也不会返回其任何内容（请参阅</font></font><code class="literal">val1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            下面示例中</font><font style="vertical-align: inherit;">返回的结果</font><font style="vertical-align: inherit;">）。
</font></font></p>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '/a') AS val1,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '/a/b') AS val2,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '//b') AS val3,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '/b') AS val4,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;b&gt;eee&lt;/b&gt;&lt;/a&gt;', '//b') AS val5;</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + ------ + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">val1 | </font><font style="vertical-align: inherit;">val2 | </font><font style="vertical-align: inherit;">val3 | </font><font style="vertical-align: inherit;">val4 | </font><font style="vertical-align: inherit;">val5 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + ------ + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ccc | </font><font style="vertical-align: inherit;">ddd | </font><font style="vertical-align: inherit;">ddd | </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">ddd eee |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ + ------ + ------ + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此函数使用当前的SQL排序规则进行比较</font></font><code class="literal">contains()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在考虑其参数的排序规则强制性时</font><font style="vertical-align: inherit;">执行与其他字符串函数（如</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">相同的排序规则汇总
           </font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-collation-coercibility" title="10.8.4表达式中的排序强制性"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.8.4节“表达式中的校对可压缩性”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以获得关于这种行为的规则的解释。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （以前，二进制 - 即大小写敏感比较总是被使用。）
        </font></font></p><p>
          <code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>xml_frag</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含没有正确嵌套或关闭的元素，并且生成警告，则返回，如以下示例所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b', '//a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; c &lt;/a&gt; &lt;b'，'// a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1行，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：警告</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1525</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：不正确的XML值：'第1行解析错误pos 11：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         END-OF-INPUT意外（'&gt;'想要）'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '//a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; c &lt;/a&gt; &lt;b /&gt;'，'// a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><a name="function_updatexml"></a><p>
          <a class="indexterm" name="idm140528081529136"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_updatexml"><code class="literal">UpdateXML(<em class="replaceable"><code>xml_target</code></em>,
          <em class="replaceable"><code>xpath_expr</code></em>,
          <em class="replaceable"><code>new_xml</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数使用</font></font><em class="replaceable"><code>xml_target</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的XML片段</font><font style="vertical-align: inherit;">替换给定XML标记片段的单个部分</font></font><em class="replaceable"><code>new_xml</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后返回更改后的XML。</font><font style="vertical-align: inherit;">该部分
           </font></font><em class="replaceable"><code>xml_target</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被替换后与</font></font><em class="replaceable"><code>xpath_expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用户提供</font><font style="vertical-align: inherit;">的XPath表达式匹配</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果未</font></font><em class="replaceable"><code>xpath_expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到</font><font style="vertical-align: inherit;">表达式匹配
           </font><font style="vertical-align: inherit;">，或者找到多个匹配项，则该函数将返回原始
           </font></font><em class="replaceable"><code>xml_target</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML片段。</font><font style="vertical-align: inherit;">所有三个参数都应该是字符串。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/a', '&lt;e&gt;fff&lt;/e&gt;') AS val1,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/b', '&lt;e&gt;fff&lt;/e&gt;') AS val2,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '//b', '&lt;e&gt;fff&lt;/e&gt;') AS val3,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/a/d', '&lt;e&gt;fff&lt;/e&gt;') AS val4,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;d&gt;&lt;/d&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/a/d', '&lt;e&gt;fff&lt;/e&gt;') AS val5</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>\G</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
val1：&lt;e&gt; fff &lt;/ e&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
val2：&lt;a&gt; &lt;b&gt; ccc &lt;/ b&gt; &lt;d&gt; &lt;/ d&gt; &lt;/a&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
val3：&lt;a&gt; &lt;e&gt; fff &lt;/ e&gt; &lt;d&gt; &lt;/ d&gt; &lt;/a&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
val4：&lt;a&gt; &lt;b&gt; ccc &lt;/ b&gt; &lt;e&gt; fff &lt;/ e&gt; &lt;/a&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
val5：&lt;a&gt; &lt;d&gt; &lt;/ d&gt; &lt;b&gt; ccc &lt;/ b&gt; &lt;d&gt; &lt;/ d&gt; &lt;/a&gt;</font></font><font></font>
</pre></li></ul>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        关于XPath语法和用法的深入讨论超出了本手册的范围。</font><font style="vertical-align: inherit;">请参阅
         </font></font><a class="ulink" href="http://www.w3.org/TR/xpath" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML路径语言（XPath）1.0规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解权威信息。</font><font style="vertical-align: inherit;">对于那些XPath新手或希望进行基础知识复习的人来说，一个有用的资源是
         </font></font><a class="ulink" href="http://www.zvon.org/xxl/XPathTutorial/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zvon.org XPath教程</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font><a class="ulink" href="http://www.zvon.org/xxl/XPathTutorial/" target="_top"><font style="vertical-align: inherit;">教程</font></a><font style="vertical-align: inherit;">提供了多种语言版本。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下是一些基本XPath表达式的描述和示例：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">/<em class="replaceable"><code>tag</code></em></code>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          匹配
           </font><font style="vertical-align: inherit;">当且仅当
           </font><font style="vertical-align: inherit;">是根元素。
        </font></font><code class="literal">&lt;<em class="replaceable"><code>tag</code></em>/&gt;</code><font style="vertical-align: inherit;"></font><code class="literal">&lt;<em class="replaceable"><code>tag</code></em>/&gt;</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如：</font></font><code class="literal">/a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有在匹配
           </font></font><code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为它的最外（根）标签相匹配。</font><font style="vertical-align: inherit;">它与内部</font></font><em class="replaceable"><code>a</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">不匹配
           </font><font style="vertical-align: inherit;">，
           </font></font><code class="literal">&lt;b&gt;&lt;a/&gt;&lt;/b&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为在这种情况下，它是另一个元素的子元素。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">/<em class="replaceable"><code>tag1</code></em>/<em class="replaceable"><code>tag2</code></em></code>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          匹配
           </font><font style="vertical-align: inherit;">当且仅当它是孩子的
           </font><font style="vertical-align: inherit;">，并且
           </font><font style="vertical-align: inherit;">是根元素。
        </font></font><code class="literal">&lt;<em class="replaceable"><code>tag2</code></em>/&gt;</code><font style="vertical-align: inherit;"></font><code class="literal">&lt;<em class="replaceable"><code>tag1</code></em>/&gt;</code><font style="vertical-align: inherit;"></font><code class="literal">&lt;<em class="replaceable"><code>tag1</code></em>/&gt;</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例：</font></font><code class="literal">/a/b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML片段</font><font style="vertical-align: inherit;">中的
           </font><font style="vertical-align: inherit;">元素，
           </font></font><code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它是根元素的子元素</font></font><em class="replaceable"><code>a</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它没有匹配，
           </font></font><code class="literal">&lt;b&gt;&lt;a/&gt;&lt;/b&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为在这种情况下，</font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是根元素（因此是没有其他元素的子元素）。</font><font style="vertical-align: inherit;">XPath表达式也不匹配
           </font></font><code class="literal">&lt;a&gt;&lt;c&gt;&lt;b/&gt;&lt;/c&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">在这里，</font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个后代</font></font><em class="replaceable"><code>a</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但实际上并不是一个孩子的
           </font><font style="vertical-align: inherit;">后代
           </font></font><em class="replaceable"><code>a</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个构造可以扩展到三个或更多的元素。</font><font style="vertical-align: inherit;">例如，XPath表达式</font></font><code class="literal">/a/b/c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          匹配</font></font><em class="replaceable"><code>c</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">片段</font><font style="vertical-align: inherit;">中的</font><font style="vertical-align: inherit;">元素
           </font></font><code class="literal">&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;/b&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">//<em class="replaceable"><code>tag</code></em></code>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          匹配任何实例
           </font><font style="vertical-align: inherit;">。
        </font></font><code class="literal">&lt;<em class="replaceable"><code>tag</code></em>&gt;</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          示例：</font></font><code class="literal">//a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><em class="replaceable"><code>a</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下任何元素中</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">元素：
           </font></font><code class="literal">&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;/b&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
          </font></font><code class="literal">&lt;c&gt;&lt;a&gt;&lt;b/&gt;&lt;/a&gt;&lt;/b&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
          </font></font><code class="literal">&lt;c&gt;&lt;b&gt;&lt;a/&gt;&lt;/b&gt;&lt;/c&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <code class="literal">//</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以结合使用
           </font></font><code class="literal">/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">//a/b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          匹配</font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任一片段</font><font style="vertical-align: inherit;">中的</font><font style="vertical-align: inherit;">元素</font></font><code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或
           </font></font><code class="literal">&lt;c&gt;&lt;a&gt;&lt;b/&gt;&lt;/a&gt;&lt;/c&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p>
            <code class="literal">//<em class="replaceable"><code>tag</code></em></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一个常见的错误是将此混淆
             </font><font style="vertical-align: inherit;">，尽管后者的表达式实际上可能会导致非常不同的结果，如下所示：
          </font></font><code class="literal">/descendant-or-self::*/<em class="replaceable"><code>tag</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">/descendant-or-self::<em class="replaceable"><code>tag</code></em></code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET @xml = '&lt;a&gt;&lt;b&gt;&lt;c&gt;w&lt;/c&gt;&lt;b&gt;x&lt;/b&gt;&lt;d&gt;y&lt;/d&gt;z&lt;/b&gt;&lt;/a&gt;';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @xml;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@xml |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">&lt;a&gt; &lt;b&gt; &lt;c&gt; w &lt;/ c&gt; &lt;b&gt; x &lt;/ b&gt; &lt;d&gt; y &lt;/ d&gt; z &lt;/ b&gt; &lt;/a&gt; |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(@xml, '//b[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（@xml，'// b [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">xz |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(@xml, '//b[2]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（@xml，'// b [2]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::*/b[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（@ xml，'/ descendant-or-self :: * / b [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">xz |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.06秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::*/b[2]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（@ xml，'/ descendant-or-self :: * / b [2]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::b[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（@ xml，'/ descendant-or-self :: b [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">z |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::b[2]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（@ xml，'/ descendant-or-self :: b [2]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">x |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作者充当
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的任何元素相匹配。</font><font style="vertical-align: inherit;">例如，表达式</font></font><code class="literal">/*/b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何XML片段</font><font style="vertical-align: inherit;">中的
           </font><font style="vertical-align: inherit;">元素</font></font><code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">&lt;c&gt;&lt;b/&gt;&lt;/c&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，该表达式不会在片段中生成匹配项，
           </font></font><code class="literal">&lt;b&gt;&lt;a/&gt;&lt;/b&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它
           </font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是其他元素的子项。</font><font style="vertical-align: inherit;">通配符可用于任何位置：表达式</font></font><code class="literal">/*/b/*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将匹配</font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身不是根元素</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">元素的</font><font style="vertical-align: inherit;">任何子
           </font><font style="vertical-align: inherit;">元素。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以使用</font></font><code class="literal">|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）运算符</font><font style="vertical-align: inherit;">匹配多个定位器中的任何一个
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，表达式
           </font></font><code class="literal">//b|//c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">
          XML目标</font><font style="vertical-align: inherit;">中的所有
           </font><font style="vertical-align: inherit;">元素</font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em class="replaceable"><code>c</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          也可以根据一个或多个属性的值来匹配一个元素。</font><font style="vertical-align: inherit;">这使用语法完成
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，该表达式</font><font style="vertical-align: inherit;">
          与</font><font style="vertical-align: inherit;">片段</font><font style="vertical-align: inherit;">中的第二个</font><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要匹配
           </font><font style="vertical-align: inherit;">具有的</font><span class="emphasis"><em><font style="vertical-align: inherit;">任何</font></em></span><font style="vertical-align: inherit;">元素
           </font><font style="vertical-align: inherit;">，请使用XPath表达式
           </font><font style="vertical-align: inherit;">。
        </font></font><code class="literal"><em class="replaceable"><code>tag</code></em>[@<em class="replaceable"><code>attribute</code></em>="<em class="replaceable"><code>value</code></em>"]</code><font style="vertical-align: inherit;"></font><code class="literal">//b[@id="idB"]</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"></font><code class="literal">&lt;a&gt;&lt;b id="idA"/&gt;&lt;c/&gt;&lt;b
          id="idB"/&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"></font><span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font><code class="literal"><em class="replaceable"><code>attribute</code></em>="<em class="replaceable"><code>value</code></em>"</code><font style="vertical-align: inherit;"></font><code class="literal">//*[<em class="replaceable"><code>attribute</code></em>="<em class="replaceable"><code>value</code></em>"]</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要过滤多个属性值，只需连续使用多个属性比较子句即可。</font><font style="vertical-align: inherit;">例如，表达式</font></font><code class="literal">//b[@c="x"][@d="y"]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><code class="literal">&lt;b c="x" d="y"/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定XML片段中任何位置</font><font style="vertical-align: inherit;">的元素</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查找相同属性与多个值中的任何一个相匹配的元素，可以使用由</font></font><code class="literal">|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作员</font><font style="vertical-align: inherit;">加入的多个定位
           </font><font style="vertical-align: inherit;">符。</font><font style="vertical-align: inherit;">例如，要匹配</font><font style="vertical-align: inherit;">属性值为23或17的</font><font style="vertical-align: inherit;">所有
           </font></font><em class="replaceable"><code>b</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素
           </font></font><em class="replaceable"><code>c</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用表达式
           </font></font><code class="literal">//b[@c="23"]|//b[@c="17"]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">你也可以</font></font><code class="literal">or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此</font><font style="vertical-align: inherit;">使用逻辑</font><font style="vertical-align: inherit;">运算符：
           </font></font><code class="literal">//b[@c="23" or @c="17"]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            之间的区别</font></font><code class="literal">or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并
             </font></font><code class="literal">|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接条件，而</font></font><code class="literal">|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加入结果集。
</font></font></p>
</div>
</li></ul>
</div>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath限制。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些函数支持的XPath语法当前受到以下限制：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">'/a/b[@c=@d]'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不支持</font><font style="vertical-align: inherit;">
          Nodeset-to-nodeset比较（如
           </font><font style="vertical-align: inherit;">）。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          所有标准的XPath比较运算符都受支持。</font><font style="vertical-align: inherit;">（错误＃22823）
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          相对定位器表达式在根节点的上下文中解析。</font><font style="vertical-align: inherit;">例如，请考虑以下查询和结果：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;    </font></font><strong class="userinput"><code>'&lt;a&gt;&lt;b c="1"&gt;X&lt;/b&gt;&lt;b c="2"&gt;Y&lt;/b&gt;&lt;/a&gt;',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>'a/b'</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>) AS result;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">结果|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">XY |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.03秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这种情况下，定位器</font></font><code class="literal">a/b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析为
           </font></font><code class="literal">/a/b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          谓词中也支持相对定位符。</font><font style="vertical-align: inherit;">在以下示例中，</font></font><code class="literal">d[../@c="1"]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析为</font></font><code class="literal">/a/b[@c="1"]/d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;       </font></font><strong class="userinput"><code>'&lt;a&gt;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;         </font></font><strong class="userinput"><code>&lt;b c="1"&gt;&lt;d&gt;X&lt;/d&gt;&lt;/b&gt;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;         </font></font><strong class="userinput"><code>&lt;b c="2"&gt;&lt;d&gt;X&lt;/d&gt;&lt;/b&gt;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;       </font></font><strong class="userinput"><code>&lt;/a&gt;',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;       </font></font><strong class="userinput"><code>'a/b/d[../@c="1"]')</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>AS result;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">结果|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">X |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          定位符前面加上以标量值（包括变量引用，文字，数字和标量函数调用）来评估的表达式是不允许的，它们的使用会导致错误。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><code class="literal">::</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不支持</font><font style="vertical-align: inherit;">
          将</font><font style="vertical-align: inherit;">运算符与以下节点类型结合使用：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::comment()</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::text()</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::processing-instructions()</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::node()</code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          但是，支持名称测试（如
           </font><font style="vertical-align: inherit;">
          和</font><font style="vertical-align: inherit;">），如以下示例所示：
        </font></font><code class="literal"><em class="replaceable"><code>axis</code></em>::<em class="replaceable"><code>name</code></em></code><font style="vertical-align: inherit;"></font><code class="literal"><em class="replaceable"><code>axis</code></em>::*</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;c&gt;y&lt;/c&gt;&lt;/a&gt;','/a/child::b');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; &lt;b&gt; x &lt;/ b&gt; &lt;c&gt; y &lt;/ c&gt; &lt;/a&gt;'，'/ a / child :: b'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">x |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.02秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;c&gt;y&lt;/c&gt;&lt;/a&gt;','/a/child::*');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; &lt;b&gt; x &lt;/ b&gt; &lt;c&gt; y &lt;/ c&gt; &lt;/a&gt;'，'/ a / child :: *'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">xy |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font>
</pre></li><li class="listitem"><p>
          <span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向上和向下</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导航是不是在情况下，路径会导致支持</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的根元素。</font><font style="vertical-align: inherit;">也就是说，不能使用与给定元素的祖先的后代匹配的表达式，其中当前元素的一个或多个祖先也是根元素的祖先（参见Bug＃16321）。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下XPath函数不受支持，或者具有已知问题：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">id()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">lang()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">local-name()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">name()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">namespace-uri()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">normalize-space()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">starts-with()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">string()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">substring-after()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">substring-before()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">translate()</code>
</p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下轴不受支持：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">following-sibling</code>
            </p></li><li class="listitem"><p>
              <code class="literal">following</code>
            </p></li><li class="listitem"><p>
              <code class="literal">preceding-sibling</code>
            </p></li><li class="listitem"><p>
              <code class="literal">preceding</code>
</p></li></ul>
</div>
</li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      作为参数传递给XPath表达式
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能</font></font><code class="literal">:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在元素选择器中</font><font style="vertical-align: inherit;">包含冒号character（</font><font style="vertical-align: inherit;">），这使得它们可以与使用XML名称空间表示法的标记一起使用。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET @xml = '&lt;a&gt;111&lt;b:c&gt;222&lt;d&gt;333&lt;/d&gt;&lt;e:f&gt;444&lt;/e:f&gt;&lt;/b:c&gt;&lt;/a&gt;';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(@xml, '//e:f');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（@xml，'// e：f'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">444 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UpdateXML(@xml, '//b:c', '&lt;g:h&gt;555&lt;/g:h&gt;');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">UpdateXML（@xml，'// b：c'，'&lt;g：h&gt; 555 &lt;/ g：h&gt;'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">&lt;a&gt; 111 &lt;g：h&gt; 555 &lt;/ g：h&gt; &lt;/a&gt; |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这在某些方面与</font></font><a class="ulink" href="http://xalan.apache.org/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Xalan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和一些其他解析器</font><font style="vertical-align: inherit;">所允许的类似
       </font><font style="vertical-align: inherit;">，并且比要求名称空间声明或使用</font></font><code class="literal">namespace-uri()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      和</font></font><code class="literal">local-name()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">要简单得多</font><font style="vertical-align: inherit;">。
    </font></font></p><p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误处理。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于这两个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使用的XPath定位器必须有效和要搜索的XML必须由被正确地嵌套和关闭元件。</font><font style="vertical-align: inherit;">如果定位器无效，则会生成错误：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><span class="errortext"><font style="vertical-align: inherit;">错误1105（HY000）：XPATH语法错误：'＆a'</font></span></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '/&amp;a');</code></strong>
<span class="errortext"><font style="vertical-align: inherit;"></font></span>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果</font></font><em class="replaceable"><code>xml_frag</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不包含正确嵌套和关闭的元素，
       </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则返回并生成警告，如下例所示：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b', '//a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; c &lt;/a&gt; &lt;b'，'// a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1行，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：警告</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1525</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：不正确的XML值：'第1行解析错误pos 11：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         END-OF-INPUT意外（'&gt;'想要）'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '//a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ExtractValue（'&lt;a&gt; c &lt;/a&gt; &lt;b /&gt;'，'// a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        用作第三个参数替换XML到
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被
         </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查，以确定是否它仅由被正确地嵌套和关闭元件。
</font></font></p>
</div>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath注入。&nbsp;</font></font></b>
        <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当恶意代码被引入到系统中以获得对权限和数据的未经授权的访问时，就会发生</font></font><span class="firstterm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码注入</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它基于利用开发人员关于用户输入数据类型和内容的假设。</font><font style="vertical-align: inherit;">XPath在这方面也不例外。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这种情况可能发生的一种常见情况是应用程序通过使用如下所示的XPath表达式将登录名和密码的组合与XML文件中的相匹配来处理授权：
    </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// user [login / text（）='neapolitan'and password / text（）='1c3cr34m'] / attribute :: id
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这是一个像这样的SQL语句的XPath等价物：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT id FROM users WHERE login ='neapolitan'AND password ='1c3cr34m';
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用XPath的PHP应用程序可能会像这样处理登录过程：
    </font></font></p><pre data-lang="php" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;？PHP</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  $ file =“users.xml”;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  $ login = $ POST [“login”];</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  $ password = $ POST [“password”];</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  $ xpath =“// user [login / text（）= $ login and password / text（）= $ password] / attribute :: id”;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  if（file_exists（$ file））</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    $ xml = simplexml_load_file（$ file）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    if（$ result = $ xml-&gt; xpath（$ xpath））</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      回声“您现在以用户$ result [0]登录。”;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    其他</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      回声“无效的登录名或密码。”;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  其他</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    退出（“无法打开$文件。”）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
？&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      输入上不执行检查。</font><font style="vertical-align: inherit;">这意味着恶意用户可以</font><font style="vertical-align: inherit;">通过输入</font><font style="vertical-align: inherit;">登录名和密码</font><font style="vertical-align: inherit;">来</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">短路</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试
       </font></font><code class="literal">' or 1=1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从而得到</font></font><code class="varname">$xpath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下所示的评估结果：
    </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// user [login / text（）=''or 1 = 1 and password / text（）=''or 1 = 1] / attribute :: id
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由于方括号内的表达式总是评估为</font></font><code class="literal">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它实际上与这个匹配</font><font style="vertical-align: inherit;">XML文档</font></font><code class="literal">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中每个</font></font><code class="literal">user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">属性
       </font><font style="vertical-align: inherit;">的相同</font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//用户/属性:: ID
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这种特殊攻击可以绕过的一种方法是简单地通过引用定义中要插入的变量名</font></font><code class="literal">$xpath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，强制从Web表单传递的值被转换为字符串：
    </font></font></p><pre data-lang="simple" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ xpath =“// user [login / text（）='$ login'and password / text（）='$ password'] / attribute :: id”;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这与通常建议用于防止SQL注入攻击的策略是相同的。</font><font style="vertical-align: inherit;">一般来说，您应该遵循的防止XPath注入攻击的做法与防止SQL注入的做法相同：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从未接受过您的应用程序中用户未经测试的数据。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检查所有用户提交的数据类型; </font><font style="vertical-align: inherit;">拒绝或转换错误类型的数据
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          测试超出范围值的数字数据; </font><font style="vertical-align: inherit;">截断，舍入或拒绝超出范围的值。</font><font style="vertical-align: inherit;">为非法字符测试字符串，并将其除去或拒绝包含它们的输入。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不要输出明确的错误消息，这可能会向未经授权的用户提供可能用于危害系统的线索; </font><font style="vertical-align: inherit;">请将这些日志记录到文件或数据库表中。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      就像SQL注入攻击可以用来获取关于数据库模式的信息一样，XPath注入也可以用来遍历XML文件来揭示它们的结构，正如Amit Klein的论文
       </font></font><a class="ulink" href="http://www.packetstormsecurity.org/papers/bypass/Blind_XPath_Injection_20040518.pdf" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blind XPath Injection</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PDF文件，46KB）中所讨论的。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      检查发送回客户端的输出也很重要。</font><font style="vertical-align: inherit;">考虑一下当我们使用MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">时会发生什么
       </font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT ExtractValue(</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>LOAD_FILE('users.xml'),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>'//user[login/text()="" or 1=1 and password/text()="" or 1=1]/attribute::id'</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>) AS id;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">00327 13579 02403 42354 28570 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由于</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回多个匹配作为单个空格分隔的字符串，因此此注入攻击</font></font><code class="filename">users.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将用户中</font><font style="vertical-align: inherit;">包含的每个有效ID都</font><font style="vertical-align: inherit;">作为单行输出</font><font style="vertical-align: inherit;">提供
       </font><font style="vertical-align: inherit;">给用户。</font><font style="vertical-align: inherit;">作为额外的安全措施，您还应该在将输出返回给用户之前对其进行测试。</font><font style="vertical-align: inherit;">这是一个简单的例子：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT @id = ExtractValue(</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>LOAD_FILE('users.xml'),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>'//user[login/text()="" or 1=1 and password/text()="" or 1=1]/attribute::id'</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT IF(</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>INSTR(@id, ' ') = 0,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>@id,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>'Unable to retrieve user ID')</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>AS singleID;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">singleID |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">无法检索用户ID |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一般来说，安全返回数据给用户的准则与接受用户输入相同。</font><font style="vertical-align: inherit;">这些可以概括为：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          始终测试输出数据的类型和允许值。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          切勿允许未经授权的用户查看可能提供有关可用于利用该应用程序的应用程序信息的错误消息。
</font></font></p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="bit-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.12位功能和操作符</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528081300464"></a><a class="indexterm" name="idm140528081299008"></a><a class="indexterm" name="idm140528081297520"></a><a class="indexterm" name="idm140528081296448"></a><a class="indexterm" name="idm140528081295376"></a><a class="indexterm" name="idm140528081293920"></a><a class="indexterm" name="idm140528081292464"></a><a class="indexterm" name="idm140528081291392"></a>
<div class="table">
<a name="idm140528081290320"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.16位功能和操作符</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists bit functions and operators."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回设置的位数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位与
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-invert"><code class="literal">~</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位反转
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-or"><code class="literal">|</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-xor"><code class="literal">^</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位XOR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      左移
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      右移
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      位的函数和操作包括
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-or"><code class="literal">|</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-xor"><code class="literal">^</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-invert"><code class="literal">~</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能是在所描述的聚集函数</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-functions" title="12.19.1聚合（GROUP BY）功能描述"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.19.1，“集合（GROUP BY）函数描述”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。目前，位的函数和操作要求
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（64位整数）的参数和返回</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，因此它们具有最大的范围为64位。</font><font style="vertical-align: inherit;">其他类型的参数被转换为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并可能发生截断。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为MySQL 8.0改变了这种铸TO-的扩展</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位功能和经营许可证二进制字符串类型的参数（：行为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
      </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型），使他们能够获取参数并产生大于64位的返回值。</font><font style="vertical-align: inherit;">因此，MySQL 5.7中二进制参数的位操作可能在MySQL 8.0中产生不同的结果。</font><font style="vertical-align: inherit;">为了提前发现这种潜在的行为变化，服务器在MySQL8.0.11中为二进制参数未在MySQL8.0中转换为整数的位操作产生警告。</font><font style="vertical-align: inherit;">这些警告提供了重写受影响报表的机会。</font><font style="vertical-align: inherit;">要以升级到8.0后不会更改的方式显式生成MySQL 5.7行为，请将位操作二进制参数转换为整数。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      需要注意的五个有问题的表达类型是：
    </font></font></p><pre data-lang="sql" class="programlisting"><em class="replaceable"><code>nonliteral_binary</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{＆| </font><font style="vertical-align: inherit;">^} </font><font style="vertical-align: inherit;">  {＆| </font><font style="vertical-align: inherit;">^} </font><font style="vertical-align: inherit;">{&lt;&lt; &gt;&gt;} </font><font style="vertical-align: inherit;">
〜</font><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">）
</font></font><em class="replaceable"><code>binary</code></em>
<em class="replaceable"><code>binary</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>nonliteral_binary</code></em>
<em class="replaceable"><code>nonliteral_binary</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>anything</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>nonliteral_binary</code></em>
<em class="replaceable"><code>AGGR_BIT_FUNC</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>nonliteral_binary</code></em><font style="vertical-align: inherit;"></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些表达式</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在MySQL 5.7中</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">，8.0中的二进制字符串。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      符号说明：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">{ <em class="replaceable"><code>op1</code></em>
          <em class="replaceable"><code>op2</code></em> ... }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：适用于给定表达式类型的运算符列表。
        </font></font></p></li><li class="listitem"><p>
          <em class="replaceable"><code>binary</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：任何类型的二进制字符串参数，包括十六进制文字，位立即数或
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字。
        </font></font></p></li><li class="listitem"><p>
          <em class="replaceable"><code>nonliteral_binary</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：一个参数，它是除十六进制文字，位字面量或</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字外</font><font style="vertical-align: inherit;">的二进制字符串值</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p>
          <em class="replaceable"><code>AGGR_BIT_FUNC</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：一个聚集函数，它位值参数：
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      服务器为语句中的每个有问题的表达式生成单个警告，而不是处理每行的警告。</font><font style="vertical-align: inherit;">假设包含两个有问题的表达式的语句从表中选择三行。</font><font style="vertical-align: inherit;">每个语句执行的警告次数是两次，而不是六次。</font><font style="vertical-align: inherit;">以下示例说明了这一点。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t(vbin1 VARBINARY(32), vbin2 VARBINARY(32));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.03秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t VALUES (3,1), (3,2), (3,3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，3行受影响（0.01秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：3重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT HEX(vbin1 &amp; vbin2) AS op1,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>HEX(vbin1 | vbin2) AS op2</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">op1 | </font><font style="vertical-align: inherit;">op2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行，2个警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：警告</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1287</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：BINARY上的按位操作将在未来改变行为</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         版本，请检查手册中的“位功能”部分。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 2. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：警告</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1287</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：BINARY上的按位操作将在未来改变行为</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         版本，请检查手册中的“位功能”部分。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为避免在升级到MySQL 8.0之后受影响的语句产生不同的结果，请重写它，以避免产生位操作警告。</font><font style="vertical-align: inherit;">要做到这一点，投至少一个二进制参数</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST(... AS UNSIGNED)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这使得MySQL 5.7隐式二进制到整型的转换显式化：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT HEX(CAST(vbin1 AS UNSIGNED) &amp; CAST(vbin2 AS UNSIGNED)) AS op1,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>HEX(CAST(vbin1 AS UNSIGNED) | CAST(vbin2 AS UNSIGNED)) AS op2</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">op1 | </font><font style="vertical-align: inherit;">op2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3行（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空集（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通过重写如下所示的语句，MySQL 8.0尊重将二进制参数视为整数的意图，并产生与5.7中相同的结果。</font><font style="vertical-align: inherit;">另外，从MySQL 5.7到8.0的复制语句在不同的服务器上不会产生不同的结果。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      无法重写的受影响语句在升级和复制方面存在这些潜在问题：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          升级到MySQL 8.0后，该语句可能会返回不同的结果。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于基于语句和混合格式的二进制日志记录，从旧版本复制到MySQL 8.0可能会失败。</font><font style="vertical-align: inherit;">在8.0服务器上重播旧的二进制日志也是如此（例如，使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog  - 处理二进制日志文件的实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlbinlog</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">为避免这种情况，请切换到旧主服务器上的基于行的二进制日志记录。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下列表描述了可用的位功能和操作符：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="operator_bitwise-or"></a><p>
          <a class="indexterm" name="idm140528081191680"></a>

          <a class="indexterm" name="idm140528081190608"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-or"><code class="literal">|</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          按位或。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是一个无符号的64位整数。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 29 | 15;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 31</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_bitwise-and"></a><p>
          <a class="indexterm" name="idm140528081180800"></a>

          <a class="indexterm" name="idm140528081179712"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          按位与。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是一个无符号的64位整数。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 29 &amp; 15;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 13</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_bitwise-xor"></a><p>
          <a class="indexterm" name="idm140528081169904"></a>

          <a class="indexterm" name="idm140528081168832"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-xor"><code class="literal">^</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          按位XOR。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是一个无符号的64位整数。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 ^ 1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 ^ 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 11 ^ 3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 8</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_left-shift"></a><p>
          <a class="indexterm" name="idm140528081157584"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a>
        </p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向左</font><font style="vertical-align: inherit;">
          移动longlong（</font><font style="vertical-align: inherit;">）数字。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是一个无符号的64位整数。</font><font style="vertical-align: inherit;">该值被截断为64位。</font><font style="vertical-align: inherit;">特别是，如果移位计数大于或等于无符号64位数的宽度，则结果为零。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 &lt;&lt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_right-shift"></a><p>
          <a class="indexterm" name="idm140528081146672"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a>
        </p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向右</font><font style="vertical-align: inherit;">
          移动一长串（</font><font style="vertical-align: inherit;">）数字。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是一个无符号的64位整数。</font><font style="vertical-align: inherit;">该值被截断为64位。</font><font style="vertical-align: inherit;">特别是，如果移位计数大于或等于无符号64位数的宽度，则结果为零。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 4 &gt;&gt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_bitwise-invert"></a><p>
          <a class="indexterm" name="idm140528081135856"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_bitwise-invert"><code class="literal">~</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          反转所有位。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是一个无符号的64位整数。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 5 &amp; ~1;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font>
</pre></li><li class="listitem"><a name="function_bit-count"></a><p>
          <a class="indexterm" name="idm140528081126432"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-count"><code class="literal">BIT_COUNT(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回参数中设置的位数，
           </font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无符号64位整数或
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT BIT_COUNT(29), BIT_COUNT(b'101010');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4，3</font></font><font></font>
</pre></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="encryption-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.13加密和压缩函数</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528081115936"></a><a class="indexterm" name="idm140528081114896"></a>
<div class="table">
<a name="idm140528081113408"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.17加密函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists encryption functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用AES解密
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用AES加密
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-decrypt"><code class="literal">ASYMMETRIC_DECRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用私钥或公钥解密密文
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-derive"><code class="literal">ASYMMETRIC_DERIVE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从非对称密钥导出对称密钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用私钥或公钥加密明文
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-sign"><code class="literal">ASYMMETRIC_SIGN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从摘要生成签名
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-verify"><code class="literal">ASYMMETRIC_VERIFY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      验证签名是否与摘要匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_compress"><code class="literal">COMPRESS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将结果作为二进制字符串返回
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建私钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-pub-key"><code class="literal">CREATE_ASYMMETRIC_PUB_KEY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建公钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      生成共享的DH秘密
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-digest"><code class="literal">CREATE_DIGEST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从字符串生成摘要
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_decode"><code class="literal">DECODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.2）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解码使用ENCODE（）加密的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解密一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加密一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.2）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      编码一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      加密一个字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算MD5校验和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回PASSWORD的4.1之前版本的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算并返回一个密码字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_random-bytes"><code class="literal">RANDOM_BYTES()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个随机字节向量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">SHA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算SHA-1 160位校验和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      计算SHA-2校验和
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      解压缩压缩的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uncompressed-length"><code class="literal">UNCOMPRESSED_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      压缩前返回字符串的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      确定密码的强度
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      许多加密和压缩函数返回的结果可能包含任意字节值的字符串。</font><font style="vertical-align: inherit;">如果你想存储这些结果，使用与一列
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制字符串数据类型。</font><font style="vertical-align: inherit;">这将避免与后空间移除或字符集转换，将改变的数据值，如潜在的问题如果使用非二进制字符串数据类型（可能会发生</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一些加密函数返回ASCII字符的字符串：
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它们的返回值是一个字符串，它具有由</font><font style="vertical-align: inherit;">系统变量</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">确定的字符集和归类
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是一个非二进制字符串，除非字符集是
       </font></font><code class="literal">binary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果应用程序存储来自诸如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回十六进制数字字符串的</font><font style="vertical-align: inherit;">函数的值，
       </font><font style="vertical-align: inherit;">则可以通过将十六进制表示形式转换为二进制形式来获得更高效的存储和比较
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并将结果存储在
       </font><font style="vertical-align: inherit;">
      列中。</font><font style="vertical-align: inherit;">每一对十六进制数字都需要一个二进制形式的字节，所以其值</font><font style="vertical-align: inherit;">取决于十六进制字符串的长度。</font><font style="vertical-align: inherit;">值为16，</font><font style="vertical-align: inherit;">值为20
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因为
       </font><font style="vertical-align: inherit;">，
       </font><font style="vertical-align: inherit;">取值范围从28到32，取决于指定结果所需位长度的参数。
    </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY(<em class="replaceable"><code>N</code></em>)</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果将值存储在使用</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集</font><font style="vertical-align: inherit;">的列中</font><font style="vertical-align: inherit;">（每个字符使用4个字节）</font><font style="vertical-align: inherit;">，则将</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">存储在列中</font><font style="vertical-align: inherit;">
      的大小限制
       </font><font style="vertical-align: inherit;">至少为两次，最多为八次
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">由于值较大，并且需要考虑字符集归类规则，所以存储该字符串也会导致较慢的比较。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      假设应用程序将</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串值</font><font style="vertical-align: inherit;">存储
       </font><font style="vertical-align: inherit;">在
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR(32)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE md5_tbl（md5_val CHAR（32），...）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO md5_tbl（md5_val，...）VALUES（MD5（'abcdef'），...）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要将十六进制字符串转换为更紧凑的形式，请修改要使用的应用程序</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_unhex"><code class="literal">UNHEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY(16)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替如下：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE md5_tbl（md5_val BINARY（16），...）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO md5_tbl（md5_val，...）VALUES（UNHEX（MD5（'abcdef'）），...）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      应用程序应该准备好处理哈希函数为两个不同输入值生成相同值的非常罕见的情况。</font><font style="vertical-align: inherit;">一种可以检测到冲突的方法是将哈希列作为主键。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MD5和SHA-1算法的漏洞已被人们所知。</font><font style="vertical-align: inherit;">您可能希望考虑使用本节中介绍的另一种单向加密功能，例如
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        作为加密函数参数提供的密码或其他敏感值以明文形式发送到MySQL服务器，除非使用SSL连接。</font><font style="vertical-align: inherit;">另外，这些值将出现在它们写入的任何MySQL日志中。</font><font style="vertical-align: inherit;">为了避免这些类型的暴露，应用程序可以在将它们发送到服务器之前对客户端的敏感值进行加密。</font><font style="vertical-align: inherit;">同样的考虑适用于加密密钥。</font><font style="vertical-align: inherit;">为了避免暴露这些，应用程序可以使用存储过程来加密和解密服务器端的值。
</font></font></p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_aes-decrypt"></a><p>
          <a class="indexterm" name="idm140528080972880"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT(<em class="replaceable"><code>crypt_str</code></em>,<em class="replaceable"><code>key_str</code></em>[,<em class="replaceable"><code>init_vector</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该功能使用官方AES（高级加密标准）算法解密数据。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可选的初始化向量参数，
           </font></font><em class="replaceable"><code>init_vector</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.4开始可用。</font><font style="vertical-align: inherit;">从那个版本开始，使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的语句对于基于语句的复制是不安全的，并且不能存储在查询缓存中。
        </font></font></p></li><li class="listitem"><a name="function_aes-encrypt"></a><p>
          <a class="indexterm" name="idm140528080960416"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>key_str</code></em>[,<em class="replaceable"><code>init_vector</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用官方AES（高级加密标准）算法对数据进行加密和解密，以前称为
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rijndael”。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AES标准允许各种密钥长度。</font><font style="vertical-align: inherit;">默认情况下，这些函数实现128位密钥长度的AES。</font><font style="vertical-align: inherit;">从MySQL 5.7.4开始，可以使用196或256位的密钥长度，如后面所述。</font><font style="vertical-align: inherit;">密钥长度是性能和安全性之间的折衷。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用密钥字符串</font><font style="vertical-align: inherit;">加密</font><font style="vertical-align: inherit;">字符串
           </font></font><em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并返回包含加密输出的二进制字符串。
          </font><font style="vertical-align: inherit;">使用密钥字符串</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解密加密</font></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的字符串</font></font><em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并返回原始的明文字符串。</font><font style="vertical-align: inherit;">如果任一函数参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，函数返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数可以是任何长度，并且填充被自动添加到
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以它是所要求的基于块的算法，如AES的块的倍数。</font><font style="vertical-align: inherit;">该填充由</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">自动删除
           </font><font style="vertical-align: inherit;">。</font></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用这个公式计算</font><font style="vertical-align: inherit;">长度</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="clike" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16 *（trunc（</font></font><em class="replaceable"><code>string_length</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ 16）+ 1）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于128位的密钥长度，将密钥传递给</font></font><em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">的最安全方法</font><font style="vertical-align: inherit;">是创建一个真正的随机128位值并将其作为二进制值传递。</font><font style="vertical-align: inherit;">例如：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入到t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VALUES（1，AES_ENCRYPT（'text'，UNHEX（'F3229A0B371ED2D9441B830D21A390C3'）））;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          密码可以用来通过对密码进行散列来生成AES密钥。</font><font style="vertical-align: inherit;">例如：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入到t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VALUES（1，AES_ENCRYPT（'text'，UNHEX（SHA2（'My secret passphrase'，512））））;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不要直接传递密码或密码
           </font></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，先将其散列。</font><font style="vertical-align: inherit;">本文档的以前版本提出了前一种方法，但不再推荐使用，因为这里显示的示例更安全。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检测到无效数据或不正确的填充，它会返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，</font><font style="vertical-align: inherit;">如果输入数据或密钥无效</font><font style="vertical-align: inherit;">，可能
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会返回一个非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值（可能是垃圾）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如MySQL的5.7.4中，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述块加密模式的许可控制和一个可选
           </font></font><em class="replaceable"><code>init_vector</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始化向量的参数：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              所述</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_block_encryption_mode"><code class="literal">block_encryption_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              系统变量控制用于基于块的加密算法的模式。</font><font style="vertical-align: inherit;">它的默认值是
               </font></font><code class="literal">aes-128-ecb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它表示使用密钥长度为128位和ECB模式进行加密。</font><font style="vertical-align: inherit;">有关此变量的允许值的说明，请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              可选</font></font><em class="replaceable"><code>init_vector</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              参数为需要它的块加密模式提供初始化向量。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于需要可选</font></font><em class="replaceable"><code>init_vector</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数的</font><font style="vertical-align: inherit;">模式
           </font><font style="vertical-align: inherit;">，它必须是16个字节或更长（忽略超过16个字节的字节）。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>init_vector</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺少，</font><font style="vertical-align: inherit;">则会发生错误</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于不需要的模式
           </font></font><em class="replaceable"><code>init_vector</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将被忽略，并且如果指定了它，则会生成警告。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过调用可以产生用于初始化向量的随机字符串
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_random-bytes"><code class="literal">RANDOM_BYTES(16)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于需要初始化矢量的加密模式，必须使用相同的矢量进行加密和解密。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET block_encryption_mode = 'aes-256-cbc';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @key_str = SHA2('My secret passphrase',512);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @init_vector = RANDOM_BYTES(16);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @crypt_str = AES_ENCRYPT('text',@key_str,@init_vector);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT AES_DECRYPT(@crypt_str,@key_str,@init_vector);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">AES_DECRYPT（@ crypt_str，@ key_str，@ init_vector）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文字|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表列出了每个允许的块加密模式，支持它的SSL库以及是否需要初始化向量参数。
</font></font></p>
<div class="informaltable">
<table summary="The permitted encryption modes, the SSL libraries that support each mode, and whether the initialization vector argument is required for the mode."><colgroup><col width="30%"><col width="35%"><col width="35%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阻止加密模式</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持模式的SSL库</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始化向量必需</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欧洲央行</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL，yaSSL</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBC</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL，yaSSL</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CFB1</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL的</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CFB8</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL的</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CFB128</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL的</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OFB</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL的</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.4开始，</font><font style="vertical-align: inherit;">对基于语句的复制</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不安全的语句不能存储在查询缓存中。
        </font></font></p></li><li class="listitem"><a name="function_compress"></a><p>
          <a class="indexterm" name="idm140528080879040"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_compress"><code class="literal">COMPRESS(<em class="replaceable"><code>string_to_compress</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          压缩一个字符串并将结果作为二进制字符串返回。</font><font style="vertical-align: inherit;">这个函数需要MySQL使用压缩库进行编译，例如</font></font><code class="literal">zlib</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，返回值总是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">压缩的字符串可以解压缩
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LENGTH(COMPRESS(REPEAT('a',1000)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 21</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LENGTH(COMPRESS(''));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LENGTH(COMPRESS('a'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 13</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LENGTH(COMPRESS(REPEAT('a',16)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 15</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          压缩的字符串内容按以下方式存储：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              空字符串存储为空字符串。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              非空字符串存储为未压缩字符串的4字节长度（低字节在前），后面是压缩字符串。</font><font style="vertical-align: inherit;">如果字符串以空格结尾，</font></font><code class="literal">.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则添加</font><font style="vertical-align: inherit;">一个额外
               </font><font style="vertical-align: inherit;">字符以避免结果存储在a </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中时</font><font style="vertical-align: inherit;">出现端点修整问题
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（然而，使用非二进制字符串数据类型如
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不建议存储压缩字符串无论如何，因为可能会发生字符集转换。使用
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制字符串列来代替。）
</font></font></p></li></ul>
</div>
</li><li class="listitem"><a name="function_decode"></a><p>
          <a class="indexterm" name="idm140528080853376"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_decode"><code class="literal">DECODE(<em class="replaceable"><code>crypt_str</code></em>,<em class="replaceable"><code>pass_str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_decode"><code class="literal">DECODE()</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用
           </font></font><em class="replaceable"><code>pass_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码</font><font style="vertical-align: inherit;">解密加密的字符串</font><font style="vertical-align: inherit;">。
          </font></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该是从返回的字符串</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_decode"><code class="literal">DECODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数在MySQL 5.7中被弃用，将在未来的MySQL版本中被删除，并且不应再被使用。</font><font style="vertical-align: inherit;">考虑使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_des-decrypt"></a><p>
          <a class="indexterm" name="idm140528080836016"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT(<em class="replaceable"><code>crypt_str</code></em>[,<em class="replaceable"><code>key_str</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          解密用加密的字符串
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生错误，则此函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          只有MySQL已经配置了SSL支持，该功能才有效。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#encrypted-connections" title="6.4使用加密连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.4节“使用加密连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果未</font></font><em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出参数，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查加密字符串的第一个字节以确定用于加密原始字符串的DES密钥编号，然后从DES密钥文件中读取密钥以解密消息。</font><font style="vertical-align: inherit;">为此，用户必须有
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_super"><code class="literal">SUPER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限。</font><font style="vertical-align: inherit;">密钥文件可以用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#option_mysqld_des-key-file"><code class="option">--des-key-file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器选项</font><font style="vertical-align: inherit;">指定
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您将此函数传递给一个</font></font><em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数，则该字符串将用作解密消息的密钥。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数看起来不是加密的字符串，MySQL会返回给定的
           </font></font><em class="replaceable"><code>crypt_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数从MySQL 5.7.6开始不推荐使用，将在未来的MySQL版本中被删除，不应再使用。</font><font style="vertical-align: inherit;">考虑使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_des-encrypt"></a><p>
          <a class="indexterm" name="idm140528080812352"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT(<em class="replaceable"><code>str</code></em>[,{<em class="replaceable"><code>key_num</code></em>|<em class="replaceable"><code>key_str</code></em>}])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用Triple-DES算法对给定密钥加密字符串。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          只有MySQL已经配置了SSL支持，该功能才有效。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#encrypted-connections" title="6.4使用加密连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.4节“使用加密连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果给出了加密密钥，则根据第二个参数选择要使用的加密密钥</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">没有参数时，将使用DES密钥文件的第一个密钥。</font><font style="vertical-align: inherit;">使用</font></font><em class="replaceable"><code>key_num</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数时，将使用来自DES密钥文件的给定密钥编号（0到9）。</font><font style="vertical-align: inherit;">使用</font></font><em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，给定的密钥字符串用于加密
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          密钥文件可以用</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#option_mysqld_des-key-file"><code class="option">--des-key-file</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器选项</font><font style="vertical-align: inherit;">指定
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串是第一个字符所在的二进制字符串</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生错误，则</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_char"><code class="literal">CHAR(128 |
          <em class="replaceable"><code>key_num</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          添加128以便更容易识别加密的密钥。</font><font style="vertical-align: inherit;">如果您使用字符串键，
           </font></font><em class="replaceable"><code>key_num</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则为127。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果的字符串长度由以下公式给出：
        </font></font></p><pre data-lang="clike" class="programlisting"><em class="replaceable"><code>new_len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><em class="replaceable"><code>orig_len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+（8  - （</font></font><em class="replaceable"><code>orig_len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％8））+ 1
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          DES密钥文件中的每行都有以下格式：
        </font></font></p><pre data-lang="ini" class="programlisting"><em class="replaceable"><code>key_num</code></em> <em class="replaceable"><code>des_key_str</code></em>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个</font></font><em class="replaceable"><code>key_num</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值必须是从</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜到
           </font><font style="vertical-align: inherit;">的范围内的数字</font></font><code class="literal">9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">文件中的行可以以任何顺序排列。
          </font></font><em class="replaceable"><code>des_key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是用于加密邮件的字符串。</font><font style="vertical-align: inherit;">号码和密钥之间至少应有一个空格。</font><font style="vertical-align: inherit;">第一个键是在未指定任何键参数时使用的默认键</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以告诉MySQL使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#flush-des-key-file"><code class="literal">FLUSH DES_KEY_FILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          语句</font><font style="vertical-align: inherit;">从密钥文件中读取新的密钥值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这需要
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_reload"><code class="literal">RELOAD</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          拥有一组默认密钥的一个好处是它为应用程序提供了一种方法来检查加密列值的存在，而不会给最终用户解密这些值的权利。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数从MySQL 5.7.6开始不推荐使用，将在未来的MySQL版本中被删除，不应再使用。</font><font style="vertical-align: inherit;">考虑使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是。
</font></font></p>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql </font></font><strong class="userinput"><code>SELECT customer_address FROM customer_table </code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;</font></font><strong class="userinput"><code>WHERE crypted_credit_card = DES_ENCRYPT('credit_card_number');</code></strong>
</pre></li><li class="listitem"><a name="function_encode"></a><p>
          <a class="indexterm" name="idm140528080771408"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pass_str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE()</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用
           </font></font><em class="replaceable"><code>pass_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码进行</font><font style="vertical-align: inherit;">加密
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果是一个长度与二进制字符串相同的二进制字符串
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要解密结果，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_decode"><code class="literal">DECODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_decode"><code class="literal">DECODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数在MySQL 5.7中被弃用，将在未来的MySQL版本中被删除，并且不应再被使用。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您仍然需要使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encode"><code class="literal">ENCODE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，必须使用盐值来降低风险。</font><font style="vertical-align: inherit;">例如：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENCODE（'cleartext'，CONCAT（'my_random_salt'，'my_secret_password'））
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          密码更新时必须使用新的随机salt值。
        </font></font></p></li><li class="listitem"><a name="function_encrypt"></a><p>
          <a class="indexterm" name="idm140528080753392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_encrypt"><code class="literal">ENCRYPT(<em class="replaceable"><code>str</code></em>[,<em class="replaceable"><code>salt</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Unix
           </font></font><code class="function">crypt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统调用进行</font><font style="vertical-align: inherit;">
          加密</font><font style="vertical-align: inherit;">并返回一个二进制字符串。</font><font style="vertical-align: inherit;">该</font></font><em class="replaceable"><code>salt</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数必须是一个字符串至少有两个字符或结果将是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果没有</font></font><em class="replaceable"><code>salt</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给出参数，则使用随机值。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数从MySQL 5.7.6开始不推荐使用，将在未来的MySQL版本中删除，不应再使用。</font><font style="vertical-align: inherit;">对于单向散列，请考虑使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ENCRYPT('hello');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'VxuFAJXVARROc'</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至少在某些系统上</font><font style="vertical-align: inherit;">忽略除前八个字符以外的所有字符</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此行为由底层</font></font><code class="function">crypt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          系统调用</font><font style="vertical-align: inherit;">的实现决定</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
           </font></font><code class="literal">ucs2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">utf16le</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code class="literal">utf32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不建议多字节字符集，因为系统调用需要一个零字节结束的字符串。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><code class="function">crypt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的系统不可用（与Windows一样），则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">始终返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_md5"></a><p>
          <a class="indexterm" name="idm140528080726416"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计算字符串的MD5 128位校验和。</font><font style="vertical-align: inherit;">该值以32个十六进制数字的字符串形式返回，或者
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，返回值可以用作散列键。</font><font style="vertical-align: inherit;">请参阅本节开始部分关于有效存储散列值的注释。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回值是连接字符集中的一个字符串。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MD5('testing');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'ae2b1fca515949e5d54fb22b8ed95575'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这是</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA Data Security，Inc. MD5消息摘要算法”。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请参阅本节开始部分关于MD5算法的注释。
        </font></font></p></li><li class="listitem"><a name="function_old-password"></a><p>
          <a class="indexterm" name="idm140528080713360"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_old-password"><code class="literal">OLD_PASSWORD(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在MySQL 4.1中更改</font><font style="vertical-align: inherit;">实施</font><font style="vertical-align: inherit;">以提高安全性</font><font style="vertical-align: inherit;">时添加了该选项
           </font><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将4.1之前的实现值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为字符串返回，并且旨在允许您为任何需要连接到MySQL服务器而不锁定它们的任何4.1之前的客户端重置密码。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#password-hashing" title="6.1.2.4 MySQL中的密码散列"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.1.2.4节“MySQL中的密码散列”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用4.1以前的散列方法的密码比使用本地密码散列方法的密码的安全性要低。</font><font style="vertical-align: inherit;">与之前一样，在MySQL 5.7.5中删除了4.1之前的密码支持</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_password"></a><p>
          <a class="indexterm" name="idm140528080698416"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD(<em class="replaceable"><code>str</code></em>)</code></a>
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这个函数从MySQL 5.7.6开始不推荐使用，并且将在未来的MySQL版本中被删除。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回从明文密码计算出的散列密码字符串</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回值是连接字符集中的字符串，或者
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该函数是服务器用来加密MySQL密码以存储在</font></font><code class="literal">mysql.user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">授权表中</font><font style="vertical-align: inherit;">的算法的SQL接口</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          所述</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量控制由使用的密码散列方法
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的功能。</font><font style="vertical-align: inherit;">它还影响由执行的密码散列
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-user" title="13.7.1.2 CREATE USER语法"><code class="literal">CREATE USER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#grant" title="13.7.1.4 GRANT语法"><code class="literal">GRANT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code class="literal">IDENTIFIED BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">指定密码的</font><font style="vertical-align: inherit;">语句。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          下表显示了对于每种密码散列方法，允许的值</font></font><code class="literal">old_passwords</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及哪些验证插件使用散列方法。
</font></font></p>
<div class="informaltable">
<table summary="For each password hashing method, the permitted value of old_passwords and which authentication plugins use the hashing method"><colgroup><col width="40%"><col width="20%"><col width="40%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码散列法</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">old_passwords值</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关联的身份验证插件</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL 4.1本机散列</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
              <td><code class="literal">mysql_native_password</code></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHA-256哈希</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
              <td><code class="literal">sha256_password</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          SHA-256密码散列（</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=2</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）使用一个随机盐值，它使得结果
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不确定。</font><font style="vertical-align: inherit;">因此，使用此函数的语句对于基于语句的复制是不安全的，并且不能存储在查询缓存中。
        </font></font></p><p>
          <a class="indexterm" name="idm140528080663152"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

          执行的加密
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是单向的（不可逆的），但它不是用于Unix密码的相同类型的加密。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由MySQL服务器中的认证系统使用; </font><font style="vertical-align: inherit;">你应该
             </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在自己的应用程序中使用它。</font><font style="vertical-align: inherit;">为此，请考虑更安全的功能，例如
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关在应用程序中安全地处理密码和身份验证的更多信息</font></font><a class="ulink" href="http://www.faqs.org/rfcs/rfc2195.html" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参阅
             </font><a class="ulink" href="http://www.faqs.org/rfcs/rfc2195.html" target="_top"><font style="vertical-align: inherit;">RFC 2195的第2部分（质询 - 响应身份验证机制（CRAM））</font></a><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在某些情况下，调用的语句
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_password"><code class="literal">PASSWORD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能记录在服务器日志中或客户端的历史文件中，例如
             </font></font><code class="filename">~/.mysql_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这意味着明文密码可能被读取访问该信息的任何人阅读。</font><font style="vertical-align: inherit;">有关服务器日志发生这种情况以及如何控制它的条件的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#password-logging" title="6.1.2.3密码和记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.1.2.3节“密码和日志记录”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关客户端日志记录的类似信息，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysql-logging" title="4.5.1.3 mysql日志记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4.5.1.3节“mysql日志记录”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_random-bytes"></a><p>
          <a class="indexterm" name="idm140528080647696"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_random-bytes"><code class="literal">RANDOM_BYTES(<em class="replaceable"><code>len</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此函数返回</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用SSL库的随机数生成器（OpenSSL或yaSSL）生成</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">随机字节</font><font style="vertical-align: inherit;">的二进制字符串
           </font><font style="vertical-align: inherit;">。</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          范围从1到1024的</font><font style="vertical-align: inherit;">允许值</font><font style="vertical-align: inherit;">。对于超出该范围的值，将
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_random-bytes"><code class="literal">RANDOM_BYTES()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成警告并返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_random-bytes"><code class="literal">RANDOM_BYTES()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用来为</font><font style="vertical-align: inherit;">函数</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">提供初始化向量
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了在这种情况下使用，</font></font><em class="replaceable"><code>len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须至少16个。允许较大的值，但超过16个字节被忽略。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_random-bytes"><code class="literal">RANDOM_BYTES()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成一个随机值，这使得其结果不确定。</font><font style="vertical-align: inherit;">因此，使用此函数的语句对于基于语句的复制是不安全的，并且不能存储在查询缓存中。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该功能从MySQL 5.7.4开始提供。
        </font></font></p></li><li class="listitem"><a name="function_sha1"></a><p>
          <a class="indexterm" name="idm140528080629744"></a>

          <a class="indexterm" name="idm140528080628672"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1(<em class="replaceable"><code>str</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如RFC 3174（安全散列算法）中所述，计算字符串的SHA-1 160位校验和。</font><font style="vertical-align: inherit;">该值以40个十六进制数字的字符串形式返回，或者
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个函数的一个可能用途是作为散列键。</font><font style="vertical-align: inherit;">请参阅本节开始部分关于有效存储散列值的注释。</font><font style="vertical-align: inherit;">您还可以将其</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用作密码功能来存储密码。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回值是连接字符集中的一个字符串。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SHA1('abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'a9993e364706816aba3e25717850c26c9cd0d89d'</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以被认为是密码更安全的等价物
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，请参阅本部分开始部分有关MD5和SHA-1算法的注释。
        </font></font></p></li><li class="listitem"><a name="function_sha2"></a><p>
          <a class="indexterm" name="idm140528080607840"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2(<em class="replaceable"><code>str</code></em>,
          <em class="replaceable"><code>hash_length</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计算SHA-2系列散列函数（SHA-224，SHA-256，SHA-384和SHA-512）。</font><font style="vertical-align: inherit;">第一个参数是要清理的明文字符串。</font><font style="vertical-align: inherit;">第二个参数表示结果的所需位长度，它的值必须是224,256,384,512或0（相当于256）。</font><font style="vertical-align: inherit;">如果任一参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或哈希长度不是允许值之一，返回值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，函数结果是包含所需位数的散列值。</font><font style="vertical-align: inherit;">请参阅本节开始部分关于有效存储散列值的注释。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回值是连接字符集中的一个字符串。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SHA2('abc', 224);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'23097d223405d8228642a477bda255b32aadbce4bda0b3f7e36c9da7'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          只有MySQL已经配置了SSL支持，该功能才有效。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#encrypted-connections" title="6.4使用加密连接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.4节“使用加密连接”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha2"><code class="literal">SHA2()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以比密码更安全的考虑
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_md5"><code class="literal">MD5()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sha1"><code class="literal">SHA1()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_uncompress"></a><p>
          <a class="indexterm" name="idm140528080590000"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_uncompress"><code class="literal">UNCOMPRESS(<em class="replaceable"><code>string_to_uncompress</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          解压缩由该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_compress"><code class="literal">COMPRESS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">压缩的字符串
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数不是压缩值，则结果是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个函数需要MySQL使用压缩库进行编译，例如
           </font></font><code class="literal">zlib</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，返回值总是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNCOMPRESS(COMPRESS('any string'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'任何字符串'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNCOMPRESS('any string');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; NULL</font></font><font></font>
</pre></li><li class="listitem"><a name="function_uncompressed-length"></a><p>
          <a class="indexterm" name="idm140528080576048"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_uncompressed-length"><code class="literal">UNCOMPRESSED_LENGTH(<em class="replaceable"><code>compressed_string</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回压缩字符串在压缩之前的长度。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UNCOMPRESSED_LENGTH(COMPRESS(REPEAT('a',30)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 30</font></font><font></font>
</pre></li><li class="listitem"><a name="function_validate-password-strength"></a><p>
          <a class="indexterm" name="idm140528080566496"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定一个表示明文密码的参数，该函数返回一个整数来表示密码的强度。</font><font style="vertical-align: inherit;">返回值范围从0（弱）到100（强）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          密码评估由
           </font><font style="vertical-align: inherit;">插件</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成</font></font><code class="literal">validate_password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果未安装该插件，该函数始终返回0.有关安装的信息
           </font></font><code class="literal">validate_password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#validate-password" title="6.5.3密码验证插件"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.5.3节“密码验证插件”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要检查或配置影响密码测试的参数，请检查或设置由实施的系统变量
           </font></font><code class="literal">validate_password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#validate-password-options-variables" title="6.5.3.2密码验证插件选项和变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.5.3.2节“密码验证插件选项和变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          密码受到越来越严格的测试，返回值反映满足哪些测试，如下表所示。</font><font style="vertical-align: inherit;">另外，如果
           </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          系统变量已启用且密码与用户名匹配，则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不管其他</font></font><code class="literal">validate_password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量的设置</font><font style="vertical-align: inherit;">如何</font><font style="vertical-align: inherit;">，均
           </font><font style="vertical-align: inherit;">返回0
           </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="Password tests of the VALIDATE_PASSWORD_STRENGTH() function and the values returned by each password test."><colgroup><col width="60%"><col width="20%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码测试</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回值</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长度&lt;4</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长度≥4且&lt;
                </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#sysvar_validate_password_length"><code class="literal">validate_password_length</code></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">满足政策1（</font></font><code class="literal">LOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">满足策略2（</font></font><code class="literal">MEDIUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">75</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">满足政策3（</font></font><code class="literal">STRONG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></td>
</tr></tbody></table>
</div>
</li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="information-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.14信息功能</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528080529616"></a><a class="indexterm" name="idm140528080528544"></a>
<div class="table">
<a name="idm140528080527056"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.18信息功能</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists information functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      重复执行一个表达式
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_charset"><code class="literal">CHARSET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的字符集
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_coercibility"><code class="literal">COERCIBILITY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串参数的排序规则值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_collation"><code class="literal">COLLATION()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回字符串参数的排序规则
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回连接的连接ID（线程ID）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">CURRENT_USER</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      经过验证的用户名和主机名
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回默认（当前）数据库名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于带有LIMIT子句的SELECT，将返回的行数不存在LIMIT子句
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      最后一个INSERT的AUTOINCREMENT列的值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      更新的行数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_schema"><code class="literal">SCHEMA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      DATABASE（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      USER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      USER（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      客户端提供的用户名和主机名
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_version"><code class="literal">VERSION()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个表示MySQL服务器版本的字符串
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_benchmark"></a><p>
          <a class="indexterm" name="idm140528080468144"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK(<em class="replaceable"><code>count</code></em>,<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          重复</font><font style="vertical-align: inherit;">执行该表达式</font></font><em class="replaceable"><code>count</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它可以用来计算MySQL处理表达式的速度。</font><font style="vertical-align: inherit;">结果值总是</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">预期的用途来自</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端，该客户端报告查询执行时间：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT BENCHMARK(1000000,AES_ENCRYPT('hello','goodbye'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">BENCHMARK（1000000，AES_ENCRYPT（'hello'，'goodbye'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（4.74秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          报告的时间是客户端的已用时间，而不是服务器端的CPU时间。</font><font style="vertical-align: inherit;">建议</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多次</font><font style="vertical-align: inherit;">执行
           </font><font style="vertical-align: inherit;">，并解释有关服务器机器负载有多大的结果。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 旨在测量标量表达式的运行时性能，这对于您使用它并解释结果的方式具有一些重要意义：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              只能使用标量表达式。</font><font style="vertical-align: inherit;">虽然该表达式可以是子查询，但它必须返回一列，最多只返回一行。</font><font style="vertical-align: inherit;">例如，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK(10, (SELECT * FROM
              t))</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果表</font></font><code class="literal">t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              具有多列或多行</font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">将会失败</font><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              执行</font><font style="vertical-align: inherit;">语句
               </font><font style="vertical-align: inherit;">时间与执行
               </font><font style="vertical-align: inherit;">涉及的开销量不同。</font><font style="vertical-align: inherit;">两者的执行配置文件非常不同，您不应该期望它们花费相同的时间。</font><font style="vertical-align: inherit;">前者涉及解析器，优化器，表锁定和</font><font style="vertical-align: inherit;">每个</font><font style="vertical-align: inherit;">运行时评估
               </font><font style="vertical-align: inherit;">时间。</font><font style="vertical-align: inherit;">后者只涉及运行时评估
              </font></font><code class="literal">SELECT
              <em class="replaceable"><code>expr</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><code class="literal">SELECT BENCHMARK(<em class="replaceable"><code>N</code></em>,
              <em class="replaceable"><code>expr</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间和所有其他组件一次。</font><font style="vertical-align: inherit;">已经分配的内存结构被重用，并且运行时优化（例如已经为集合函数评估的结果的本地缓存）可以改变结果。</font><font style="vertical-align: inherit;">使用
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样的措施给予更多的重量，该组件和去除运行时组件的性能</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">噪音</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
              通过网络，分析器，优化引进，等等。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><a name="function_charset"></a><p>
          <a class="indexterm" name="idm140528080439504"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_charset"><code class="literal">CHARSET(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串参数的字符集。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHARSET('abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'latin1'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHARSET(CONVERT('abc' USING utf8));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'utf8'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CHARSET(USER());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'utf8'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_coercibility"></a><p>
          <a class="indexterm" name="idm140528080428496"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_coercibility"><code class="literal">COERCIBILITY(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串参数的排序规则可变性值。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COERCIBILITY('abc' COLLATE latin1_swedish_ci);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COERCIBILITY(USER());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COERCIBILITY('abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 4</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COERCIBILITY(1000);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 5</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回值的含义如下表所示。</font><font style="vertical-align: inherit;">较低的值具有较高的优先级。
</font></font></p>
<div class="informaltable">
<table summary="Collation coercibility return values, the meaning of each value, and an example of each."><colgroup><col width="15%"><col width="15%"><col width="70%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可压缩性</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">0</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式归类</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带</font></font><code class="literal">COLLATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款的</font><font style="vertical-align: inherit;">价值</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">1</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有整理</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同排序规则的字符串连接</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">2</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐式归类</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列值，存储的例程参数或局部变量</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">3</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统常量</font></font></td>
              <td><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 返回值</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">4</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COERCIBLE</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字字符串</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">5</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字或时间值</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">5</code></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可忽略的</font></font></td>
              <td><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 或从中派生的表达式
                </font></font><code class="literal">NULL</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/charset.html#charset-collation-coercibility" title="10.8.4表达式中的排序强制性"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10.8.4节“表达式中的校对可压缩性”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_collation"></a><p>
          <a class="indexterm" name="idm140528080378784"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_collation"><code class="literal">COLLATION(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回字符串参数的排序规则。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COLLATION('abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'latin1_swedish_ci'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COLLATION(_utf8'abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'utf8_general_ci'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_connection-id"></a><p>
          <a class="indexterm" name="idm140528080368528"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回连接的连接标识（线程标识）。</font><font style="vertical-align: inherit;">每个连接都有一组在当前连接的客户端中唯一的ID。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值</font></font><code class="literal">ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><a class="link" href="/mysql-5.7-google-zh/information-schema.html#processlist-table" title="24.17 INFORMATION_SCHEMA PROCESSLIST表"><code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表中</font></font><code class="literal">Id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-processlist" title="13.7.5.29 SHOW PROCESSLIST语法"><code class="literal">SHOW PROCESSLIST</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出</font></font><code class="literal">PROCESSLIST_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列和性能架构</font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#threads-table" title="25.11.16.3线程表"><code class="literal">threads</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列中
           </font><font style="vertical-align: inherit;">显示的值类型相同</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CONNECTION_ID();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 23786</font></font><font></font>
</pre></li><li class="listitem"><a name="function_current-user"></a><p>
          <a class="indexterm" name="idm140528080351840"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回服务器用于认证当前客户端的MySQL帐户的用户名和主机名组合。</font><font style="vertical-align: inherit;">此帐户决定您的访问权限。</font><font style="vertical-align: inherit;">返回值是</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          字符集中</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          价值</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以不同于价值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT USER();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'davida @ localhost'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM mysql.user;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1044：拒绝用户'@'localhost'的访问</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数据库'mysql'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT CURRENT_USER();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'@localhost'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该示例说明尽管客户机指定了一个用户名</font></font><code class="literal">davida</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（如该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的值所示</font><font style="vertical-align: inherit;">），但服务器使用匿名用户帐户（如空</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">用户名部分所示</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">对客户机进行了身份验证
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">可能发生的一种方式是授予表中没有列出帐户</font></font><code class="literal">davida</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在存储的程序或视图中，
           </font><font style="vertical-align: inherit;">除非用</font><font style="vertical-align: inherit;">特征</font><font style="vertical-align: inherit;">定义，否则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回定义该对象的用户的帐户（由其
           </font></font><code class="literal">DEFINER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值指定）
           </font></font><code class="literal">SQL SECURITY INVOKER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在后一种情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回对象的调用者。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          触发器和事件无法定义</font></font><code class="literal">SQL
          SECURITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特征，因此对于这些对象，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回定义该对象的用户的帐户。</font><font style="vertical-align: inherit;">要返回调用者，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下语句支持使用该
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数替代受影响的用户或定义者的名称（可能还包括其主机）; </font><font style="vertical-align: inherit;">在这种情况下，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据需要进行扩展：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#drop-user" title="13.7.1.3 DROP USER语法"><code class="literal">DROP USER</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#rename-user" title="13.7.1.5 RENAME USER语法"><code class="literal">RENAME USER</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#grant" title="13.7.1.4 GRANT语法"><code class="literal">GRANT</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#revoke" title="13.7.1.6 REVOKE语法"><code class="literal">REVOKE</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-function" title="13.1.13 CREATE FUNCTION语法"><code class="literal">CREATE FUNCTION</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-procedure" title="13.1.16 CREATE PROCEDURE和CREATE FUNCTION语法"><code class="literal">CREATE PROCEDURE</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-trigger" title="13.1.20 CREATE TRIGGER语法"><code class="literal">CREATE TRIGGER</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-event" title="13.1.12创建事件语法"><code class="literal">CREATE EVENT</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-view" title="13.1.21 CREATE VIEW语法"><code class="literal">CREATE VIEW</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT语法"><code class="literal">ALTER EVENT</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-view" title="13.1.10 ALTER VIEW语法"><code class="literal">ALTER VIEW</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-password" title="13.7.1.7 SET PASSWORD语法"><code class="literal">SET PASSWORD</code></a>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关此扩展</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对复制</font><font style="vertical-align: inherit;">的影响的信息
           </font><font style="vertical-align: inherit;">，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-features-current-user" title="16.4.1.8复制CURRENT_USER（）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第16.4.1.8节“CURRENT_USER（）的复制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_database"></a><p>
          <a class="indexterm" name="idm140528080291664"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集形式</font><font style="vertical-align: inherit;">返回默认（当前）数据库名称
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果没有默认数据库，则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在存储例程中，默认数据库是例程所关联的数据库，它不一定与调用上下文中默认的数据库相同。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATABASE();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'测试'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果没有默认数据库，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_found-rows"></a><p>
          <a class="indexterm" name="idm140528080277328"></a>

          <a class="indexterm" name="idm140528080276256"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句可能包含一个</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句来限制服务器返回给客户端的行数。</font><font style="vertical-align: inherit;">在某些情况下，最好知道该语句在没有该语句的情况下会返回多少行</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但不需要再次运行该语句。</font><font style="vertical-align: inherit;">要获得此行数，请</font></font><code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句中</font><font style="vertical-align: inherit;">包含一个</font><font style="vertical-align: inherit;">选项
           </font><font style="vertical-align: inherit;">，然后再调用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><font style="vertical-align: inherit;">
    - &gt; </font><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT SQL_CALC_FOUND_ROWS * FROM <em class="replaceable"><code>tbl_name</code></em></code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>WHERE id &gt; 100 LIMIT 10;</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT FOUND_ROWS();</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          第二个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个数字，表示</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在没有该</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句的</font><font style="vertical-align: inherit;">情况</font><font style="vertical-align: inherit;">下第</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">将被返回的</font><font style="vertical-align: inherit;">行数
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在</font></font><code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          最近的成功</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句中</font><font style="vertical-align: inherit;">没有</font><font style="vertical-align: inherit;">选项时
           </font><font style="vertical-align: inherit;">，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回该</font><font style="vertical-align: inherit;">语句
           </font><font style="vertical-align: inherit;">返回的结果集中的行数。</font><font style="vertical-align: inherit;">如果语句包含一个</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回达到限制的行数。</font><font style="vertical-align: inherit;">例如，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果语句包含</font></font><code class="literal">LIMIT
          10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">分别返回10或60 </font></font><code class="literal">LIMIT 50, 10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可用的行计数
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是暂时的，并且不打算在语句后面的</font></font><code class="literal">SELECT SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句后</font><font style="vertical-align: inherit;">可用
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您稍后需要参考该值，请将其保存：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT SQL_CALC_FOUND_ROWS * FROM ... ;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SET @rows = FOUND_ROWS();</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您正在使用</font></font><code class="literal">SELECT
          SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，MySQL必须计算完整结果集中的行数。</font><font style="vertical-align: inherit;">但是，这比没有运行查询要快</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为结果集不需要发送到客户端。
        </font></font></p><p>
          <code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在需要限制查询返回的行数的情况下使用，但也可以在完全结果集中确定行数而不必再次运行查询。</font><font style="vertical-align: inherit;">一个Web脚本就是一个Web脚本，它提供了一个分页显示，其中包含指向显示搜索结果其他部分的页面的链接。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使您可以确定剩余结果需要多少个其他页面。
        </font></font></p><p><font style="vertical-align: inherit;"></font><code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font><font style="vertical-align: inherit;">简单</font><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">相比，</font><font style="vertical-align: inherit;">
          使用</font><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">更复杂</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能发生在多个地方</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它可能适用于</font><font style="vertical-align: inherit;">整体结果</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的</font><font style="vertical-align: inherit;">个别</font><font style="vertical-align: inherit;">陈述</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或全局
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果。
        </font></font></p><p><font style="vertical-align: inherit;"></font><code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for
           </font><font style="vertical-align: inherit;">
          的意图</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是它应该返回没有全局的情况下返回的行数
           </font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用的条件
           </font></font><code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字必须出现在第一个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              的</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              只有在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION ALL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用的情况下，</font><font style="vertical-align: inherit;">
              其值</font><font style="vertical-align: inherit;">才是确切的
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果使用“ </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未
               </font></font><code class="literal">ALL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用”，则会发生重复删除，且值
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅为近似值。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果没有</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出现在
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">SQL_CALC_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被忽略，返回所创建以处理在临时表中的行数
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          除了这里描述的情况之外，其行为
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是未定义的（例如，它的值在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发生错误而失败</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">后面
           </font><font style="vertical-align: inherit;">）。
</font></font></p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能可靠地使用基于语句的复制进行复制。</font><font style="vertical-align: inherit;">该功能使用基于行的复制自动复制。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_last-insert-id"></a><p>
          <a class="indexterm" name="idm140528080199280"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果没有参数，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">BIGINT UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（64位）值，表示</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于最近执行的</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">而</font><font style="vertical-align: inherit;">成功插入</font><font style="vertical-align: inherit;">列
           </font><font style="vertical-align: inherit;">的第一个自动生成的值</font><font style="vertical-align: inherit;">。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未成功插入行，则</font><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">保持不变。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用参数
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个无符号整数。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如，在插入生成</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的行后
           </font><font style="vertical-align: inherit;">，您可以获得如下所示的值：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 195</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当前正在执行的语句不会影响值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">假设您</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用一条语句</font><font style="vertical-align: inherit;">生成一个</font><font style="vertical-align: inherit;">值，然后</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在多行</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句中</font><font style="vertical-align: inherit;">引用它
           </font><font style="vertical-align: inherit;">，该</font><font style="vertical-align: inherit;">语句将行插入到具有自己</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的表中
           </font><font style="vertical-align: inherit;">。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二项声明</font><font style="vertical-align: inherit;">的价值
           </font><font style="vertical-align: inherit;">将保持稳定; </font><font style="vertical-align: inherit;">其第二行和后续行的值不受早期行插入的影响。</font><font style="vertical-align: inherit;">（但是，如果将引用混合到
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font><font style="vertical-align: inherit;">，则效果未定义。）
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果前面的语句返回错误，则值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是未定义的。</font><font style="vertical-align: inherit;">对于事务性表，如果语句由于错误而回滚，则值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未定义。</font><font style="vertical-align: inherit;">对于手册
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，价值</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不会恢复到交易前的价值; </font><font style="vertical-align: inherit;">它仍然像它的那一点
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#commit" title="13.3.1 START TRANSACTION，COMMIT和ROLLBACK语法"><code class="literal">ROLLBACK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.3之前，如果使用复制过滤规则，则此功能未被正确复制。</font><font style="vertical-align: inherit;">（错误＃17234370，错误＃69861）
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在存储的例程（过程或函数）或触发器的主体内，其值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改方式与在这些对象主体外部执行的语句相同。</font><font style="vertical-align: inherit;">存储的例程或触发器对其值的影响
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可通过以下语句看出，具体取决于例程的类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果存储过程执行更改值的语句，那么更改后的值</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将由过程调用后面的语句看到。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于更改值的存储函数和触发器，当函数或触发器结束时会恢复该值，因此以下语句不会看到更改的值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          生成的ID在</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个连接的基础</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上保存在服务器中
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着函数返回给定客户端的</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><span class="emphasis"><em><font style="vertical-align: inherit;">是为该客户端</font></em></span><font style="vertical-align: inherit;">影响</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新语句生成</font><font style="vertical-align: inherit;">的第一个
           </font><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这个值不会受到其他客户端的影响，即使它们生成
           </font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自己的值。</font><font style="vertical-align: inherit;">此行为可确保每个客户端都可以检索自己的ID，而不必关心其他客户端的活动，而无需锁定或事务。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果将</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为非</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">魔术</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值（即不是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">非</font><font style="vertical-align: inherit;">
          的值），</font><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">不会更改
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果您将使用一个多行
             </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的语句，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回所产生的价值</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一次</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入的行</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这样做的原因是可以轻松地再现</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对其他服务器</font><font style="vertical-align: inherit;">的相同
             </font><font style="vertical-align: inherit;">语句。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>USE test;</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (</code></strong>
       <strong class="userinput"><code>id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,</code></strong>
       <strong class="userinput"><code>name VARCHAR(10) NOT NULL</code></strong>
       <strong class="userinput"><code>);</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t VALUES (NULL, 'Bob');</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">Bob |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LAST_INSERT_ID（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t VALUES</code></strong>
       <strong class="userinput"><code>(NULL, 'Mary'), (NULL, 'Jane'), (NULL, 'Lisa');</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">Bob |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">Mary |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">简|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">丽莎|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LAST_INSERT_ID（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          尽管第二条</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          语句插入了三个新行</font></font><code class="literal">t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但为这些行中的第一行生成的ID是
           </font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且这是</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">返回的值
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT
          IGNORE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且该行被忽略，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保持与当前值保持不变（如果连接尚未成功执行，则返回0
           </font></font><code class="literal">INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），对于非事务性表，</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计数器不会递增。</font><font style="vertical-align: inherit;">对于</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><a class="link" href="/mysql-5.7-google-zh/innodb-storage-engine.html#sysvar_innodb_autoinc_lock_mode"><code class="literal">innodb_autoinc_lock_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">，则
           </font><font style="vertical-align: inherit;">计数器递增
           </font></font><code class="literal">2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如以下示例所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>USE test;</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @@innodb_autoinc_lock_mode;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@@ innodb_autoinc_lock_mode |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE `t` (</code></strong>
       <strong class="userinput"><code>`id` INT(11) NOT NULL AUTO_INCREMENT,</code></strong>
       <strong class="userinput"><code>`val` INT(11) DEFAULT NULL,</code></strong>
       <strong class="userinput"><code>PRIMARY KEY (`id`),</code></strong>
       <strong class="userinput"><code>UNIQUE KEY `i1` (`val`)</code></strong>
       <strong class="userinput"><code>) ENGINE=InnoDB DEFAULT CHARSET=latin1;</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃插入两行</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t (val) VALUES (1),(2);</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃使用auto_increment_offset = 1，插入行</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃导致AUTO_INCREMENT值为3</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW CREATE TABLE t\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       表：t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建表：CREATE TABLE`t`（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `id` int（11）NOT NULL AUTO_INCREMENT，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `val` int（11）DEFAULT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  PRIMARY KEY（`id`），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  UNIQUE KEY`i1`（`val`）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = InnoDB AUTO_INCREMENT = 3 DEFAULT CHARSET = latin1</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃LAST_INSERT_ID（）返回第一个自动生成的</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃值已成功插入AUTO_INCREMENT列</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LAST_INSERT_ID（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃尝试插入重复行失败，但错误被忽略   </font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT IGNORE INTO t (val) VALUES (1),(2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：2个重复：2个警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃使用innodb_autoinc_lock_mode = 1，AUTO_INCREMENT计数器</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃被忽略的行增加</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW CREATE TABLE t\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       表：t</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建表：CREATE TABLE`t`（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `id` int（11）NOT NULL AUTO_INCREMENT，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  `val` int（11）DEFAULT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  PRIMARY KEY（`id`），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  UNIQUE KEY`i1`（`val`）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = InnoDB AUTO_INCREMENT = 5 DEFAULT CHARSET = latin1</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
＃LAST_INSERT_ID未更改，因为上一次插入失败</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LAST_INSERT_ID（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关更多信息，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-auto-increment-handling" title="14.8.1.5在InnoDB中处理AUTO_INCREMENT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第14.8.1.5节“InnoDB中的AUTO_INCREMENT处理”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="indexterm" name="idm140528080104528"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">

          如果</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为参数给出，则参数
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值由函数返回，并被记忆为要返回的下一个值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这可以用来模拟序列：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              创建一个表来保存序列计数器并初始化它：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>CREATE TABLE sequence (id INT NOT NULL);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>INSERT INTO sequence VALUES (0);</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用表格生成如下序列号：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>UPDATE sequence SET id=LAST_INSERT_ID(id+1);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句递增序列计数器并使下一次调用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回更新的值。</font><font style="vertical-align: inherit;">该
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句检索该值。</font><font style="vertical-align: inherit;">在
               </font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-insert-id" title="27.8.7.38 mysql_insert_id（）"><code class="literal">mysql_insert_id()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C API函数也可以用于获取价值。</font><font style="vertical-align: inherit;">请参见
               </font></font><a class="xref" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-insert-id" title="27.8.7.38 mysql_insert_id（）"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第27.8.7.38节“mysql_insert_id（）”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以在不调用的情况下生成序列
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但以这种方式使用函数的实用程序是ID值在服务器中作为上次自动生成的值进行维护。</font><font style="vertical-align: inherit;">它是多用户安全的，因为多个客户端可以发布该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，并使用该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句（或
           </font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-insert-id" title="27.8.7.38 mysql_insert_id（）"><code class="literal">mysql_insert_id()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">获取他们自己的序列值
           </font><font style="vertical-align: inherit;">，而不会影响或受到生成它们自己的序列值的其他客户端的影响。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请注意，</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-insert-id" title="27.8.7.38 mysql_insert_id（）"><code class="literal">mysql_insert_id()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它只会在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">之后更新</font><font style="vertical-align: inherit;">，因此</font><font style="vertical-align: inherit;">
          在执行其他SQL语句（如</font><font style="vertical-align: inherit;">或）
           </font><font style="vertical-align: inherit;">后
           </font><font style="vertical-align: inherit;">，您不能使用C API函数来检索值
           </font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><a name="function_row-count"></a><p>
          <a class="indexterm" name="idm140528080069984"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a>
        </p><p>
          <code class="literal">ROW_COUNT()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 返回如下值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              DDL语句：0.这适用于诸如</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或的
               </font><font style="vertical-align: inherit;">语句
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#drop-table" title="13.1.29 DROP TABLE语法"><code class="literal">DROP TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              以下DML语句
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：受影响的行数。</font><font style="vertical-align: inherit;">这适用于报表等
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#delete" title="13.2.2 DELETE语法"><code class="literal">DELETE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（如前），但现在还声明，如</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER
              TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD DATA
              INFILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果语句返回一个结果集，则返回-1，否则返回</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影响</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行数
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如for
               </font></font><code class="literal">SELECT * FROM t1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回-1。</font><font style="vertical-align: inherit;">为
               </font><font style="vertical-align: inherit;">，
               </font><font style="vertical-align: inherit;">返回写入文件的行数。
            </font></font><code class="literal">SELECT * FROM t1 INTO OUTFILE
              '<em class="replaceable"><code>file_name</code></em>'</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#signal" title="13.6.7.5 SIGNAL语法"><code class="literal">SIGNAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 声明：0。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，默认情况下受影响的行值是实际更改的行数。</font><font style="vertical-align: inherit;">如果您</font><font style="vertical-align: inherit;">在连接到</font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqld" title="4.3.1 mysqld  -  MySQL服务器"><span class="command"><strong><font style="vertical-align: inherit;">mysqld</font></strong></span></a><font style="vertical-align: inherit;">时</font><font style="vertical-align: inherit;">指定了
           </font></font><code class="literal">CLIENT_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志
           </font><font style="vertical-align: inherit;">，受影响的行值就是</font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">找到</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">的行数</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">即与该</font><font style="vertical-align: inherit;">条款</font><font style="vertical-align: inherit;">相匹配</font><font style="vertical-align: inherit;">。
        </font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-real-connect" title="27.8.7.54 mysql_real_connect（）"><code class="literal">mysql_real_connect()</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqld" title="4.3.1 mysqld  -  MySQL服务器"><span class="command"><strong><font style="vertical-align: inherit;"></font></strong></span></a><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#replace" title="13.2.8 REPLACE语法"><code class="literal">REPLACE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，如果新行替换旧行，受影响的行值为2，因为在这种情况下，删除副本后插入了一行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert-on-duplicate" title="13.2.5.2 INSERT ... ON DUPLICATE KEY UPDATE语法"><code class="literal">INSERT
          ... ON DUPLICATE KEY UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，如果行作为新行插入，则每行的受影响行值为1，如果更新现有行，则为2;如果现有行被设置为其当前值，则每次行值为0。</font><font style="vertical-align: inherit;">如果您指定
           </font></font><code class="literal">CLIENT_FOUND_ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志，如果现有行设置为其当前值，受影响的行值为1（而不是0）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值类似于</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-affected-rows" title="27.8.7.1 mysql_affected_rows（）"><code class="literal">mysql_affected_rows()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C API函数</font><font style="vertical-align: inherit;">的值
           </font><font style="vertical-align: inherit;">和</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          客户端在语句执行后显示</font><font style="vertical-align: inherit;">的行数</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t VALUES(1),(2),(3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，3行受影响（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：3重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROW_COUNT();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ROW_COUNT（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>DELETE FROM t WHERE i IN(1,2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，2行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROW_COUNT();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ROW_COUNT（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能可靠地使用基于语句的复制进行复制。</font><font style="vertical-align: inherit;">该功能使用基于行的复制自动复制。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_schema"></a><p>
          <a class="indexterm" name="idm140528080017952"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_schema"><code class="literal">SCHEMA()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个功能是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_session-user"></a><p>
          <a class="indexterm" name="idm140528080009888"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_system-user"></a><p>
          <a class="indexterm" name="idm140528080000640"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_user"></a><p>
          <a class="indexterm" name="idm140528079991392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_user"><code class="literal">USER()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集中</font><font style="vertical-align: inherit;">的当前MySQL用户名和主机名作为字符串返回</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT USER();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'davida @ localhost'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该值指示您在连接到服务器时指定的用户名以及您连接的客户端主机。</font><font style="vertical-align: inherit;">价值可以不同于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_version"></a><p>
          <a class="indexterm" name="idm140528079979696"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_version"><code class="literal">VERSION()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个表示MySQL服务器版本的字符串。</font><font style="vertical-align: inherit;">该字符串使用</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集。</font><font style="vertical-align: inherit;">除了版本号之外，该值可能有一个后缀。</font><font style="vertical-align: inherit;">见的描述
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_version"><code class="literal">version</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在系统变量
           </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节，“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT VERSION();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'5.7.23-standard'</font></font><font></font>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="spatial-analysis-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15空间分析函数</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-function-reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.1空间函数参考</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-function-argument-handling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.2通过空间函数处理参数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-wkt-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.3从WKT值创建几何值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-wkb-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.4从WKB值创建几何值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-mysql-specific-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.5创建几何值的MySQL专用函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-format-conversion-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.6几何格式转换函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-property-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7几何特性函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-operator-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.8空间操作员功能</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-relation-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.9测试几何对象之间空间关系的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-geohash-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.10空间地理散列函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-geojson-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.11空间GeoJSON函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-convenience-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.12空间便利功能</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    MySQL提供了对空间数据执行各种操作的功能。</font><font style="vertical-align: inherit;">根据它们执行的操作类型，这些功能可以分为几个主要类别：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        创建各种格式几何的函数（WKT，WKB，内部）
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在格式之间转换几何的功能
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以访问几何的定性或定量属性的函数
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        描述两个几何之间关系的函数
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从现有的几何创建新的几何的功能
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    有关MySQL支持使用空间数据的一般背景信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#spatial-types" title="11.5空间数据类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5节“空间数据类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-function-reference"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.1空间函数参考</font></font></h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140528079958592"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      下表列出了每个空间函数并提供了每个函数的简短说明。
</font></font></p>
<div class="table">
<a name="idm140528079957008"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.19空间函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists all spatial functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_area"><code class="literal">Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon或MultiPolygon区域
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsBinary()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKB
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKT
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_buffer"><code class="literal">Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回距离几何体给定距离内的点的几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_centroid"><code class="literal">Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将质心作为一个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_contains"><code class="literal">Contains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否包含另一个几何体的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convexhull"><code class="literal">ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的凸包
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_crosses"><code class="literal">Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否跨越另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dimension"><code class="literal">Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何尺寸
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_disjoint"><code class="literal">Disjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否不相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体与另一个几何体的距离
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_endpoint"><code class="literal">EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的结束点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_envelope"><code class="literal">Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_equals"><code class="literal">Equals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exteriorring"><code class="literal">ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的外部环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeomCollFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeomCollFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrycollection"><code class="literal">GeometryCollection()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何构造几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometryn"><code class="literal">GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何集合中返回第N个几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrytype"><code class="literal">GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何类型的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeomFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_glength"><code class="literal">GLength()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_interiorringn"><code class="literal">InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的第N个内环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_intersects"><code class="literal">Intersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何体的MBR是否相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isclosed"><code class="literal">IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否封闭和简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isempty"><code class="literal">IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      占位符功能
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_issimple"><code class="literal">IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linestring"><code class="literal">LineString()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从Point值构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否包含另一个几何体的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcoveredby"><code class="literal">MBRCoveredBy()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个MBR是否被另一个覆盖
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcovers"><code class="literal">MBRCovers()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个MBR是否覆盖另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否不相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequal"><code class="literal">MBREqual()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrintersects"><code class="literal">MBRIntersects()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何体的MBR是否相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbroverlaps"><code class="literal">MBROverlaps()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的MBR是否重叠
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrtouches"><code class="literal">MBRTouches()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两种几何形状的MBR是否接触
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否在另一个几何体的MBR内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MLineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MLineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MPointFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiPoint
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MPointFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建多点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MPolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MPolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_multilinestring"><code class="literal">MultiLineString()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString值构造MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_multipoint"><code class="literal">MultiPoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从点值构造多点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_multipolygon"><code class="literal">MultiPolygon()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从Polygon值构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numgeometries"><code class="literal">NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何集合中几何的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numinteriorrings"><code class="literal">NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回多边形内环的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numpoints"><code class="literal">NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString中的点数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_overlaps"><code class="literal">Overlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的MBR是否重叠
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_point"><code class="literal">Point()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从坐标构造点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromtext"><code class="literal">PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      WKT构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromwkb"><code class="literal">PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointn"><code class="literal">PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString返回第N个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polygon"><code class="literal">Polygon()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString参数构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_srid"><code class="literal">SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的空间参考系统ID
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon或MultiPolygon区域
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_AsWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKB
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asgeojson"><code class="literal">ST_AsGeoJSON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何生成GeoJSON对象
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_AsWKT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从内部几何格式转换为WKT
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回距离几何体给定距离内的点的几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer-strategy"><code class="literal">ST_Buffer_Strategy()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为ST_Buffer（）生成策略选项
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-centroid"><code class="literal">ST_Centroid()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将质心作为一个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-contains"><code class="literal">ST_Contains()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否包含另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-convexhull"><code class="literal">ST_ConvexHull()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的凸包
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-crosses"><code class="literal">ST_Crosses()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否跨越另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-difference"><code class="literal">ST_Difference()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何形状的返回点设置差异
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-dimension"><code class="literal">ST_Dimension()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何尺寸
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-disjoint"><code class="literal">ST_Disjoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否与另一个几何体不相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体与另一个几何体的距离
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance-sphere"><code class="literal">ST_Distance_Sphere()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何体之间地球上的最小距离
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的结束点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的MBR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-equals"><code class="literal">ST_Equals()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否与另一个几何相等
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的外部环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geohash"><code class="literal">ST_GeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      生成一个geohash值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ST_GeometryCollectionFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">ST_GeomCollFromTxt()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeomCollFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_GeometryCollectionFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从几何集合中返回第N个几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometrytype"><code class="literal">ST_GeometryType()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何类型的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromgeojson"><code class="literal">ST_GeomFromGeoJSON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从GeoJSON对象生成几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_GeometryFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT返回几何图形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_GeometryFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB返回几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Polygon的第N个内环
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-intersection"><code class="literal">ST_Intersection()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的返回点集交集
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-intersects"><code class="literal">ST_Intersects()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否相交
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否封闭和简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isempty"><code class="literal">ST_IsEmpty()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      占位符功能
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否简单
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isvalid"><code class="literal">ST_IsValid()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何是否有效
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-latfromgeohash"><code class="literal">ST_LatFromGeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从geohash值返回纬度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString的长度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_LineStringFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_LineStringFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造LineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-longfromgeohash"><code class="literal">ST_LongFromGeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从geohash值返回经度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-makeenvelope"><code class="literal">ST_MakeEnvelope()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      围绕两点的矩形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiLineStringFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiLineStringFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiLineString
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPointFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构建MultiPoint
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPointFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建多点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPolygonFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_MultiPolygonFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造MultiPolygon
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numgeometries"><code class="literal">ST_NumGeometries()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何集合中几何的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRing()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_NumInteriorRings()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回多边形内环的数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numpoints"><code class="literal">ST_NumPoints()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回LineString中的点数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-overlaps"><code class="literal">ST_Overlaps()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否与另一个重叠
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromgeohash"><code class="literal">ST_PointFromGeoHash()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将geohash值转换为POINT值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromtext"><code class="literal">ST_PointFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      WKT构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromwkb"><code class="literal">ST_PointFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构建点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从LineString返回第N个点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolyFromText()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_PolygonFromText()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKT构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolyFromWKB()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">， </font></font><code class="literal">ST_PolygonFromWKB()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从WKB构造多边形
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-simplify"><code class="literal">ST_Simplify()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回简化的几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-srid"><code class="literal">ST_SRID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回几何的空间参考系统ID
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的起始点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-symdifference"><code class="literal">ST_SymDifference()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回点设置两个几何的对称差异
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-touches"><code class="literal">ST_Touches()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否碰到另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-union"><code class="literal">ST_Union()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个几何图形的返回点集合
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-validate"><code class="literal">ST_Validate()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回验证的几何
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-within"><code class="literal">ST_Within()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何是否在另一个内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的X坐标
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-y"><code class="literal">ST_Y()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的Y坐标
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_startpoint"><code class="literal">StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LineString的起始点
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_touches"><code class="literal">Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体是否碰到另一个
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_within"><code class="literal">Within()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一个几何体的MBR是否在另一个几何体的MBR内
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_x"><code class="literal">X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的X坐标
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_y"><code class="literal">Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.6）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回Point的Y坐标
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-function-argument-handling"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.2通过空间函数处理参数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      空间值或几何具有</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-class-geometry" title="11.5.2.2几何类"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5.2.2节“几何类”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述的属性
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下讨论列出了一般空间函数参数处理特性。</font><font style="vertical-align: inherit;">特定函数或函数组可能具有额外的参数处理特性，如函数描述发生的部分所讨论的那样。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      空间函数仅为有效几何值定义。
    </font></font></p><a class="indexterm" name="idm140528079484832"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      几何体的空间参考标识符（SRID）标识几何体在其中定义的坐标空间。</font><font style="vertical-align: inherit;">在MySQL中，SRID值是与几何值相关的整数。</font><font style="vertical-align: inherit;">最大可用SRID值是2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1。</font><font style="vertical-align: inherit;">如果给出的值较大，则只使用较低的32位。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在MySQL中，不管实际的SRID值如何，所有计算均假定为SRID 0。</font><font style="vertical-align: inherit;">SRID 0代表一个无限平坦的笛卡尔平面，没有单位分配给它的轴。</font><font style="vertical-align: inherit;">将来，计算可能会使用指定的SRID值。</font><font style="vertical-align: inherit;">要确保SRID 0行为，请使用SRID 0创建几何值。如果未指定SRID，则SRID 0是新几何值的默认值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      由任何空间函数生成的几何值将继承几何参数的SRID。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      采用多个几何参数的空间函数需要这些参数具有相同的SRID值（即，低32位中的值相同）。</font><font style="vertical-align: inherit;">假设有相同的SRID，空间函数在执行相等性检查后对它们不起作用; </font><font style="vertical-align: inherit;">几何值使用笛卡尔坐标（SRID 0）隐式处理。</font><font style="vertical-align: inherit;">如果空间函数返回
       </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_different_srids"><code class="literal">ER_GIS_DIFFERENT_SRIDS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则意味着几何参数并不都具有相同的SRID。</font><font style="vertical-align: inherit;">您必须修改它们以具有相同的SRID。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      开放地理空间联盟指导方针要求输入多边形已经关闭，因此未封闭的多边形会被视为无效而不是被关闭。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      空几何收集处理如下：一个空的WKT输入几何集合可以被指定为
       </font></font><code class="literal">'GEOMETRYCOLLECTION()'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这也是输出WKT产生的空间操作产生一个空的几何集合。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在分析嵌套几何集合的过程中，集合被展平，其基本组件被用于各种GIS操作来计算结果。</font><font style="vertical-align: inherit;">这为用户提供了额外的灵活性，因为不必担心几何数据的唯一性。</font><font style="vertical-align: inherit;">嵌套的几何集合可以由嵌套的GIS函数调用产生，而不必首先明确展平。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="gis-wkt-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.3从WKT值创建几何值的函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些函数以公认的文本（WKT）表示和可选的空间参考系统标识符（SRID）作为参数。</font><font style="vertical-align: inherit;">他们返回相应的几何图形。
    </font></font></p><p>
      <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受任何几何类型的WKT值作为其第一个参数。</font><font style="vertical-align: inherit;">其他函数为每个几何类型的几何值的构造提供了特定类型的构造函数。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关WKT格式的说明，请参阅
       </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-wkt-format" title="众所周知的文本（WKT）格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">众所周知的文本（WKT）格式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_geomcollfromtext"></a><p>
          <a class="indexterm" name="idm140528079466816"></a>

          <a class="indexterm" name="idm140528079465744"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeomCollFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeometryCollectionFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromTxt()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeomCollFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeomCollFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_geomfromtext"></a><p>
          <a class="indexterm" name="idm140528079443056"></a>

          <a class="indexterm" name="idm140528079441984"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeomFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeometryFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_linefromtext"></a><p>
          <a class="indexterm" name="idm140528079420912"></a>

          <a class="indexterm" name="idm140528079419840"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineStringFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_mlinefromtext"></a><p>
          <a class="indexterm" name="idm140528079398752"></a>

          <a class="indexterm" name="idm140528079397680"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MLineFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MultiLineStringFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_mpointfromtext"></a><p>
          <a class="indexterm" name="idm140528079376448"></a>

          <a class="indexterm" name="idm140528079375376"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MPointFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MultiPointFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_mpolyfromtext"></a><p>
          <a class="indexterm" name="idm140528079354240"></a>

          <a class="indexterm" name="idm140528079353168"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MPolyFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MultiPolygonFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_pointfromtext"></a><p>
          <a class="indexterm" name="idm140528079332016"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromtext"><code class="literal">PointFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromtext"><code class="literal">ST_PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromtext"><code class="literal">PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromtext"><code class="literal">ST_PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromtext"><code class="literal">PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromtext"><code class="literal">ST_PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_polyfromtext"></a><p>
          <a class="indexterm" name="idm140528079317936"></a>

          <a class="indexterm" name="idm140528079316864"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolyFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolygonFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_st-geomcollfromtext"></a><p>
          <a class="indexterm" name="idm140528079295632"></a>

          <a class="indexterm" name="idm140528079294560"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeometryCollectionFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromTxt(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKT表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g = "MULTILINESTRING((10 10, 11 11), (9 9, 10 10))";</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeomCollFromText(@g));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeomCollFromText（@g））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MULTILINESTRING（（10 10,11 11），（9 9,10 10））</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromTxt()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeomCollFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromtext"><code class="literal">GeometryCollectionFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromtext"><code class="literal">ST_GeomCollFromTxt()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          被添加到MySQL 5.7.6。
        </font></font></p></li><li class="listitem"><a name="function_st-geomfromtext"></a><p>
          <a class="indexterm" name="idm140528079267728"></a>

          <a class="indexterm" name="idm140528079266656"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeometryFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用其WKT表示和SRID构造任何类型的几何值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromtext"><code class="literal">GeometryFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-linefromtext"></a><p>
          <a class="indexterm" name="idm140528079249008"></a>

          <a class="indexterm" name="idm140528079247936"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineStringFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKT表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromtext"><code class="literal">ST_LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromtext"><code class="literal">LineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-mlinefromtext"></a><p>
          <a class="indexterm" name="idm140528079229600"></a>

          <a class="indexterm" name="idm140528079228528"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MultiLineStringFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKT表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromtext"><code class="literal">MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MLineFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromtext"><code class="literal">ST_MultiLineStringFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6中添加。
        </font></font></p></li><li class="listitem"><a name="function_st-mpointfromtext"></a><p>
          <a class="indexterm" name="idm140528079207168"></a>

          <a class="indexterm" name="idm140528079206096"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MultiPointFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKT表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.9的，空间的功能，例如
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromtext"><code class="literal">ST_GeomFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该接受的WKT格式表示</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值的值内允许个别指向由括号包围。</font><font style="vertical-align: inherit;">例如，以下两个函数调用都是有效的，而在MySQL 5.7.9之前，第二个函数调用会产生一个错误：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ST_MPointFromText（'MULTIPOINT（1 1，2 2，3 3）'）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ST_MPointFromText（'MULTIPOINT（（1 1），（2 2），（3 3））'）</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromtext"><code class="literal">MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromtext"><code class="literal">ST_MultiPointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6中添加。
        </font></font></p></li><li class="listitem"><a name="function_st-mpolyfromtext"></a><p>
          <a class="indexterm" name="idm140528079179824"></a>

          <a class="indexterm" name="idm140528079178752"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MultiPolygonFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKT表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromtext"><code class="literal">MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MPolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromtext"><code class="literal">ST_MultiPolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6中添加。
        </font></font></p></li><li class="listitem"><a name="function_st-pointfromtext"></a><p>
          <a class="indexterm" name="idm140528079157488"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromtext"><code class="literal">ST_PointFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKT表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromtext"><code class="literal">ST_PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromtext"><code class="literal">PointFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-polyfromtext"></a><p>
          <a class="indexterm" name="idm140528079143728"></a>

          <a class="indexterm" name="idm140528079142656"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolyFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolygonFromText(<em class="replaceable"><code>wkt</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKT表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或不是语法良好形状的几何体，或者如果SRID参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromtext"><code class="literal">ST_PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolyFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromtext"><code class="literal">PolygonFromText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="gis-wkb-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.4从WKB值创建几何值的函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些函数作为参数
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含一个已知的二进制（WKB）表示和一个可选的空间参考系统标识符（SRID）。</font><font style="vertical-align: inherit;">他们返回相应的几何图形。
    </font></font></p><p>
      <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受任何几何类型的WKB值作为其第一个参数。</font><font style="vertical-align: inherit;">其他函数为每个几何类型的几何值的构造提供了特定类型的构造函数。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些函数还接受</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#gis-mysql-specific-functions" title="12.15.5创建几何值的MySQL专用函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15.5节“创建几何值的MySQL特定函数”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的函数返回的几何对象</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，这些函数可以用来为本节中的函数提供第一个参数。</font><font style="vertical-align: inherit;">但是，从MySQL 5.7.19开始，不推荐使用几何参数并生成警告。</font><font style="vertical-align: inherit;">几何参数在MySQL 8.0中不被接受。</font><font style="vertical-align: inherit;">要将使用几何参数的调用迁移到使用WKB参数，请遵循以下准则：
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关WKB格式的说明，请参阅
       </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-wkb-format" title="众所周知的二进制（WKB）格式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">众所周知的二进制（WKB）格式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          重写结构，如</font></font><code class="literal">ST_GeomFromWKB(Point(0,
          0))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为</font></font><code class="literal">Point(0, 0)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          重写结构，如</font></font><code class="literal">ST_GeomFromWKB(Point(0,
          0), 4326)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为
           </font></font><code class="literal">ST_GeomFromWKB(ST_AsWKB(Point(0, 0)),
          4326)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（或者，在MySQL 8.0中，您可以使用</font></font><code class="literal">ST_SRID(Point(0, 0), 4326)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
</font></font></p></li></ul>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_geomcollfromwkb"></a><p>
          <a class="indexterm" name="idm140528079109616"></a>

          <a class="indexterm" name="idm140528079108544"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeomCollFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeometryCollectionFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeomCollFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeomCollFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeomCollFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeomCollFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeomCollFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_geomfromwkb"></a><p>
          <a class="indexterm" name="idm140528079087168"></a>

          <a class="indexterm" name="idm140528079086096"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeometryFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_linefromwkb"></a><p>
          <a class="indexterm" name="idm140528079065120"></a>

          <a class="indexterm" name="idm140528079064048"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineStringFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_mlinefromwkb"></a><p>
          <a class="indexterm" name="idm140528079043072"></a>

          <a class="indexterm" name="idm140528079042000"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MLineFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MultiLineStringFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_mpointfromwkb"></a><p>
          <a class="indexterm" name="idm140528079020784"></a>

          <a class="indexterm" name="idm140528079019712"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MPointFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MultiPointFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_mpolyfromwkb"></a><p>
          <a class="indexterm" name="idm140528078998576"></a>

          <a class="indexterm" name="idm140528078997504"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MPolyFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MultiPolygonFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_pointfromwkb"></a><p>
          <a class="indexterm" name="idm140528078976352"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromwkb"><code class="literal">PointFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromwkb"><code class="literal">ST_PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromwkb"><code class="literal">PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromwkb"><code class="literal">ST_PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromwkb"><code class="literal">PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromwkb"><code class="literal">ST_PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_polyfromwkb"></a><p>
          <a class="indexterm" name="idm140528078962272"></a>

          <a class="indexterm" name="idm140528078961200"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolygonFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_st-geomcollfromwkb"></a><p>
          <a class="indexterm" name="idm140528078940128"></a>

          <a class="indexterm" name="idm140528078939056"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeomCollFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeometryCollectionFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKB表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeomCollFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomcollfromwkb"><code class="literal">ST_GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeomCollFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomcollfromwkb"><code class="literal">GeometryCollectionFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-geomfromwkb"></a><p>
          <a class="indexterm" name="idm140528078921472"></a>

          <a class="indexterm" name="idm140528078920400"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeometryFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用其WKB表示和SRID构造任何类型的几何值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromwkb"><code class="literal">ST_GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geomfromwkb"><code class="literal">GeometryFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-linefromwkb"></a><p>
          <a class="indexterm" name="idm140528078903712"></a>

          <a class="indexterm" name="idm140528078902640"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineStringFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKB表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-linefromwkb"><code class="literal">ST_LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_linefromwkb"><code class="literal">LineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-mlinefromwkb"></a><p>
          <a class="indexterm" name="idm140528078885168"></a>

          <a class="indexterm" name="idm140528078884096"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MultiLineStringFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKB表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mlinefromwkb"><code class="literal">MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MLineFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mlinefromwkb"><code class="literal">ST_MultiLineStringFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6中添加。
        </font></font></p></li><li class="listitem"><a name="function_st-mpointfromwkb"></a><p>
          <a class="indexterm" name="idm140528078863520"></a>

          <a class="indexterm" name="idm140528078862448"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MultiPointFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKB表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpointfromwkb"><code class="literal">MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpointfromwkb"><code class="literal">ST_MultiPointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6中添加。
        </font></font></p></li><li class="listitem"><a name="function_st-mpolyfromwkb"></a><p>
          <a class="indexterm" name="idm140528078841952"></a>

          <a class="indexterm" name="idm140528078840880"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MultiPolygonFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKB表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mpolyfromwkb"><code class="literal">MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MPolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-mpolyfromwkb"><code class="literal">ST_MultiPolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.6中添加。
        </font></font></p></li><li class="listitem"><a name="function_st-pointfromwkb"></a><p>
          <a class="indexterm" name="idm140528078820416"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromwkb"><code class="literal">ST_PointFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKB表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromwkb"><code class="literal">ST_PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointfromwkb"><code class="literal">PointFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-polyfromwkb"></a><p>
          <a class="indexterm" name="idm140528078807520"></a>

          <a class="indexterm" name="idm140528078806448"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolyFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolygonFromWKB(<em class="replaceable"><code>wkb</code></em>[,
          <em class="replaceable"><code>srid</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其WKB表示和SRID </font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果WKB或SRID参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-polyfromwkb"><code class="literal">ST_PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_polyfromwkb"><code class="literal">PolygonFromWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="gis-mysql-specific-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.5创建几何值的MySQL专用函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL为创建几何值提供了一组有用的非标准函数。</font><font style="vertical-align: inherit;">本节介绍的功能是OpenGIS规范的MySQL扩展。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些函数根据WKB值或几何对象作为参数生成几何对象。</font><font style="vertical-align: inherit;">如果任何参数不是适当的WKB或正确对象类型的几何表示形式，则返回值为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      例如，您可以</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_point"><code class="literal">Point()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接</font><font style="vertical-align: inherit;">将几何返回值
       </font><font style="vertical-align: inherit;">插入
       </font></font><code class="literal">POINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INSERT INTO t1（pt_col）VALUES（Point（1,2））;
</font></font></pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_geometrycollection"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrycollection"><code class="literal">GeometryCollection(<em class="replaceable"><code>g</code></em>
          [, <em class="replaceable"><code>g</code></em>] ...)</code></a>
        </p><a class="indexterm" name="idm140528078778960"></a><p><font style="vertical-align: inherit;"></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从几何参数</font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrycollection"><code class="literal">GeometryCollection()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 即使存在不受支持的几何体，也会返回参数中包含的所有适当的几何体。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrycollection"><code class="literal">GeometryCollection()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 不允许使用参数来创建空的几何体。
        </font></font></p></li><li class="listitem"><a name="function_linestring"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_linestring"><code class="literal">LineString(<em class="replaceable"><code>pt</code></em>
          [, <em class="replaceable"><code>pt</code></em>] ...)</code></a>
        </p><a class="indexterm" name="idm140528078767424"></a><p><font style="vertical-align: inherit;"></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从许多</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或WKB </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数</font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数个数少于两个，则返回值为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_multilinestring"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_multilinestring"><code class="literal">MultiLineString(<em class="replaceable"><code>ls</code></em>
          [, <em class="replaceable"><code>ls</code></em>] ...)</code></a>
        </p><a class="indexterm" name="idm140528078757040"></a><p><font style="vertical-align: inherit;"></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或WKB
           </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_multipoint"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_multipoint"><code class="literal">MultiPoint(<em class="replaceable"><code>pt</code></em>
          [, <em class="replaceable"><code>pt2</code></em>] ...)</code></a>
        </p><a class="indexterm" name="idm140528078747536"></a><p><font style="vertical-align: inherit;"></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或WKB </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数</font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_multipolygon"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_multipolygon"><code class="literal">MultiPolygon(<em class="replaceable"><code>poly</code></em>
          [, <em class="replaceable"><code>poly</code></em>] ...)</code></a>
        </p><a class="indexterm" name="idm140528078738000"></a><p><font style="vertical-align: inherit;"></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从一组</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或WKB
           </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_point"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_point"><code class="literal">Point(<em class="replaceable"><code>x</code></em>,
          <em class="replaceable"><code>y</code></em>)</code></a>
        </p><a class="indexterm" name="idm140528078728560"></a><p><font style="vertical-align: inherit;"></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用其坐标</font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_polygon"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_polygon"><code class="literal">Polygon(<em class="replaceable"><code>ls</code></em> [,
          <em class="replaceable"><code>ls</code></em>] ...)</code></a>
        </p><a class="indexterm" name="idm140528078720528"></a><p><font style="vertical-align: inherit;"></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从许多</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或WKB
           </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">
          构造一个</font><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任何参数不表示一个</font></font><code class="literal">LinearRing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（即，不是一个封闭和简单的</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="gis-format-conversion-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.6几何格式转换函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL支持本节列出的功能，用于将几何值从内部几何格式转换为WKT或WKB格式。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      还有将WKT或WKB格式的字符串转换为内部几何格式的功能。</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#gis-wkt-functions" title="12.15.3从WKT值创建几何值的函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15.3节“从WKT值创建几何值的函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#gis-wkb-functions" title="12.15.4从WKB值创建几何值的函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15.4节“从WKB值创建几何值的函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_asbinary"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsBinary(<em class="replaceable"><code>g</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsWKB(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><a class="indexterm" name="idm140528078702608"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_astext"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsText(<em class="replaceable"><code>g</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsWKT(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><a class="indexterm" name="idm140528078682608"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已被弃用，并且将在未来的MySQL版本中被删除。</font><font style="vertical-align: inherit;">使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          而
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不是。
        </font></font></p></li><li class="listitem"><a name="function_st-asbinary"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary(<em class="replaceable"><code>g</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsWKB(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><a class="indexterm" name="idm140528078662576"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将内部几何格式的值转换为其WKB表示并返回二进制结果。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数不是一个句法良好的几何体，
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ST_AsBinary（g）FROM geom;
</font></font></pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asbinary"><code class="literal">ST_AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsBinary()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asbinary"><code class="literal">AsWKB()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-astext"></a><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText(<em class="replaceable"><code>g</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsWKT(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><a class="indexterm" name="idm140528078643808"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将内部几何图形格式的值转换为其WKT表示形式并返回字符串结果。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数不是一个句法良好的几何体，
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g = 'LineString(1 1,2 2,3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeomFromText(@g));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeomFromText（@g））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LINESTRING（1 1,2 2,3 3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-astext"><code class="literal">ST_AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsText()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_astext"><code class="literal">AsWKT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.9开始，</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值的</font><font style="vertical-align: inherit;">输出</font><font style="vertical-align: inherit;">包括每个点周围的括号。</font><font style="vertical-align: inherit;">例如：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @mp = 'MULTIPOINT(1 1, 2 2, 3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeomFromText(@mp));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeomFromText（@mp））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MULTIPOINT（（1 1），（2 2），（3 3））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.9之前，相同值的输出不包括每个点周围的括号：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @mp = 'MULTIPOINT(1 1, 2 2, 3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeomFromText(@mp));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeomFromText（@mp））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MULTIPOINT（1 1,2 2,3 3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="gis-property-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7几何特性函数</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-general-property-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.1一般几何属性函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-point-property-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.2点属性函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-linestring-property-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.3 LineString和MultiLineString属性函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-polygon-property-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.4多边形和MultiPolygon属性函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#gis-geometrycollection-property-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.5 GeometryCollection属性函数</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      属于该组的每个函数都将几何值作为其参数，并返回几何体的一些定量或定性属性。</font><font style="vertical-align: inherit;">一些函数限制它们的参数类型。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是不正确的几何类型，则</font><font style="vertical-align: inherit;">返回此类函数</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，</font><font style="vertical-align: inherit;">如果对象类型既不是</font><font style="vertical-align: inherit;">也不</font><font style="vertical-align: inherit;">是
       </font><font style="vertical-align: inherit;">，则
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多边形函数会返回
       </font><font style="vertical-align: inherit;">。
</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-general-property-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.1一般几何属性函数</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节中列出的函数不会限制它们的参数并接受任何类型的几何值。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_dimension"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_dimension"><code class="literal">Dimension(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078609312"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-dimension"><code class="literal">ST_Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dimension"><code class="literal">Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-dimension"><code class="literal">ST_Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_dimension"><code class="literal">Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-dimension"><code class="literal">ST_Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_envelope"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_envelope"><code class="literal">Envelope(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078595792"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_envelope"><code class="literal">Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_envelope"><code class="literal">Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_geometrytype"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrytype"><code class="literal">GeometryType(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078582336"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometrytype"><code class="literal">ST_GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrytype"><code class="literal">GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometrytype"><code class="literal">ST_GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrytype"><code class="literal">GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometrytype"><code class="literal">ST_GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_isempty"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_isempty"><code class="literal">IsEmpty(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078568720"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isempty"><code class="literal">ST_IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isempty"><code class="literal">IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isempty"><code class="literal">ST_IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_isempty"><code class="literal">IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isempty"><code class="literal">ST_IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_issimple"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_issimple"><code class="literal">IsSimple(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078555216"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_issimple"><code class="literal">IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_issimple"><code class="literal">IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_srid"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_srid"><code class="literal">SRID(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078541696"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-srid"><code class="literal">ST_SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_srid"><code class="literal">SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-srid"><code class="literal">ST_SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_srid"><code class="literal">SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-srid"><code class="literal">ST_SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-dimension"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-dimension"><code class="literal">ST_Dimension(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078528256"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回几何值的固有尺寸
             </font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">维度可以是-1,0,1或2.这些值的含义在</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#gis-class-geometry" title="11.5.2.2几何类"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5.2.2节“几何类”中给出</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_Dimension(ST_GeomFromText('LineString(1 1,2 2)'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Dimension（ST_GeomFromText（'LineString（1 1,2 2）'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-dimension"><code class="literal">ST_Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dimension"><code class="literal">Dimension()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-envelope"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078513328"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回几何值的最小边界矩形（MBR）</font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数为
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果作为</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由边界框的角点定义</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">返回
             </font><font style="vertical-align: inherit;">：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POLYGON（（MINX MINY，MAXX MINY，MAXX MAXY，MINX MAXY，MINX MINY））
</font></font></pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Envelope(ST_GeomFromText('LineString(1 1,2 2)')));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Envelope（ST_GeomFromText（'LineString（1 1,2 2）'）））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POLYGON（（1 1,2 1,2 2,1 2,1 1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            从MySQL 5.7.6开始，如果参数是点或垂直或水平线段，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回点或线段作为其MBR，而不是返回无效的多边形：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Envelope(ST_GeomFromText('LineString(1 1,1 2)')));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Envelope（ST_GeomFromText（'LineString（1 1,1 2）'）））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LINESTRING（1 1,1 2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_envelope"><code class="literal">Envelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-geometrytype"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometrytype"><code class="literal">ST_GeometryType(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078493872"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回一个二进制字符串，指示几何实例</font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是其成员</font><font style="vertical-align: inherit;">的几何类型的名称
             </font><font style="vertical-align: inherit;">，或者
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该名称对应于其中一个可实例化的</font></font><code class="literal">Geometry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子类。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_GeometryType(ST_GeomFromText('POINT(1 1)'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_GeometryType（ST_GeomFromText（'POINT（1 1）'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometrytype"><code class="literal">ST_GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometrytype"><code class="literal">GeometryType()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-isempty"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isempty"><code class="literal">ST_IsEmpty(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078478976"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该函数是一个占位符，对任何有效几何值返回0，对任何无效几何值返回1，或者
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数为
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL不支持GIS </font></font><code class="literal">EMPTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，如</font></font><code class="literal">POINT EMPTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isempty"><code class="literal">ST_IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isempty"><code class="literal">IsEmpty()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-issimple"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078465792"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果几何值</font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            没有异常几何点（例如自相交或自相切），</font><font style="vertical-align: inherit;">则返回1 </font><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数不是简单的，并且</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">返回0 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#opengis-geometry-model" title="11.5.2 OpenGIS几何模型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.5.2节“OpenGIS几何模型”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
            给出的可实例化几何类的描述</font><font style="vertical-align: inherit;">包括导致类实例被分类为不简单的特定条件。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-issimple"><code class="literal">ST_IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_issimple"><code class="literal">IsSimple()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-srid"></a><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-srid"><code class="literal">ST_SRID(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><a class="indexterm" name="idm140528078451536"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回一个整数，指示与几何值关联的空间参照系ID
             </font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_SRID(ST_GeomFromText('LineString(1 1,2 2)',101));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_SRID（ST_GeomFromText（'LineString（1 1,2 2）'，101））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">101 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-srid"><code class="literal">ST_SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_srid"><code class="literal">SRID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-point-property-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.2点属性函数</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        A </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由X和Y坐标组成，可以使用以下函数获得：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_st-x"></a><p>
            <a class="indexterm" name="idm140528078435328"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X(<em class="replaceable"><code>p</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的X坐标值
             </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的对象</font></font><em class="replaceable"><code>p</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为一个双精度数。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_X(Point(56.7, 53.34));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_X（点（56.7,53.34））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">56.7 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_x"><code class="literal">X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-y"></a><p>
            <a class="indexterm" name="idm140528078422192"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-y"><code class="literal">ST_Y(<em class="replaceable"><code>p</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的Y坐标值
             </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的对象</font></font><em class="replaceable"><code>p</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            作为一个双精度数。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_Y(Point(56.7, 53.34));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Y（Point（56.7，53.34））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">53.34 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-y"><code class="literal">ST_Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_y"><code class="literal">Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_x"></a><p>
            <a class="indexterm" name="idm140528078409088"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_x"><code class="literal">X(<em class="replaceable"><code>p</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_x"><code class="literal">X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_x"><code class="literal">X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-x"><code class="literal">ST_X()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_y"></a><p>
            <a class="indexterm" name="idm140528078395696"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_y"><code class="literal">Y(<em class="replaceable"><code>p</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-y"><code class="literal">ST_Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_y"><code class="literal">Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-y"><code class="literal">ST_Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_y"><code class="literal">Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-y"><code class="literal">ST_Y()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-linestring-property-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.3 LineString和MultiLineString属性函数</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        A </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">组成
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以提取a的特定点</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，计算它包含的点数或获取其长度。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节中的一些功能也适用于
         </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_endpoint"></a><p>
            <a class="indexterm" name="idm140528078375840"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_endpoint"><code class="literal">EndPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_endpoint"><code class="literal">EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_endpoint"><code class="literal">EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_glength"></a><p>
            <a class="indexterm" name="idm140528078362320"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_glength"><code class="literal">GLength(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_glength"><code class="literal">GLength()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个非标准的名字。</font><font style="vertical-align: inherit;">它对应于OpenGIS
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font><font style="vertical-align: inherit;">（有一个现有的SQL函数
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_length"><code class="literal">Length()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以计算字符串值的长度。）
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_glength"><code class="literal">GLength()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_isclosed"></a><p>
            <a class="indexterm" name="idm140528078348720"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_isclosed"><code class="literal">IsClosed(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isclosed"><code class="literal">IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_isclosed"><code class="literal">IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_numpoints"></a><p>
            <a class="indexterm" name="idm140528078335264"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_numpoints"><code class="literal">NumPoints(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numpoints"><code class="literal">ST_NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numpoints"><code class="literal">NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numpoints"><code class="literal">ST_NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_numpoints"><code class="literal">NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numpoints"><code class="literal">ST_NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_pointn"></a><p>
            <a class="indexterm" name="idm140528078321744"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointn"><code class="literal">PointN(<em class="replaceable"><code>ls</code></em>,
            <em class="replaceable"><code>N</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointn"><code class="literal">PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointn"><code class="literal">PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-endpoint"></a><p>
            <a class="indexterm" name="idm140528078307824"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font><font style="vertical-align: inherit;">值</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是该</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">的端点</font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_EndPoint(ST_GeomFromText(@ls)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_EndPoint（ST_GeomFromText（@ls）））</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（3 3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_endpoint"><code class="literal">EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-isclosed"></a><p>
            <a class="indexterm" name="idm140528078291632"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于某个</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭，则</font><font style="vertical-align: inherit;">返回1
             </font><font style="vertical-align: inherit;">（即其
             </font><font style="vertical-align: inherit;">值</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值相同）。</font><font style="vertical-align: inherit;">如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于一个</font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则返回1，如果
             </font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是封闭的（即，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值是彼此相同</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的
             </font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未关闭</font><font style="vertical-align: inherit;">则返回0
             </font><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls1 = 'LineString(1 1,2 2,3 3,2 2)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SET @ls2 = 'LineString(1 1,2 2,3 3,1 1)';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_IsClosed(ST_GeomFromText(@ls1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_IsClosed（ST_GeomFromText（@ ls1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_IsClosed(ST_GeomFromText(@ls2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_IsClosed（ST_GeomFromText（@ ls2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SET @ls3 = 'MultiLineString((1 1,2 2,3 3),(4 4,5 5))';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_IsClosed(ST_GeomFromText(@ls3));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_IsClosed（ST_GeomFromText（@ ls3））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isclosed"><code class="literal">ST_IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_isclosed"><code class="literal">IsClosed()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-length"></a><p>
            <a class="indexterm" name="idm140528078260016"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回一个双精度数字，指示</font><font style="vertical-align: inherit;">其相关空间参考</font><font style="vertical-align: inherit;">中的</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">的长度</font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的长度
             </font><font style="vertical-align: inherit;">等于其元素长度的总和。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_Length(ST_GeomFromText(@ls));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Length（ST_GeomFromText（@ls））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2.8284271247461903 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @mls = 'MultiLineString((1 1,2 2,3 3),(4 4,5 5))';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_Length(ST_GeomFromText(@mls));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Length（ST_GeomFromText（@mls））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4.242640687119286 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-length"><code class="literal">ST_Length()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被添加到MySQL 5.7.6。</font><font style="vertical-align: inherit;">它应该优先使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_glength"><code class="literal">GLength()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，名称不标准。
          </font></font></p></li><li class="listitem"><a name="function_st-numpoints"></a><p>
            <a class="indexterm" name="idm140528078240992"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numpoints"><code class="literal">ST_NumPoints(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的数量</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的对象</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_NumPoints(ST_GeomFromText(@ls));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_NumPoints（ST_GeomFromText（@ls））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numpoints"><code class="literal">ST_NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numpoints"><code class="literal">NumPoints()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-pointn"></a><p>
            <a class="indexterm" name="idm140528078224800"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN(<em class="replaceable"><code>ls</code></em>,
            <em class="replaceable"><code>N</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">个
             </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中
             </font></font><code class="literal">Linestring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">点从1开始编号。如果任何参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或几何参数是一个空的几何，返回值是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_PointN(ST_GeomFromText(@ls),2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_PointN（ST_GeomFromText（@ls），2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（2 2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_pointn"><code class="literal">PointN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-startpoint"></a><p>
            <a class="indexterm" name="idm140528078207664"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font><font style="vertical-align: inherit;">值</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是该</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">的起点</font></font><em class="replaceable"><code>ls</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_StartPoint(ST_GeomFromText(@ls)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_StartPoint（ST_GeomFromText（@ls）））</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（1 1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_startpoint"><code class="literal">StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_startpoint"></a><p>
            <a class="indexterm" name="idm140528078191392"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_startpoint"><code class="literal">StartPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_startpoint"><code class="literal">StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_startpoint"><code class="literal">StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-polygon-property-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.4多边形和MultiPolygon属性函数</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节中的函数返回</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值的</font><font style="vertical-align: inherit;">属性
         </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_area"></a><p>
            <a class="indexterm" name="idm140528078173552"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_area"><code class="literal">Area(<em class="replaceable"><code>poly</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_area"><code class="literal">Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_area"><code class="literal">Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_centroid"></a><p>
            <a class="indexterm" name="idm140528078160016"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_centroid"><code class="literal">Centroid(<em class="replaceable"><code>mpoly</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-centroid"><code class="literal">ST_Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_centroid"><code class="literal">Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-centroid"><code class="literal">ST_Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_centroid"><code class="literal">Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-centroid"><code class="literal">ST_Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_exteriorring"></a><p>
            <a class="indexterm" name="idm140528078146464"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_exteriorring"><code class="literal">ExteriorRing(<em class="replaceable"><code>poly</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exteriorring"><code class="literal">ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_exteriorring"><code class="literal">ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_interiorringn"></a><p>
            <a class="indexterm" name="idm140528078132816"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_interiorringn"><code class="literal">InteriorRingN(<em class="replaceable"><code>poly</code></em>,
            <em class="replaceable"><code>N</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_interiorringn"><code class="literal">InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_interiorringn"><code class="literal">InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_numinteriorrings"></a><p>
            <a class="indexterm" name="idm140528078118656"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_numinteriorrings"><code class="literal">NumInteriorRings(<em class="replaceable"><code>poly</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numinteriorrings"><code class="literal">NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_numinteriorrings"><code class="literal">NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-area"></a><p>
            <a class="indexterm" name="idm140528078104944"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area(<em class="replaceable"><code>poly</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回一个双精度数字，表示参数的区域，如其空间参考系统中所测量的。</font><font style="vertical-align: inherit;">对于维度为0或1的参数，结果为0.如果参数为空几何体，则返回值为0.如果参数为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回值is
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            结果是几何集合中所有组件面积值的总和。</font><font style="vertical-align: inherit;">如果几何集合为空，则其区域返回为0。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SET @poly =</code></strong>
       <strong class="userinput"><code>'Polygon((0 0,0 3,3 0,0 0),(1 1,1 2,2 1,1 1))';</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>SELECT ST_Area(ST_GeomFromText(@poly));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Area（ST_GeomFromText（@poly））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @mpoly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>'MultiPolygon(((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1)))';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_Area(ST_GeomFromText(@mpoly));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Area（ST_GeomFromText（@mpoly））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">8 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-area"><code class="literal">ST_Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_area"><code class="literal">Area()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-centroid"></a><p>
            <a class="indexterm" name="idm140528078085936"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-centroid"><code class="literal">ST_Centroid(<em class="replaceable"><code>mpoly</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            将</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">的数学质心</font></font><em class="replaceable"><code>mpoly</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为a
             </font><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果不能保证在</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该函数通过计算集合中最高维度的组件的质心点来处理几何集合。</font><font style="vertical-align: inherit;">这样的成分被提取并制作成单个</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为质心计算。</font><font style="vertical-align: inherit;">如果参数是一个空的几何集合，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>ST_GeomFromText('POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_GeometryType(@poly),ST_AsText(ST_Centroid(@poly));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ + ------------------------ -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_GeometryType（@poly）| </font><font style="vertical-align: inherit;">ST_AsText（ST_Centroid（@poly））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ + ------------------------ -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POLYGON | </font><font style="vertical-align: inherit;">POINT（4.958333333333333 4.958333333333333）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ + ------------------------ -------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-centroid"><code class="literal">ST_Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_centroid"><code class="literal">Centroid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-exteriorring"></a><p>
            <a class="indexterm" name="idm140528078063744"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing(<em class="replaceable"><code>poly</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            将</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            值的</font><font style="vertical-align: inherit;">外环</font></font><em class="replaceable"><code>poly</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为a
             </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>'Polygon((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1))';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_ExteriorRing(ST_GeomFromText(@poly)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_ExteriorRing（ST_GeomFromText（@poly）））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LINESTRING（0 0,0 3,3 3,3 0,0 0）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_exteriorring"><code class="literal">ExteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-interiorringn"></a><p>
            <a class="indexterm" name="idm140528078046496"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN(<em class="replaceable"><code>poly</code></em>,
            <em class="replaceable"><code>N</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">
            的</font><font style="vertical-align: inherit;">第 - 个内部环</font><font style="vertical-align: inherit;">返回</font></font><em class="replaceable"><code>poly</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为a
             </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">环从1开始编号。如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或几何空的，则返回值为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>'Polygon((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1))';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_InteriorRingN(ST_GeomFromText(@poly),1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_InteriorRingN（ST_GeomFromText（@poly），1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LINESTRING（1 1,1 2,2 2,2 1,1 1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------ +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_interiorringn"><code class="literal">InteriorRingN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-numinteriorrings"></a><p>
            <a class="indexterm" name="idm140528078028400"></a>

            <a class="indexterm" name="idm140528078027328"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRing(<em class="replaceable"><code>poly</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRings(<em class="replaceable"><code>poly</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回内部环的数量
             </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font></font><em class="replaceable"><code>poly</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @poly =</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>'Polygon((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1))';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_NumInteriorRings(ST_GeomFromText(@poly));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_NumInteriorRings（ST_GeomFromText（@poly））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numinteriorrings"><code class="literal">NumInteriorRings()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numinteriorrings"><code class="literal">ST_NumInteriorRing()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            被添加到MySQL 5.7.8。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-geometrycollection-property-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.7.5 GeometryCollection属性函数</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些函数返回</font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">属性
         </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_geometryn"></a><p>
            <a class="indexterm" name="idm140528078002960"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometryn"><code class="literal">GeometryN(<em class="replaceable"><code>gc</code></em>,
            <em class="replaceable"><code>N</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometryn"><code class="literal">GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometryn"><code class="literal">GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_numgeometries"></a><p>
            <a class="indexterm" name="idm140528077989024"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_numgeometries"><code class="literal">NumGeometries(<em class="replaceable"><code>gc</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numgeometries"><code class="literal">ST_NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numgeometries"><code class="literal">NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numgeometries"><code class="literal">ST_NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_numgeometries"><code class="literal">NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numgeometries"><code class="literal">ST_NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-geometryn"></a><p>
            <a class="indexterm" name="idm140528077975408"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN(<em class="replaceable"><code>gc</code></em>,
            <em class="replaceable"><code>N</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font><font style="vertical-align: inherit;">值
             </font><font style="vertical-align: inherit;">中的</font></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第几何几何
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">几何图形从1开始编号。如果有任何参数</font><font style="vertical-align: inherit;">
            或者几何参数是空几何体，则返回值为</font><font style="vertical-align: inherit;">。
          </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>gc</code></em><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @gc = 'GeometryCollection(Point(1 1),LineString(2 2, 3 3))';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeometryN(ST_GeomFromText(@gc),1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeometryN（ST_GeomFromText（@gc），1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（1 1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_geometryn"><code class="literal">GeometryN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-numgeometries"></a><p>
            <a class="indexterm" name="idm140528077958816"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numgeometries"><code class="literal">ST_NumGeometries(<em class="replaceable"><code>gc</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回几何数量
             </font></font><code class="literal">GeometryCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
             </font></font><em class="replaceable"><code>gc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个空的几何体，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @gc = 'GeometryCollection(Point(1 1),LineString(2 2, 3 3))';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_NumGeometries(ST_GeomFromText(@gc));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_NumGeometries（ST_GeomFromText（@gc））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-numgeometries"><code class="literal">ST_NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_numgeometries"><code class="literal">NumGeometries()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-operator-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.8空间操作员功能</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      OpenGIS提出了许多可以产生几何图形的函数。</font><font style="vertical-align: inherit;">它们旨在实施空间操作员。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这些函数支持所有参数类型组合，但根据开放地理空间联盟规范不适用的参数类型组合除外。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_buffer"></a><p>
          <a class="indexterm" name="idm140528077940304"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_buffer"><code class="literal">Buffer(<em class="replaceable"><code>g</code></em>,
          <em class="replaceable"><code>d</code></em>[,
          <em class="replaceable"><code>strategy1</code></em>[,
          <em class="replaceable"><code>strategy2</code></em>[,
          <em class="replaceable"><code>strategy3</code></em>]]])</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_buffer"><code class="literal">Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_buffer"><code class="literal">Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_convexhull"></a><p>
          <a class="indexterm" name="idm140528077925008"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convexhull"><code class="literal">ConvexHull(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-convexhull"><code class="literal">ST_ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convexhull"><code class="literal">ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-convexhull"><code class="literal">ST_ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_convexhull"><code class="literal">ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被弃用，并将在未来的MySQL版本中被删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-convexhull"><code class="literal">ST_ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
           </font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_st-buffer"></a><p>
          <a class="indexterm" name="idm140528077911600"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer(<em class="replaceable"><code>g</code></em>,
          <em class="replaceable"><code>d</code></em>[,
          <em class="replaceable"><code>strategy1</code></em>[,
          <em class="replaceable"><code>strategy2</code></em>[,
          <em class="replaceable"><code>strategy3</code></em>]]])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个几何图形，表示与几何值的距离</font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于距离的</font><font style="vertical-align: inherit;">所有点</font></font><em class="replaceable"><code>d</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">几何参数的SRID必须为0，因为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          仅支持笛卡尔坐标系。</font><font style="vertical-align: inherit;">如果任何几何参数不是语法良好的几何体，
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数为空，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回空几何。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果距离为0，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回几何参数不变：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @pt = ST_GeomFromText('POINT(0 0)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Buffer(@pt, 0));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Buffer（@pt，0））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（0 0）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">负距离，</font><font style="vertical-align: inherit;">以及
           </font><font style="vertical-align: inherit;">包含</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的</font><font style="vertical-align: inherit;">几何集合</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果可能是空的几何体。</font><font style="vertical-align: inherit;">一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于错误发生</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与用于负的距离</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不含有任何值，并且对于几何集合
           </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从MySQL 5.7.7开始，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在距离参数后面最多允许三个可选策略参数。</font><font style="vertical-align: inherit;">策略影响缓冲区计算。</font><font style="vertical-align: inherit;">这些参数是</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer-strategy"><code class="literal">ST_Buffer_Strategy()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">产生的字节串值
           </font><font style="vertical-align: inherit;">，用于点，连接和结束策略：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              点战略适用于</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何。</font><font style="vertical-align: inherit;">如果未指定点策略，则默认为
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer-strategy"><code class="literal">ST_Buffer_Strategy('point_circle',
              32)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              加入策略适用于</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
               </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何形状。</font><font style="vertical-align: inherit;">如果未指定连接策略，则默认为
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer-strategy"><code class="literal">ST_Buffer_Strategy('join_round',
              32)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              结束策略适用于</font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">MultiLineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几何。</font><font style="vertical-align: inherit;">如果没有指定结束策略，则默认为
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer-strategy"><code class="literal">ST_Buffer_Strategy('end_round',
              32)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每种类型最多可以指定一种策略，并且可以按任意顺序给出。</font><font style="vertical-align: inherit;">如果指定了给定类型的多个策略，
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @pt = ST_GeomFromText('POINT(0 0)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @pt_strategy = ST_Buffer_Strategy('point_square');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Buffer(@pt, 2, @pt_strategy));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Buffer（@pt，2，@pt_strategy））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POLYGON（（ -  2 -2,2 -2,2 2，-2 2，-2 -2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls = ST_GeomFromText('LINESTRING(0 0,0 5,5 5)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @end_strategy = ST_Buffer_Strategy('end_flat');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @join_strategy = ST_Buffer_Strategy('join_round', 10);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Buffer(@ls, 5, @end_strategy, @join_strategy))</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Buffer（@ls，5，@end_strategy，@join_strategy））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POLYGON（（5 5,5 10,0 10，-3.5355339059327373 8.535533905932738，|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">-5 5，-5 0,0 0,5 0,5 5））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -------------- +</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_buffer"><code class="literal">Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-buffer-strategy"></a><p>
          <a class="indexterm" name="idm140528077850048"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer-strategy"><code class="literal">ST_Buffer_Strategy(<em class="replaceable"><code>strategy</code></em>[,
          <em class="replaceable"><code>points_per_circle</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数返回一个策略字节字符串，用于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影响缓冲区计算。</font><font style="vertical-align: inherit;">如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任何参数无效，</font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关策略的信息可在
           </font></font><a class="ulink" href="http://www.boost.org/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boost.org上找到</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          第一个参数必须是指示策略选项的字符串：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于积分策略，允许的值是
               </font></font><code class="literal">'point_circle'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">'point_square'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于加入策略，允许的值是
               </font></font><code class="literal">'join_round'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">'join_miter'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于最终战略，允许的值是
               </font></font><code class="literal">'end_round'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><code class="literal">'end_flat'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果第一个参数是</font></font><code class="literal">'point_circle'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">'join_round'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">'join_miter'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或
           </font></font><code class="literal">'end_round'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该
           </font></font><em class="replaceable"><code>points_per_circle</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数必须被给定为正的数值。</font><font style="vertical-align: inherit;">最大值
           </font></font><em class="replaceable"><code>points_per_circle</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_points_in_geometry"><code class="literal">max_points_in_geometry</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量在MySQL 5.7.8,65,536之前的值。</font><font style="vertical-align: inherit;">如果第一个参数是</font></font><code class="literal">'point_square'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
           </font></font><code class="literal">'end_flat'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则
           </font></font><em class="replaceable"><code>points_per_circle</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能给出参数或发生
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关示例，请参阅说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-buffer"><code class="literal">ST_Buffer()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是在MySQL 5.7.7中添加的。
        </font></font></p></li><li class="listitem"><a name="function_st-convexhull"></a><p>
          <a class="indexterm" name="idm140528077818640"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-convexhull"><code class="literal">ST_ConvexHull(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回表示几何值的凸包的几何</font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数通过首先检查其顶点是否共线来计算几何的凸包。</font><font style="vertical-align: inherit;">如果是这样，该函数返回一个线性船体，否则返回一个多边形船体。</font><font style="vertical-align: inherit;">该函数通过提取集合中所有组件的所有顶点来处理几何集合，</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从中</font><font style="vertical-align: inherit;">创建一个
           </font><font style="vertical-align: inherit;">值并计算其凸包。</font><font style="vertical-align: inherit;">如果参数是一个空的几何集合，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g = 'MULTIPOINT(5 0,25 0,15 10,15 25)';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_ConvexHull(ST_GeomFromText(@g)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_ConvexHull（ST_GeomFromText（@g）））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POLYGON（（5 0,25 0,15 25,5 0））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-convexhull"><code class="literal">ST_ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_convexhull"><code class="literal">ConvexHull()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
        </font></font></p></li><li class="listitem"><a name="function_st-difference"></a><p>
          <a class="indexterm" name="idm140528077800928"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-difference"><code class="literal">ST_Difference(<em class="replaceable"><code>g1</code></em>,
          <em class="replaceable"><code>g2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个表示几何值</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font><font style="vertical-align: inherit;">几何值的点集差异的几何图形</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果有任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = Point(1,1), @g2 = Point(2,2);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Difference(@g1, @g2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Difference（@ g1，@ g2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（1 1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-intersection"></a><p>
          <a class="indexterm" name="idm140528077787552"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-intersection"><code class="literal">ST_Intersection(<em class="replaceable"><code>g1</code></em>,
          <em class="replaceable"><code>g2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回表示几何值</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font><font style="vertical-align: inherit;">的点集交集的几何</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果有任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = ST_GeomFromText('LineString(1 1, 3 3)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @g2 = ST_GeomFromText('LineString(1 3, 3 1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Intersection(@g1, @g2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Intersection（@ g1，@ g2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（2 2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-symdifference"></a><p>
          <a class="indexterm" name="idm140528077773408"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-symdifference"><code class="literal">ST_SymDifference(<em class="replaceable"><code>g1</code></em>,
          <em class="replaceable"><code>g2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回表示设置的几何值的对称差的点的几何形状
           </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其被定义为：
        </font></font></p><pre data-lang="clike" class="programlisting"><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">symdifference </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：=（</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">union </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）差异（</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intersection </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或者，在函数调用符号中：
        </font></font></p><pre data-lang="clike" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ST_SymDifference（</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）= ST_Difference（ST_Union（</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），ST_Intersection（</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">））
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = Point(1,1), @g2 = Point(2,2);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_SymDifference(@g1, @g2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_SymDifference（@ g1，@ g2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MULTIPOINT（（1 1），（2 2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-union"></a><p>
          <a class="indexterm" name="idm140528077752432"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-union"><code class="literal">ST_Union(<em class="replaceable"><code>g1</code></em>,
          <em class="replaceable"><code>g2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回表示几何值</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font><font style="vertical-align: inherit;">的点集合并的几何</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果有任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = ST_GeomFromText('LineString(1 1, 3 3)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @g2 = ST_GeomFromText('LineString(1 3, 3 1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Union(@g1, @g2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Union（@ g1，@ g2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MULTILINESTRING（（1 1,3 3），（1 3,3 1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      此外，</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#gis-property-functions" title="12.15.7几何特性函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15.7节“几何特性函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">讨论了几个从现有函数构造新几何的函数。</font><font style="vertical-align: inherit;">有关这些功能的说明，请参阅该部分：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-envelope"><code class="literal">ST_Envelope(<em class="replaceable"><code>g</code></em>)</code></a>
        </p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-startpoint"><code class="literal">ST_StartPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
        </p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-endpoint"><code class="literal">ST_EndPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
        </p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointn"><code class="literal">ST_PointN(<em class="replaceable"><code>ls</code></em>,
          <em class="replaceable"><code>N</code></em>)</code></a>
        </p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-exteriorring"><code class="literal">ST_ExteriorRing(<em class="replaceable"><code>poly</code></em>)</code></a>
        </p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-interiorringn"><code class="literal">ST_InteriorRingN(<em class="replaceable"><code>poly</code></em>,
          <em class="replaceable"><code>N</code></em>)</code></a>
        </p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geometryn"><code class="literal">ST_GeometryN(<em class="replaceable"><code>gc</code></em>,
          <em class="replaceable"><code>N</code></em>)</code></a>
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-relation-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.9测试几何对象之间空间关系的函数</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-relation-functions-object-shapes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.9.1使用对象形状的空间关系函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#spatial-relation-functions-mbr"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.9.2使用最小边界矩形的空间关系函数</font></font></a></span></dt></dl>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节中描述的函数以两个几何为参数，并返回它们之间的定性或定量关系。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL使用OpenGIS规范定义的函数名称实现了两组函数。</font><font style="vertical-align: inherit;">一组使用精确的对象形状测试两个几何值之间的关系，另一组使用对象最小边界矩形（MBR）。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      还有一组基于MBR的函数可用于测试两个几何值之间的关系。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="spatial-relation-functions-object-shapes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.9.1使用对象形状的空间关系函数</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        OpenGIS规范定义了以下函数来测试两个几何值之间的关系，
         </font></font><code class="literal">g1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code class="literal">g2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用精确的对象形状。</font><font style="vertical-align: inherit;">除了
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值1和0分别表示真和假。
        </font><font style="vertical-align: inherit;">，返回距离值。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a>
        <a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance()</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些函数支持所有参数类型组合，但根据开放地理空间联盟规范不适用的参数类型组合除外。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_crosses"></a><p>
            <a class="indexterm" name="idm140528077705808"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_crosses"><code class="literal">Crosses(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-crosses"><code class="literal">ST_Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_crosses"><code class="literal">Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-crosses"><code class="literal">ST_Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_crosses"><code class="literal">Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-crosses"><code class="literal">ST_Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_distance"></a><p>
            <a class="indexterm" name="idm140528077691888"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被弃用，并将在未来的MySQL版本中被删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
             </font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-contains"></a><p>
            <a class="indexterm" name="idm140528077677984"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-contains"><code class="literal">ST_Contains(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0以指示是否
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全包含
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这测试了相反的关系</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-within"><code class="literal">ST_Within()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-crosses"></a><p>
            <a class="indexterm" name="idm140528077668576"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-crosses"><code class="literal">ST_Crosses(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            术语</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间交叉</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示具有以下特性的两个给定几何之间的空间关系：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                两个几何相交。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                它们的相交导致几何图形的维度小于两个给定几何图形的最大维度。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                它们的交点不等于两个给定几何中的任何一个。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此函数返回1或0来指示是否在
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间上交叉
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">g1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是a
             </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或a
             </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者如果
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是a </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            或a </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则返回值为
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果使用不适用的几何参数类型组合调用此函数，则返回0。</font><font style="vertical-align: inherit;">例如，如果第一个参数是</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
             </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和/或第二个参数是</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
             </font><font style="vertical-align: inherit;">，则返回0 </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间交叉，
             </font><font style="vertical-align: inherit;">则返回1 </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code class="literal">g1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是a
             </font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或a
             </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者如果</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是a </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            或a </font><font style="vertical-align: inherit;">，则
             </font><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，返回0。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果使用不适用的几何参数类型组合调用此函数，则返回0。</font><font style="vertical-align: inherit;">例如，如果第一个参数是</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
             </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和/或第二个参数是</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
             </font><font style="vertical-align: inherit;">，则返回0 </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-crosses"><code class="literal">ST_Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_crosses"><code class="literal">Crosses()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-disjoint"></a><p>
            <a class="indexterm" name="idm140528077635776"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-disjoint"><code class="literal">ST_Disjoint(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0以指示是否
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间不相交（不相交）</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-distance"></a><p>
            <a class="indexterm" name="idm140528077627664"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回之间的距离</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            和</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任一参数是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空的几何体，则返回值为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此函数通过返回两个几何参数的组件的所有组合中的最短距离来处理几何集合。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果中间或最终结果产生NaN或负数，
             </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = Point(1,1);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @g2 = Point(2,2);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_Distance(@g1, @g2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Distance（@ g1，@ g2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1.4142135623730951 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance"><code class="literal">ST_Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_distance"><code class="literal">Distance()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-equals"></a><p>
            <a class="indexterm" name="idm140528077608544"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-equals"><code class="literal">ST_Equals(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0来表示</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间</font><font style="vertical-align: inherit;">是否
             </font><font style="vertical-align: inherit;">等于
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = Point(1,1), @g2 = Point(2,2);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_Equals(@g1, @g1), ST_Equals(@g1, @g2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Equals（@ g1，@ g1）| </font><font style="vertical-align: inherit;">ST_Equals（@ g1，@ g2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + --------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-intersects"></a><p>
            <a class="indexterm" name="idm140528077596720"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-intersects"><code class="literal">ST_Intersects(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0来指示是否在
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间上相交
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-overlaps"></a><p>
            <a class="indexterm" name="idm140528077588576"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-overlaps"><code class="literal">ST_Overlaps(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font><font style="vertical-align: inherit;">
            两个几何图形</font><font style="vertical-align: inherit;">相交，并且它们的交集导致几何图形具有相同的尺寸但不等于给定的几何图形，则</font><font style="vertical-align: inherit;">两个几何图形会在</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间上重叠</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该函数返回1或0来指示</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间上</font><font style="vertical-align: inherit;">是否
             </font><font style="vertical-align: inherit;">重叠
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果使用不适用的几何参数类型组合调用此函数，则返回0。</font><font style="vertical-align: inherit;">例如，如果使用不同维度的几何或任何参数调用a，则返回0 </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_st-touches"></a><p>
            <a class="indexterm" name="idm140528077578016"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-touches"><code class="literal">ST_Touches(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            两个几何图形在</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间上接触，</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果它们的内部不相交，但其中一个几何图形的边界与另一个的边界或内部相交。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此函数返回1或0以指示
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间触摸
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果使用不适用的几何参数类型组合调用此函数，则返回0。</font><font style="vertical-align: inherit;">例如，如果其中任何一个参数是a </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            或</font><font style="vertical-align: inherit;">，它将返回0 </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-touches"><code class="literal">ST_Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_touches"><code class="literal">Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_st-within"></a><p>
            <a class="indexterm" name="idm140528077563968"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-within"><code class="literal">ST_Within(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0以指示是否
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在空间范围内
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这测试了相反的关系
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-contains"><code class="literal">ST_Contains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_touches"></a><p>
            <a class="indexterm" name="idm140528077554544"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_touches"><code class="literal">Touches(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-touches"><code class="literal">ST_Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_touches"><code class="literal">Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-touches"><code class="literal">ST_Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_touches"><code class="literal">Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-touches"><code class="literal">ST_Touches()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="spatial-relation-functions-mbr"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.9.2使用最小边界矩形的空间关系函数</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528077542064"></a><a class="indexterm" name="idm140528077541024"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL提供用于测试最小外接矩形两个几何的（MBR）的之间的关系几个MySQL特定功能</font></font><code class="literal">g1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">g2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回值1和0分别表示true和false。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本节后面将介绍根据OpenGIS规范定义的一组相应的MBR函数。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_mbrcontains"></a><p>
            <a class="indexterm" name="idm140528077533408"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0来指示最小边界矩形是否</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含最小边界矩形</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这测试了相反的关系
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = ST_GeomFromText('Polygon((0 0,0 3,3 3,3 0,0 0))');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @g2 = ST_GeomFromText('Point(1 1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT MBRContains(@g1,@g2), MBRWithin(@g2,@g1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MBRContains（@ g1，@ g2）| </font><font style="vertical-align: inherit;">MBRWithin（@ g2，@ g1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + -------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_contains"><code class="literal">Contains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_mbrcoveredby"></a><p>
            <a class="indexterm" name="idm140528077517824"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcoveredby"><code class="literal">MBRCoveredBy(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0来指示最小边界矩形是否被最小边界矩形</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所覆盖</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这测试了相反的关系
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcovers"><code class="literal">MBRCovers()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcoveredby"><code class="literal">MBRCoveredBy()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 处理其论点如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果任一参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空的几何体，则返回值为
                 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果任一参数不是一个语法良好的几何字节字符串，
                 </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                则会发生错误。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                否则，返回值不是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = ST_GeomFromText('Polygon((0 0,0 3,3 3,3 0,0 0))');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @g2 = ST_GeomFromText('Point(1 1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT MBRCovers(@g1,@g2), MBRCoveredby(@g1,@g2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MBRCovers（@ g1，@ g2）| </font><font style="vertical-align: inherit;">MBRCoveredby（@ g1，@ g2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT MBRCovers(@g2,@g1), MBRCoveredby(@g2,@g1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MBRCovers（@ g2，@ g1）| </font><font style="vertical-align: inherit;">MBRCoveredby（@ g2，@ g1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ----------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_mbrcovers"></a><p>
            <a class="indexterm" name="idm140528077495680"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcovers"><code class="literal">MBRCovers(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0以指示</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">覆盖最小边界矩形的最小边界矩形</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这测试了相反的关系
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcoveredby"><code class="literal">MBRCoveredBy()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参阅</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcoveredby"><code class="literal">MBRCoveredBy()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            示例的说明。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcovers"><code class="literal">MBRCovers()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 处理其论点如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果任一参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空的几何体，则返回值为
                 </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果任一参数不是一个语法良好的几何字节字符串，
                 </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                则会发生错误。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                否则，返回值不是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><a name="function_mbrdisjoint"></a><p>
            <a class="indexterm" name="idm140528077476912"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0，以指示两个几何的最小外接矩形是否
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不相交的（不相交）。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_disjoint"><code class="literal">Disjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_mbrequal"></a><p>
            <a class="indexterm" name="idm140528077465808"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequal"><code class="literal">MBREqual(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0，以指示最低是否界定两个几何的矩形
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是相同的。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequal"><code class="literal">MBREqual()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_mbrequals"></a><p>
            <a class="indexterm" name="idm140528077455344"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0，以指示最低是否界定两个几何的矩形
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是相同的。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequal"><code class="literal">MBREqual()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_equals"><code class="literal">Equals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这个函数是在MySQL 5.7.6中添加的。
          </font></font></p></li><li class="listitem"><a name="function_mbrintersects"></a><p>
            <a class="indexterm" name="idm140528077442576"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrintersects"><code class="literal">MBRIntersects(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0，以指示两个几何的最小外接矩形是否
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相交。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrintersects"><code class="literal">MBRIntersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_intersects"><code class="literal">Intersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_mbroverlaps"></a><p>
            <a class="indexterm" name="idm140528077431584"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbroverlaps"><code class="literal">MBROverlaps(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font><font style="vertical-align: inherit;">
            两个几何图形</font><font style="vertical-align: inherit;">相交，并且它们的交集导致几何图形具有相同的尺寸但不等于给定的几何图形，则</font><font style="vertical-align: inherit;">两个几何图形会在</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间上重叠</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此函数返回1或0，以指示是否所述两个几何的最小外接矩形
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重叠。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbroverlaps"><code class="literal">MBROverlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_overlaps"><code class="literal">Overlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
          </font></font></p></li><li class="listitem"><a name="function_mbrtouches"></a><p>
            <a class="indexterm" name="idm140528077419472"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrtouches"><code class="literal">MBRTouches(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            两个几何图形在</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间上接触，</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果它们的内部不相交，但其中一个几何图形的边界与另一个的边界或内部相交。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此函数返回1或0，以指示最低是否界定两个几何的矩形
             </font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">触感。
          </font></font></p></li><li class="listitem"><a name="function_mbrwithin"></a><p>
            <a class="indexterm" name="idm140528077410208"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回1或0以指示最小边界矩形是否在最小边界矩形</font></font><em class="replaceable"><code>g1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内</font></font><em class="replaceable"><code>g2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这测试了相反的关系
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g1 = ST_GeomFromText('Polygon((0 0,0 3,3 3,3 0,0 0))');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @g2 = ST_GeomFromText('Polygon((0 0,0 5,5 5,5 0,0 0))');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT MBRWithin(@g1,@g2), MBRWithin(@g2,@g1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">MBRWithin（@ g1，@ g2）| </font><font style="vertical-align: inherit;">MBRWithin（@ g2，@ g1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + -------------------- +</font></font><font></font>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_within"><code class="literal">Within()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        OpenGIS规范定义了以下用于测试两个几何值</font></font><code class="literal">g1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">之间关系的函数
         </font></font><code class="literal">g2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL实现使用最小边界矩形，所以这些函数返回与本节前面介绍的相应的基于MBR的函数相同的结果。</font><font style="vertical-align: inherit;">返回值1和0分别表示true和false。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些函数支持所有参数类型组合，但根据开放地理空间联盟规范不适用的参数类型组合除外。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_contains"></a><p>
            <a class="indexterm" name="idm140528077390816"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_contains"><code class="literal">Contains(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_contains"><code class="literal">Contains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_contains"><code class="literal">Contains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_disjoint"></a><p>
            <a class="indexterm" name="idm140528077376880"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_disjoint"><code class="literal">Disjoint(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_disjoint"><code class="literal">Disjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_disjoint"><code class="literal">Disjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_equals"></a><p>
            <a class="indexterm" name="idm140528077362944"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_equals"><code class="literal">Equals(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_equals"><code class="literal">Equals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_equals"><code class="literal">Equals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrequals"><code class="literal">MBREquals()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_intersects"></a><p>
            <a class="indexterm" name="idm140528077349024"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_intersects"><code class="literal">Intersects(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrintersects"><code class="literal">MBRIntersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_intersects"><code class="literal">Intersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrintersects"><code class="literal">MBRIntersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_intersects"><code class="literal">Intersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrintersects"><code class="literal">MBRIntersects()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_overlaps"></a><p>
            <a class="indexterm" name="idm140528077335088"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_overlaps"><code class="literal">Overlaps(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbroverlaps"><code class="literal">MBROverlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_overlaps"><code class="literal">Overlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbroverlaps"><code class="literal">MBROverlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_overlaps"><code class="literal">Overlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbroverlaps"><code class="literal">MBROverlaps()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_within"></a><p>
            <a class="indexterm" name="idm140528077321152"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_within"><code class="literal">Within(<em class="replaceable"><code>g1</code></em>,
            <em class="replaceable"><code>g2</code></em>)</code></a>
          </p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_within"><code class="literal">Within()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同义词。</font><font style="vertical-align: inherit;">有关更多信息，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_within"><code class="literal">Within()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从MySQL 5.7.6开始已弃用，并将在未来的MySQL版本中删除。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-geohash-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.10空间地理散列函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      Geohash是一个将任意精度的纬度和经度坐标编码成文本字符串的系统。</font><font style="vertical-align: inherit;">Geohash值是仅包含从中选择的字符的字符串
       </font></font><code class="literal">"0123456789bcdefghjkmnpqrstuvwxyz"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节中的函数可以对geohash值进行操作，从而为应用程序提供导入和导出geohash数据，以及索引和搜索geohash值的功能。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_st-geohash"></a><p>
          <a class="indexterm" name="idm140528077303424"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geohash"><code class="literal">ST_GeoHash(<em class="replaceable"><code>longitude</code></em>,
          <em class="replaceable"><code>latitude</code></em>,
          <em class="replaceable"><code>max_length</code></em>)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geohash"><code class="literal">ST_GeoHash(<em class="replaceable"><code>point</code></em>,
          <em class="replaceable"><code>max_length</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回连接字符集和归类中的geohash字符串。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任何参数无效，则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于第一种语法，</font></font><em class="replaceable"><code>longitude</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          必须是[-180，180]范围内的数字，并且
           </font></font><em class="replaceable"><code>latitude</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是范围[-90,90]中的数字。</font><font style="vertical-align: inherit;">对于第二种语法，</font></font><code class="literal">POINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font><font style="vertical-align: inherit;">一个
           </font><font style="vertical-align: inherit;">值，其中X和Y坐标分别在经度和纬度的有效范围内。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果字符串不超过
           </font></font><em class="replaceable"><code>max_length</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符数，其上限为100.字符串可能比</font></font><em class="replaceable"><code>max_length</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">短，
           </font><font style="vertical-align: inherit;">因为创建geohash值的算法会一直持续到创建一个字符串，该字符串可能是位置或</font></font><em class="replaceable"><code>max_length</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          字符</font><font style="vertical-align: inherit;">的精确表示</font><font style="vertical-align: inherit;">， 以先到者为准。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_GeoHash(180,0,10), ST_GeoHash(-180,-90,15);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_GeoHash（180,0,10）| </font><font style="vertical-align: inherit;">ST_GeoHash（-180，-90,15）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">xbpbpbpbpb | </font><font style="vertical-align: inherit;">000000000000000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- + ------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-latfromgeohash"></a><p>
          <a class="indexterm" name="idm140528077284512"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-latfromgeohash"><code class="literal">ST_LatFromGeoHash(<em class="replaceable"><code>geohash_str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回geohash字符串值的纬度，作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围[ </font><font style="vertical-align: inherit;">-90,90
           </font><font style="vertical-align: inherit;">]中的值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数无效，则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-latfromgeohash"><code class="literal">ST_LatFromGeoHash()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          解码功能读取来自不超过433个字符
           </font></font><em class="replaceable"><code>geohash_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数。</font><font style="vertical-align: inherit;">这代表了坐标值内部表示中信息的上限。</font><font style="vertical-align: inherit;">超过433的字符被忽略，即使它们在其他方面是非法的并且会产生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_LatFromGeoHash(ST_GeoHash(45,-20,10));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_LatFromGeoHash（ST_GeoHash（45，-20,10））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">-20 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------ +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-longfromgeohash"></a><p>
          <a class="indexterm" name="idm140528077269488"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-longfromgeohash"><code class="literal">ST_LongFromGeoHash(<em class="replaceable"><code>geohash_str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回geohash字符串值的经度，作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font><font style="vertical-align: inherit;">-180，180 </font><font style="vertical-align: inherit;">]范围内</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数无效，则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-latfromgeohash"><code class="literal">ST_LatFromGeoHash()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于从</font></font><em class="replaceable"><code>geohash_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">处理的最大字符数
           </font><font style="vertical-align: inherit;">
          的描述中的注释
           </font><font style="vertical-align: inherit;">也适用于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-longfromgeohash"><code class="literal">ST_LongFromGeoHash()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_LongFromGeoHash(ST_GeoHash(45,-20,10));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_LongFromGeoHash（ST_GeoHash（45，-20,10））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">45 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-pointfromgeohash"></a><p>
          <a class="indexterm" name="idm140528077253312"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromgeohash"><code class="literal">ST_PointFromGeoHash(<em class="replaceable"><code>geohash_str</code></em>,
          <em class="replaceable"><code>srid</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">POINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定一个geohash字符串值，</font><font style="vertical-align: inherit;">
          返回</font><font style="vertical-align: inherit;">包含已解码的geohash值的值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该点的X和Y坐标分别是[-180,180]范围内的经度和[-90,90]范围内的纬度。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任何参数无效，则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><em class="replaceable"><code>srid</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是一个无符号的32位整数。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-latfromgeohash"><code class="literal">ST_LatFromGeoHash()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于从</font></font><em class="replaceable"><code>geohash_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">处理的最大字符数
           </font><font style="vertical-align: inherit;">
          的描述中的注释
           </font><font style="vertical-align: inherit;">也适用于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-pointfromgeohash"><code class="literal">ST_PointFromGeoHash()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @gh = ST_GeoHash(45,-20,10);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_PointFromGeoHash(@gh,0));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_PointFromGeoHash（@ gh，0））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（45 -20）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-geojson-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.11空间GeoJSON函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节介绍用于在GeoJSON文档和空间值之间进行转换的功能。</font><font style="vertical-align: inherit;">GeoJSON是用于编码几何/地理特征的开放标准。</font><font style="vertical-align: inherit;">有关更多信息，请参阅</font></font><a class="ulink" href="http://geojson.org/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://geojson.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这里讨论的功能遵循GeoJSON规范修订版1.0。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      GeoJSON支持与MySQL支持的相同的几何/地理数据类型。</font><font style="vertical-align: inherit;">Feature和FeatureCollection对象不受支持，但几何对象是从中提取的。</font><font style="vertical-align: inherit;">CRS支持仅限于识别SRID的值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL还支持本地</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      数据类型和一组SQL函数，以启用对JSON值的操作。</font><font style="vertical-align: inherit;">有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.6节“JSON数据类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-functions" title="12.16 JSON函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.16节“JSON函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_st-asgeojson"></a><p>
          <a class="indexterm" name="idm140528077228240"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-asgeojson"><code class="literal">ST_AsGeoJSON(<em class="replaceable"><code>g</code></em>
          [, <em class="replaceable"><code>max_dec_digits</code></em> [,
          <em class="replaceable"><code>options</code></em>]])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从几何生成一个GeoJSON对象
           </font></font><em class="replaceable"><code>g</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对象字符串具有连接字符集和归类。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任何非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数无效，则会发生错误。
        </font></font></p><p>
          <em class="replaceable"><code>max_dec_digits</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果指定，则限制坐标的小数位数并导致输出四舍五入。</font><font style="vertical-align: inherit;">如果未指定，则此参数默认为其最大值2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  1。最小值为0。
        </font></font></p><p>
          <em class="replaceable"><code>options</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果指定，则是一个位掩码。</font><font style="vertical-align: inherit;">下表显示了允许的标志值。</font><font style="vertical-align: inherit;">如果geometry参数的SRID为0，则即使对于请求一个的标志值，也不会生成CRS对象。
</font></font></p>
<div class="informaltable">
<table summary="Option flags for the ST_AsGeoJSON() function."><colgroup><col width="10%"><col width="90%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志值</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有选择。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>options</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未指定，</font><font style="vertical-align: inherit;">则这是默认值</font><font style="vertical-align: inherit;">。</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加一个边界框到输出。</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在输出中添加一个短格式的CRS URN。</font><font style="vertical-align: inherit;">默认格式是短格式（</font><font style="vertical-align: inherit;">）。</font></font><code class="literal">EPSG:<em class="replaceable"><code>srid</code></em></code><font style="vertical-align: inherit;"></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加一个长格式的CRS URN（</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">此标志覆盖标志2.例如，选项值5和7的含义相同（添加边界框和长格式CRS URN）。</font></font><code class="literal">urn:ogc:def:crs:EPSG::<em class="replaceable"><code>srid</code></em></code><font style="vertical-align: inherit;"></font></td>
</tr></tbody></table>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_AsGeoJSON(ST_GeomFromText('POINT(11.11111 12.22222)'),2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsGeoJSON（ST_GeomFromText（'POINT（11.11111 12.22222）'），2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“type”：“Point”，“coordinates”：[11.11，12.22]} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------ +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_st-geomfromgeojson"></a><p>
          <a class="indexterm" name="idm140528077193552"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-geomfromgeojson"><code class="literal">ST_GeomFromGeoJSON(<em class="replaceable"><code>str</code></em>
          [, <em class="replaceable"><code>options</code></em> [,
          <em class="replaceable"><code>srid</code></em>]])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          分析</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示GeoJSON对象</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">并返回几何。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任何非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数无效，则会发生错误。
        </font></font></p><p>
          <em class="replaceable"><code>options</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果给出，描述如何处理包含坐标尺寸高于2的几何图形的GeoJSON文档。下表显示了允许的</font></font><em class="replaceable"><code>options</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
</font></font></p>
<div class="informaltable">
<table summary="Option flags for the ST_GeomFromGeoJSON() function."><colgroup><col width="10%"><col width="90%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期权价值</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拒绝文档并产生错误。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>options</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未指定，</font><font style="vertical-align: inherit;">则这是默认值
                 </font><font style="vertical-align: inherit;">。</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2，3，4</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受文件并剥离较高坐标尺寸的坐标。</font></font></td>
</tr></tbody></table>
</div>
<p>
          <em class="replaceable"><code>options</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,3和4的值目前产生相同的效果。</font><font style="vertical-align: inherit;">如果将来支持坐标尺寸高于2的几何，这些值将产生不同的效果。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><em class="replaceable"><code>srid</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，如果给定的，必须是一个32位无符号整数。</font><font style="vertical-align: inherit;">如果未给定，则几何返回值的SRID为4326。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          GeoJSON几何，要素和要素集合对象可能有一个</font></font><code class="literal">crs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性。</font><font style="vertical-align: inherit;">解析函数解析名为CRS的URN在
           </font><font style="vertical-align: inherit;">
          和</font><font style="vertical-align: inherit;">
          命名空间，但不作为的CRS链接对象给出。</font><font style="vertical-align: inherit;">此外，
           </font><font style="vertical-align: inherit;">被识别为SRID 4326.如果对象具有不明白的CRS，则会发生错误，但是，如果</font><font style="vertical-align: inherit;">给出</font><font style="vertical-align: inherit;">可选
           </font><font style="vertical-align: inherit;">参数，则即使该CRS无效，也会忽略它。
        </font></font><code class="literal">urn:ogc:def:crs:EPSG::<em class="replaceable"><code>srid</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">EPSG:<em class="replaceable"><code>srid</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">urn:ogc:def:crs:OGC:1.3:CRS84</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>srid</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          按照GeoJSON规范中的规定，解析对于</font></font><code class="literal">type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GeoJSON输入</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">成员（</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等等）</font><font style="vertical-align: inherit;">是区分大小写的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该规范没有提及其他解析的区分大小写，这在MySQL中不区分大小写。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个例子显示了一个简单的GeoJSON对象的解析结果：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @json = '{ "type": "Point", "coordinates": [102.0, 0.0]}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_GeomFromGeoJSON(@json));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_GeomFromGeoJSON（@json））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POINT（102 0）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-convenience-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.15.12空间便利功能</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节中的函数提供了对几何值的便利操作。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_st-distance-sphere"></a><p>
          <a class="indexterm" name="idm140528077154192"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-distance-sphere"><code class="literal">ST_Distance_Sphere(<em class="replaceable"><code>g1</code></em>,
          <em class="replaceable"><code>g2</code></em> [,
          <em class="replaceable"><code>radius</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回球体上两点和/或多点之间的最小球面距离，单位为米，或者
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何几何参数为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或空。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计算使用球形地球和可配置的半径。</font><font style="vertical-align: inherit;">可选</font></font><em class="replaceable"><code>radius</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数应以米为单位给出。</font><font style="vertical-align: inherit;">如果省略，则默认半径为6,370,986米。</font><font style="vertical-align: inherit;">一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果出现错误</font></font><em class="replaceable"><code>radius</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的说法是存在的，但并不积极。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何参数应由指定（经度，纬度）坐标值的点组成：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              经度和纬度分别是该点的第一个和第二个坐标。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              两个坐标都是度数。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              经度值必须在（-180，180）范围内。正值在主子午线的东侧。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              纬度值必须在[-90,90]的范围内。</font><font style="vertical-align: inherit;">正值是赤道以北。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          支持的参数组合是（</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），（</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和（</font></font><code class="literal">MultiPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_unsupported_argument"><code class="literal">ER_GIS_UNSUPPORTED_ARGUMENT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为其他的组合会出现误差。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果任何几何参数不是语法良好的几何字节字符串，
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @pt1 = ST_GeomFromText('POINT(0 0)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @pt2 = ST_GeomFromText('POINT(180 0)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_Distance_Sphere(@pt1, @pt2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_Distance_Sphere（@ pt1，@ pt2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">20015042.813723423 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是在MySQL 5.7.6中添加的。
        </font></font></p></li><li class="listitem"><a name="function_st-isvalid"></a><p>
          <a class="indexterm" name="idm140528077124672"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isvalid"><code class="literal">ST_IsValid(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数的句法结构良好并且几何有效，则返回1;如果参数的句法结构不正确或几何上不有效，则返回0。</font><font style="vertical-align: inherit;">如果参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">几何有效性由OGC规范定义。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          唯一有效的空几何体以空几何体集合值的形式表示。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isvalid"><code class="literal">ST_IsValid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下返回1。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isvalid"><code class="literal">ST_IsValid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于笛卡尔坐标系，并且需要SRID为0的几何参数
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。否则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls1 = ST_GeomFromText('LINESTRING(0 0,-0.00 0,0.0 0)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @ls2 = ST_GeomFromText('LINESTRING(0 0, 1 1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_IsValid(@ls1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_IsValid（@ ls1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_IsValid(@ls2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_IsValid（@ ls2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是在MySQL 5.7.6中添加的。
        </font></font></p></li><li class="listitem"><a name="function_st-makeenvelope"></a><p>
          <a class="indexterm" name="idm140528077105520"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-makeenvelope"><code class="literal">ST_MakeEnvelope(<em class="replaceable"><code>pt1</code></em>,
          <em class="replaceable"><code>pt2</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回形成围绕两点信封，作为一个矩形</font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">LineString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用笛卡尔坐标系而不是球体，球体或地球进行计算。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定两个点</font></font><em class="replaceable"><code>pt1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><em class="replaceable"><code>pt2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-makeenvelope"><code class="literal">ST_MakeEnvelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">产生在这样一个抽象的平面结果的几何图形：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><em class="replaceable"><code>pt1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><em class="replaceable"><code>pt2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平等，结果就是重点</font></font><em class="replaceable"><code>pt1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              否则，如果</font><font style="vertical-align: inherit;">是垂直或水平线段，则结果是线段
               </font><font style="vertical-align: inherit;">。
            </font></font><code class="literal">(<em class="replaceable"><code>pt1</code></em>,
              <em class="replaceable"><code>pt2</code></em>)</code><font style="vertical-align: inherit;"></font><code class="literal">(<em class="replaceable"><code>pt1</code></em>,
              <em class="replaceable"><code>pt2</code></em>)</code><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              否则，结果是使用多边形
               </font></font><em class="replaceable"><code>pt1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font></font><em class="replaceable"><code>pt2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对角点。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果几何体的SRID为0。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-makeenvelope"><code class="literal">ST_MakeEnvelope()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要
           </font></font><code class="literal">Point</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SRID为0的几何参数</font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。否则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果任何参数不是语法良好的几何字节字符串，或者两点的任何坐标值都是无限的（即</font></font><code class="literal">NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @pt1 = ST_GeomFromText('POINT(0 0)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @pt2 = ST_GeomFromText('POINT(1 1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_MakeEnvelope(@pt1, @pt2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_MakeEnvelope（@ pt1，@ pt2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">POLYGON（（0 0,1 0,1 1,0 1,0 0））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是在MySQL 5.7.6中添加的。
        </font></font></p></li><li class="listitem"><a name="function_st-simplify"></a><p>
          <a class="indexterm" name="idm140528077071696"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-simplify"><code class="literal">ST_Simplify(<em class="replaceable"><code>g</code></em>,
          <em class="replaceable"><code>max_distance</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用Douglas-Peucker算法简化几何，并返回相同类型的简化值。</font><font style="vertical-align: inherit;">如果有任何参数</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          几何图形可以是任何几何类型，但Douglas-Peucker算法实际上可能不处理每种类型。</font><font style="vertical-align: inherit;">通过将其组件逐个提供给简化算法来处理几何集合，并将返回的几何体作为结果放入几何集合中。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><em class="replaceable"><code>max_distance</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是要除去的距离（在输入坐标的单位）顶点到其他段。</font><font style="vertical-align: inherit;">简化线串的这个距离内的顶点被移除。</font><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>max_distance</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说法是不积极，或者是</font></font><code class="literal">NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误发生。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据Boost.Geometry，由于简化过程，几何可能会失效，并且该过程可能会创建自交集。</font><font style="vertical-align: inherit;">要检查结果的有效性，请将其传递给
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-isvalid"><code class="literal">ST_IsValid()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数不是语法良好的几何字节字符串，
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_gis_invalid_data"><code class="literal">ER_GIS_INVALID_DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @g = ST_GeomFromText('LINESTRING(0 0,0 1,1 1,1 2,2 2,2 3,3 3)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Simplify(@g, 0.5));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Simplify（@g，0.5））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LINESTRING（0 0,0 1,1 1,2 3,3 3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Simplify(@g, 1.0));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Simplify（@g，1.0））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LINESTRING（0 0,3 3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是在MySQL 5.7.6中添加的。
        </font></font></p></li><li class="listitem"><a name="function_st-validate"></a><p>
          <a class="indexterm" name="idm140528077049664"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-validate"><code class="literal">ST_Validate(<em class="replaceable"><code>g</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据OGC规范验证几何。</font><font style="vertical-align: inherit;">几何形状可以在语法上形成良好（WKB值加上SRID），但几何上无效。</font><font style="vertical-align: inherit;">例如，这个多边形在几何上是无效的：</font></font><code class="literal">POLYGON((0 0, 0 0, 0 0, 0 0, 0
          0))</code>
        </p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-validate"><code class="literal">ST_Validate()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果它的句法结构良好并且在几何上是有效的，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数不是语法上格式良好的或者几何上不是有效的，或者是非几何上的，则返回几何</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-validate"><code class="literal">ST_Validate()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用来过滤掉无效的几何数据，尽管是有代价的。</font><font style="vertical-align: inherit;">对于需要更精确的结果而不会被无效数据污染的应用程序，这种惩罚可能是值得的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果几何参数有效，则按原样返回，但如果输入</font></font><code class="literal">Polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">MultiPolygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顺时针响起，那么在检查有效性之前将这些环颠倒。</font><font style="vertical-align: inherit;">如果几何图形有效，则返回具有相反环的值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          唯一有效的空几何体以空几何体集合值的形式表示。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-validate"><code class="literal">ST_Validate()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下直接返回而无需进一步检查。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_st-validate"><code class="literal">ST_Validate()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于笛卡尔坐标系，并且需要SRID为0的几何参数
           </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_wrong_arguments"><code class="literal">ER_WRONG_ARGUMENTS</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。否则会发生错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @ls1 = ST_GeomFromText('LINESTRING(0 0)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @ls2 = ST_GeomFromText('LINESTRING(0 0, 1 1)');</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Validate(@ls1));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Validate（@ ls1））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ST_AsText(ST_Validate(@ls2));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ST_AsText（ST_Validate（@ ls2））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">LINESTRING（0 0,1 1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是在MySQL 5.7.6中添加的。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="json-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16 JSON函数</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-function-reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.1 JSON函数参考</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-creation-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.2创建JSON值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-search-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.3搜索JSON值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-modification-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.4修改JSON值的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-attribute-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.5返回JSON值属性的函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-utility-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.6 JSON实用程序函数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#json-path-syntax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.7 JSON路径语法</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528077025440"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本节中介绍的功能将对JSON值执行操作。</font><font style="vertical-align: inherit;">有关</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    数据类型的</font><font style="vertical-align: inherit;">讨论</font><font style="vertical-align: inherit;">和显示如何使用这些函数的其他示例，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.6节“JSON数据类型”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    对于采用JSON参数的函数，如果参数不是有效的JSON值，则会发生错误。</font><font style="vertical-align: inherit;">解析为JSON的参数表示为</font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">表示的参数</font></font><em class="replaceable"><code>val</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不被解析。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    除非另有说明，否则JSON函数会添加到MySQL 5.7.8中。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    还可以使用一组用于GeoJSON值操作的空间函数。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#spatial-geojson-functions" title="12.15.11空间GeoJSON函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.15.11节“空间GeoJSON函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="json-function-reference"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.1 JSON函数参考</font></font></h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140528077017616"></a>
<div class="table">
<a name="idm140528077016544"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.20 JSON函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists all JSON functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-append"><code class="literal">JSON_APPEND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.9）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据追加到JSON文档
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array"><code class="literal">JSON_ARRAY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建JSON数组
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-append"><code class="literal">JSON_ARRAY_APPEND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据追加到JSON文档
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-insert"><code class="literal">JSON_ARRAY_INSERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      插入到JSON数组中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      评估路径后从JSON列返回值; </font><font style="vertical-align: inherit;">相当于JSON_EXTRACT（）。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains"><code class="literal">JSON_CONTAINS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档是否包含路径上的特定对象
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains-path"><code class="literal">JSON_CONTAINS_PATH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档是否包含路径上的任何数据
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-depth"><code class="literal">JSON_DEPTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档的最大深度
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-extract"><code class="literal">JSON_EXTRACT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从JSON文档返回数据
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-inline-path"><code class="literal">-&gt;&gt;</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在评估路径并取消引用结果后，从JSON列返回值; </font><font style="vertical-align: inherit;">相当于JSON_UNQUOTE（JSON_EXTRACT（））。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据插入到JSON文档中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-keys"><code class="literal">JSON_KEYS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档中的键数组
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-length"><code class="literal">JSON_LENGTH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档中的元素数量
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge"><code class="literal">JSON_MERGE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （不赞成5.7.22）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      合并JSON文档，保留重复的键。</font><font style="vertical-align: inherit;">已弃用的JSON_MERGE_PRESERVE（）的同义词
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-patch"><code class="literal">JSON_MERGE_PATCH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      合并JSON文档，替换重复键值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-preserve"><code class="literal">JSON_MERGE_PRESERVE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      合并JSON文档，保留重复的键
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-object"><code class="literal">JSON_OBJECT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建JSON对象
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-pretty"><code class="literal">JSON_PRETTY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以可读格式打印JSON文档，每个数组元素或对象成员打印在新行上，相对于其父项缩进两个空格。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-quote"><code class="literal">JSON_QUOTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      引用JSON文档
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-remove"><code class="literal">JSON_REMOVE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从JSON文档中删除数据
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在JSON文档中替换值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-search"><code class="literal">JSON_SEARCH()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON文档中的值的路径
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将数据插入到JSON文档中
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-storage-size"><code class="literal">JSON_STORAGE_SIZE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      用于存储JSON文档的二进制表示的空间; </font><font style="vertical-align: inherit;">对于JSON列，是在插入文档时使用的空间，在任何部分更新之前
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON值的类型
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-unquote"><code class="literal">JSON_UNQUOTE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      取消引用JSON值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-valid"><code class="literal">JSON_VALID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      JSON值是否有效
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      MySQL 5.7.22及更高版本支持两个聚合JSON函数
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-arrayagg"><code class="literal">JSON_ARRAYAGG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-objectagg"><code class="literal">JSON_OBJECTAGG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">这些的描述，</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-functions-and-modifiers" title="12.19聚合（GROUP BY）函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.19节“聚合（GROUP BY）函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      也从MySQL 5.7.22开始：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-pretty"><code class="literal">JSON_PRETTY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">可以获得易于阅读的JSON值的
           </font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">漂亮打印</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以看到给定的JSON值占用了多少存储空间</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-storage-size"><code class="literal">JSON_STORAGE_SIZE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关这两个函数的完整说明，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-utility-functions" title="12.16.6 JSON实用程序函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.16.6节“JSON实用程序函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="json-creation-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.2创建JSON值的函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节中列出的功能组合来自组件元素的JSON值。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_json-array"></a><p>
          <a class="indexterm" name="idm140528076906688"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array"><code class="literal">JSON_ARRAY([<em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>val</code></em>] ...])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计算一个（可能为空的）值列表并返回一个包含这些值的JSON数组。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY(1, "abc", NULL, TRUE, CURTIME());</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY（1，“abc”，NULL，TRUE，CURTIME（））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，“abc”，null，true，“11：30：24.000000”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-object"></a><p>
          <a class="indexterm" name="idm140528076895280"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-object"><code class="literal">JSON_OBJECT([<em class="replaceable"><code>key</code></em>,
          <em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>key</code></em>,
          <em class="replaceable"><code>val</code></em>] ...])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计算（可能为空）的键值对列表并返回包含这些对的JSON对象。</font><font style="vertical-align: inherit;">如果任何键名称</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或参数个数为奇数，</font><font style="vertical-align: inherit;">则会发生错误</font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_OBJECT('id', 87, 'name', 'carrot');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_OBJECT（'​​id'，87，'name'，'carrot'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：87，“name”：“carrot”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-quote"></a><p>
          <a class="indexterm" name="idm140528076882320"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-quote"><code class="literal">JSON_QUOTE(<em class="replaceable"><code>string</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过用双引号字符包装并引用内部引号和其他字符引用字符串作为JSON值，然后将结果作为</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是，则
           </font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数通常用于生成包含在JSON文档中的有效JSON字符串文字。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-unquote-character-escape-sequences" title="表12.21 JSON_UNQUOTE（）特殊字符转义序列"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.21“JSON_UNQUOTE（）特殊字符转义序列”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示的转义序列，某些特殊字符会使用反斜杠进行转义
           </font><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_QUOTE('null'), JSON_QUOTE('"null"');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_QUOTE（'null'）| </font><font style="vertical-align: inherit;">JSON_QUOTE（'“null”'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“null”| </font><font style="vertical-align: inherit;">“\”null \“”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- + ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_QUOTE('[1, 2, 3]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_QUOTE（'[1，2，3]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“[1，2，3]”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您还可以通过将其他类型的值转换为</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用的
       </font><font style="vertical-align: inherit;">类型来获取JSON值</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">有关更多信息，</font><font style="vertical-align: inherit;">请参阅
       </font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-converting-between-types" title="在JSON和非JSON值之间转换"><font style="vertical-align: inherit;">在JSON和非JSON值之间转换</font></a><font style="vertical-align: inherit;">。
    </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>value</code></em> AS
      JSON)</code></a><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-converting-between-types" title="在JSON和非JSON值之间转换"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      生成JSON值的两个聚合函数可用（MySQL 5.7.22和更高版本）。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-arrayagg"><code class="literal">JSON_ARRAYAGG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将结果集作为单个JSON数组</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-objectagg"><code class="literal">JSON_OBJECTAGG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">，
       </font><font style="vertical-align: inherit;">并将结果集作为单个JSON对象返回。</font><font style="vertical-align: inherit;">有关更多信息，请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-functions-and-modifiers" title="12.19聚合（GROUP BY）函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.19节“聚合（GROUP BY）函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="json-search-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.3搜索JSON值的函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节中的函数对JSON值执行搜索操作以从中提取数据，报告数据是存在于其中的某个位置，还是报告其中的数据路径。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_json-contains"></a><p>
          <a class="indexterm" name="idm140528076856384"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains"><code class="literal">JSON_CONTAINS(<em class="replaceable"><code>target</code></em>,
          <em class="replaceable"><code>candidate</code></em>[,
          <em class="replaceable"><code>path</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过返回1或0指示给定的
           </font></font><em class="replaceable"><code>candidate</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON文档是否包含在</font></font><em class="replaceable"><code>target</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON文档中，或者 - 如果提供了</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数 - 是否在目标中的特定路径中找到候选者。</font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者如果路径参数不识别目标文档的一部分。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>target</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><em class="replaceable"><code>candidate</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是有效的JSON文档，或者如果</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数不是一个有效的路径表达式或包含一个
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要仅检查路径中是否存在任何数据，请</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains-path"><code class="literal">JSON_CONTAINS_PATH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下规则定义了包含：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              候选标量包含在目标标量中，当且仅当它们具有可比性并且相等时。</font><font style="vertical-align: inherit;">如果两个标量值具有相同的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，</font><font style="vertical-align: inherit;">那么两个标量值是可比的，但
               </font><font style="vertical-align: inherit;">类型的值</font></font><code class="literal">INTEGER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              并且</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以相互比较。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              候选数组包含在目标数组中，当且仅当候选中的每个元素都包含在目标的某个元素中时。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              候选非数组包含在目标数组中，当且仅当候选包含在目标的某个元素中时。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              候选对象包含在目标对象中当且仅当候选者中的每个关键字在目标中存在具有相同名称的关键字并且与候选关键字相关联的值包含在与目标关键字相关联的值中时。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          否则，候选值不包含在目标文档中。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{"a": 1, "b": 2, "c": {"d": 4}}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @j2 = '1';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS（@j，@ j2，'$ .a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.b');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS（@j，@ j2，'$ .b'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @j2 = '{"d": 4}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.a');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS（@j，@ j2，'$ .a'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.c');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS（@j，@ j2，'$ .c'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-contains-path"></a><p>
          <a class="indexterm" name="idm140528076823232"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains-path"><code class="literal">JSON_CONTAINS_PATH(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>one_or_all</code></em>,
          <em class="replaceable"><code>path</code></em>[,
          <em class="replaceable"><code>path</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回0或1以指示JSON文档是否包含给定路径或路径上的数据。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果有任何参数</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数不是有效的JSON文档，任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数不是有效的路径表达式，或者</font></font><em class="replaceable"><code>one_or_all</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是
           </font></font><code class="literal">'one'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">则会发生错误</font></font><code class="literal">'all'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要检查路径中的特定值，请</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains"><code class="literal">JSON_CONTAINS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果文档中不存在指定的路径，则返回值为0。</font><font style="vertical-align: inherit;">否则，返回值取决于
           </font></font><em class="replaceable"><code>one_or_all</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">'one'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果文档中至少存在一个路径，则为1，否则为0。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">'all'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果所有路径都存在于文档中，则为1，否则为0。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{"a": 1, "b": 2, "c": {"d": 4}}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'one', '$.a', '$.e');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS_PATH（@j，'one'，'$ .a'，'$ .e'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'all', '$.a', '$.e');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS_PATH（@j，'all'，'$ .a'，'$ .e'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'one', '$.c.d');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS_PATH（@j，'one'，'$ .c.d'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'one', '$.a.d');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_CONTAINS_PATH（@j，'one'，'$ .a.d'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-extract"></a><p>
          <a class="indexterm" name="idm140528076795920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-extract"><code class="literal">JSON_EXTRACT(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>[,
          <em class="replaceable"><code>path</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从JSON文档中返回数据，从</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数</font><font style="vertical-align: inherit;">匹配的文档部分中选择</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或没有路径找到文档中的一个值。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数不是有效的JSON文档或任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数不是有效的路径表达式，</font><font style="vertical-align: inherit;">则会发生错误
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回值由</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">匹配的所有值组成
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果这些参数可能返回多个值，则匹配的值将按照与生成它们的路径相对应的顺序作为数组自动换行。</font><font style="vertical-align: inherit;">否则，返回值是单个匹配值。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT('[10, 20, [30, 40]]', '$[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（'[10，20，[30，40]]'，'$ [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">20 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT('[10, 20, [30, 40]]', '$[1]', '$[0]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（'[10，20，[30，40]]'，'$ [1]'，'$ [0]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[20，10] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT('[10, 20, [30, 40]]', '$[2][*]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（'[10，20，[30，40]]'，'$ [2] [*]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[30，40] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL 5.7.9和更高版本支持
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          操作符作为这个函数的简写形式，与2个参数一起使用，其中左侧是
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列标识符（不是表达式），右侧是要在列中匹配的JSON路径。
        </font></font></p></li><li class="listitem"><a name="operator_json-column-path"></a><p>
          <a class="indexterm" name="idm140528076773920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal"><em class="replaceable"><code>column</code></em>-&gt;<em class="replaceable"><code>path</code></em></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.9和更高版本中，</font><font style="vertical-align: inherit;">当与两个参数（左侧的列标识符和右侧的JSON路径）一起使用时</font><font style="vertical-align: inherit;">，该
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          运算符将作为该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-extract"><code class="literal">JSON_EXTRACT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的别名
           </font><font style="vertical-align: inherit;">（根据JSON文档（列值）计算）。</font><font style="vertical-align: inherit;">您可以使用这些表达式来代替SQL标识符出现的列标识符。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里显示</font><font style="vertical-align: inherit;">
          的两条</font><font style="vertical-align: inherit;">语句产生相同的输出：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的MySQL&gt; </font></font><strong class="userinput"><code>SELECT c, JSON_EXTRACT(c, "$.id"), g</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>FROM jemp</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>WHERE JSON_EXTRACT(c, "$.id") &gt; 1</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;</font></font><strong class="userinput"><code>ORDER BY JSON_EXTRACT(c, "$.name");</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c | </font><font style="vertical-align: inherit;">c  - &gt;“$。id”| </font><font style="vertical-align: inherit;">g |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“3”，“name”：“Barney”} | </font><font style="vertical-align: inherit;">“3”| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“4”，“name”：“Betty”} | </font><font style="vertical-align: inherit;">“4”| </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“2”，“name”：“Wilma”} | </font><font style="vertical-align: inherit;">“2”| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的MySQL&gt; </font></font><strong class="userinput"><code>SELECT c, c-&gt;"$.id", g</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>FROM jemp</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>WHERE c-&gt;"$.id" &gt; 1</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;</font></font><strong class="userinput"><code>ORDER BY c-&gt;"$.name";</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c | </font><font style="vertical-align: inherit;">c  - &gt;“$。id”| </font><font style="vertical-align: inherit;">g |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“3”，“name”：“Barney”} | </font><font style="vertical-align: inherit;">“3”| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“4”，“name”：“Betty”} | </font><font style="vertical-align: inherit;">“4”| </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“2”，“name”：“Wilma”} | </font><font style="vertical-align: inherit;">“2”| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此功能不限于
           </font></font><code class="literal">SELECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>ALTER TABLE jemp ADD COLUMN n INT;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.68秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：0重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE jemp SET n=1 WHERE c-&gt;"$.id" = "4";</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.04秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
匹配行数：1更改：1警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的MySQL&gt; </font></font><strong class="userinput"><code>SELECT c, c-&gt;"$.id", g, n</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>FROM jemp</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>WHERE JSON_EXTRACT(c, "$.id") &gt; 1</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;</font></font><strong class="userinput"><code>ORDER BY c-&gt;"$.name";</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c | </font><font style="vertical-align: inherit;">c  - &gt;“$。id”| </font><font style="vertical-align: inherit;">g | </font><font style="vertical-align: inherit;">n |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“3”，“name”：“Barney”} | </font><font style="vertical-align: inherit;">“3”| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“4”，“name”：“Betty”} | </font><font style="vertical-align: inherit;">“4”| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“2”，“name”：“Wilma”} | </font><font style="vertical-align: inherit;">“2”| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置3行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>DELETE FROM jemp WHERE c-&gt;"$.id" = "4";</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.04秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的MySQL&gt; </font></font><strong class="userinput"><code>SELECT c, c-&gt;"$.id", g, n</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>FROM jemp</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt; </font></font><strong class="userinput"><code>WHERE JSON_EXTRACT(c, "$.id") &gt; 1</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;</font></font><strong class="userinput"><code>ORDER BY c-&gt;"$.name";</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c | </font><font style="vertical-align: inherit;">c  - &gt;“$。id”| </font><font style="vertical-align: inherit;">g | </font><font style="vertical-align: inherit;">n |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“3”，“name”：“Barney”} | </font><font style="vertical-align: inherit;">“3”| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“2”，“name”：“Wilma”} | </font><font style="vertical-align: inherit;">“2”| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ----------- + ----- -  + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#json-column-indirect-index" title="索引生成的列以提供JSON列索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引生成的列以提供JSON列索引</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以获取用于创建和填充刚刚显示的表的语句。）
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这也适用于JSON数组值，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE tj10 (a JSON, b INT);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.26秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql </font></font><strong class="userinput"><code>INSERT INTO tj10</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;</font></font><strong class="userinput"><code>VALUES ("[3,10,5,17,44]", 33), ("[3,10,5,17,[22,44,66]]", 0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.04秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT a-&gt;"$[4]" FROM tj10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a  - &gt;“$ [4]”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">44 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[22，44，66] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM tj10 WHERE a-&gt;"$[0]" = 3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a | </font><font style="vertical-align: inherit;">b |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[3，10，5，17，44] | </font><font style="vertical-align: inherit;">33 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[3，10，5，17，[22，44，66]] </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          支持嵌套数组。</font><font style="vertical-align: inherit;">使用</font></font><code class="literal">-&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">求值</font><font style="vertical-align: inherit;">的表达式
           </font><font style="vertical-align: inherit;">就</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          好像在目标JSON文档中没有找到匹配键，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM tj10 WHERE a-&gt;"$[4][1]" IS NOT NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a | </font><font style="vertical-align: inherit;">b |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[3，10，5，17，[22，44，66]] </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ + ------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT a-&gt;"$[4][1]" FROM tj10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a  - &gt;“$ [4] [1]”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">44 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这与使用</font></font><code class="literal">JSON_EXTRACT()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下</font><font style="vertical-align: inherit;">情况时看到的行为相同
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_EXTRACT(a, "$[4][1]") FROM tj10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_EXTRACT（a，“$ [4] [1]”）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">44 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><a name="operator_json-inline-path"></a><p>
          <a class="indexterm" name="idm140528076723312"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-inline-path"><code class="literal"><em class="replaceable"><code>column</code></em>-&gt;&gt;<em class="replaceable"><code>path</code></em></code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这是一个改进，在MySQL 5.7.13及更高版本中可用的取消操作提取操作符。</font><font style="vertical-align: inherit;">而
           </font></font><code class="literal">-&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作者简单地提取的值时，
           </font></font><code class="literal">-&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在加法运算unquotes所提取的结果。</font><font style="vertical-align: inherit;">换句话说，给定一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列值
           </font></font><em class="replaceable"><code>column</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和一个路径表达式
           </font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以下三个表达式返回相同的值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-unquote"><code class="literal">JSON_UNQUOTE(</code></a>
              <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-extract"><code class="literal">JSON_EXTRACT(<em class="replaceable"><code>column</code></em>,
              <em class="replaceable"><code>path</code></em>) )</code></a>
            </p></li><li class="listitem"><p>
              <code class="literal">JSON_UNQUOTE(<em class="replaceable"><code>column</code></em></code>
              <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a>
              <code class="literal"><em class="replaceable"><code>path</code></em>)</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>column</code></em>-&gt;&gt;<em class="replaceable"><code>path</code></em></code>
</p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">-&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作可用于任何
           </font></font><code class="literal">JSON_UNQUOTE(JSON_EXTRACT())</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将被允许。</font><font style="vertical-align: inherit;">这包括（但不限于）
           </font></font><code class="literal">SELECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表，</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款，并</font></font><code class="literal">ORDER
          BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          接下来的几条语句演示</font></font><code class="literal">-&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端中</font><font style="vertical-align: inherit;">与其他表达式的</font><font style="vertical-align: inherit;">一些
           </font><font style="vertical-align: inherit;">操作符等价关系</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM jemp WHERE g &gt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">c | </font><font style="vertical-align: inherit;">g |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“3”，“name”：“Barney”} | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：“4”，“name”：“Betty”} | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT c-&gt;'$.name' AS name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>FROM jemp WHERE g &gt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“巴尼”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“贝蒂”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT JSON_UNQUOTE(c-&gt;'$.name') AS name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>FROM jemp WHERE g &gt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">巴尼|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">贝蒂|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT c-&gt;&gt;'$.name' AS name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>FROM jemp WHERE g &gt; 2;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">巴尼|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">贝蒂|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#json-column-indirect-index" title="索引生成的列以提供JSON列索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引生成的列以提供JSON列索引</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以获取用于创建和填充</font></font><code class="literal">jemp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">刚才显示的示例集合中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">表</font><font style="vertical-align: inherit;">的SQL语句
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此运算符也可以与JSON数组一起使用，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE tj10 (a JSON, b INT);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.26秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>INSERT INTO tj10 VALUES</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>('[3,10,5,"x",44]', 33),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>('[3,10,5,17,[22,"y",66]]', 0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，2行受影响（0.04秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：2重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT a-&gt;"$[3]", a-&gt;"$[4][1]" FROM tj10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a  - &gt;“$ [3]”| </font><font style="vertical-align: inherit;">a  - &gt;“$ [4] [1]”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“x”| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">17 | </font><font style="vertical-align: inherit;">“y”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT a-&gt;&gt;"$[3]", a-&gt;&gt;"$[4][1]" FROM tj10;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a  -  &gt;&gt;“$ [3]”| </font><font style="vertical-align: inherit;">a  -  &gt;&gt;“$ [4] [1]”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">x | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">17 | </font><font style="vertical-align: inherit;">y |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          与之一样
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">-&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符总是在输出中展开</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#explain" title="13.8.2 EXPLAIN语法"><code class="literal">EXPLAIN</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如以下示例所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>EXPLAIN SELECT c-&gt;&gt;'$.name' AS name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>FROM jemp WHERE g &gt; 2\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
           ID：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  select_type：SIMPLE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        表：jemp</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   分区：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         键入：范围</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
possible_keys：我</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          关键：我</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      key_len：5</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          ref：NULL</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         行数：2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     过滤：100.00</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        额外：在哪里使用</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1行，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：注意</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1003</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：/ *选择＃1 * /选择</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
json_unquote（json_extract（`jtest`.`jemp`.`c`，'$。name'））AS`name` from</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（jtest`.`jemp`.`g`&gt; 2）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这与MySQL </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在相同环境下</font><font style="vertical-align: inherit;">扩展</font><font style="vertical-align: inherit;">运营商的</font><font style="vertical-align: inherit;">方式类似
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">-&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作员被添加到MySQL 5.7.13中。
        </font></font></p></li><li class="listitem"><a name="function_json-keys"></a><p>
          <a class="indexterm" name="idm140528076664752"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-keys"><code class="literal">JSON_KEYS(<em class="replaceable"><code>json_doc</code></em>[,
          <em class="replaceable"><code>path</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以JSON数组的形式返回JSON对象的顶级值中的键，或者，如果</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给出</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">参数，则从所选路径中返回顶级键。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数不是一个对象，或者</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果有，没有找到对象。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或包含一个
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果所选对象为空，结果数组为空。</font><font style="vertical-align: inherit;">如果顶级值具有嵌套的子对象，则返回值不包含这些子对象的键。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_KEYS('{"a": 1, "b": {"c": 30}}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_KEYS（'{“a”：1，“b”：{“c”：30}}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，“b”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_KEYS('{"a": 1, "b": {"c": 30}}', '$.b');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_KEYS（'{“a”：1，“b”：{“c”：30}}'，'$ .b'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“c”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-search"></a><p>
          <a class="indexterm" name="idm140528076646192"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-search"><code class="literal">JSON_SEARCH(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>one_or_all</code></em>,
          <em class="replaceable"><code>search_str</code></em>[,
          <em class="replaceable"><code>escape_char</code></em>[,
          <em class="replaceable"><code>path</code></em>] ...])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回JSON文档中给定字符串的路径。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任何一个
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><em class="replaceable"><code>search_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者
           </font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          文件内</font><font style="vertical-align: inherit;">不</font><font style="vertical-align: inherit;">存在; </font><font style="vertical-align: inherit;">或
           </font></font><em class="replaceable"><code>search_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有找到。</font><font style="vertical-align: inherit;">如果</font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数不是有效的JSON文档，任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数不是有效的路径表达式，
           </font></font><em class="replaceable"><code>one_or_all</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是
           </font></font><code class="literal">'one'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code class="literal">'all'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em class="replaceable"><code>escape_char</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是常量表达式</font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">则会发生错误</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><em class="replaceable"><code>one_or_all</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数影响搜索如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">'one'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：搜索在第一次匹配后终止并返回一个路径字符串。</font><font style="vertical-align: inherit;">没有定义哪个匹配被首先考虑。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">'all'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：搜索返回所有匹配的路径字符串，以便不包含重复的路径。</font><font style="vertical-align: inherit;">如果有多个字符串，它们将作为一个数组自动绑定。</font><font style="vertical-align: inherit;">数组元素的顺序是未定义的。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在</font></font><em class="replaceable"><code>search_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索字符串参数中，</font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          字符与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          运算符一样：</font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配任意数量的字符（包括零字符），并且只
           </font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配一个字符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要</font><font style="vertical-align: inherit;">在搜索字符串中</font><font style="vertical-align: inherit;">指定文字</font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符，请在其前面加上转义字符。</font><font style="vertical-align: inherit;">缺省值是
           </font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果
           </font></font><em class="replaceable"><code>escape_char</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数丢失或
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，
           </font></font><em class="replaceable"><code>escape_char</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是一个空或一个字符的常量。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关匹配和转义字符行为的详细信息，请参阅的说明
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#string-comparison-functions" title="12.5.1字符串比较函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.5.1节，“字符串比较函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于转义字符处理，与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行为</font><font style="vertical-align: inherit;">的区别
           </font><font style="vertical-align: inherit;">在于，转义字符for </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-search"><code class="literal">JSON_SEARCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          必须在编译时计算为常量，而不仅仅是在执行时。</font><font style="vertical-align: inherit;">例如，如果
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-search"><code class="literal">JSON_SEARCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在预处理语句中使用并且
           </font></font><em class="replaceable"><code>escape_char</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是使用</font></font><code class="literal">?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">提供的</font><font style="vertical-align: inherit;">，则参数值在执行时可能是常量，但不在编译时。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET @j = '["abc", [{"k": "10"}, "def"], {"x":"abc"}, {"y":"bcd"}]';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'one', 'abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'one'，'abc'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [0]”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', 'abc');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'abc'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“$ [0]”，“$ [2] .x”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', 'ghi');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'ghi'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'10'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [1] [0] .k”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'10'，NULL，'$'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [1] [0] .k”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'10'，NULL，'$ [*]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [1] [0] .k”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$**.k');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'10'，NULL，'$ **。k'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [1] [0] .k”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'10'，NULL，'$ [*] [0] .k'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [1] [0] .k”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'10'，NULL，'$ [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [1] [0] .k”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'10'，NULL，'$ [1] [0]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [1] [0] .k”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'abc'，NULL，'$ [2]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [2] .x”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%a%');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'％a％'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“$ [0]”，“$ [2] .x”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'％b％'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“$ [0]”，“$ [2] .x”，“$ [3] .y”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'％b％'，NULL，'$ [0]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [0]”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'％b％'，NULL，'$ [2]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [2] .x”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'％b％'，NULL，'$ [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'％b％'，''，'$ [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[3]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SEARCH（@j，'all'，'％b％'，''，'$ [3]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“$ [3] .y”|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关JSON路径语法MySQL支持的更多信息，包括有关通配符运营规则
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-path-syntax" title="12.16.7 JSON路径语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.16.7，“JSON路径语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="json-modification-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.4修改JSON值的函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节中的函数修改JSON值并返回结果。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_json-append"></a><p>
          <a class="indexterm" name="idm140528076579104"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-append"><code class="literal">JSON_APPEND(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将值附加到JSON文档中指示数组的结尾并返回结果。</font><font style="vertical-align: inherit;">这个函数被重新命名为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-append"><code class="literal">JSON_ARRAY_APPEND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL 5.7.9; </font><font style="vertical-align: inherit;">该别名</font></font><code class="literal">JSON_APPEND()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在在MySQL 5.7中被弃用，并且在MySQL 8.0中被删除。
        </font></font></p></li><li class="listitem"><a name="function_json-array-append"></a><p>
          <a class="indexterm" name="idm140528076567184"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-append"><code class="literal">JSON_ARRAY_APPEND(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将值附加到JSON文档中指示数组的结尾并返回结果。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
           </font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或包含一个
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          路径值对从左到右进行评估。</font><font style="vertical-align: inherit;">通过评估一对产生的文件成为评估下一对的新值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果路径选择标量或对象值，则该值在数组中自动压缩，并将新值添加到该数组中。</font><font style="vertical-align: inherit;">对于其中路径未在JSON文档中标识任何值的对将被忽略。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '["a", ["b", "c"], "d"]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_ARRAY_APPEND(@j, '$[1]', 1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_APPEND（@j，'$ [1]'，1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，[“b”，“c”，1]，“d”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY_APPEND(@j, '$[0]', 2);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_APPEND（@j，'$ [0]'，2）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[[“a”，2]，[“b”，“c”]，“d”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY_APPEND(@j, '$[1][0]', 3);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_APPEND（@j，'$ [1] [0]'，3）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，[[“b”，3]，“c”]，“d”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{"a": 1, "b": [2, 3], "c": 4}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_ARRAY_APPEND(@j, '$.b', 'x');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_APPEND（@j，'$ .b'，'x'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：1，“b”：[2,3，“x”]，“c”：4} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY_APPEND(@j, '$.c', 'y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_APPEND（@j，'$ .c'，'y'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：1，“b”：[2,3]，“c”：[4，“y”]} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{"a": 1}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_ARRAY_APPEND(@j, '$', 'z');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_APPEND（@j，'$'，'z'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[{“a”：1}，“z”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-array-insert"></a><p>
          <a class="indexterm" name="idm140528076541408"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-insert"><code class="literal">JSON_ARRAY_INSERT(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          更新JSON文档，插入文档中的数组并返回修改后的文档。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
           </font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或包含一个
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符或不与一个数组元素标识符结束。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          路径值对从左到右进行评估。</font><font style="vertical-align: inherit;">通过评估一对产生的文件成为评估下一对的新值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          路径无法识别JSON文档中的任何数组的对将被忽略。</font><font style="vertical-align: inherit;">如果路径标识数组元素，则相应的值将插入到该元素位置，并将任何后续值向右移动。</font><font style="vertical-align: inherit;">如果路径标识超出数组末尾的数组位置，则该值将插入到数组末尾。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '["a", {"b": [1, 2]}, [3, 4]]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_ARRAY_INSERT(@j, '$[1]', 'x');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_INSERT（@j，'$ [1]'，'x'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，“x”，{“b”：[1,2]}，[3，4]] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY_INSERT(@j, '$[100]', 'x');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_INSERT（@j，'$ [100]'，'x'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，{“b”：[1,2]]，[3，4]，“x”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY_INSERT(@j, '$[1].b[0]', 'x');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_INSERT（@j，'$ [1] .b [0]'，'x'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，{“b”：[“x”，1，2]}，[3，4]] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY_INSERT(@j, '$[2][1]', 'y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_INSERT（@j，'$ [2] [1]'，'y'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，{“b”：[1，2]}，[3，“y”，4]] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_ARRAY_INSERT(@j, '$[0]', 'x', '$[2][1]', 'y');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_ARRAY_INSERT（@j，'$ [0]'，'x'，'$ [2] [1]'，'y'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“x”，“a”，{“b”：[1,2]}，[3，4]] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          之前的修改会影响数组中以下元素的位置，因此相同</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-array-insert"><code class="literal">JSON_ARRAY_INSERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">中的后续路径
           </font><font style="vertical-align: inherit;">应考虑到这一点。</font><font style="vertical-align: inherit;">在最后一个示例中，第二个路径不插入任何内容，因为路径在第一次插入后不再匹配任何内容。
        </font></font></p></li><li class="listitem"><a name="function_json-insert"></a><p>
          <a class="indexterm" name="idm140528076515840"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将数据插入JSON文档并返回结果。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
           </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或包含一个
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          路径值对从左到右进行评估。</font><font style="vertical-align: inherit;">通过评估一对产生的文件成为评估下一对的新值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          文档中现有路径的路径值对将被忽略，并且不会覆盖现有文档值。</font><font style="vertical-align: inherit;">如果路径标识这些类型的值中的一个，则文档中的不存在路径的路径值对将值添加到文档中：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              成员不存在于现有对象中。</font><font style="vertical-align: inherit;">成员被添加到对象并与新值相关联。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              超过现有数组末尾的位置。</font><font style="vertical-align: inherit;">该数组用新值进行扩展。</font><font style="vertical-align: inherit;">如果现有值不是数组，则它会自动包装为数组，然后使用新值进行扩展。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          否则，文档中不存在的路径的路径值对将被忽略并且不起作用。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了进行比较
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，看到的讨论</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{ "a": 1, "b": [2, 3]}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_INSERT(@j, '$.a', 10, '$.c', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_INSERT（@j，'$ .a'，10，'$ .c'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：1，“b”：[2,3]，“c”：“[true，false]”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果中列出的第三个也是最后一个值是带引号的字符串，而不是像第二个那样的数组（不在输出中引用）; </font><font style="vertical-align: inherit;">不会执行向JSON类型的值转换。</font><font style="vertical-align: inherit;">要将数组作为数组插入，您必须明确执行此类转换，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_INSERT(@j, '$.a', 10, '$.c', CAST('[true, false]' AS JSON));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_INSERT（@j，'$ .a'，10，'$ .c'，CAST（'[true，false]'AS JSON））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：1，“b”：[2,3]，“c”：[true，false]} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-merge"></a><p>
          <a class="indexterm" name="idm140528076486160"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge"><code class="literal">JSON_MERGE(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>json_doc</code></em>[,
          <em class="replaceable"><code>json_doc</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          合并两个或更多JSON文档。</font><font style="vertical-align: inherit;">同义词
           </font></font><code class="literal">JSON_MERGE_PRESERVE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">在MySQL 5.7.22中不推荐使用，并可能在未来版本中删除。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE('[1, 2]', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE（'[1，2]'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2，true，false] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1行，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SHOW WARNINGS\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  级别：警告</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   代码：1287</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
消息：'JSON_MERGE'已弃用，并将在未来版本中删除。</font><font style="vertical-align: inherit;">\</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 请改用JSON_MERGE_PRESERVE / JSON_MERGE_PATCH</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关其他示例，请参阅条目
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-preserve"><code class="literal">JSON_MERGE_PRESERVE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_json-merge-patch"></a><p>
          <a class="indexterm" name="idm140528076470512"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-patch"><code class="literal">JSON_MERGE_PATCH(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>json_doc</code></em>[,
          <em class="replaceable"><code>json_doc</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          执行</font><font style="vertical-align: inherit;">两个或多个JSON文档</font><font style="vertical-align: inherit;">的
           </font></font><a class="ulink" href="https://tools.ietf.org/html/rfc7396" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 7396</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容合并，并返回合并结果，而不保留具有重复键的成员。</font><font style="vertical-align: inherit;">如果至少有一个作为参数传递给此函数的文档无效，则引发错误。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关此函数与之间差异的解释和示例</font></font><code class="literal">JSON_MERGE_PRESERVE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参阅
             </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-merge-patch-json-merge-preserve-compared" title="JSON_MERGE_PATCH（）与JSON_MERGE_PRESERVE（）相比较"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON_MERGE_PATCH（）与JSON_MERGE_PRESERVE（）的比较</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p>
          <code class="literal">JSON_MERGE_PATCH()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 执行合并如下：
</font></font></p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果第一个参数不是一个对象，则合并的结果与空对象与第二个参数合并时相同。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果第二个参数不是一个对象，那么合并的结果就是第二个参数。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果两个参数都是对象，则合并的结果是包含以下成员的对象：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  第一个对象的所有成员在第二个对象中没有相同成员的相同键。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  第二个对象的所有成员在第一个对象中没有对应的键，其值不是JSON </font></font><code class="literal">null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字。
                </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  所有成员的第一个和第二个对象都存在一个键，而第二个对象中的值不是JSON </font></font><code class="literal">null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                  文字。</font><font style="vertical-align: inherit;">这些成员的值是递归合并第一个对象中的值和第二个对象中的值的结果。
</font></font></p></li></ul>
</div>
</li></ol>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关其他信息，请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-normalization" title="JSON值的规范化，合并和自动套接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的规范化，合并和自动套接</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('[1, 2]', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'[1，2]'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[true，false] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('{"name": "x"}', '{"id": 47}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'{“name”：“x”}'，'{“id”：47}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：47，“name”：“x”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('1', 'true');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'1'，'true'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">true |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('[1, 2]', '{"id": 47}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'[1，2]'，'{“id”：47}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：47} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('{ "a": 1, "b":2 }',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;     </font></font><strong class="userinput"><code>'{ "a": 3, "c":4 }');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'{“a”：1，“b”：2}'，'{“a”：3，“c”：4}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：3，“b”：2，“c”：4} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('{ "a": 1, "b":2 }','{ "a": 3, "c":4 }',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;     </font></font><strong class="userinput"><code>'{ "a": 5, "d":6 }');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'{“a”：1，“b”：2}'，'{“a”：3，“c”：4}'，'{“a”：5，“d”：6}'） |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：5，“b”：2，“c”：4，“d”：6} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以使用此函数通过指定</font></font><code class="literal">null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seond参数中相同成员的值</font><font style="vertical-align: inherit;">来移除成员
           </font><font style="vertical-align: inherit;">，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('{"a":1, "b":2}', '{"b":null}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'{“a”：1，“b”：2}'，'{“b”：null}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：1} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- -  +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个例子表明函数以递归方式运行; </font><font style="vertical-align: inherit;">也就是说，成员的值不限于标量，而是它们本身可以是JSON文档：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PATCH('{"a":{"x":1}}', '{"a":{"y":2}}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PATCH（'{“a”：{“x”：1}}'，'{“a”：{“y”：2}}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：{“x”：1，“y”：2}} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font>
</pre><p>
          <code class="literal">JSON_MERGE_PATCH()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在MySQL 5.7.22及更高版本中受支持。
        </font></font></p><p><a name="json-merge-patch-json-merge-preserve-compared"></a><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON_MERGE_PATCH（）与JSON_MERGE_PRESERVE（）进行比较。&nbsp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            的行为</font></font><code class="literal">JSON_MERGE_PATCH()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一样的是
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-preserve"><code class="literal">JSON_MERGE_PRESERVE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，有以下两种情况例外：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">JSON_MERGE_PATCH()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只要与第二个对象中的键关联的值不是JSON，就可以使用第二个对象中的匹配键删除第一个对象中的任何成员</font></font><code class="literal">null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果第二个对象的第一个对象中的成员具有与成员匹配的键，则将第一个对象中
               </font><font style="vertical-align: inherit;">的值</font></font><code class="literal">JSON_MERGE_PATCH()</code>
              <span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替换</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为第二个对象中的值，而
               </font></font><code class="literal">JSON_MERGE_PRESERVE()</code>
              <span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二个值</font><span class="emphasis"><em><font style="vertical-align: inherit;">附加</font></em></span><font style="vertical-align: inherit;">到第一个值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          本示例比较将相同的3个JSON对象（每个JSON对象都有一个匹配键</font></font><code class="literal">"a"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）与这两个函数中的</font><font style="vertical-align: inherit;">每一个合并的结果</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET @x = '{ "a": 1, "b": 2 }',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;      </font></font><strong class="userinput"><code>@y = '{ "a": 3, "c": 4 }',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;     </font></font><strong class="userinput"><code>@z = '{ "a": 5, "d": 6 }';</code></strong><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT  JSON_MERGE_PATCH(@x, @y, @z)    AS Patch,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;         </font></font><strong class="userinput"><code>JSON_MERGE_PRESERVE(@x, @y, @z) AS Preserve\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   补丁：{“a”：5，“b”：2，“c”：4，“d”：6}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
保留：{“a”：[1,3,5]，“b”：2，“c”：4，“d”：6}</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-merge-preserve"></a><p>
          <a class="indexterm" name="idm140528076413392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-preserve"><code class="literal">JSON_MERGE_PRESERVE(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>json_doc</code></em>[,
          <em class="replaceable"><code>json_doc</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          合并两个或更多JSON文档并返回合并结果。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
           </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果任何参数不是有效的JSON文档，则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          合并按照以下规则进行。</font><font style="vertical-align: inherit;">有关其他信息，请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#json-normalization" title="JSON值的规范化，合并和自动套接"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON值的规范化，合并和自动套接</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              相邻的数组合并成一个数组。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              相邻的对象合并为一个对象。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              标量值作为数组自动绑定并合并为数组。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              相邻的数组和对象通过将对象作为数组自动套接并合并两个数组进行合并。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PRESERVE('[1, 2]', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PRESERVE（'[1，2]'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2，true，false] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PRESERVE('{"name": "x"}', '{"id": 47}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PRESERVE（'{“name”：“x”}'，'{“id”：47}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“id”：47，“name”：“x”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PRESERVE('1', 'true');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PRESERVE（'1'，'true'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，true] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PRESERVE('[1, 2]', '{"id": 47}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PRESERVE（'[1，2]'，'{“id”：47}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2，{“id”：47}] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PRESERVE('{ "a": 1, "b": 2 }',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;    </font></font><strong class="userinput"><code>'{ "a": 3, "c": 4 }');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PRESERVE（'{“a”：1，“b”：2}'，'{“a”：3，“c”：4}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：[1,3]，“b”：2，“c”：4} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql </font></font><strong class="userinput"><code>SELECT JSON_MERGE_PRESERVE('{ "a": 1, "b": 2 }','{ "a": 3, "c": 4 }',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;&gt;    </font></font><strong class="userinput"><code>'{ "a": 5, "d": 6 }');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_MERGE_PRESERVE（'{“a”：1，“b”：2}'，'{“a”：3，“c”：4}'，'{“a”：5，“d”：6}'） |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：[1,3,5]，“b”：2，“c”：4，“d”：6} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --------------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数在MySQL 5.7.22中被添加为一个同义词
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge"><code class="literal">JSON_MERGE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该
           </font></font><code class="literal">JSON_MERGE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数现在已被弃用，并且可能在未来的MySQL版本中被删除。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此功能与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-merge-patch"><code class="literal">JSON_MERGE_PATCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要方面</font><font style="vertical-align: inherit;">相似但不同
           </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">有关更多信息，</font><font style="vertical-align: inherit;">请参阅
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-merge-patch-json-merge-preserve-compared" title="JSON_MERGE_PATCH（）与JSON_MERGE_PRESERVE（）相比较"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON_MERGE_PATCH（）与JSON_MERGE_PRESERVE（）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的比较。
        </font></font></p></li><li class="listitem"><a name="function_json-remove"></a><p>
          <a class="indexterm" name="idm140528076381808"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-remove"><code class="literal">JSON_REMOVE(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>[,
          <em class="replaceable"><code>path</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从JSON文档中移除数据并返回结果。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
           </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或是</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或包含一个</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数进行评估从左到右。</font><font style="vertical-align: inherit;">通过评估一条路径产生的文档成为评估下一条路径的新值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果要删除的元素不存在于文档中，则不是错误; </font><font style="vertical-align: inherit;">在这种情况下，路径不会影响文档。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '["a", ["b", "c"], "d"]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_REMOVE(@j, '$[1]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_REMOVE（@j，'$ [1]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[“a”，“d”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-replace"></a><p>
          <a class="indexterm" name="idm140528076363136"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          替换JSON文档中的现有值并返回结果。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果有任何参数
           </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或包含一个
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          路径值对从左到右进行评估。</font><font style="vertical-align: inherit;">通过评估一对产生的文件成为评估下一对的新值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          文档中现有路径的路径值对将用新值覆盖现有文档值。</font><font style="vertical-align: inherit;">文档中不存在路径的路径值对将被忽略并且不起作用。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了进行比较
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，看到的讨论</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{ "a": 1, "b": [2, 3]}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_REPLACE(@j, '$.a', 10, '$.c', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_REPLACE（@j，'$ .a'，10，'$ .c'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：10，“b”：[2,3]} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-set"></a><p>
          <a class="indexterm" name="idm140528076339120"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>[,
          <em class="replaceable"><code>path</code></em>,
          <em class="replaceable"><code>val</code></em>] ...)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在JSON文档中插入或更新数据并返回结果。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任何参数为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果给定，则不</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">对象。</font><font style="vertical-align: inherit;">如果发生错误
           </font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或任何</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或包含一个
           </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          路径值对从左到右进行评估。</font><font style="vertical-align: inherit;">通过评估一对产生的文件成为评估下一对的新值。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          文档中现有路径的路径值对将用新值覆盖现有文档值。</font><font style="vertical-align: inherit;">如果路径标识这些类型的值中的一个，则文档中的不存在路径的路径值对将值添加到文档中：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              成员不存在于现有对象中。</font><font style="vertical-align: inherit;">成员被添加到对象并与新值相关联。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              超过现有数组末尾的位置。</font><font style="vertical-align: inherit;">该数组用新值进行扩展。</font><font style="vertical-align: inherit;">如果现有值不是数组，则它会自动包装为数组，然后使用新值进行扩展。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          否则，文档中不存在的路径的路径值对将被忽略并且不起作用。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能的关系：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 替换现有值并添加不存在的值。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-insert"><code class="literal">JSON_INSERT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在不替换现有值的情况下插入值。
            </font></font></p></li><li class="listitem"><p>
              <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a><font style="vertical-align: inherit;"></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替换
               </font><font style="vertical-align: inherit;">现有的值。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下示例使用document（</font></font><code class="literal">$.a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">中存在的一个路径</font><font style="vertical-align: inherit;">和另一个</font><font style="vertical-align: inherit;">不存在的路径（</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">来说明这些差异</font></font><code class="literal">$.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{ "a": 1, "b": [2, 3]}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_SET(@j, '$.a', 10, '$.c', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_SET（@j，'$ .a'，10，'$ .c'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：10，“b”：[2,3]，“c”：“[true，false]”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_INSERT(@j, '$.a', 10, '$.c', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_INSERT（@j，'$ .a'，10，'$ .c'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：1，“b”：[2,3]，“c”：“[true，false]”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_REPLACE(@j, '$.a', 10, '$.c', '[true, false]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_REPLACE（@j，'$ .a'，10，'$ .c'，'[true，false]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：10，“b”：[2,3]} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------- ---- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-unquote"></a><p>
          <a class="indexterm" name="idm140528076301392"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-unquote"><code class="literal">JSON_UNQUOTE(<em class="replaceable"><code>json_val</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          取消引用JSON值并将结果作为</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">返回
           </font><font style="vertical-align: inherit;">。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是，则
           </font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果值开始并以双引号结尾，但不是有效的JSON字符串文字，则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在一个字符串中，某些序列具有特殊的含义，除非</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_backslash_escapes"><code class="literal">NO_BACKSLASH_ESCAPES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">SQL模式。</font><font style="vertical-align: inherit;">这些序列中的每一个都以反斜杠（</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">开始</font><font style="vertical-align: inherit;">，称为
           </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转义字符</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL识别
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#json-unquote-character-escape-sequences" title="表12.21 JSON_UNQUOTE（）特殊字符转义序列"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.21“JSON_UNQUOTE（）特殊字符转义序列”中显示的转义序列</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于所有其他转义序列，将忽略反斜杠。</font><font style="vertical-align: inherit;">也就是说，转义字符被解释为没有被转义。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">\x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只是</font></font><code class="literal">x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些序列是区分大小写的。</font><font style="vertical-align: inherit;">例如，
           </font></font><code class="literal">\b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被解释为退格，但
           </font></font><code class="literal">\B</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被解释为</font></font><code class="literal">B</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="table">
<a name="json-unquote-character-escape-sequences"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.21 JSON_UNQUOTE（）特殊字符转义序列</font></font></b></p>
<div class="table-contents">
<table><colgroup><col width="15%"><col width="85%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转义序列</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由序列表示的字符</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><code class="literal">\"</code><a class="indexterm" name="idm140528076279216"></a><a class="indexterm" name="idm140528076278272"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">双引号（</font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）字符</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">\b</code><a class="indexterm" name="idm140528076273856"></a><a class="indexterm" name="idm140528076272912"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退格字符</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">\f</code><a class="indexterm" name="idm140528076269136"></a><a class="indexterm" name="idm140528076268192"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换页字符</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">\n</code><a class="indexterm" name="idm140528076264464"></a><a class="indexterm" name="idm140528076263520"></a><a class="indexterm" name="idm140528076262576"></a><a class="indexterm" name="idm140528076261632"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换行符（换行符）</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">\r</code><a class="indexterm" name="idm140528076257888"></a><a class="indexterm" name="idm140528076256944"></a><a class="indexterm" name="idm140528076256000"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回车符</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">\t</code><a class="indexterm" name="idm140528076252256"></a><a class="indexterm" name="idm140528076251312"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制表符</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">\\</code><a class="indexterm" name="idm140528076247584"></a><a class="indexterm" name="idm140528076246640"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反斜杠（</font></font><code class="literal">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）字符</font></font></td>
            </tr><tr>
              <td scope="row"><code class="literal">\u<em class="replaceable"><code>XXXX</code></em></code><a class="indexterm" name="idm140528076241936"></a><a class="indexterm" name="idm140528076240992"></a></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unicode值的UTF-8字节 </font></font><em class="replaceable"><code>XXXX</code></em></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这里显示了使用这个函数的两个简单例子：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '"abc"';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @j, JSON_UNQUOTE(@j);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@j | </font><font style="vertical-align: inherit;">JSON_UNQUOTE（@j）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">“abc”| </font><font style="vertical-align: inherit;">abc |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @j = '[1, 2, 3]';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT @j, JSON_UNQUOTE(@j);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@j | </font><font style="vertical-align: inherit;">JSON_UNQUOTE（@j）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[1，2，3] | </font><font style="vertical-align: inherit;">[1，2，3] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + ------------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下一组示例显示了</font></font><code class="literal">JSON_UNQUOTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">句柄在</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_backslash_escapes"><code class="literal">NO_BACKSLASH_ESCAPES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          禁用和启用时</font><font style="vertical-align: inherit;">如何
           </font><font style="vertical-align: inherit;">转义
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @@sql_mode;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@@ sql_mode |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_UNQUOTE('"\\t\\u0032"');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_UNQUOTE（'“\\ t \\ u0032”'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SET @@sql_mode = 'NO_BACKSLASH_ESCAPES';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_UNQUOTE('"\\t\\u0032"');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_UNQUOTE（'“\\ t \\ u0032”'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">\ t \ u0032 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_UNQUOTE('"\t\u0032"');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_UNQUOTE（''\ t \ u0032“'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------- +</font></font><font></font>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="json-attribute-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.5返回JSON值属性的函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节中的函数返回JSON值的属性。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_json-depth"></a><p>
          <a class="indexterm" name="idm140528076219184"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-depth"><code class="literal">JSON_DEPTH(<em class="replaceable"><code>json_doc</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回JSON文档的最大深度。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是，则
           </font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数不是有效的JSON文档，则会发生错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          空数组，空对象或标量值的深度为1.仅包含深度为1的元素的非空数组或包含仅深度为1的成员值的非空对象的深度为2。否则，JSON文档的深度大于2。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_DEPTH('{}'), JSON_DEPTH('[]'), JSON_DEPTH('true');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + ------------------ + ----------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_DEPTH（'{}'）| </font><font style="vertical-align: inherit;">JSON_DEPTH（'[]'）| </font><font style="vertical-align: inherit;">JSON_DEPTH（'true'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + ------------------ + ----------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + ------------------ + ----------- --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_DEPTH('[10, 20]'), JSON_DEPTH('[[], {}]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_DEPTH（'[10，20]'）| </font><font style="vertical-align: inherit;">JSON_DEPTH（'[[，，{}]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ + ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_DEPTH('[10, {"a": 20}]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_DEPTH（'[10，{“a”：20}]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------- +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-length"></a><p>
          <a class="indexterm" name="idm140528076203472"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-length"><code class="literal">JSON_LENGTH(<em class="replaceable"><code>json_doc</code></em>[,
          <em class="replaceable"><code>path</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回JSON文档的长度，或者，如果</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出参数</font><font style="vertical-align: inherit;">，则返回
           </font><font style="vertical-align: inherit;">由路径标识的文档中值的长度。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果任何参数
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          参数不文档中确定的值。</font><font style="vertical-align: inherit;">如果发生错误</font></font><em class="replaceable"><code>json_doc</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数是不是一个有效的JSON文档或
           </font></font><em class="replaceable"><code>path</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是不是有效的路径表达式或包含一个</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          文件的长度如下确定：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              标量的长度是1。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              数组的长度是数组元素的数量。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对象的长度是对象成员的数量。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              长度不包括嵌套数组或对象的长度。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_LENGTH('[1, 2, {"a": 3}]');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_LENGTH（'[1，2，{“a”：3}]'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_LENGTH('{"a": 1, "b": {"c": 30}}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_LENGTH（'{“a”：1，“b”：{“c”：30}}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_LENGTH('{"a": 1, "b": {"c": 30}}', '$.b');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_LENGTH（'{“a”：1，“b”：{“c”：30}}'，'$ .b'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ +</font></font><font></font>
</pre></li><li class="listitem"><a name="function_json-type"></a><p>
          <a class="indexterm" name="idm140528076180592"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE(<em class="replaceable"><code>json_val</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回一个</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示JSON值类型的字符串。</font><font style="vertical-align: inherit;">这可以是对象，数组或标量类型，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SET @j = '{"a": [10, true]}';</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT JSON_TYPE(@j);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_TYPE（@j）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">OBJECT |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_TYPE（JSON_EXTRACT（@j，'$ .a'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ARRAY |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a[0]'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_TYPE（JSON_EXTRACT（@j，'$ .a [0]'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">INTEGER |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a[1]'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_TYPE（JSON_EXTRACT（@j，'$ .a [1]'））|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">BOOLEAN |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------- +</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE(NULL);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_TYPE（NULL）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数不是有效的JSON值，则会发生错误：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_TYPE(1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误3146（22032）：参数1中的JSON数据的数据类型无效</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数json_type; </font><font style="vertical-align: inherit;">一个JSON字符串或JSON类型是必需的。</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非错误结果，以下列表描述了可能的
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回值：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              纯粹的JSON类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">OBJECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：JSON对象
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">ARRAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：JSON数组
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">BOOLEAN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：JSON真假文字
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：JSON空文字
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              数字类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">INTEGER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL的
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">SMALLINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">MEDIUMINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标量
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">DOUBLE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL
                   </font><font style="vertical-align: inherit;">标量
                </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a>
                  <a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"></font></p></li><li class="listitem"><p>
                  <code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">NUMERIC</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标量
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              时间类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">DATETIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATETIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">TIMESTAMP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标量
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">DATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标量
                </font></font></p></li><li class="listitem"><p>
                  <code class="literal">TIME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#time" title="11.3.2时间类型"><code class="literal">TIME</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标量
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字符串类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">STRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL的
                   </font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符类型标量：
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">CHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和
                  </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a>
</p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              二进制类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">BLOB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL二进制类型标量：
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
                  </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a>
                </p></li><li class="listitem"><p>
                  <code class="literal">BIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MySQL
                   </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#bit-type" title="11.2.4位值类型 -  BIT"><code class="literal">BIT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标量
</font></font></p></li></ul>
</div>
</li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              所有其他类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">OPAQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （原始位）
</font></font></p></li></ul>
</div>
</li></ul>
</div>
</li><li class="listitem"><a name="function_json-valid"></a><p>
          <a class="indexterm" name="idm140528076099312"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-valid"><code class="literal">JSON_VALID(<em class="replaceable"><code>val</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回0或1以指示值是否有效JSON。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是，则
           </font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_VALID('{"a": 1}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_VALID（'{“a”：1}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_VALID('hello'), JSON_VALID('"hello"');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_VALID（'hello'）| </font><font style="vertical-align: inherit;">JSON_VALID（'“hello”'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- + ----------------------- +</font></font><font></font>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="json-utility-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.6 JSON实用程序函数</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节介绍了对JSON值起作用的实用函数或可以解析为JSON值的字符串。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-pretty"><code class="literal">JSON_PRETTY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以易于阅读的格式打印出JSON值。
      </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-storage-size"><code class="literal">JSON_STORAGE_SIZE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示给定JSON值使用的存储空间量。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_json-pretty"></a><p>
          <a class="indexterm" name="idm140528076081184"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-pretty"><code class="literal">JSON_PRETTY(<em class="replaceable"><code>json_val</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          提供与PHP中以及其他语言和数据库系统类似的JSON值的漂亮打印。</font><font style="vertical-align: inherit;">提供的值必须是JSON值或JSON值的有效字符串表示形式。</font><font style="vertical-align: inherit;">此值中的外部空格和换行符对输出没有影响。</font><font style="vertical-align: inherit;">对于一个</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果该值不是JSON文档，或者它不能被解析为一个，则该函数会失败并显示错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数的输出格式符合以下规则：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              每个数组元素或对象成员出现在一个单独的行上，与其父级相比，缩进一个额外的级别。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              每个缩进级别都增加了两个前导空格。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              将分隔单个数组元素或对象成员的逗号打印在分隔两个元素或成员的换行符之前。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对象成员的键和值用冒号分隔，后跟空格（' </font></font><code class="literal">: </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'）。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一个空的对象或数组打印在一行上。</font><font style="vertical-align: inherit;">打开和关闭支架之间没有打印空间。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              字符串标量和键名中的特殊字符使用该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-quote"><code class="literal">JSON_QUOTE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">使用的相同规则进行转义
               </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_PRETTY('123'); # scalar</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_PRETTY（'123'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">123 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_PRETTY("[1,3,5]"); # array</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_PRETTY（“[1,3,5]”）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  3，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  五</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------ +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT JSON_PRETTY('{"a":"10","b":"15","x":"25"}'); # object</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">JSON_PRETTY（'{“a”：“10”，“b”：“15”，“x”：“25”}'）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “a”：“10”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “b”：“15”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “x”：“25”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------------------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的MySQL&gt; </font></font><strong class="userinput"><code>SELECT JSON_PRETTY('["a",1,{"key1":</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;     </font></font><strong class="userinput"><code>"value1"},"5",     "77" ,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;        </font></font><strong class="userinput"><code>{"key2":["value3","valueX",</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     &gt;</font></font><strong class="userinput"><code>"valueY"]},"j", "2"   ]')\G  # nested arrays and objects</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSON_PRETTY（'[ “一”，1，{ “KEY1”：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             “value1”}，“5”，“77”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                { “KEY2”：[ “值3”， “valuex”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          “valuey”]}，“j”，“2”]'）：[</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “一个”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  1，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “key1”：“value1”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “5”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “77”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “key2”：[</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      “值3”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      “valuex”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      “VALUE年”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  }，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “J”，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  “2”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
]</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.22中添加。
        </font></font></p></li><li class="listitem"><a name="function_json-storage-size"></a><p>
          <a class="indexterm" name="idm140528076054992"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-storage-size"><code class="literal">JSON_STORAGE_SIZE(<em class="replaceable"><code>json_val</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数返回用于存储JSON文档的二进制表示的字节数。</font><font style="vertical-align: inherit;">当参数是一个</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列时，这是用来存储JSON文档的空间。</font></font><em class="replaceable"><code>json_val</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          必须是有效的JSON文档或可以解析为一个的字符串。</font><font style="vertical-align: inherit;">在字符串的情况下，函数返回通过将字符串解析为JSON并将其转换为二进制而创建的JSON二进制表示中的存储空间量。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果参数是，</font><font style="vertical-align: inherit;">它会返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>json_val</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者</font><font style="vertical-align: inherit;">不是</font><font style="vertical-align: inherit;">，或者不能成功地将其解析为JSON文档，则会</font><font style="vertical-align: inherit;">出现错误</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了说明在使用</font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列作为参数</font><font style="vertical-align: inherit;">时该函数的行为
           </font><font style="vertical-align: inherit;">，我们创建一个名为</font></font><code class="literal">jtable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含
           </font></font><code class="literal">JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的表</font></font><code class="literal">jcol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将JSON值插入表中，然后获取此列使用的存储空间
           </font></font><code class="literal">JSON_STORAGE_SIZE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE jtable (jcol JSON);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.42秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>INSERT INTO jtable VALUES</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>('{"a": 1000, "b": "wxyz", "c": "[1, 3, 5, 7]"}');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.04秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>jcol,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>JSON_STORAGE_SIZE(jcol) AS Size</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM jtable;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">jcol | </font><font style="vertical-align: inherit;">大小|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：1000，“b”：“wxyz”，“c”：“[1,3,5,7]”} | </font><font style="vertical-align: inherit;">47 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------------------------------------------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据输出
           </font></font><code class="literal">JSON_STORAGE_SIZE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，插入列的JSON文档占用47个字节。</font><font style="vertical-align: inherit;">更新后，该功能将显示用于新设定值的存储空间：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>UPDATE jtable</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;     </font></font><strong class="userinput"><code>SET jcol = '{"a": 4.55, "b": "wxyz", "c": "[true, false]"}';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.04秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
匹配行数：1更改：1警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>jcol,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>JSON_STORAGE_SIZE(jcol) AS Size</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM jtable;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">jcol | </font><font style="vertical-align: inherit;">大小|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">{“a”：4.55，“b”：“wxyz”，“c”：“[true，false]”} | </font><font style="vertical-align: inherit;">56 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数还显示了当前用于在用户变量中存储JSON文档的空间：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET @j = '[100, "sakila", [1, 3, 5], 425.05]';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @j, JSON_STORAGE_SIZE(@j) AS Size;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@j | </font><font style="vertical-align: inherit;">大小|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[100，“sakila”，[1,3,5]，425.05] | </font><font style="vertical-align: inherit;">45 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------------------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SET @j = JSON_SET(@j, '$[1]', "json");</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @j, JSON_STORAGE_SIZE(@j) AS Size;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@j | </font><font style="vertical-align: inherit;">大小|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[100，“json”，[1,3,5]，425.05] | </font><font style="vertical-align: inherit;">43 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------------------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SET @j = JSON_SET(@j, '$[2][0]', JSON_ARRAY(10, 20, 30));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT @j, JSON_STORAGE_SIZE(@j) AS Size;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ + --------------------------------------------- --- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">@j | </font><font style="vertical-align: inherit;">大小|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ + --------------------------------------------- --- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">[100，“json”，[[10,20,30]，3,5]，425.05] | </font><font style="vertical-align: inherit;">56 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ + --------------------------------------------- --- --- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于JSON文字，此函数也返回当前使用的存储空间，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>JSON_STORAGE_SIZE('[100, "sakila", [1, 3, 5], 425.05]') AS A,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>JSON_STORAGE_SIZE('{"a": 1000, "b": "a", "c": "[1, 3, 5, 7]"}') AS B,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;      </font></font><strong class="userinput"><code>JSON_STORAGE_SIZE('{"a": 1000, "b": "wxyz", "c": "[1, 3, 5, 7]"}') AS C,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>JSON_STORAGE_SIZE('[100, "json", [[10, 20, 30], 3, 5], 425.05]') AS D;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ---- + ---- + ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">A | </font><font style="vertical-align: inherit;">B | </font><font style="vertical-align: inherit;">C | </font><font style="vertical-align: inherit;">D |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ---- + ---- + ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">45 | </font><font style="vertical-align: inherit;">44 | </font><font style="vertical-align: inherit;">47 | </font><font style="vertical-align: inherit;">56 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ---- + ---- + ---- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数是在MySQL 5.7.22中添加的。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="json-path-syntax"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.16.7 JSON路径语法</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      前面几节中描述的许多功能都需要一个路径表达式来标识JSON文档中的特定元素。</font><font style="vertical-align: inherit;">路径由路径的范围，后跟一个或多个路径分支组成。</font><font style="vertical-align: inherit;">对于MySQL JSON函数中使用的路径，范围始终是正在搜索或以其他方式操作的文档，由主</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">表示</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">路径腿由句点字符（</font></font><code class="literal">.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">分隔</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">数组中的单元格表示为
       </font><font style="vertical-align: inherit;">，其中
       </font><font style="vertical-align: inherit;">是一个非负整数。</font><font style="vertical-align: inherit;">密钥的名称必须是双引号字符串或有效的ECMAScript标识符（请参阅参考资料
       </font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">路径表达式，如JSON文本，应该使用的编码
       </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">或
      </font></font><code class="literal">[<em class="replaceable"><code>N</code></em>]</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>N</code></em><font style="vertical-align: inherit;"></font><code class="uri">http://www.ecma-international.org/ecma-262/5.1/#sec-7.6</code><font style="vertical-align: inherit;"></font><code class="literal">ascii</code><font style="vertical-align: inherit;"></font><code class="literal">utf8</code><font style="vertical-align: inherit;"></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符集。</font><font style="vertical-align: inherit;">其他字符编码被隐式强制</font></font><code class="literal">utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">完整的语法如下所示：
    </font></font></p><pre data-lang="clike" class="programlisting"><em class="replaceable"><code>pathExpression</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
     </font></font><em class="replaceable"><code>scope</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[（</font></font><em class="replaceable"><code>pathLeg</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）*]</font></font><font></font>
<font></font>
<em class="replaceable"><code>pathLeg</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
     </font></font><em class="replaceable"><code>member</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font></font><em class="replaceable"><code>arrayLocation</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font><em class="replaceable"><code>doubleAsterisk</code></em><font></font>
<font></font>
<em class="replaceable"><code>member</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
     </font></font><em class="replaceable"><code>period</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><em class="replaceable"><code>keyName</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font></font><em class="replaceable"><code>asterisk</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><font></font>
<font></font>
<em class="replaceable"><code>arrayLocation</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
     </font></font><em class="replaceable"><code>leftBracket</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><em class="replaceable"><code>nonNegativeInteger</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font></font><em class="replaceable"><code>asterisk</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><em class="replaceable"><code>rightBracket</code></em><font></font>
<font></font>
<em class="replaceable"><code>keyName</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
     </font></font><em class="replaceable"><code>ESIdentifier</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font><em class="replaceable"><code>doubleQuotedString</code></em><font></font>
<font></font>
<em class="replaceable"><code>doubleAsterisk</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '**'</font></font><font></font>
<font></font>
<em class="replaceable"><code>period</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ''</font></font><font></font>
<font></font>
<em class="replaceable"><code>asterisk</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '*'</font></font><font></font>
<font></font>
<em class="replaceable"><code>leftBracket</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '['</font></font><font></font>
<font></font>
<em class="replaceable"><code>rightBracket</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ']'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如前所述，在MySQL中，路径的范围始终是正在运行的文档，表示为</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以</font></font><code class="literal">'$'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在JSON路径表达式中用作文档的synonynm。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一些实现支持JSON路径范围的列引用; </font><font style="vertical-align: inherit;">目前，MySQL不支持这些。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通配符</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌的使用方式如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 代表对象中所有成员的值。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">[*]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 表示数组中所有单元格的值。
        </font></font></p></li><li class="listitem"><p>
          <code class="literal">[<em class="replaceable"><code>prefix</code></em>]**<em class="replaceable"><code>suffix</code></em></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          表示所有以开始</font></font><em class="replaceable"><code>prefix</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和结束的
           </font><font style="vertical-align: inherit;">路径
           </font></font><em class="replaceable"><code>suffix</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font><em class="replaceable"><code>prefix</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可选的，但是
           </font></font><em class="replaceable"><code>suffix</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是必需的; </font><font style="vertical-align: inherit;">换句话说，一条路可能不会结束</font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          另外，路径可能不包含该序列
           </font></font><code class="literal">***</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于路径语法例子中，看出，采取的路径作为参数，如各种JSON fuinctions的描述
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-contains-path"><code class="literal">JSON_CONTAINS_PATH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-set"><code class="literal">JSON_SET()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-replace"><code class="literal">JSON_REPLACE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于实施例，其包括使用的</font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><code class="literal">**</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通配符，看到的描述
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-search"><code class="literal">JSON_SEARCH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="gtid-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.17用于全局事务ID的函数</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528075971344"></a><a class="indexterm" name="idm140528075970304"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节介绍的功能用于基于GTID的复制。</font><font style="vertical-align: inherit;">请记住，所有这些函数都以GTID集的字符串表示作为参数，这一点非常重要 - 因此，GTID集必须始终在与它们一起使用时引用。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息，</font><font style="vertical-align: inherit;">请参阅
       </font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-gtids-concepts-gtid-sets" title="GTID集"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GTID集</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个GTID集合的联合仅仅是它们的表示形式，用一个插入的逗号连接在一起。</font><font style="vertical-align: inherit;">换句话说，你可以定义一个非常简单的函数来获得两个GTID集合的联合，类似于这里创建的：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE FUNCTION GTID_UNION（g1 TEXT，g2 TEXT）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    返回TEXT DETERMINISTIC</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    返回CONCAT（g1，'，'，g2）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关GTID的更多信息以及实践中如何使用这些GTID函数，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-gtids" title="16.1.3使用全局事务标识符进行复制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 16.1.3 </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-gtids" title="16.1.3使用全局事务标识符进行复制"><font style="vertical-align: inherit;">节“使用全局事务标识符进行复制”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
<div class="table">
<a name="idm140528075964048"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.22 GTID功能</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists global transaction ID (GTID) functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_gtid-subset"><code class="literal">GTID_SUBSET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果子集中的所有GTID都处于设置状态，则返回true; </font><font style="vertical-align: inherit;">否则为false。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_gtid-subtract"><code class="literal">GTID_SUBTRACT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回集合中不在子集中的所有GTID。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_wait-for-executed-gtid-set"><code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      等待给定的GTID在从机上执行。
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_wait-until-sql-thread-after-gtids"><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      等待给定的GTID在从机上执行。
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_gtid-subset"></a><p>
          <a class="indexterm" name="idm140528075942016"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_gtid-subset"><code class="literal">GTID_SUBSET(<em class="replaceable"><code>subset</code></em>,<em class="replaceable"><code>set</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定两组全局事务ID，
           </font></font><em class="replaceable"><code>subset</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><em class="replaceable"><code>set</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果所有GTID </font></font><em class="replaceable"><code>subset</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都处于
           </font><font style="vertical-align: inherit;">，则返回true
           </font></font><em class="replaceable"><code>set</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则返回false。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于此功能的GTID集以字符串表示，如以下示例所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT GTID_SUBSET('3E11FA47-71CA-11E1-9E33-C80AA9429562:23',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>'3E11FA47-71CA-11E1-9E33-C80AA9429562:21-57')\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GTID_SUBSET（ '3E11FA47-71CA-11E1-9E33-C80AA9429562：23'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '3E11FA47-71CA-11E1-9E33-C80AA9429562：21-57'）：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT GTID_SUBSET('3E11FA47-71CA-11E1-9E33-C80AA9429562:23-25',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>'3E11FA47-71CA-11E1-9E33-C80AA9429562:21-57')\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GTID_SUBSET（ '3E11FA47-71CA-11E1-9E33-C80AA9429562：23-25'，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '3E11FA47-71CA-11E1-9E33-C80AA9429562：21-57'）：1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT GTID_SUBSET('3E11FA47-71CA-11E1-9E33-C80AA9429562:20-25',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>'3E11FA47-71CA-11E1-9E33-C80AA9429562:21-57')\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GTID_SUBSET（ '3E11FA47-71CA-11E1-9E33-C80AA9429562：20-25'，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '3E11FA47-71CA-11E1-9E33-C80AA9429562：21-57'）：0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li><li class="listitem"><a name="function_gtid-subtract"></a><p>
          <a class="indexterm" name="idm140528075925088"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_gtid-subtract"><code class="literal">GTID_SUBTRACT(<em class="replaceable"><code>set</code></em>,<em class="replaceable"><code>subset</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          由于两套全球事务ID
           </font></font><em class="replaceable"><code>subset</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><em class="replaceable"><code>set</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，只返回那些GTIDs
           </font></font><em class="replaceable"><code>set</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不在
           </font></font><em class="replaceable"><code>subset</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          所有与此函数一起使用的GTID集都表示为字符串，并且必须用引号引起来，如以下示例所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT GTID_SUBTRACT('3E11FA47-71CA-11E1-9E33-C80AA9429562:21-57',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>'3E11FA47-71CA-11E1-9E33-C80AA9429562:21')\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GTID_SUBTRACT（ '3E11FA47-71CA-11E1-9E33-C80AA9429562：21-57'，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '3E11FA47-71CA-11E1-9E33-C80AA9429562：21'）：3e11fa47-71ca-11e1-9e33-c80aa9429562：22-57</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT GTID_SUBTRACT('3E11FA47-71CA-11E1-9E33-C80AA9429562:21-57',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>'3E11FA47-71CA-11E1-9E33-C80AA9429562:20-25')\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GTID_SUBTRACT（ '3E11FA47-71CA-11E1-9E33-C80AA9429562：21-57'，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '3E11FA47-71CA-11E1-9E33-C80AA9429562：20-25'）：3e11fa47-71ca-11e1-9e33-c80aa9429562：26-57</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>SELECT GTID_SUBTRACT('3E11FA47-71CA-11E1-9E33-C80AA9429562:21-57',</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;     </font></font><strong class="userinput"><code>'3E11FA47-71CA-11E1-9E33-C80AA9429562:23-24')\G</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GTID_SUBTRACT（ '3E11FA47-71CA-11E1-9E33-C80AA9429562：21-57'，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '3E11FA47-71CA-11E1-9E33-C80AA9429562：23-24'）：3e11fa47-71ca-11e1-9e33-c80aa9429562：21-22：25-57</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font>
</pre></li><li class="listitem"><a name="function_wait-for-executed-gtid-set"></a><p>
          <a class="indexterm" name="idm140528075907920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_wait-for-executed-gtid-set"><code class="literal">WAIT_FOR_EXECUTED_GTID_SET(<em class="replaceable"><code>gtid_set</code></em>[,
          <em class="replaceable"><code>timeout</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          等到服务器应用了全局事务标识符所包含的所有事务
           </font></font><em class="replaceable"><code>gtid_set</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">也就是说，直到条件GTID_SUBSET（</font></font><em class="replaceable"><code>gtid_subset</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">@@global.gtid_executed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）成立。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">GTID集合的定义，</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-gtids-concepts" title="16.1.3.1 GTID概念"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第16.1.3.1节“GTID概念”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果指定了超时，并且
           </font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用GTID集合中的所有事务之前经过了几秒钟，则该功能停止等待。</font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可选的，默认的超时时间是0秒，在这种情况下，函数总是等待，直到GTID集合中的所有事务都被应用。
        </font></font></p><p>
          <code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">监视在服务器上应用的所有GTID，包括从所有复制通道和用户客户端到达的事务。</font><font style="vertical-align: inherit;">它不考虑复制通道是否已启动或停止。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-gtids" title="16.1.3使用全局事务标识符进行复制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第16.1.3节“使用全局事务标识符进行复制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          用于此功能的GTID集以字符串形式表示，因此必须按照以下示例中所示引用：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT WAIT_FOR_EXECUTED_GTID_SET('3E11FA47-71CA-11E1-9E33-C80AA9429562:1-5');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关GTID集的语法描述，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-gtids-concepts" title="16.1.3.1 GTID概念"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第16.1.3.1节“GTID概念”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因为</font></font><code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，返回值是查询的状态，其中0表示成功，1表示超时。</font><font style="vertical-align: inherit;">任何其他故障都会产生错误。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_mode"><code class="literal">gtid_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在任何客户端使用此功能等待GTID应用时，不能更改为OFF。
        </font></font></p></li><li class="listitem"><a name="function_wait-until-sql-thread-after-gtids"></a><p>
          <a class="indexterm" name="idm140528075886256"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_wait-until-sql-thread-after-gtids"><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS(<em class="replaceable"><code>gtid_set</code></em>[,
          <em class="replaceable"><code>timeout</code></em>][,<em class="replaceable"><code>channel</code></em>])</code></a>
        </p><p>
          <code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类似于</font></font><code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它一直等到其全部事务标识符被包含在其中的所有事务
           </font></font><em class="replaceable"><code>gtid_set</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经被应用，或者直到</font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒已经过去，以先发生者为准。</font><font style="vertical-align: inherit;">但是，
           </font></font><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用于特定的复制通道，并且仅在应用程序必须运行的指定通道上应用事务后停止。</font><font style="vertical-align: inherit;">相反，
           </font></font><code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在事务处理完成后停止，无论它们应用于何处（在任何复制通道或任何用户客户端上），以及是否有任何复制通道正在运行。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><em class="replaceable"><code>channel</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能适用于哪些复制通道选项名称。</font><font style="vertical-align: inherit;">如果没有通道被命名并且除默认复制通道以外的通道不存在，则该功能适用​​于默认复制通道。</font><font style="vertical-align: inherit;">如果存在多个复制通道，则必须指定一个通道，否则不知道该函数适用于哪个复制通道。</font><font style="vertical-align: inherit;">有关</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制通道</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的更多信息</font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            由于
             </font></font><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            适用于特定的复制通道，如果期望的事务到达不同的复制通道或用户客户端（例如在故障转移或手动恢复情况下），则如果未设置超时，则该功能可能无限期地挂起。</font></font><code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用，
             </font><font style="vertical-align: inherit;">以确保在这些情况下正确处理交易。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          所用的GTID集
           </font></font><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被表示为字符串，并且必须以与for相同的方式引用</font></font><code class="literal">WAIT_FOR_EXECUTED_GTID_SET()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因为
           </font></font><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的返回值是一个任意的正数。</font><font style="vertical-align: inherit;">如果基于GTID的复制不是活动的（即，如果该</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_mode"><code class="literal">gtid_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量的值为OFF），则该值未定义并
           </font></font><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回NULL。</font><font style="vertical-align: inherit;">如果从站未运行，则该函数也返回NULL。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_gtid_mode"><code class="literal">gtid_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在任何客户端使用此功能等待GTID应用时，不能更改为OFF。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="enterprise-encryption"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18 MySQL企业加密函数</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-installation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.1企业加密安装</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.2企业加密使用和示例</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-function-reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.3企业加密函数参考</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.4企业加密功能说明</font></font></a></span></dt></dl>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL Enterprise Encryption是MySQL企业版（一种商业产品）中的扩展。</font><font style="vertical-align: inherit;">要了解有关商业产品的更多信息，
         </font></font><a class="ulink" href="http://www.mysql.com/products/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请访问http://www.mysql.com/products/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从MySQL 5.7.9开始，MySQL企业版包含一组基于OpenSSL库的加密函数，这些函数在SQL级别提供OpenSSL功能。</font><font style="vertical-align: inherit;">这些功能使企业应用程序能够执行以下操作：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用公钥非对称密码实现新增的数据保护
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          创建公钥和私钥以及数字签名
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          执行非对称加密和解密
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用加密散列法进行数字签名和数据验证
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      Enterprise Encryption支持RSA，DSA和DH加密算法。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      企业加密作为用户定义的功能（UDF）库提供，从中可以单独安装各个功能。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="enterprise-encryption-installation"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.1企业加密安装</font></font></h3>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        Enterprise Encryption函数位于插件目录（由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">命名的目录）中安装的用户定义函数（UDF）库文件中
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">UDF库基本名称是</font></font><code class="filename">openssl_udf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ，后缀是平台相关的。</font><font style="vertical-align: inherit;">例如，Linux或Windows上的文件名</font><font style="vertical-align: inherit;">分别</font><font style="vertical-align: inherit;">为</font></font><code class="filename">openssl_udf.so</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><code class="filename">openssl_udf.dll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要从库文件安装函数，请使用该
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-function-udf" title="13.7.3.1用户定义函数的CREATE FUNCTION语法"><code class="literal">CREATE
        FUNCTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">要从库中加载所有函数，请使用这组语句（根据需要调整文件名后缀）：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE FUNCTION asymmetric_decrypt RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION asymmetric_derive RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION asymmetric_encrypt RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION asymmetric_sign RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION asymmetric_verify RETURNS INTEGER</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION create_asymmetric_priv_key RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION create_asymmetric_pub_key RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION create_dh_parameters RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE FUNCTION create_digest RETURNS STRING</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SONAME'openssl_udf.so';</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        安装完成后，UDF在服务器重新启动时保持安装状态。</font><font style="vertical-align: inherit;">要卸载UDF，请使用该
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#drop-function-udf" title="13.7.3.2 DROP FUNCTION语法"><code class="literal">DROP
        FUNCTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">例如，要卸载密钥生成函数，请执行以下操作：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DROP FUNCTION create_asymmetric_priv_key;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DROP FUNCTION create_asymmetric_pub_key;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-function-udf" title="13.7.3.1用户定义函数的CREATE FUNCTION语法"><code class="literal">CREATE
        FUNCTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#drop-function-udf" title="13.7.3.2 DROP FUNCTION语法"><code class="literal">DROP
        FUNCTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句中，函数名称必须以小写字母指定。</font><font style="vertical-align: inherit;">这与它们在函数调用时的用法不同，您可以使用任何lettercase。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-function-udf" title="13.7.3.1用户定义函数的CREATE FUNCTION语法"><code class="literal">CREATE
        FUNCTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#drop-function-udf" title="13.7.3.2 DROP FUNCTION语法"><code class="literal">DROP
        FUNCTION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句需要
         </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_insert"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_drop"><code class="literal">DROP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限，分别为</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="enterprise-encryption-usage"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.2企业加密使用和示例</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要在应用程序中使用Enterprise Encryption，请调用适合您希望执行的操作的功能。</font><font style="vertical-align: inherit;">本节将演示如何执行一些具有代表性的任务：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage-create-key-pair" title="使用RSA加密创建一个私钥/公钥对"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用RSA加密创建一个私钥/公钥对</font></font></a>
          </p></li><li class="listitem"><p>
            <a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage-encrypt-decrypt" title="使用私钥对数据和公钥进行加密以解密"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用私钥对数据和公钥进行加密以解密</font></font></a>
          </p></li><li class="listitem"><p>
            <a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage-create-digest" title="从字符串生成摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从字符串生成摘要</font></font></a>
          </p></li><li class="listitem"><p>
            <a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage-digital-signing" title="使用密钥对的摘要"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用密钥对的摘要</font></font></a>
          </p></li><li class="listitem"><p>
            <a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage-create-symmetic-key" title="创建一个对称密钥"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个对称密钥</font></font></a>
          </p></li><li class="listitem"><p>
            <a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage-limit-cpu" title="通过密钥生成操作限制CPU使用率"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过密钥生成操作限制CPU使用率</font></font></a>
</p></li></ul>
</div>
<h4><a name="enterprise-encryption-usage-create-key-pair"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用RSA加密创建一个私钥/公钥对</font></font></h4>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  加密演算法; </font><font style="vertical-align: inherit;">可以是'DSA'或'DH'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @algo ='RSA';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 按位长度的密钥长度; </font><font style="vertical-align: inherit;">为更强大的按键做大</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @key_len = 1024;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 创建私钥</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @priv = CREATE_ASYMMETRIC_PRIV_KEY（@algo，@key_len）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 使用相同的算法从私钥导出相应的公钥</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @pub = CREATE_ASYMMETRIC_PUB_KEY（@algo，@priv）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        现在您可以使用密钥对来加密和解密数据，签名和验证数据，或生成对称密钥。
</font></font></p>
<h4><a name="enterprise-encryption-usage-encrypt-decrypt"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用私钥对数据和公钥进行加密以解密</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这要求密钥对的成员是RSA密钥。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @ciphertext = ASYMMETRIC_ENCRYPT（@algo，'My secret text'，@priv）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @cleartext = ASYMMETRIC_DECRYPT（@algo，@ciphertext，@pub）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        相反，您可以使用公钥进行加密并使用私钥进行解密。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @ciphertext = ASYMMETRIC_ENCRYPT（@algo，'My secret text'，@pub）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @cleartext = ASYMMETRIC_DECRYPT（@algo，@ciphertext，@priv）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在任何一种情况下，为加密和解密函数指定的算法都必须与用于生成密钥的算法相匹配。
</font></font></p>
<h4><a name="enterprise-encryption-usage-create-digest"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从字符串生成摘要</font></font></h4>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 摘要类型; </font><font style="vertical-align: inherit;">可以是'SHA256'，'SHA384'或'SHA512'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @dig_type ='SHA224';</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 生成摘要字符串</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @dig = CREATE_DIGEST（@dig_type，'My text to digest'）;</font></font><font></font>
</pre>
<h4><a name="enterprise-encryption-usage-digital-signing"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用密钥对的摘要</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        密钥对可用于签署数据，然后验证签名是否与摘要匹配。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  加密演算法; </font><font style="vertical-align: inherit;">可能是'DSA'; </font><font style="vertical-align: inherit;">钥匙必须</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 已经使用相同的算法创建</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @algo ='RSA';</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 为摘要生成签名并根据摘要验证签名</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @sig = ASYMMETRIC_SIGN（@algo，@dig，@priv，@dig_type）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 根据摘要验证签名</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @verf = ASYMMETRIC_VERIFY（@algo，@dig，@sig，@pub，@dig_type）;</font></font><font></font>
</pre>
<h4><a name="enterprise-encryption-usage-create-symmetic-key"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个对称密钥</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这需要DH私钥/公钥作为输入，使用共享对称秘密创建。</font><font style="vertical-align: inherit;">通过传递密钥长度来创建密钥</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后将密钥作为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密钥长度</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传递给
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 生成DH共享对称秘密</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @dhp = CREATE_DH_PARAMETERS（1024）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 生成DH密钥对</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @algo ='DH';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ priv1 = CREATE_ASYMMETRIC_PRIV_KEY（@algo，@dhp）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ pub1 = CREATE_ASYMMETRIC_PUB_KEY（@algo，@ priv1）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ priv2 = CREATE_ASYMMETRIC_PRIV_KEY（@algo，@dhp）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ pub2 = CREATE_ASYMMETRIC_PUB_KEY（@algo，@ priv2）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 使用第一方的公钥生成对称密钥，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 第二方的私钥</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ sym1 = ASYMMETRIC_DERIVE（@ pub1，@ priv2）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 或者使用第二方的公钥，第一方的私钥</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ sym2 = ASYMMETRIC_DERIVE（@ pub2，@ priv1）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以在运行时使用创建的密钥串的值，并存储到一个变量或表
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#set-variable" title="13.7.4.1变量赋值的SET语法"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @ priv1 = CREATE_ASYMMETRIC_PRIV_KEY（'RSA'，1024）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT CREATE_ASYMMETRIC_PRIV_KEY（'RSA'，1024）INTO @ priv2;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO t（key_col）VALUES（CREATE_ASYMMETRIC_PRIV_KEY（'RSA'，1024））;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        存储在文件中的键字符串值可以</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由具有该</font></font><a class="link" href="/mysql-5.7-google-zh/security.html#priv_file"><code class="literal">FILE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权的</font><font style="vertical-align: inherit;">用户</font><font style="vertical-align: inherit;">使用该</font><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">读取
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        摘要和签名字符串可以类似地处理。
</font></font></p>
<h4><a name="enterprise-encryption-usage-limit-cpu"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过密钥生成操作限制CPU使用率</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        和</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        加密函数采用一个密钥长度参数，和CPU资源的这些功能所需的量随着密钥长度增加而增加。</font><font style="vertical-align: inherit;">对于某些安装，如果应用程序频繁产生过长的密钥，这可能会导致CPU使用率不可接受。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于所有密钥，OpenSSL强制最小密钥长度为1,024位。</font><font style="vertical-align: inherit;">对于DSA和RSA密钥，OpenSSL还分别为10,000位和16,384位分别
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置最大密钥长度，最大密钥长度为10,000位
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果这些最大值太高，则从MySQL 5.7.17起可以使用三个环境变量，以使MySQL服务器管理员可以为密钥生成设置较低的最大长度，从而限制CPU使用率：
</font></font></p><a class="indexterm" name="idm140528075786688"></a><a class="indexterm" name="idm140528075785568"></a><a class="indexterm" name="idm140528075784112"></a><a class="indexterm" name="idm140528075782992"></a><a class="indexterm" name="idm140528075781488"></a><a class="indexterm" name="idm140528075780368"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MYSQL_OPENSSL_UDF_DSA_BITS_THRESHOLD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：最大DSA密钥长度，以位为单位
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该变量的最小值和最大值分别为1,024和10,000。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">MYSQL_OPENSSL_UDF_RSA_BITS_THRESHOLD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：最大RSA密钥长度，以位为单位
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该变量的最小值和最大值分别为1,024和16,384。
          </font></font></p></li><li class="listitem"><p>
            <code class="literal">MYSQL_OPENSSL_UDF_DH_BITS_THRESHOLD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：最大密钥长度，以位为单位
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该变量的最小值和最大值分别为1,024和10,000。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要使用这些环境变量中的任何一个，请将其设置在启动服务器的进程的环境中。</font><font style="vertical-align: inherit;">如果设置，它们的值优先于OpenSSL施加的最大密钥长度。</font><font style="vertical-align: inherit;">例如，要为DSA和RSA密钥设置最大密钥长度4,096位
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请设置以下变量：
      </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导出MYSQL_OPENSSL_UDF_DSA_BITS_THRESHOLD = 4096</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
导出MYSQL_OPENSSL_UDF_RSA_BITS_THRESHOLD = 4096</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该示例使用Bourne shell语法。</font><font style="vertical-align: inherit;">其他shell的语法可能不同。
</font></font></p>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="enterprise-encryption-function-reference"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.3企业加密函数参考</font></font></h3>

</div>

</div>

</div>

<div class="table">
<a name="idm140528075764784"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.23 MySQL企业加密函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists MySQL Enterprise encryption functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-decrypt"><code class="literal">ASYMMETRIC_DECRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用私钥或公钥解密密文
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-derive"><code class="literal">ASYMMETRIC_DERIVE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从非对称密钥导出对称密钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用私钥或公钥加密明文
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-sign"><code class="literal">ASYMMETRIC_SIGN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从摘要生成签名
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-verify"><code class="literal">ASYMMETRIC_VERIFY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      验证签名是否与摘要匹配
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建私钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-pub-key"><code class="literal">CREATE_ASYMMETRIC_PUB_KEY()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      创建公钥
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      生成共享的DH秘密
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-digest"><code class="literal">CREATE_DIGEST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从字符串生成摘要
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="enterprise-encryption-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.18.4企业加密功能说明</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        企业加密功能具有以下一般特征：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于错误类型的参数或不正确的参数数量，每个函数都返回一个错误。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果参数不适合允许函数执行请求的操作，则返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0或适当的值。</font><font style="vertical-align: inherit;">例如，如果函数不支持指定的算法，密钥长度太短或太长，或者预期为PEM格式的密钥字符串不是有效密钥，则会发生这种情况。</font><font style="vertical-align: inherit;">（OpenSSL强加自己的密钥长度限制，服务器管理员可以通过设置环境变量对最大密钥长度施加额外限制，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage" title="12.18.2企业加密使用和示例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.18.2节“企业加密使用和示例”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            底层SSL库负责处理随机性初始化。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        几个函数采用加密算法参数。</font><font style="vertical-align: inherit;">下表总结了按功能支持的算法。
</font></font></p>
<div class="table">
<a name="idm140528075721680"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.24按功能支持的算法</font></font></b></p>
<div class="table-contents">
<table summary="Supported encryption algorithms by function."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持的算法</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-decrypt"><code class="literal">ASYMMETRIC_DECRYPT()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-derive"><code class="literal">ASYMMETRIC_DERIVE()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DH</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-sign"><code class="literal">ASYMMETRIC_SIGN()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA，DSA</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-verify"><code class="literal">ASYMMETRIC_VERIFY()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA，DSA</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA，DSA，DH</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-pub-key"><code class="literal">CREATE_ASYMMETRIC_PUB_KEY()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA，DSA，DH</font></font></td>
          </tr><tr>
            <td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DH</font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          虽然您可以使用任何RSA，DSA或DH加密算法创建密钥，但其他采用密钥参数的函数可能只接受某些类型的密钥。</font><font style="vertical-align: inherit;">例如，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-decrypt"><code class="literal">ASYMMETRIC_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只接受RSA密钥。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下描述描述了企业加密功能的调用序列。</font><font style="vertical-align: inherit;">有关其他示例和讨论，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage" title="12.18.2企业加密使用和示例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.18.2节“企业加密使用和示例”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_asymmetric-decrypt"></a><p>
            <a class="indexterm" name="idm140528075681440"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-decrypt"><code class="literal">ASYMMETRIC_DECRYPT(<em class="replaceable"><code>algorithm</code></em>,
            <em class="replaceable"><code>crypt_str</code></em>,
            <em class="replaceable"><code>key_str</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用给定的算法和密钥字符串解密加密的字符串，并将结果的明文作为二进制字符串返回。</font><font style="vertical-align: inherit;">如果解密失败，结果是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是PEM格式的有效密钥字符串。</font><font style="vertical-align: inherit;">对于成功的解密，它必须是与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于产生加密字符串</font><font style="vertical-align: inherit;">的私钥或公钥字符串对应的公钥或私钥
             </font><font style="vertical-align: inherit;">字符串。
            </font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示用于创建密钥的加密算法。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
            </font></font><code class="literal">'RSA'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关使用示例，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_asymmetric-derive"></a><p>
            <a class="indexterm" name="idm140528075666208"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-derive"><code class="literal">ASYMMETRIC_DERIVE(<em class="replaceable"><code>pub_key_str</code></em>,
            <em class="replaceable"><code>priv_key_str</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用一方的私钥和另一方的公钥生成对称密钥，并将生成的密钥作为二进制字符串返回。</font><font style="vertical-align: inherit;">如果密钥推导失败，结果是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <em class="replaceable"><code>pub_key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
             </font></font><em class="replaceable"><code>priv_key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是PEM格式的有效密钥字符串。</font><font style="vertical-align: inherit;">它们必须使用DH算法创建。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            假设你有两对公钥和私钥：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @dhp = CREATE_DH_PARAMETERS（1024）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ priv1 = CREATE_ASYMMETRIC_PRIV_KEY（'DH'，@dhp）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ pub1 = CREATE_ASYMMETRIC_PUB_KEY（'DH'，@ priv1）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ priv2 = CREATE_ASYMMETRIC_PRIV_KEY（'DH'，@dhp）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ pub2 = CREATE_ASYMMETRIC_PUB_KEY（'DH'，@ priv2）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            进一步假设您使用一对中的私钥和另一对中的公钥来创建对称密钥字符串。</font><font style="vertical-align: inherit;">然后这个对称密钥身份关系成立：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASYMMETRIC_DERIVE（@ pub1，@ priv2）= ASYMMETRIC_DERIVE（@ pub2，@ priv1）
</font></font></pre></li><li class="listitem"><a name="function_asymmetric-encrypt"></a><p>
            <a class="indexterm" name="idm140528075652896"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT(<em class="replaceable"><code>algorithm</code></em>,
            <em class="replaceable"><code>str</code></em>,
            <em class="replaceable"><code>key_str</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用给定的算法和密钥字符串对字符串进行加密，并将结果密文作为二进制字符串返回。</font><font style="vertical-align: inherit;">如果加密失败，结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            的</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长度不能大于更大</font></font><em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长度- 11，以字节为单位
          </font></font></p><p>
            <em class="replaceable"><code>key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是PEM格式的有效密钥字符串。</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表示用于创建密钥的加密算法。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
            </font></font><code class="literal">'RSA'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要加密字符串，请将私钥或公钥字符串传递给
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-encrypt"><code class="literal">ASYMMETRIC_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要恢复原始未加密的字符串，请将加密的字符串</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-decrypt"><code class="literal">ASYMMETRIC_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与对应于用于加密的私钥或公钥字符串的公钥或私钥字符串一起</font><font style="vertical-align: inherit;">传递
             </font><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 生成私钥/公钥对</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @priv = CREATE_ASYMMETRIC_PRIV_KEY（'RSA'，1024）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @pub = CREATE_ASYMMETRIC_PUB_KEY（'RSA'，@priv）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 使用私钥加密，使用公钥解密</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ciphertext = ASYMMETRIC_ENCRYPT（'RSA'，'快速棕色狐狸'，@priv）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @cleartext = ASYMMETRIC_DECRYPT（'RSA'，@ciphertext，@pub）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 使用公钥加密，使用私钥解密</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @ciphertext = ASYMMETRIC_ENCRYPT（'RSA'，'快速棕色狐狸'，@pub）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @cleartext = ASYMMETRIC_DECRYPT（'RSA'，@ciphertext，@priv）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            假设：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @s =要加密的字符串</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @priv = PEM格式的有效私有RSA密钥字符串</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @pub = PEM格式的相应公共RSA密钥字符串</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            然后，这些身份关系成立：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASYMMETRIC_DECRYPT（'RSA'，ASYMMETRIC_ENCRYPT（'RSA'，@s，@priv），@pub）= @s</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASYMMETRIC_DECRYPT（'RSA'，ASYMMETRIC_ENCRYPT（'RSA'，@s，@pub），@priv）= @s</font></font><font></font>
</pre></li><li class="listitem"><a name="function_asymmetric-sign"></a><p>
            <a class="indexterm" name="idm140528075631312"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-sign"><code class="literal">ASYMMETRIC_SIGN(<em class="replaceable"><code>algorithm</code></em>,
            <em class="replaceable"><code>digest_str</code></em>,
            <em class="replaceable"><code>priv_key_str</code></em>,
            <em class="replaceable"><code>digest_type</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用私钥字符串签署摘要字符串，并将签名作为二进制字符串返回。</font><font style="vertical-align: inherit;">如果签名失败，结果是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <em class="replaceable"><code>digest_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是摘要字符串。</font><font style="vertical-align: inherit;">它可以通过调用生成
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-digest"><code class="literal">CREATE_DIGEST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><em class="replaceable"><code>digest_type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示用于生成摘要字符串的摘要算法。
          </font></font></p><p>
            <em class="replaceable"><code>priv_key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是用于签署摘要字符串的私钥字符串。</font><font style="vertical-align: inherit;">它必须是PEM格式的有效密钥字符串。
            </font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示用于创建密钥的加密算法。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
             </font></font><code class="literal">'RSA'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'DSA'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>digest_type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
             </font></font><code class="literal">'SHA224'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'SHA256'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">'SHA384'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'SHA512'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关使用示例，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-verify"><code class="literal">ASYMMETRIC_VERIFY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_asymmetric-verify"></a><p>
            <a class="indexterm" name="idm140528075610080"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-verify"><code class="literal">ASYMMETRIC_VERIFY(<em class="replaceable"><code>algorithm</code></em>,
            <em class="replaceable"><code>digest_str</code></em>,
            <em class="replaceable"><code>sig_str</code></em>,
            <em class="replaceable"><code>pub_key_str</code></em>,
            <em class="replaceable"><code>digest_type</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            验证签名字符串是否与摘要字符串匹配，并返回1或0以指示验证是成功还是失败。
          </font></font></p><p>
            <em class="replaceable"><code>digest_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是摘要字符串。</font><font style="vertical-align: inherit;">它可以通过调用生成
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-digest"><code class="literal">CREATE_DIGEST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><em class="replaceable"><code>digest_type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示用于生成摘要字符串的摘要算法。
          </font></font></p><p>
            <em class="replaceable"><code>sig_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是签名字符串。</font><font style="vertical-align: inherit;">它可以通过调用生成
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-sign"><code class="literal">ASYMMETRIC_SIGN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <em class="replaceable"><code>pub_key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是签名者的公钥字符串。</font><font style="vertical-align: inherit;">它对应于传递给</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-sign"><code class="literal">ASYMMETRIC_SIGN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            生成签名字符串</font><font style="vertical-align: inherit;">的私钥，</font><font style="vertical-align: inherit;">并且必须是PEM格式的有效密钥字符串。</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表示用于创建密钥的加密算法。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
             </font></font><code class="literal">'RSA'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'DSA'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>digest_type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
             </font></font><code class="literal">'SHA224'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'SHA256'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">'SHA384'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'SHA512'</code>
          </p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 设置加密算法和摘要类型</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @algo ='RSA';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @dig_type ='SHA224';</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 创建私钥/公钥对</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @priv = CREATE_ASYMMETRIC_PRIV_KEY（@algo，1024）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @pub = CREATE_ASYMMETRIC_PUB_KEY（@algo，@priv）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 从字符串生成摘要</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @dig = CREATE_DIGEST（@dig_type，'快速棕色狐狸'）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 为摘要生成签名并根据摘要验证签名</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @sig = ASYMMETRIC_SIGN（@algo，@dig，@priv，@dig_type）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @verf = ASYMMETRIC_VERIFY（@algo，@dig，@sig，@pub，@dig_type）;</font></font><font></font>
</pre></li><li class="listitem"><a name="function_create-asymmetric-priv-key"></a><p>
            <a class="indexterm" name="idm140528075585392"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY(<em class="replaceable"><code>algorithm</code></em>,
            {<em class="replaceable"><code>key_len</code></em>|<em class="replaceable"><code>dh_secret</code></em>})</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用给定算法和密钥长度或DH秘密创建私钥，并将密钥作为PEM格式的二进制字符串返回。</font><font style="vertical-align: inherit;">如果密钥生成失败，结果是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
             </font></font><code class="literal">'RSA'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'DSA'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><code class="literal">'DH'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>key_len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：最小密钥长度（以位为单位）为1,024。</font><font style="vertical-align: inherit;">最大密钥长度取决于算法：RSA为16,384，DSA为10,000。</font><font style="vertical-align: inherit;">这些密钥长度限制是由OpenSSL施加的限制。</font><font style="vertical-align: inherit;">通过设置环境变量，服务器管理员可以对最大密钥长度施加额外的限制。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage" title="12.18.2企业加密使用和示例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.18.2节“企业加密使用和示例”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于DH密钥，传递共享的DH密钥而不是密钥长度。</font><font style="vertical-align: inherit;">要创建秘密，请将密钥长度传递给
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            本示例创建一个2,048位DSA私钥，然后从私钥中派生一个公钥：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @priv = CREATE_ASYMMETRIC_PRIV_KEY（'DSA'，2048）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SET @pub = CREATE_ASYMMETRIC_PUB_KEY（'DSA'，@priv）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关显示DH密钥生成的示例，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-derive"><code class="literal">ASYMMETRIC_DERIVE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            选择密钥长度和加密算法时的一些一般考虑因素：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                私钥和公钥的加密强度随密钥大小而增加，但密钥生成的时间也随之增加。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                生成DH密钥比RSA或RSA密钥需要更长的时间。
              </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                非对称加密函数比对称函数慢。</font><font style="vertical-align: inherit;">如果性能是一个重要因素，而且功能要经常使用，那么最好使用对称加密。</font><font style="vertical-align: inherit;">例如，考虑使用
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
                 </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
</li><li class="listitem"><a name="function_create-asymmetric-pub-key"></a><p>
            <a class="indexterm" name="idm140528075558832"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-pub-key"><code class="literal">CREATE_ASYMMETRIC_PUB_KEY(<em class="replaceable"><code>algorithm</code></em>,
            <em class="replaceable"><code>priv_key_str</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用给定的算法从给定的私钥导出公钥，并以PEM格式将该密钥作为二进制字符串返回。</font><font style="vertical-align: inherit;">如果密钥推导失败，结果是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p>
            <em class="replaceable"><code>priv_key_str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是PEM格式的有效密钥字符串。</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表示用于创建密钥的加密算法。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>algorithm</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
             </font></font><code class="literal">'RSA'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'DSA'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
            </font></font><code class="literal">'DH'</code>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关使用示例，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_create-dh-parameters"></a><p>
            <a class="indexterm" name="idm140528075543296"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-dh-parameters"><code class="literal">CREATE_DH_PARAMETERS(<em class="replaceable"><code>key_len</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            创建共享密钥以生成DH私钥/公钥对并返回可传递给的二进制字符串
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-asymmetric-priv-key"><code class="literal">CREATE_ASYMMETRIC_PRIV_KEY()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果秘密生成失败，结果为空。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>key_len</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：以位为单位的最小和最大密钥长度是1,024和10,000。</font><font style="vertical-align: inherit;">这些密钥长度限制是由OpenSSL施加的限制。</font><font style="vertical-align: inherit;">通过设置环境变量，服务器管理员可以对最大密钥长度施加额外的限制。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#enterprise-encryption-usage" title="12.18.2企业加密使用和示例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.18.2节“企业加密使用和示例”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            有关如何使用返回值生成对称密钥的示例，请参阅说明
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_asymmetric-derive"><code class="literal">ASYMMETRIC_DERIVE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @dhp = CREATE_DH_PARAMETERS（1024）;
</font></font></pre></li><li class="listitem"><a name="function_create-digest"></a><p>
            <a class="indexterm" name="idm140528075529936"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_create-digest"><code class="literal">CREATE_DIGEST(<em class="replaceable"><code>digest_type</code></em>,
            <em class="replaceable"><code>str</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用给定摘要类型从给定字符串创建摘要，并将摘要作为二进制字符串返回。</font><font style="vertical-align: inherit;">如果摘要生成失败，结果是
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            支持的</font></font><em class="replaceable"><code>digest_type</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：
             </font></font><code class="literal">'SHA224'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'SHA256'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">'SHA384'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">'SHA512'</code>
          </p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET @dig = CREATE_DIGEST（'SHA512'，快速棕色狐狸'）;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            得到的摘要字符串适用于
             </font></font><code class="literal">ASYMMETRIC_SIGN()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and
             </font></font><code class="literal">ASYMMETRIC_VERIFY()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="group-by-functions-and-modifiers"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19聚合（GROUP BY）函数</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.1聚合（GROUP BY）功能描述</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-modifiers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.2 GROUP BY修饰符</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-handling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.3 MySQL处理GROUP BY</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#group-by-functional-dependence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.4检测功能依赖</font></font></a></span></dt></dl>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="group-by-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.1聚合（GROUP BY）功能描述</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528075514000"></a><a class="indexterm" name="idm140528075512960"></a><a class="indexterm" name="idm140528075511472"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        本部分描述了对值集合进行操作的组（聚合）函数。
</font></font></p>
<div class="table">
<a name="idm140528075509456"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.25聚合（GROUP BY）函数</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists aggregate (GROUP BY) functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回参数的平均值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位返回AND
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      按位返回OR
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回按位异或
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回返回的行数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count-distinct"><code class="literal">COUNT(DISTINCT)</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回许多不同值的计数
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回连接的字符串
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-arrayagg"><code class="literal">JSON_ARRAYAGG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将结果集作为单个JSON数组返回
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-objectagg"><code class="literal">JSON_OBJECTAGG()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      将结果集作为单个JSON对象返回
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最大值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回最小值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_std"><code class="literal">STD()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev"><code class="literal">STDDEV()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回样本标准差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      退还款项
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准方差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回样本方差
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_variance"><code class="literal">VARIANCE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回总体标准方差
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        除非另有说明，否则组函数会忽略
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果在包含no </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">的语句中使用组函数
         </font><font style="vertical-align: inherit;">，则它等同于在所有行上进行分组。</font><font style="vertical-align: inherit;">有关更多信息，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-handling" title="12.19.3 MySQL处理GROUP BY"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.19.3节“MySQL处理GROUP BY”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对于数字参数，方差和标准偏差函数返回一个</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">的</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回一个
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为准确值参数（整数或值</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），以及</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为近似值参数（值</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚合函数不具有时间价值的工作。</font><font style="vertical-align: inherit;">（它们将值转换为数字，在第一个非数字字符后丢失所有内容。）要解决此问题，请转换为数值单位，执行聚合操作并转换回临时值。</font><font style="vertical-align: inherit;">例子：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT SEC_TO_TIME（SUM（TIME_TO_SEC（</font></font><em class="replaceable"><code>time_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）））FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT FROM_DAYS（SUM（TO_DAYS（</font></font><em class="replaceable"><code>date_col</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）））FROM </font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        诸如</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期望数字参数的函数在必要时将参数转换为数字。</font><font style="vertical-align: inherit;">对于
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，转换操作会导致使用基础数值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚合函数执行位操作。</font><font style="vertical-align: inherit;">它们需要
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（64位整数）参数和返回</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">其他类型的参数被转换为
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并可能发生截断。</font><font style="vertical-align: inherit;">有关在MySQL 8.0的变化，允许位操作采取二进制字符串类型参数（信息</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型），见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#bit-functions" title="12.12位功能和操作符"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.12节，“位函数和操作符”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_avg"></a><p>
            <a class="indexterm" name="idm140528075400176"></a>

            <a class="indexterm" name="idm140528075399104"></a>

            <a class="indexterm" name="idm140528075398032"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的平均值
             </font></font><code class="literal"><em class="replaceable"><code>expr</code></em></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该
             </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项可用于返回不同值的平均值
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_avg"><code class="literal">AVG()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT student_name, AVG(test_score)</code></strong>
       <strong class="userinput"><code>FROM student</code></strong>
       <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre></li><li class="listitem"><a name="function_bit-and"></a><p>
            <a class="indexterm" name="idm140528075382304"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">AND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有位</font><font style="vertical-align: inherit;">的按</font><font style="vertical-align: inherit;">位
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">计算以64位（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）精度执行。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个中性值（所有位设置为1）。
          </font></font></p></li><li class="listitem"><a name="function_bit-or"></a><p>
            <a class="indexterm" name="idm140528075370960"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">OR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有位</font><font style="vertical-align: inherit;">的按</font><font style="vertical-align: inherit;">位
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">计算以64位（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）精度执行。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个中性值（所有位设置为0）。
          </font></font></p></li><li class="listitem"><a name="function_bit-xor"></a><p>
            <a class="indexterm" name="idm140528075359552"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_xor"><code class="literal">XOR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有位</font><font style="vertical-align: inherit;">的按</font><font style="vertical-align: inherit;">位</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">计算以64位（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）精度执行。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个中性值（所有位设置为0）。
          </font></font></p></li><li class="listitem"><a name="function_count"></a><p>
            <a class="indexterm" name="idm140528075347632"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font><font style="vertical-align: inherit;">由</font><font style="vertical-align: inherit;">
            语句</font><font style="vertical-align: inherit;">检索的行</font><font style="vertical-align: inherit;">中非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            值</font><font style="vertical-align: inherit;">的数量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果是一个
             </font><font style="vertical-align: inherit;">价值。
          </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT student.student_name,COUNT(*)</code></strong>
       <strong class="userinput"><code>FROM student,course</code></strong>
       <strong class="userinput"><code>WHERE student.student_id=course.student_id</code></strong>
       <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(*)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有点不同，因为它返回的是检索的行数，不管它们是否包含
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(*)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从一个表中检索，不检索其他列，并且没有
             </font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">，
             </font><font style="vertical-align: inherit;">则优化为非常快速地返回
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COUNT(*) FROM student;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            此优化仅适用于</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表，因为此存储引擎会存储确切的行数，并且可以非常快速地访问。
            </font></font><code class="literal">COUNT(1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在第一列被定义为时才受到相同的优化</font></font><code class="literal">NOT
            NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于诸如事务性存储引擎
             </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，存储确切的行数是有问题的，因为可能正在发生多个事务，每个事务都可能影响计数。</font><font style="vertical-align: inherit;">有关如何</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理
             </font></font><code class="literal">COUNT(*)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作的</font><font style="vertical-align: inherit;">更多信息</font><font style="vertical-align: inherit;">，请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-restrictions" title="14.8.1.7 InnoDB表的限制"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第14.8.1.7节“InnoDB表的限制”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_count-distinct"></a><p>
            <a class="indexterm" name="idm140528075314480"></a>

            <a class="indexterm" name="idm140528075313408"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(DISTINCT
            <em class="replaceable"><code>expr</code></em>,[<em class="replaceable"><code>expr</code></em>...])</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回具有不同非</font></font><code class="literal">NULL</code> <em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            值</font><font style="vertical-align: inherit;">的行数的计数</font><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(DISTINCT)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COUNT(DISTINCT results) FROM student;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在MySQL中，您可以</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过给出表达式列表</font><font style="vertical-align: inherit;">来获取不包含的不同表达式组合的数量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在标准SQL中，您必须将所有表达式串联起来
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(DISTINCT ...)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_group-concat"></a><p>
            <a class="indexterm" name="idm140528075296208"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_group-concat"><code class="literal">GROUP_CONCAT(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该函数返回一个字符串结果，其中</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含来自组的</font><font style="vertical-align: inherit;">非连续</font><font style="vertical-align: inherit;">值。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">，则返回
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">完整的语法如下所示：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GROUP_CONCAT（[DISTINCT] </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [，</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             [ORDER BY { </font></font><em class="replaceable"><code>unsigned_integer</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font><em class="replaceable"><code>col_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                 [ASC | </font><font style="vertical-align: inherit;">DESC] [，</font></font><em class="replaceable"><code>col_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...]]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             [分隔器 </font></font><em class="replaceable"><code>str_val</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]）
</font></font></pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT student_name,</code></strong>
         <strong class="userinput"><code>GROUP_CONCAT(test_score)</code></strong>
       <strong class="userinput"><code>FROM student</code></strong>
       <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要么：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT student_name,</code></strong>
         <strong class="userinput"><code>GROUP_CONCAT(DISTINCT test_score</code></strong>
                      <strong class="userinput"><code>ORDER BY test_score DESC SEPARATOR ' ')</code></strong>
       <strong class="userinput"><code>FROM student</code></strong>
       <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在MySQL中，您可以获取表达式组合的连接值。</font><font style="vertical-align: inherit;">要消除重复值，请使用该
             </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句。</font><font style="vertical-align: inherit;">要对结果中的值进行排序，请使用该</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句。</font><font style="vertical-align: inherit;">要按相反顺序排序，请将</font></font><code class="literal">DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （降序）关键字</font><font style="vertical-align: inherit;">添加</font><font style="vertical-align: inherit;">到</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">要排序的列的名称中</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认是升序; </font><font style="vertical-align: inherit;">这可以使用</font></font><code class="literal">ASC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">明确指定</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">组中值之间的默认分隔符是逗号（</font></font><code class="literal">,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">要明确指定分隔符，请使用</font></font><code class="literal">SEPARATOR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后面跟应该在组值之间插入的字符串字面值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要完全消除分隔符，请指定
             </font></font><code class="literal">SEPARATOR ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            结果被截断为</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_group_concat_max_len"><code class="literal">group_concat_max_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            系统变量</font><font style="vertical-align: inherit;">给出的最大长度，</font><font style="vertical-align: inherit;">默认值为1024.虽然返回值的有效最大长度受到值的限制，但该值可以设置得更高
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_group_concat_max_len"><code class="literal">group_concat_max_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在运行时</font><font style="vertical-align: inherit;">更改值的语法
             </font><font style="vertical-align: inherit;">如下所示，其中</font></font><em class="replaceable"><code>val</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            是无符号整数：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET [GLOBAL | </font><font style="vertical-align: inherit;">SESSION] group_concat_max_len = </font></font><em class="replaceable"><code>val</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回值是非二进制或二进制字符串，具体取决于参数是非二进制还是二进制字符串。</font><font style="vertical-align: inherit;">结果类型是</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">TEXT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#blob" title="11.4.3 BLOB和TEXT类型"><code class="literal">BLOB</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除非
             </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_group_concat_max_len"><code class="literal">group_concat_max_len</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于512，在这种情况下，结果类型是
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            又见</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat"><code class="literal">CONCAT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
             </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#string-functions" title="12.5字符串函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.5节，“字符串函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_json-arrayagg"></a><p>
            <a class="indexterm" name="idm140528075249328"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-arrayagg"><code class="literal">JSON_ARRAYAGG(<em class="replaceable"><code>col_or_expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            将结果集聚合为单个
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#json" title="11.6 JSON数据类型"><code class="literal">JSON</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组，其元素由行组成。</font><font style="vertical-align: inherit;">此数组中元素的顺序未定义。</font><font style="vertical-align: inherit;">该函数作用于一列或一个计算为单个值的表达式。</font><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果结果不包含任何行，或在错误的事件。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT o_id, attribute, value FROM t3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ----------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">o_id | </font><font style="vertical-align: inherit;">属性| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ----------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">颜色| </font><font style="vertical-align: inherit;">红色|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">面料| </font><font style="vertical-align: inherit;">丝绸|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">颜色| </font><font style="vertical-align: inherit;">绿色|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">形状| </font><font style="vertical-align: inherit;">广场|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ----------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql </font></font><strong class="userinput"><code>SELECT o_id, JSON_ARRAYAGG(attribute) AS attributes</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
     &gt;&gt;</font></font><strong class="userinput"><code>FROM t3 GROUP BY o_id;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">o_id | </font><font style="vertical-align: inherit;">属性|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">[“颜色”，“织物”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">[“颜色”，“形状”] |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在MySQL 5.7.22中添加。
          </font></font></p></li><li class="listitem"><a name="function_json-objectagg"></a><p>
            <a class="indexterm" name="idm140528075233792"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_json-objectagg"><code class="literal">JSON_OBJECTAGG(<em class="replaceable"><code>key</code></em>,
            <em class="replaceable"><code>value</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            以两个列名或表达式作为参数，其中第一个用作键，第二个用作值，并返回包含键值对的JSON对象。</font><font style="vertical-align: inherit;">返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果结果不包含任何行，或在错误的事件。</font><font style="vertical-align: inherit;">如果任何键名称</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或参数数量不等于2，</font><font style="vertical-align: inherit;">则会发生错误</font><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT o_id, attribute, value FROM t3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ----------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">o_id | </font><font style="vertical-align: inherit;">属性| </font><font style="vertical-align: inherit;">值|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ----------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">颜色| </font><font style="vertical-align: inherit;">红色|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">面料| </font><font style="vertical-align: inherit;">丝绸|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">颜色| </font><font style="vertical-align: inherit;">绿色|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">形状| </font><font style="vertical-align: inherit;">广场|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ----------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4行（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT o_id, JSON_OBJECTAGG(attribute, value) FROM t3 GROUP BY o_id;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">o_id | </font><font style="vertical-align: inherit;">JSON_OBJECTAGG（属性，名称）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">{“color”：“red”，“fabric”：“silk”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">{“color”：“green”，“shape”：“square”} |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ---------------------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在MySQL 5.7.22中添加。
          </font></font></p></li><li class="listitem"><a name="function_max"></a><p>
            <a class="indexterm" name="idm140528075218928"></a>

            <a class="indexterm" name="idm140528075217856"></a>

            <a class="indexterm" name="idm140528075216784"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的最大值
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能需要一个字符串参数; </font><font style="vertical-align: inherit;">在这种情况下，它返回最大字符串值。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#mysql-indexes" title="8.3.1 MySQL如何使用索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.3.1节“MySQL如何使用索引”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的
             </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字可用于以找到最大的不同值中的
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然而，这产生相同的结果作为遗漏</font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT student_name, MIN(test_score), MAX(test_score)</code></strong>
       <strong class="userinput"><code>FROM student</code></strong>
       <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            因为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，MySQL当前比较</font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串的值，而不是字符串在集合中的相对位置。</font><font style="vertical-align: inherit;">这与如何</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            比较它们</font><font style="vertical-align: inherit;">不同</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_min"></a><p>
            <a class="indexterm" name="idm140528075193088"></a>

            <a class="indexterm" name="idm140528075192016"></a>

            <a class="indexterm" name="idm140528075190944"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的最小值
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能需要一个字符串参数; </font><font style="vertical-align: inherit;">在这种情况下，它返回最小字符串值。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#mysql-indexes" title="8.3.1 MySQL如何使用索引"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.3.1节“MySQL如何使用索引”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的
             </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字可用来找到最小的不同值中的
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然而，这产生相同的结果作为遗漏</font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT student_name, MIN(test_score), MAX(test_score)</code></strong>
       <strong class="userinput"><code>FROM student</code></strong>
       <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            因为</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_min"><code class="literal">MIN()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，MySQL当前比较</font><font style="vertical-align: inherit;">列</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#enum" title="11.4.4 ENUM类型"><code class="literal">ENUM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#set" title="11.4.5 SET类型"><code class="literal">SET</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串的值，而不是字符串在集合中的相对位置。</font><font style="vertical-align: inherit;">这与如何</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            比较它们</font><font style="vertical-align: inherit;">不同</font><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_std"></a><p>
            <a class="indexterm" name="idm140528075167248"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_std"><code class="literal">STD(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的人口标准差
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_std"><code class="literal">STD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是标准SQL函数的同义词
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，作为MySQL扩展提供。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_std"><code class="literal">STD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_stddev"></a><p>
            <a class="indexterm" name="idm140528075153872"></a>

            <a class="indexterm" name="idm140528075152800"></a>

            <a class="indexterm" name="idm140528075151728"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev"><code class="literal">STDDEV(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的人口标准差
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev"><code class="literal">STDDEV()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与Oracle兼容</font><font style="vertical-align: inherit;">的标准SQL函数的同义词
             </font><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev"><code class="literal">STDDEV()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_stddev-pop"></a><p>
            <a class="indexterm" name="idm140528075138624"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-pop"><code class="literal">STDDEV_POP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（的平方根
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的总体标准差
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">你也可以使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_std"><code class="literal">STD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev"><code class="literal">STDDEV()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它们是等效的但不是标准的SQL。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_stddev-samp"></a><p>
            <a class="indexterm" name="idm140528075124720"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（平方根）
             </font><font style="vertical-align: inherit;">的样本标准差
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_sum"></a><p>
            <a class="indexterm" name="idm140528075112672"></a>

            <a class="indexterm" name="idm140528075111600"></a>

            <a class="indexterm" name="idm140528075110528"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回总和</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果返回集没有行，则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该
             </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字可用于仅求和的不同值</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_var-pop"></a><p>
            <a class="indexterm" name="idm140528075096800"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-pop"><code class="literal">VAR_POP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的人口标准方差
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它将行视为整个人口，而不是样本，因此它将行数作为分母。</font><font style="vertical-align: inherit;">您也可以使用
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_variance"><code class="literal">VARIANCE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它是等效的，但不是标准的SQL。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_var-samp"></a><p>
            <a class="indexterm" name="idm140528075085248"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-samp"><code class="literal">VAR_SAMP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回样本方差
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">也就是说，分母是行数减1。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><a name="function_variance"></a><p>
            <a class="indexterm" name="idm140528075075056"></a>

            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_variance"><code class="literal">VARIANCE(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            返回的人口标准方差
             </font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_variance"><code class="literal">VARIANCE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是标准SQL函数的同义词
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，作为MySQL扩展提供。
          </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果没有匹配的行，则
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_variance"><code class="literal">VARIANCE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="group-by-modifiers"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.2 GROUP BY修饰符</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528075063312"></a><a class="indexterm" name="idm140528075062240"></a><a class="indexterm" name="idm140528075061168"></a><a class="indexterm" name="idm140528075060096"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句允许一个</font></font><code class="literal">WITH
        ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修饰符导致汇总输出包含表示更高级别（即超集合）汇总操作的额外行。</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从而使您能够通过单个查询在多个分析级别回答问题。</font><font style="vertical-align: inherit;">例如，
         </font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于为OLAP（联机分析处理）操作提供支持。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设一个</font></font><code class="literal">sales</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表有
         </font></font><code class="literal">year</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">product</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code class="literal">profit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列记录销售利润率：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE销售</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    年INT，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    国家VARCHAR（20），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    产品VARCHAR（32），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    利润INT</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了总结每年的表格内容，请使用如下简单的内容
         </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT year, SUM(profit) AS profit</code></strong>
       <strong class="userinput"><code>FROM sales</code></strong>
       <strong class="userinput"><code>GROUP BY year ASC;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">利润|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">4525 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">3010 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        产量显示每年的总利润。</font><font style="vertical-align: inherit;">为了确定所有年份的总利润总和，您必须自己累加单个值或运行其他查询。</font><font style="vertical-align: inherit;">或者您可以使用</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它可以为单个查询提供两种级别的分析。</font><font style="vertical-align: inherit;">向</font><font style="vertical-align: inherit;">
        子句</font><font style="vertical-align: inherit;">添加</font></font><code class="literal">WITH
        ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修饰符</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会导致查询生成另一行，显示所有年份值的总和：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT year, SUM(profit) AS profit</code></strong>
       <strong class="userinput"><code>FROM sales</code></strong>
       <strong class="userinput"><code>GROUP BY year ASC WITH ROLLUP;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">利润|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">4525 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">3010 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">7535 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font><font style="vertical-align: inherit;">
        列中</font><font style="vertical-align: inherit;">的</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font><code class="literal">year</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识总计超级聚合线。
      </font></font></p><p>
        <code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当有多</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">时会有更复杂的效果</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，每当除最后一个分组列以外的任何值发生更改时，查询都会生成一个额外的超级聚合摘要行。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，如果没有</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该摘要
         </font></font><code class="literal">sales</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于表</font></font><code class="literal">year</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
         </font></font><code class="literal">country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><code class="literal">product</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能是这样的，当输出只在一年/国家/产品的分析水平表明汇总值：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT year, country, product, SUM(profit) AS profit</code></strong>
       <strong class="userinput"><code>FROM sales</code></strong>
       <strong class="userinput"><code>GROUP BY year ASC, country ASC, product ASC;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">国家| </font><font style="vertical-align: inherit;">产品| </font><font style="vertical-align: inherit;">利润|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1500 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">电话| </font><font style="vertical-align: inherit;">100 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">计算器| </font><font style="vertical-align: inherit;">150 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1200 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算器| </font><font style="vertical-align: inherit;">75 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1500 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">电话| </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算器| </font><font style="vertical-align: inherit;">50 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">2700 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">电视| </font><font style="vertical-align: inherit;">250 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        随着</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加，查询会产生一些额外行：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT year, country, product, SUM(profit) AS profit</code></strong>
       <strong class="userinput"><code>FROM sales</code></strong>
       <strong class="userinput"><code>GROUP BY year ASC, country ASC, product ASC WITH ROLLUP;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">国家| </font><font style="vertical-align: inherit;">产品| </font><font style="vertical-align: inherit;">利润|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1500 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">电话| </font><font style="vertical-align: inherit;">100 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1600 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">计算器| </font><font style="vertical-align: inherit;">150 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1200 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1350 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算器| </font><font style="vertical-align: inherit;">75 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1500 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1575 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">4525 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">电话| </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算器| </font><font style="vertical-align: inherit;">50 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">2700 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">电视| </font><font style="vertical-align: inherit;">250 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">3000 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">3010 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">7535 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        现在，输出包括四个分析级别的摘要信息，而不仅仅是一个：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在给定年份和国家的每组产品行之后，会出现一个额外的汇总行，显示所有产品的总计。</font><font style="vertical-align: inherit;">这些行的</font></font><code class="literal">product</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列设置为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在给定年份的每组行之后，会出现一个额外的汇总行，显示所有国家和产品的总数。</font><font style="vertical-align: inherit;">这些行的</font></font><code class="literal">country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">products</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列设置为
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最后，在所有其他行之后，会出现一个额外的摘要行，显示所有年份，国家和产品的总计。</font><font style="vertical-align: inherit;">该行的“ </font></font><code class="literal">year</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
             </font></font><code class="literal">country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”和“ </font></font><code class="literal">products</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列”设置为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<h4><a name="idm140528075010432"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他注意事项使用ROLLUP时</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下讨论列出了一些特定于MySQL实现的行为</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在使用时</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您不能使用
         </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句对结果进行排序。</font><font style="vertical-align: inherit;">换句话说，</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        是相互排斥在MySQL。</font><font style="vertical-align: inherit;">但是，您仍然可以对排序顺序进行一些控制。</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在MySQL中默认排序结果（缺少
         </font></font><code class="literal">ASC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定者）。</font><font style="vertical-align: inherit;">但是，</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL中的</font><font style="vertical-align: inherit;">隐式</font><font style="vertical-align: inherit;">排序已被弃用。</font><font style="vertical-align: inherit;">要实现分组结果的特定排序顺序：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            使用</font><font style="vertical-align: inherit;">列表中指定</font><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">显式</font></font><code class="literal">ASC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><code class="literal">DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字
             </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定单个列的排序顺序。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论排序顺序如何，</font><font style="vertical-align: inherit;">添加的超集聚汇总行</font><font style="vertical-align: inherit;">仍会出现在计算它们的行之后。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            若要解决阻止使用限制
             </font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，产生的分组结果集派生表，并应用
             </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它。</font><font style="vertical-align: inherit;">例如：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择*从</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（SELECT year，SUM（profit）FROM sales GROUP BY year WITH ROLLUP）AS dt</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
按年份排列;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在这种情况下，超汇总汇总行按照它们计算的行进行排序，并且它们的位置取决于排序顺序（开始时为升序排序，最后为降序排序）。
</font></font></p></li></ul>
</div>
<p>
        <code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用来限制返回给客户端的行数。</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之后应用</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所以限制适用于添加的额外行</font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT year, country, product, SUM(profit) AS profit</code></strong>
       <strong class="userinput"><code>FROM sales</code></strong>
       <strong class="userinput"><code>GROUP BY year ASC, country ASC, product ASC WITH ROLLUP</code></strong>
       <strong class="userinput"><code>LIMIT 5;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">国家| </font><font style="vertical-align: inherit;">产品| </font><font style="vertical-align: inherit;">利润|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1500 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">电话| </font><font style="vertical-align: inherit;">100 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">芬兰| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1600 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">计算器| </font><font style="vertical-align: inherit;">150 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">计算机| </font><font style="vertical-align: inherit;">1200 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + ------------ + -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with </font></font><code class="literal">ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可能会产生更难以解释的结果，因为理解超集合行的上下文较少。
      </font></font></p><p><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每行超级聚合行中</font><font style="vertical-align: inherit;">
        的</font><font style="vertical-align: inherit;">指标在行发送到客户端时生成。</font><font style="vertical-align: inherit;">服务器查看</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        最左边那个已经更改了值</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">子句中的名称。</font><font style="vertical-align: inherit;">对于名称与任何名称匹配的结果集中的任何列，其值都设置为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（如果您按列位置指定分组列，则服务器将按位置标识要设置的列</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        由于</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超集合行中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值在查询处理的后期阶段放置在结果集中，因此可以将它们作为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅在选择列表或</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">中的值
         </font><font style="vertical-align: inherit;">进行测试
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您不能将它们作为</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接条件中的值或
         </font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句进行</font><font style="vertical-align: inherit;">测试，
         </font><font style="vertical-align: inherit;">以确定要选择哪些行。</font><font style="vertical-align: inherit;">例如，您不能添加</font></font><code class="literal">WHERE product IS
        NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到查询以从输出中除去超集合行以外的所有行。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值确实出现
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在客户端，可以使用任何MySQL客户端编程接口进行测试。</font><font style="vertical-align: inherit;">但是，此时，您无法区分a
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示常规分组值还是超级聚合值。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL扩展允许</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表</font><font style="vertical-align: inherit;">中没有
         </font><font style="vertical-align: inherit;">列出的列在选择列表中进行命名。</font><font style="vertical-align: inherit;">（有关非</font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-handling" title="12.19.3 MySQL处理GROUP BY"><font style="vertical-align: inherit;">聚合</font></a><font style="vertical-align: inherit;">列的信息</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-handling" title="12.19.3 MySQL处理GROUP BY"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.19.3节“MySQL处理GROUP BY”）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在这种情况下，服务器可以从摘要行中的这个非聚合列中自由选择任何值，并且这包括添加的额外行通过</font></font><code class="literal">WITH ROLLUP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，在以下查询中，</font></font><code class="literal">country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个未</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列入</font><font style="vertical-align: inherit;">列的列，并且</font><font style="vertical-align: inherit;">为该列选择的值</font><font style="vertical-align: inherit;">不</font><font style="vertical-align: inherit;">具有确定性：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT year, country, SUM(profit) AS profit</code></strong>
       <strong class="userinput"><code>FROM sales</code></strong>
       <strong class="userinput"><code>GROUP BY year ASC WITH ROLLUP;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">国家| </font><font style="vertical-align: inherit;">利润|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">4525 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">3010 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">7535 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL模式未启用</font><font style="vertical-align: inherit;">时，此行为是允许的
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果启用了该模式，则服务器会拒绝该查询为非法，因为</font></font><code class="literal">country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未在该</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">列出</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">与
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用，您仍然可以通过执行查询
         </font></font><code class="literal">ANY_VALUE()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非确定性值列功能：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT year, ANY_VALUE(country) AS country, SUM(profit) AS profit</code></strong>
       <strong class="userinput"><code>FROM sales</code></strong>
       <strong class="userinput"><code>GROUP BY year ASC WITH ROLLUP;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">国家| </font><font style="vertical-align: inherit;">利润|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">印度| </font><font style="vertical-align: inherit;">4525 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2001 | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">3010 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">USA | </font><font style="vertical-align: inherit;">7535 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + --------- + -------- +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="group-by-handling"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.3 MySQL处理GROUP BY</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528074952624"></a><a class="indexterm" name="idm140528074951584"></a><a class="indexterm" name="idm140528074950080"></a><a class="indexterm" name="idm140528074948592"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        SQL92及更早版本不允许查询的选择列表，</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件或</font></font><code class="literal">ORDER
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表引用未在</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">命名的非聚集列</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，此查询在标准SQL92中是非法的，因为</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择列表中的非</font><font style="vertical-align: inherit;">聚集</font><font style="vertical-align: inherit;">列未出现在</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT o.custid，c.name，MAX（o.payment）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  FROM订单AS o，客户AS c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  WHERE o.custid = c.custid</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  GROUP BY o.custid;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为使查询在SQL92中合法，该</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列必须从选择列表中省略或在该</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">命名
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果SQL99和更高版本在功能上依赖于</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，</font><font style="vertical-align: inherit;">则它们允许每个可选功能T301使用非聚集</font><font style="vertical-align: inherit;">：如果这种关系存在于</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">之间
         </font></font><code class="literal">custid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则该查询是合法的。</font><font style="vertical-align: inherit;">例如，情况就是这样，它是
         </font></font><code class="literal">custid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个主要关键
         </font></font><code class="literal">customers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL 5.7.5及更高版本实现了对功能依赖的检测。</font><font style="vertical-align: inherit;">如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了
         </font><font style="vertical-align: inherit;">SQL模式（默认情况下），MySQL将拒绝那些选择列表，</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件或
         </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表引用非</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款</font><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">查询，这些</font><font style="vertical-align: inherit;">列在</font><font style="vertical-align: inherit;">条款</font><font style="vertical-align: inherit;">中既未命名</font><font style="vertical-align: inherit;">也未在功能上依赖于它们。</font><font style="vertical-align: inherit;">（在5.7.5之前，MySQL没有检测到函数依赖关系，并且
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下未启用。关于5.7.5之前的行为描述，请参阅</font></font><a class="ulink" href="http://dev.mysql.com/doc/refman/5.6/en/sql-mode.html" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL 5.6参考手册</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被禁用，标准SQL使用的MySQL扩展
         </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许选择列表，
         </font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件或</font></font><code class="literal">ORDER
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表引用非聚合列，即使列在功能上并不依赖于</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">这会导致MySQL接受前面的查询。</font><font style="vertical-align: inherit;">在这种情况下，服务器可以自由选择每个组中的任何值，因此除非它们相同，否则所选值不确定，这可能不是您想要的值。</font><font style="vertical-align: inherit;">此外，每个组的值的选择不能通过添加</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">来影响</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果集排序发生在选择值之后，并且
        </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会影响服务器选择的每个组中的哪个值。</font><font style="vertical-align: inherit;">禁用
        </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要是当你知道由于数据的某些属性，每个未命名的非聚集列中的所有值</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对每个组都是相同的</font><font style="vertical-align: inherit;">时候，它是有用的
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用nonaggregated列</font><font style="vertical-align: inherit;">而不禁用相同的效果
         </font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        下面的讨论演示了函数依赖，MySQL在缺少函数依赖时产生的错误消息，以及在没有函数依赖的情况下导致MySQL接受查询的方法。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        此查询在</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用时</font><font style="vertical-align: inherit;">可能无效，
         </font><font style="vertical-align: inherit;">因为</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择列表中的非</font><font style="vertical-align: inherit;">聚集</font><font style="vertical-align: inherit;">列未在</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        子句中</font><font style="vertical-align: inherit;">命名</font><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT name，address，MAX（age）FROM t GROUP BY name;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code class="literal">t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或是唯一</font></font><code class="literal">NOT
        NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的主键，</font><font style="vertical-align: inherit;">则该查询有效</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，MySQL会识别所选列在功能上依赖于分组列。</font><font style="vertical-align: inherit;">例如，如果</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是主键，则其值将确定值，</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为每个组只有一个主键值，因此只有一行。</font><font style="vertical-align: inherit;">因此，</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的选择没有随机性
         </font><font style="vertical-align: inherit;">，也不需要拒绝查询。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果该查询</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是主键</font></font><code class="literal">t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或唯一</font></font><code class="literal">NOT
        NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列，</font><font style="vertical-align: inherit;">则该查询无效</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，不能推断功能依赖，并发生错误：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, address, MAX(age) FROM t GROUP BY name;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1055（42000）：SELECT列表的表达式＃2不在GROUP中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BY子句并包含非聚合列'mydb.t.address'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在功能上不依赖于GROUP BY子句中的列; </font><font style="vertical-align: inherit;">这个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与sql_mode = only_full_group_by不兼容</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果你知道，</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于一个给定的数据集，</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        每个</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值实际上唯一确定了这个</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，这</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在功能上是有效的依赖的
         </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要告诉MySQL接受查询，你可以使用这个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT name，ANY_VALUE（address），MAX（age）FROM t GROUP BY name;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        或者，禁用
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        然而，前面的例子非常简单。</font><font style="vertical-align: inherit;">特别是，你不太可能在单个主键列上分组，因为每个组只包含一行。</font><font style="vertical-align: inherit;">有关在更复杂的查询中证明函数依赖的</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-functional-dependence" title="12.19.4检测功能依赖"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例，请参见</font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-functional-dependence" title="12.19.4检测功能依赖"><font style="vertical-align: inherit;">第12.19.4节“功能依赖的检测”</font></a><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果查询具有集合函数和无</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句，则它在选择列表，</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件或
         </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表中
         </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用时</font><font style="vertical-align: inherit;">不能包含</font><font style="vertical-align: inherit;">非聚集</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, MAX(age) FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1140（42000）：在没有GROUP BY表达式的聚合查询中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT列表＃1包含非聚集列'mydb.t.name'; </font><font style="vertical-align: inherit;">这个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与sql_mode = only_full_group_by不兼容</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        没有</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，有一个单一的团体，它是非确定性的，</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为团体选择</font><font style="vertical-align: inherit;">什么样的</font><font style="vertical-align: inherit;">价值。</font><font style="vertical-align: inherit;">这里也
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用，如果</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL选择的值</font><font style="vertical-align: inherit;">不重要</font><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ANY_VALUE（name），MAX（age）FROM t;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL 5.7.5及更高版本中，</font></font><code class="literal">ONLY_FULL_GROUP_BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        也影响处理使用</font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">的查询
         </font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">考虑表的情况下，</font></font><code class="literal">t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有三列</font></font><code class="literal">c1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">c2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及
         </font></font><code class="literal">c3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含这些行：
      </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c1 c2 c3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 2 A</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3 4 B</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 2 C</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设我们执行以下查询，期望结果按以下顺序排序</font></font><code class="literal">c3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT DISTINCT c1，c2 FROM t ORDER BY c3;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要订购结果，必须首先消除重复项。</font><font style="vertical-align: inherit;">但要这样做，我们应该保留第一行还是第三行？</font><font style="vertical-align: inherit;">这种任意的选择会影响保留值</font></font><code class="literal">c3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这反过来又会影响顺序并使其变得任意。</font><font style="vertical-align: inherit;">为防止出现此问题，</font><font style="vertical-align: inherit;">如果任何</font><font style="vertical-align: inherit;">
        表达式不满足以下至少一个条件</font><font style="vertical-align: inherit;">，则该查询具有
         </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并被</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拒绝为无效</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表达式等于选择列表中的一个
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            表达式引用的并且属于查询所选表格的所有列都是选择列表的元素
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        对标准SQL的另一个MySQL扩展允许在</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">引用</font><font style="vertical-align: inherit;">选择列表中的别名表达式。</font><font style="vertical-align: inherit;">例如，以下查询返回
         </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅在表中出现一次的值
         </font></font><code class="literal">orders</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT名称，COUNT（名称）FROM订单</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  GROUP BY名称</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  HAVING COUNT（name）= 1;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL扩展允许</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在聚合列</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">使用别名
         </font><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT name，COUNT（name）AS c FROM orders</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  GROUP BY名称</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  HAVING c = 1;</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.5之前，启用
           </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用这个扩展，因此需要</font></font><code class="literal">HAVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用非混淆表达式来写入子句。
</font></font></p>
</div>
<a class="indexterm" name="idm140528074859568"></a><a class="indexterm" name="idm140528074858080"></a><a class="indexterm" name="idm140528074856592"></a><a class="indexterm" name="idm140528074855520"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        标准SQL只允许</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中的</font><font style="vertical-align: inherit;">列表达式</font><font style="vertical-align: inherit;">，所以像这样的语句是无效的，因为</font></font><code class="literal">FLOOR(value/100)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它是非列表达式：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ID，FLOOR（值/ 100）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  从 </font></font><em class="replaceable"><code>tbl_name</code></em><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  GROUP BY ID，FLOOR（value / 100）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        MySQL扩展标准SQL以允许</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中的非</font><font style="vertical-align: inherit;">列表达式，
         </font><font style="vertical-align: inherit;">并认为前面的语句有效。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        标准SQL也不允许在</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中使用</font><font style="vertical-align: inherit;">别名</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL扩展标准SQL以允许别名，因此编写查询的另一种方式如下所示：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT id，FLOOR（value / 100）AS val</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  从 </font></font><em class="replaceable"><code>tbl_name</code></em><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  GROUP BY id，val;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该别名</font></font><code class="literal">val</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">被视为列表达式</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在</font></font><code class="literal">GROUP
        BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">存在非列表达式时</font><font style="vertical-align: inherit;">，MySQL会识别该表达式与选择列表中的表达式之间的等同关系。</font><font style="vertical-align: inherit;">这意味着在</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用S​​QL模式的情况下，包含的查询</font></font><code class="literal">GROUP BY id,
        FLOOR(value/100)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是有效的，因为同样的
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_floor"><code class="literal">FLOOR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式出现在选择列表中。</font><font style="vertical-align: inherit;">但是，MySQL不会尝试识别对非</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表达式的</font><font style="vertical-align: inherit;">函数依赖性</font><font style="vertical-align: inherit;">，因此</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使第三个选定表达式是</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">子句中</font></font><code class="literal">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列和
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_floor"><code class="literal">FLOOR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式</font><font style="vertical-align: inherit;">的简单公式，</font><font style="vertical-align: inherit;">以下查询在</font><font style="vertical-align: inherit;">启用时</font><font style="vertical-align: inherit;">也是无效
         </font><font style="vertical-align: inherit;">的
         </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT id，FLOOR（值/ 100），id + FLOOR（值/ 100）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  从 </font></font><em class="replaceable"><code>tbl_name</code></em><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  GROUP BY ID，FLOOR（value / 100）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        解决方法是使用派生表：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT id，F，id + F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  从</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （SELECT id，FLOOR（value / 100）AS F</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     从 </font></font><em class="replaceable"><code>tbl_name</code></em><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     GROUP BY id，FLOOR（value / 100））AS dt;</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="group-by-functional-dependence"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.19.4检测功能依赖</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528074830784"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下讨论提供了几种MySQL检测函数依赖关系的例子。</font><font style="vertical-align: inherit;">这些示例使用这种表示法：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{ </font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}  - &gt; { </font></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        理解这一点如</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一地确定</font></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这也意味着，</font></font><em class="replaceable"><code>Y</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在功能上依赖于</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这些示例使用</font></font><code class="literal">world</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库，可以从</font></font><a class="ulink" href="http://dev.mysql.com/doc/index-other.html" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL文档页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以找到有关如何在同一页面上安装数据库的详细信息。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#functional-dependence-keys" title="从键派生的函数依赖关系"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从键派生的函数依赖关系</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#functional-dependence-multiple-column-keys" title="从多列键和等式派生的函数依赖关系"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从多列键和等式派生的函数依赖关系</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#functional-dependence-special-cases" title="功能依赖特例"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能依赖特例</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#functional-dependence-views" title="功能依赖和视图"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能依赖和视图</font></font></a></p></li><li class="listitem"><p><a class="xref" href="/mysql-5.7-google-zh/functions.html#functional-dependence-combinations" title="功能依赖的组合"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能依赖的组合</font></font></a></p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="functional-dependence-keys"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从键派生的函数依赖关系</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下查询为每个国家选择口语的数量：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT co.Name，COUNT（*）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
来自countrylanguage cl，country co</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE cl.CountryCode = co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY co.Code;</font></font><font></font>
</pre><p>
          <code class="literal">co.Code</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是主键
           </font></font><code class="literal">co</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此所有列</font></font><code class="literal">co</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在功能上都依赖于它，正如使用这种表示法表示的那样：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{co.Code}  - &gt; {co。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因此，</font></font><code class="literal">co.name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在功能上依赖于
           </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列和查询是有效的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用列上</font><font style="vertical-align: inherit;">
          的</font></font><code class="literal">UNIQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索引</font></font><code class="literal">NOT
          NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是主键，并应用相同的函数依赖关系。</font><font style="vertical-align: inherit;">（对于</font></font><code class="literal">UNIQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">索引，
           </font><font style="vertical-align: inherit;">这是不正确的，</font><font style="vertical-align: inherit;">因为它允许多个
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，并且在这种情况下，唯一性会丢失。）
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="functional-dependence-multiple-column-keys"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从多列键和等式派生的函数依赖关系</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该查询为每个国家选择所有口语的列表以及有多少人讲他们：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT co.Name，cl.Language，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cl.Percentage * co.Population / 100.0 AS SpokenBy</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
来自countryLanguage cl，country co</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE cl.CountryCode = co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY cl.CountryCode，cl.Language;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对（</font></font><code class="literal">cl.CountryCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">cl.Language</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是一个两列组合主键</font></font><code class="literal">cl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此列对唯一确定以下所有列</font></font><code class="literal">cl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{cl.CountryCode，cl.Language}  - &gt; {cl。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          而且，由于</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款</font><font style="vertical-align: inherit;">中的平等
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{cl.CountryCode}  - &gt; {co.Code}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          而且，因为</font></font><code class="literal">co.Code</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是以下主要关键
           </font></font><code class="literal">co</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{co.Code}  - &gt; {co。*}
</font></font></pre><p>
          <span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">独特地确定</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系是传递性的，因此：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{cl.CountryCode，cl.Language}  - &gt; {cl。*，co。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因此，该查询是有效的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          和前面的例子一样，</font><font style="vertical-align: inherit;">可以使用列上</font><font style="vertical-align: inherit;">的</font></font><code class="literal">UNIQUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">键</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是主键。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一个</font></font><code class="literal">INNER JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件可以用来代替</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">相同的功能依赖适用于：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT co.Name，cl.Language，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cl.Percentage * co.Population / 100.0 AS SpokenBy</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM countrylanguage cl INNER JOIN country co</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ON cl.CountryCode = co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY cl.CountryCode，cl.Language;</font></font><font></font>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="functional-dependence-special-cases"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能依赖特例</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          尽管</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          条件或</font></font><code class="literal">INNER JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件中的相等性测试是对称的，但外部连接条件下的相等性测试不是，因为表具有不同的角色。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          假定参照完整性被意外破坏，并存在一行</font></font><code class="literal">countrylanguage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          没有对应的行</font></font><code class="literal">country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">考虑与上例中相同的查询，但是使用
           </font></font><code class="literal">LEFT JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT co.Name，cl.Language，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cl.Percentage * co.Population / 100.0 AS SpokenBy</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM countrylanguage cl LEFT JOIN country co</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ON cl.CountryCode = co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY cl.CountryCode，cl.Language;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于给定的值</font></font><code class="literal">cl.CountryCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">co.Code</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接结果中的值可以在匹配的行中找到（由其确定
           </font></font><code class="literal">cl.CountryCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），或者
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有匹配（也由其确定</font></font><code class="literal">cl.CountryCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">，则匹配</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在每种情况下，这种关系都适用：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{cl.CountryCode}  - &gt; {co.Code}
</font></font></pre><p>
          <code class="literal">cl.CountryCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身在功能上依赖于{ </font></font><code class="literal">cl.CountryCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">cl.Language</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}这是一个主键。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果在连接结果中</font></font><code class="literal">co.Code</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已完成
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">co.Name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也是如此。</font><font style="vertical-align: inherit;">如果
           </font></font><code class="literal">co.Code</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有完成
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，那么因为
           </font></font><code class="literal">co.Code</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它是主键，所以它确定
           </font></font><code class="literal">co.Name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，在所有情况下：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{co.Code}  - &gt; {co.Name}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这产生：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{cl.CountryCode，cl.Language}  - &gt; {cl。*，co。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因此，该查询是有效的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          但是，假设这些表已交换，如下面的查询所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT co.Name，cl.Language，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cl.Percentage * co.Population / 100.0 AS SpokenBy</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM country co LEFT JOIN countrylanguage cl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ON cl.CountryCode = co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY cl.CountryCode，cl.Language;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          现在，这种关系并</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{cl.CountryCode，cl.Language}  - &gt; {cl。*，co。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          事实上，所有已</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成的
           </font></font><code class="literal">cl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行将被放入一个组中（它们的两</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列都相等
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），而在此组中，值
           </font></font><code class="literal">co.Name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以变化。</font><font style="vertical-align: inherit;">该查询无效，MySQL拒绝该查询。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因此外连接的功能依赖性与行列是属于左边还是右边有关
           </font></font><code class="literal">LEFT JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果存在嵌套的外连接，或者连接条件不完全由相等比较组成，则函数依赖性的确定变得更加复杂。
</font></font></p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="functional-dependence-views"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能依赖和视图</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          假设一个关于国家的观点产生他们的代码，他们的名字用大写字母表示，他们有多少种不同的官方语言：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE VIEW country2 AS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT co.Code，UPPER（co.Name）AS UpperName，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
COUNT（cl.Language）作为官方语言</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM country AS co JOIN countrylanguage AS cl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ON cl.CountryCode = co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE cl.isOfficial ='T'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY co.Code;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个定义是有效的，因为：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{co.Code}  - &gt; {co。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在视图结果中，第一个选择的列是
           </font></font><code class="literal">co.Code</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也是组列，从而确定所有其他选定的表达式：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{country2.Code}  - &gt; {country2。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL理解这一点并使用这些信息，如下所述。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该查询通过与</font></font><code class="literal">city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font><font style="vertical-align: inherit;">一起显示视图来显示国家，他们拥有多少种不同的官方语言，以及他们拥有多少城市</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT co2.Code，co2.UpperName，co2.OfficialLanguages，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
COUNT（*）AS城市</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM country2 AS co2 JOIN city ci</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ON ci.CountryCode = co2.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY co2.Code;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个查询是有效的，因为，如前所述：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{co2.Code}  - &gt; {co2。*}
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL能够发现视图结果中的函数依赖关系，并使用它来验证使用该视图的查询。</font><font style="vertical-align: inherit;">如果</font></font><code class="literal">country2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是派生表，</font><font style="vertical-align: inherit;">情况也是如此
           </font><font style="vertical-align: inherit;">，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT co2.Code，co2.UpperName，co2.OfficialLanguages，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
COUNT（*）AS城市</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SELECT co.Code，UPPER（co.Name）AS UpperName，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 COUNT（cl.Language）作为官方语言</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 FROM country AS co JOIN countrylanguage AS cl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ON cl.CountryCode = co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 WHERE cl.isOfficial ='T'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GROUP BY co.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）AS co2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
加入城市ci ON ci.CountryCode = co2.Code</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY co2.Code;</font></font><font></font>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="functional-dependence-combinations"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能依赖的组合</font></font></h4>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL能够将所有上述类型的函数依赖关系（基于关键字，基于等式，基于视图）结合起来，以验证更复杂的查询。
</font></font></p>
</div>

</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="miscellaneous-functions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.20杂项功能</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528074736144"></a><a class="indexterm" name="idm140528074735072"></a>
<div class="table">
<a name="idm140528074733584"></a><p class="title"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12.26其他功能</font></font></b></p>
<div class="table-contents">
<table frame="box" rules="all" summary="A reference that lists miscellaneous functions."><colgroup><col width="40%"><col width="60%"></colgroup><thead><tr><th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr></thead><tbody><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      抑制ONLY_FULL_GROUP_BY值拒绝
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_default"><code class="literal">DEFAULT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回表格列的默认值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      获取一个命名锁
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回IP地址的数字值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从数值中返回IP地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回IPv6地址的数字值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      从数值中返回IPv6地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      指定的锁是否空闲
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否为IPv4地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4-compat"><code class="literal">IS_IPV4_COMPAT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否是与IPv4兼容的地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4-mapped"><code class="literal">IS_IPV4_MAPPED()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否为IPv4映射地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv6"><code class="literal">IS_IPV6()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      参数是否为IPv6地址
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      指定的锁是否在使用中; </font><font style="vertical-align: inherit;">返回连接标识符如果为true
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      阻塞，直到从机读取并应用所有更新到指定的位置
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使列具有给定的名称
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_rand"><code class="literal">RAND()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个随机的浮点值
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-all-locks"><code class="literal">RELEASE_ALL_LOCKS()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      释放所有当前命名的锁
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      释放指定的锁
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sleep"><code class="literal">SLEEP()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      睡几秒钟
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回通用唯一标识符（UUID）
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      返回一个整数值的通用标识符
    </font></font></td>
</tr><tr><td scope="row"><a class="link" href="/mysql-5.7-google-zh/functions.html#function_values"><code class="literal">VALUES()</code></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      定义INSERT期间要使用的值
    </font></font></td>
</tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a name="function_any-value"></a><p>
          <a class="indexterm" name="idm140528074651888"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE(<em class="replaceable"><code>arg</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL模式被启用时，</font><font style="vertical-align: inherit;">
          这个函数对于</font><font style="vertical-align: inherit;">查询
           </font><font style="vertical-align: inherit;">非常有用，例如</font><font style="vertical-align: inherit;">当MySQL因为MySQL无法确定的原因而拒绝你知道的查询时有效。</font><font style="vertical-align: inherit;">函数返回值和类型与其参数的返回值和类型相同，但是不会为</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          SQL模式</font><font style="vertical-align: inherit;">检查函数结果</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如，如果</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是非索引列，则以下查询在</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用时</font><font style="vertical-align: inherit;">失败
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, address, MAX(age) FROM t GROUP BY name;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1055（42000）：SELECT列表的表达式＃2不在GROUP中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BY子句并包含非聚合列'mydb.t.address'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在功能上不依赖于GROUP BY子句中的列; </font><font style="vertical-align: inherit;">这个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与sql_mode = only_full_group_by不兼容</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          发生失败的原因</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是非聚集列既不在</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">命名
           </font><font style="vertical-align: inherit;">也不依赖于它们。</font><font style="vertical-align: inherit;">因此，</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组内行</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">不确定。</font><font style="vertical-align: inherit;">有多种方式可以使MySQL接受查询：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              修改表格以创建</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主键或唯一</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列。</font><font style="vertical-align: inherit;">这使MySQL能够确定它</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在功能上依赖于</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">也就是说，</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是唯一确定的
               </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（如果</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须允许</font><font style="vertical-align: inherit;">该技术</font><font style="vertical-align: inherit;">作为有效值，
               </font><font style="vertical-align: inherit;">则此技术不适用</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是指
               </font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT name，ANY_VALUE（address），MAX（age）FROM t GROUP BY name;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在这种情况下，MySQL会忽略</font></font><code class="literal">address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组</font><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">值
               </font><font style="vertical-align: inherit;">的不确定性
               </font><font style="vertical-align: inherit;">并接受查询。</font><font style="vertical-align: inherit;">如果您根本不在乎为每个组选择了非聚集列的哪个值，这可能很有用。
              </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是一个聚合函数，不像函数如
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sum"><code class="literal">SUM()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它仅仅是为了抑制非确定性测试。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              禁用
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这相当于使用
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
               </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              启用，如前项所述。
</font></font></p></li></ul>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果列之间存在函数依赖关系，但MySQL无法确定它也很有用。</font><font style="vertical-align: inherit;">以下查询是有效的，因为
           </font></font><code class="literal">age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它在功能上依赖于分组列</font></font><code class="literal">age-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但MySQL无法通过</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">来判断并拒绝该查询
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择年龄从t GROUP BY age-1;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要使MySQL接受查询，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ANY_VALUE（age）FROM t GROUP BY age-1;
</font></font></pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用于没有</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句时</font><font style="vertical-align: inherit;">引用集合函数的查询
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, MAX(age) FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1140（42000）：在没有GROUP BY表达式的聚合查询中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT列表＃1包含非聚集列'mydb.t.name'; </font><font style="vertical-align: inherit;">这个</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与sql_mode = only_full_group_by不兼容</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          没有</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，有一个单一的团体，它是非确定性的，</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为团体选择</font><font style="vertical-align: inherit;">什么样的</font><font style="vertical-align: inherit;">价值。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">告诉MySQL接受查询：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT ANY_VALUE（name），MAX（age）FROM t;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这可能是由于给定数据集的一些属性，您知道选定的非聚集列在功能上实际上依赖于</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          列。</font><font style="vertical-align: inherit;">例如，应用程序可以强制一列相对于另一列的唯一性。</font><font style="vertical-align: inherit;">在这种情况下，使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_any-value"><code class="literal">ANY_VALUE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效的功能依赖列可能是有意义的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关其他讨论，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-handling" title="12.19.3 MySQL处理GROUP BY"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.19.3节“MySQL处理GROUP BY”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_default"></a><p>
          <a class="indexterm" name="idm140528074592288"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_default"><code class="literal">DEFAULT(<em class="replaceable"><code>col_name</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回表列的默认值。</font><font style="vertical-align: inherit;">如果该列没有默认值，则会出现错误。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE t SET i = DEFAULT(i)+1 WHERE id &lt; 100;</code></strong>
</pre></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_format"><code class="literal">FORMAT(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将数字</font></font><em class="replaceable"><code>X</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化为像</font></font><code class="literal">'#,###,###.##'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">四舍五入到
           </font></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小数位</font><font style="vertical-align: inherit;">的格式</font><font style="vertical-align: inherit;">，并将结果作为字符串返回。</font><font style="vertical-align: inherit;">有关细节，请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#string-functions" title="12.5字符串函数"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.5节“字符串函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_get-lock"></a><p>
          <a class="indexterm" name="idm140528074576448"></a>

          <a class="indexterm" name="idm140528074575376"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>timeout</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          试图用一个由字符串给出的名字获得一个锁
           </font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使用超时
           </font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒。</font><font style="vertical-align: inherit;">负值
           </font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示无限超时。</font><font style="vertical-align: inherit;">锁是排他性的。</font><font style="vertical-align: inherit;">虽然由一个会话持有，但其他会话无法获得同名的锁。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是否成功获取锁定，</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果尝试超时（例如，因为另一个客户端先前已锁定名称），或者</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发生错误（例如内存不足或线程被
           </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqladmin" title="4.5.2 mysqladmin  - 用于管理MySQL服务器的客户端"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqladmin kill杀死</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          获得的锁</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          通过执行</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或隐式地在会话终止时（通常或异常）</font><font style="vertical-align: inherit;">来显式释放
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">另一次呼叫可能会发生锁定释放
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在5.7.5之前，只能获取一个同时发生的锁并</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              释放任何现有的锁。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在MySQL 5.7.5中，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              使用元数据锁定（MDL）子系统重新实现，并且扩展了其功能。</font><font style="vertical-align: inherit;">可以获取多个同时锁，
               </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且不释放任何现有的锁。</font><font style="vertical-align: inherit;">给定的会话甚至有可能为同一个名称获取多个锁。</font><font style="vertical-align: inherit;">其他会话无法获取具有该名称的锁，直到获取会话释放其名称的所有锁。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              作为MDL重新实现的结果，获取的锁</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出现在性能模式
               </font></font><a class="link" href="/mysql-5.7-google-zh/performance-schema.html#metadata-locks-table" title="25.11.12.1 metadata_locks表"><code class="literal">metadata_locks</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中。</font><font style="vertical-align: inherit;">该
               </font></font><code class="literal">OBJECT_TYPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表示</font></font><code class="literal">USER
              LEVEL LOCK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该
               </font></font><code class="literal">OBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表示锁名称。</font><font style="vertical-align: inherit;">而且，获取多个锁的能力引入了客户端之间的死锁的可能性。</font><font style="vertical-align: inherit;">发生这种情况时，服务器会选择一个呼叫者并终止其锁定请求并发生
               </font></font><a class="link" href="/mysql-5.7-google-zh/error-handling.html#error_er_user_lock_deadlock"><code class="literal">ER_USER_LOCK_DEADLOCK</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              错误。</font><font style="vertical-align: inherit;">此错误不会导致事务回滚。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下示例可以看出从MySQL 5.7.5开始的锁获取行为的差异。</font><font style="vertical-align: inherit;">假设你执行这些语句：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT GET_LOCK（'lock1'，10）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT GET_LOCK（'lock2'，10）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT RELEASE_LOCK（'lock2'）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT RELEASE_LOCK（'lock1'）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL 5.7.5或更高版本中，第二个
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得第二个锁，两个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          调用都返回1（成功）。</font><font style="vertical-align: inherit;">在MySQL 5.7.5之前，第二个
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">释放第一个锁（</font></font><code class="literal">'lock1')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二个
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（失败），因为没有
           </font></font><code class="literal">'lock1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">释放。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL 5.7.5和更高版本在64个字符的锁名称上强制执行最大长度。</font><font style="vertical-align: inherit;">以前，没有限制被强制执行。
        </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在事务提交或回滚时，</font><font style="vertical-align: inherit;">
          获取的锁</font><font style="vertical-align: inherit;">不会被释放。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于实现应用程序锁定或模拟记录锁定。</font><font style="vertical-align: inherit;">名称在服务器范围内锁定。</font><font style="vertical-align: inherit;">如果名称在一个会话中被锁定，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          阻止另一个会话为具有相同名称的锁定发出的任何请求。</font><font style="vertical-align: inherit;">这使得同意给定锁名称的客户端可以使用该名称执行合作咨询锁定。</font><font style="vertical-align: inherit;">但请注意，它还可以使不在协作客户端集合中的客户端无意或故意锁定名称，从而防止任何合作客户端锁定该名称。</font><font style="vertical-align: inherit;">降低这种可能性的一种方法是使用特定于数据库或特定于应用程序的锁定名称。</font><font style="vertical-align: inherit;">例如，使用表单</font></font><em class="replaceable"><code>db_name.str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或的
           </font><font style="vertical-align: inherit;">锁定名称
           </font></font><em class="replaceable"><code>app_name.str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果多个客户端正在等待锁定，他们将获取它的顺序是未定义的。</font><font style="vertical-align: inherit;">应用程序不应该假定客户端将按照发出锁定请求的顺序获取锁定。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            由于能够在MySQL 5.7.5中获取多个命名锁，因此单个语句可能获取大量锁。</font><font style="vertical-align: inherit;">例如：
          </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INSERT INTO ... SELECT GET_LOCK（t1.col_name）FROM t1;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            这些类型的陈述可能会有一定的不利影响。</font><font style="vertical-align: inherit;">例如，如果语句部分通过并回退，则获取到故障点的锁仍然存在。</font><font style="vertical-align: inherit;">如果意图是插入行和获取锁之间存在对应关系，那么这个意图就不会被满足。</font><font style="vertical-align: inherit;">此外，如果以特定顺序授予锁定非常重要，请注意，结果集顺序可能因优化程序选择的执行计划而异。</font><font style="vertical-align: inherit;">由于这些原因，最好将应用程序限制为每个语句的单个锁定购买调用。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不同的锁定界面可用作插件服务或一组用户定义的函数。</font><font style="vertical-align: inherit;">该接口提供了锁定名称空间和不同的读写锁定，与由</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关函数</font><font style="vertical-align: inherit;">提供的接口不同
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/extending-mysql.html#locking-service" title="28.3.1锁定服务"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第28.3.1节“锁定服务”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_inet-aton"></a><p>
          <a class="indexterm" name="idm140528074517920"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果将IPv4网络地址的虚线四舍五入表示为字符串，则返回一个整数，该整数表示网络字节顺序（大端）中地址的数值。</font><font style="vertical-align: inherit;">如果它不理解它的参数，则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INET_ATON('10.0.5.9');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 167773449</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于这个例子，返回值计算为10×256 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + 0×256 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + 5×256 + 9。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能会或可能不会返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">短格式IP地址</font><font style="vertical-align: inherit;">的非</font><font style="vertical-align: inherit;">结果（例如作为</font></font><code class="literal">'127.1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示</font></font><code class="literal">'127.0.0.1'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">因此，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不应该为这种地址使用a。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            要存储生成的值
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用</font></font><code class="literal">INT UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列而非</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已签名</font><font style="vertical-align: inherit;">的
             </font><font style="vertical-align: inherit;">列
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果使用带符号的列，则与第一个字节大于127的IP地址对应的值无法正确存储。</font><font style="vertical-align: inherit;">请参见
             </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#out-of-range-and-overflow" title="11.2.6超出范围和溢出处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.2.6节“超出范围和溢出处理”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_inet-ntoa"></a><p>
          <a class="indexterm" name="idm140528074494848"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-ntoa"><code class="literal">INET_NTOA(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以网络字节顺序给定一个数字IPv4网络地址，以连接字符集中的字符串的形式返回地址的点四字符串表示形式。
          </font><font style="vertical-align: inherit;">如果它不理解它的参数，则</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INET_NTOA(167773449);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '10 .0.5.9'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_inet6-aton"></a><p>
          <a class="indexterm" name="idm140528074483296"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定一个IPv6或IPv4网络地址作为字符串，返回一个二进制字符串，表示网络字节顺序（大端）的地址数值。</font><font style="vertical-align: inherit;">由于数字格式的IPv6地址需要比最大整数类型更多的字节，因此此函数返回的表示具有以下
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型：
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY(16)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于IPv6地址和</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY(4)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPv4地址。</font><font style="vertical-align: inherit;">如果参数不是有效地址，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下示例用于
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_hex"><code class="literal">HEX()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可打印格式</font><font style="vertical-align: inherit;">显示
           </font><font style="vertical-align: inherit;">结果：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(INET6_ATON('fdfe::5a55:caff:fefa:9089'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'FDFE0000000000005A55CAFFFEFA9089'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(INET6_ATON('10.0.5.9'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'0A000509'</font></font><font></font>
</pre><p>
          <code class="literal">INET6_ATON()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">观察对有效论证的若干限制。</font><font style="vertical-align: inherit;">这些在下面的列表中与示例一起给出。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              跟踪区域ID是不允许的，如在
               </font></font><code class="literal">fe80::3%1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或中
               </font></font><code class="literal">fe80::3%eth0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              不允许跟踪网络掩码，如在
               </font></font><code class="literal">2001:45f:3:ba::/64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或中
               </font></font><code class="literal">198.51.100.0/24</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              对于表示IPv4地址的值，仅支持无类地址。</font><font style="vertical-align: inherit;">诸如</font></font><code class="literal">198.51.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被拒绝的有</font><font style="vertical-align: inherit;">类地址
               </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">后面的端口号是不允许的，如在
               </font></font><code class="literal">198.51.100.2:8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">地址组件中的十六进制数字是不允许的，如在
               </font></font><code class="literal">198.0xa0.1.2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">不支持八进制数字：</font></font><code class="literal">198.51.010.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被视为
               </font></font><code class="literal">198.51.10.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是
               </font></font><code class="literal">198.51.8.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些IPv4约束也适用于具有IPv4地址部分的IPv6地址，例如IPv4兼容或IPv4映射地址。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将以数字形式表示</font><font style="vertical-align: inherit;">的IPv4地址</font><font style="vertical-align: inherit;">作为</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">INT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">转换为</font><font style="vertical-align: inherit;">以数字形式表示
           </font><font style="vertical-align: inherit;">的IPv6地址作为
           </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#binary-varbinary" title="11.4.2 BINARY和VARBINARY类型"><code class="literal">VARBINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，请使用以下表达式：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INET6_ATON（INET_NTOA（</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">））
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(INET6_ATON(INET_NTOA(167773449)));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'0A000509'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_inet6-ntoa"></a><p>
          <a class="indexterm" name="idm140528074445248"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          给定以数字形式表示的IPv6或IPv4网络地址作为二进制字符串，以连接字符集中的字符串形式返回地址的字符串表示形式。</font><font style="vertical-align: inherit;">如果参数不是有效地址，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 有这些属性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              它不使用操作系统函数来执行转换，因此输出字符串与平台无关。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              返回字符串的最大长度为39（4 x 8 + 7）。</font><font style="vertical-align: inherit;">鉴于这种说法：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t AS SELECT INET6_NTOA（</font></font><em class="replaceable"><code>expr</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）AS c1;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              结果表格将具有以下定义：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t（c1 VARCHAR（39）CHARACTER SET utf8 DEFAULT NULL）;
</font></font></pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              返回字符串对IPv6地址使用小写字母。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INET6_NTOA(INET6_ATON('fdfe::5a55:caff:fefa:9089'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'fdfe :: 5a55：caff：fefa：9089'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INET6_NTOA(INET6_ATON('10.0.5.9'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '10 .0.5.9'</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INET6_NTOA(UNHEX('FDFE0000000000005A55CAFFFEFA9089'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'fdfe :: 5a55：caff：fefa：9089'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT INET6_NTOA(UNHEX('0A000509'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; '10 .0.5.9'</font></font><font></font>
</pre></li><li class="listitem"><a name="function_is-free-lock"></a><p>
          <a class="indexterm" name="idm140528074423456"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检查指定的锁是否</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可以使用（即未锁定）。</font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果锁是免费的（没有人正在使用的锁），</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果锁处于使用中，并且
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果发生错误（例如，一个不正确的参数）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_is-ipv4"></a><p>
          <a class="indexterm" name="idm140528074411072"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4"><code class="literal">IS_IPV4(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数是指定为字符串的有效IPv4地址，则返回1，否则返回0。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IS_IPV4('10.0.5.9'), IS_IPV4('10.0.5.256');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于给定的参数，如果
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回1，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）将返回非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">反向语句不正确：在某些情况下，
           </font><font style="vertical-align: inherit;">返回0 </font><font style="vertical-align: inherit;">时
           </font><font style="vertical-align: inherit;">返回</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非</font><font style="vertical-align: inherit;">0。
        </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          正如前面的说法所暗示的，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它比</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于什么是有效的IPv4地址</font><font style="vertical-align: inherit;">更严格
           </font><font style="vertical-align: inherit;">，所以对于需要对无效值执行强大检查的应用程序可能会有用。</font><font style="vertical-align: inherit;">或者，使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将IPv4地址转换为内部表格并检查
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果（表示无效地址）。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检查IPv4地址</font><font style="vertical-align: inherit;">一样强大</font><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_is-ipv4-compat"></a><p>
          <a class="indexterm" name="idm140528074385776"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4-compat"><code class="literal">IS_IPV4_COMPAT(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数以数字形式表示的IPv6地址作为二进制字符串返回
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是有效的IPv4兼容IPv6地址，则返回1，否则返回0。</font><font style="vertical-align: inherit;">与IPv4兼容的地址具有这种形式
           </font><font style="vertical-align: inherit;">。
        </font></font><code class="literal">::<em class="replaceable"><code>ipv4_address</code></em></code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IS_IPV4_COMPAT(INET6_ATON('::10.0.5.9'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IS_IPV4_COMPAT(INET6_ATON('::ffff:10.0.5.9'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          IPv4兼容地址的IPv4部分也可以使用十六进制表示法表示。</font><font style="vertical-align: inherit;">例如，
           </font></font><code class="literal">198.51.100.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有这个原始十六进制值：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT HEX(INET6_ATON('198.51.100.1'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'C6336401'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以与IPv4兼容的形式表示，
           </font></font><code class="literal">::198.51.100.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于
           </font></font><code class="literal">::c0a8:0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或（无前导零）
          </font></font><code class="literal">::c0a8:1</code>
        </p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  IS_IPV4_COMPAT(INET6_ATON('::198.51.100.1')),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  IS_IPV4_COMPAT(INET6_ATON('::c0a8:0001')),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>  IS_IPV4_COMPAT(INET6_ATON('::c0a8:1'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，1，1</font></font><font></font>
</pre></li><li class="listitem"><a name="function_is-ipv4-mapped"></a><p>
          <a class="indexterm" name="idm140528074363648"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv4-mapped"><code class="literal">IS_IPV4_MAPPED(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该函数以数字形式表示的IPv6地址作为二进制字符串返回
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果参数是有效的IPv4映射IPv6地址，则返回1，否则返回0。</font><font style="vertical-align: inherit;">IPv4映射地址具有这种形式
           </font><font style="vertical-align: inherit;">。
        </font></font><code class="literal">::ffff:<em class="replaceable"><code>ipv4_address</code></em></code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IS_IPV4_MAPPED(INET6_ATON('::10.0.5.9'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          与</font></font><code class="literal">IS_IPV4_COMPAT()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPv4映射地址的IPv4部分一样，也可以使用十六进制表示法表示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  IS_IPV4_MAPPED(INET6_ATON('::ffff:198.51.100.1')),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  IS_IPV4_MAPPED(INET6_ATON('::ffff:c0a8:0001')),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>  IS_IPV4_MAPPED(INET6_ATON('::ffff:c0a8:1'));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 1，1，1</font></font><font></font>
</pre></li><li class="listitem"><a name="function_is-ipv6"></a><p>
          <a class="indexterm" name="idm140528074345840"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv6"><code class="literal">IS_IPV6(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果参数是指定为字符串的有效IPv6地址，则返回1;否则返回0。</font><font style="vertical-align: inherit;">此功能不会将IPv4地址视为有效的IPv6地址。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT IS_IPV6('10.0.5.9'), IS_IPV6('::1');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 0,1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于给定的参数，如果
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-ipv6"><code class="literal">IS_IPV6()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回1，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将返回非</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_is-used-lock"></a><p>
          <a class="indexterm" name="idm140528074332576"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          检查指定的锁是否</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          正在使用（即锁定）。</font><font style="vertical-align: inherit;">如果是这样，它将返回持有锁的客户端会话的连接标识符。</font><font style="vertical-align: inherit;">否则，它返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_master-pos-wait"></a><p>
          <a class="indexterm" name="idm140528074321488"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT(<em class="replaceable"><code>log_name</code></em>,<em class="replaceable"><code>log_pos</code></em>[,<em class="replaceable"><code>timeout</code></em>][,<em class="replaceable"><code>channel</code></em>])</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此功能对于控制主/从同步很有用。</font><font style="vertical-align: inherit;">它会阻塞，直到从站读取并应用到主日志中指定位置的所有更新。</font><font style="vertical-align: inherit;">返回值是从站必须等待前进到指定位置的日志事件的数量。</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果从属SQL线程未启动，从属主机信息未初始化，参数不正确或发生错误，则</font><font style="vertical-align: inherit;">函数返回</font><font style="vertical-align: inherit;">。</font></font><code class="literal">-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果超时超时，</font><font style="vertical-align: inherit;">它会返回</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果从属SQL线程在</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待时</font><font style="vertical-align: inherit;">停止
           </font><font style="vertical-align: inherit;">，则函数返回</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果从站超过指定位置，则该函数立即返回。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在多线程从机上，</font><font style="vertical-align: inherit;">
          当调用检查点操作来更新从机状态时</font><font style="vertical-align: inherit;">，函数会等待</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_slave_checkpoint_group"><code class="literal">slave_checkpoint_group</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font><font style="vertical-align: inherit;">由</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_slave_checkpoint_period"><code class="literal">slave_checkpoint_period</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统变量</font><font style="vertical-align: inherit;">设置的限制到期
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">根据系统变量的设置，该功能可能因此在达到指定位置后返回一段时间。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果</font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">了一个</font><font style="vertical-align: inherit;">值，则
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒数过去后</font><font style="vertical-align: inherit;">停止等待</font><font style="vertical-align: inherit;">。
          </font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须大于0; </font><font style="vertical-align: inherit;">零或负</font></font><em class="replaceable"><code>timeout</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示不超时。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可选</font></font><em class="replaceable"><code>channel</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值使您能够命名该函数应用于哪个复制通道。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-channels" title="16.2.3复制通道"><font style="vertical-align: inherit;">第16.2.3节“复制通道”</font></a><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_name-const"></a><p>
          <a class="indexterm" name="idm140528074297904"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_name-const"><code class="literal">NAME_CONST(<em class="replaceable"><code>name</code></em>,<em class="replaceable"><code>value</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回给定的值。</font><font style="vertical-align: inherit;">用于生成结果集列时，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会使列具有给定的名称。</font><font style="vertical-align: inherit;">参数应该是常量。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT NAME_CONST('myname', 14);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">myname |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">14 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此功能仅供内部使用。</font><font style="vertical-align: inherit;">如</font></font><a class="xref" href="/mysql-5.7-google-zh/stored-programs-views.html#stored-programs-logging" title="23.7存储程序的二进制记录"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第23.7节“存储程序的二进制日志记录”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述，服务器在从包含对本地程序变量的引用的存储程序写入语句时使用它
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">你可能会在</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog  - 处理二进制日志文件的实用程序"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqlbinlog</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的输出中看到这个函数</font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于您的应用程序，您可以使用简单的别名获得与刚刚显示的示例中完全相同的结果，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 14 AS myname;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">myname |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">14 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关列别名的更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          请参见</font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><font style="vertical-align: inherit;">第13.2.9节“SELECT语法”</font></a><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_release-all-locks"></a><p>
          <a class="indexterm" name="idm140528074281104"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-all-locks"><code class="literal">RELEASE_ALL_LOCKS()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          释放当前会话持有的所有已命名的锁，并返回释放的锁的数量（如果没有则锁定为0）
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_release-lock"></a><p>
          <a class="indexterm" name="idm140528074271696"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-lock"><code class="literal">RELEASE_LOCK(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          释放由</font></font><em class="replaceable"><code>str</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得
           </font><font style="vertical-align: inherit;">的字符串命名的锁
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">返回
           </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果锁被释放，
           </font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果锁不是由该线程（在这种情况下，锁定不会被释放）成立，
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果不存在命名的锁。</font><font style="vertical-align: inherit;">如果从来没有通过调用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或之前已经释放</font><font style="vertical-align: inherit;">锁，锁就不存在
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#do" title="13.2.3 DO语法"><code class="literal">DO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明可方便使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#do" title="13.2.3 DO语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.2.3节“DO语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_sleep"></a><p>
          <a class="indexterm" name="idm140528074253232"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_sleep"><code class="literal">SLEEP(<em class="replaceable"><code>duration</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          睡眠（暂停）</font></font><em class="replaceable"><code>duration</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">给定的秒数
           </font><font style="vertical-align: inherit;">，然后返回0.持续时间可能有小数部分。</font><font style="vertical-align: inherit;">如果参数是
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或否定的，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sleep"><code class="literal">SLEEP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会在严格SQL模式下产生警告或错误。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当睡眠正常返回（不中断）时，它返回0：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SLEEP(1000);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">睡眠（1000）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          什么时候</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sleep"><code class="literal">SLEEP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被中断的查询调用的唯一事件是，它返回1，而查询本身不返回错误。</font><font style="vertical-align: inherit;">无论查询是否被终止或超时，情况都是如此：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此声明</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#kill" title="13.7.6.4 KILL语法"><code class="literal">KILL QUERY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在另一个会话中</font><font style="vertical-align: inherit;">被中断
               </font><font style="vertical-align: inherit;">：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SLEEP(1000);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">睡眠（1000）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此声明被超时中断：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT /*+ MAX_EXECUTION_TIME(1) */ SLEEP(1000);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">睡眠（1000）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------- +</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          何时</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_sleep"><code class="literal">SLEEP()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只是被中断的查询的一部分，查询返回错误：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此声明</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#kill" title="13.7.6.4 KILL语法"><code class="literal">KILL QUERY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在另一个会话中</font><font style="vertical-align: inherit;">被中断
               </font><font style="vertical-align: inherit;">：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 FROM t1 WHERE SLEEP(1000);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1317（70100）：查询执行中断</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              此声明被超时中断：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT /*+ MAX_EXECUTION_TIME(1000) */ 1 FROM t1 WHERE SLEEP(1000);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误3024（HY000）：查询执行中断，最大语句</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
执行时间超时</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个函数对于基于语句的复制是不安全的。</font><font style="vertical-align: inherit;">如果您</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
           </font><font style="vertical-align: inherit;">使用此功能，则会记录一条警告
           </font></font><code class="literal">STATEMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><a name="function_uuid"></a><p>
          <a class="indexterm" name="idm140528074221472"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          返回根据RFC 4122 </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通用唯一标识符（UUID）URN命名空间</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          （</font></font><a class="ulink" href="http://www.ietf.org/rfc/rfc4122.txt" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.ietf.org/rfc/rfc4122.txt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">生成</font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">的通用唯一标识符（UUID</font></span></span><font style="vertical-align: inherit;">）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          UUID被设计为一个在空间和时间上全球唯一的数字。</font><font style="vertical-align: inherit;">两次调用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预计会生成两个不同的值，即使这些调用是在两个不相互连接的独立设备上执行的。
</font></font></p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            尽管</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值观是独一无二的，但它们并不一定是不可猜测或不可预测的。</font><font style="vertical-align: inherit;">如果需要不可预测性，则应以其他方式生成UUID值。
</font></font></p>
</div>
<p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个符合RFC 4122中描述的UUID版本1的值。该值是一个128位数字，表示为</font></font><code class="literal">utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          格式为五个十六进制数字</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">字符串
           </font></font><code class="literal">aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          ：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              前三个数字是从时间戳的低，中，高部分生成的。</font><font style="vertical-align: inherit;">高位部分还包括UUID版本号。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在时间戳值丢失单调性的情况下（例如，由于夏令时），第四个数字保持时间唯一性。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              第五个数字是提供空间唯一性的IEEE 802节点号。</font><font style="vertical-align: inherit;">如果后者不可用（例如，因为主机设备没有以太网卡，或者未知如何在主机操作系统上查找接口的硬件地址），则会替换一个随机数。</font><font style="vertical-align: inherit;">在这种情况下，空间唯一性不能得到保证。</font><font style="vertical-align: inherit;">尽管如此，冲突应该有
               </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低的概率。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              仅在FreeBSD和Linux上考虑接口的MAC地址。</font><font style="vertical-align: inherit;">在其他操作系统上，MySQL使用随机生成的48位数字。
</font></font></p></li></ul>
</div>
<pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UUID();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt;'6ccd780c-baba-1026-9564-5b8c656024db'</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 不支持基于语句的复制。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_uuid-short"></a><p>
          <a class="indexterm" name="idm140528074197104"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以64位无符号整数形式</font><font style="vertical-align: inherit;">
          返回</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简短</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通用标识符。</font><font style="vertical-align: inherit;">由返回的值
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从由所述返回的字符串格式的128位标识符不同
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid"><code class="literal">UUID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能并具有不同的独特性质。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果下列条件成立</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则保证</font><font style="vertical-align: inherit;">其价值
           </font><font style="vertical-align: inherit;">唯一：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              在</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前服务器的值介于0和255之间，您的设置主从服务器中是唯一的
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              您不会在</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqld" title="4.3.1 mysqld  -  MySQL服务器"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqld</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新启动
             </font><font style="vertical-align: inherit;">之间为您的服务器主机设置系统时间</font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysqld" title="4.3.1 mysqld  -  MySQL服务器"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysqld</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重启
 </font><font style="vertical-align: inherit;">之间，平均每秒</font><font style="vertical-align: inherit;">
              调用</font><font style="vertical-align: inherit;">次数不到1600万次
              </font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回值的构造是这样的：
        </font></font></p><pre data-lang="clike" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  （server_id＆255）&lt;&lt; 56</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+（server_startup_time_in_seconds &lt;&lt; 24）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ incremented_variable ++;</font></font><font></font>
</pre><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT UUID_SHORT();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        - &gt; 92395783831158784</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p>
            <a class="link" href="/mysql-5.7-google-zh/functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 不支持基于语句的复制。
</font></font></p>
</div>
</li><li class="listitem"><a name="function_values"></a><p>
          <a class="indexterm" name="idm140528074170816"></a>

          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_values"><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code></a>
        </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在
           </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert-on-duplicate" title="13.2.5.2 INSERT ... ON DUPLICATE KEY UPDATE语法"><code class="literal">INSERT
          ... ON DUPLICATE KEY UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明中，可以使用</font><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">
          函数</font><font style="vertical-align: inherit;">来引用</font><font style="vertical-align: inherit;">语句部分中的</font><font style="vertical-align: inherit;">列值
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">换句话说，
           </font><font style="vertical-align: inherit;">
          在</font><font style="vertical-align: inherit;">子句中指的</font><font style="vertical-align: inherit;">是将插入</font><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">，没有发生重复键冲突。</font><font style="vertical-align: inherit;">这个函数在多行插入中特别有用。</font><font style="vertical-align: inherit;">该
           </font><font style="vertical-align: inherit;">函数仅在</font><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">子句中</font><font style="vertical-align: inherit;">有意义</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">否则</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#insert-on-duplicate" title="13.2.5.2 INSERT ... ON DUPLICATE KEY UPDATE语法"><font style="vertical-align: inherit;">第13.2.5.2节“INSERT ... ON DUPLICATE KEY UPDATE语法”</font></a><font style="vertical-align: inherit;">。
        </font></font><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"></font><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"></font><em class="replaceable"><code>col_name</code></em><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_values"><code class="literal">VALUES()</code></a><font style="vertical-align: inherit;"></font><code class="literal">ON DUPLICATE KEY UPDATE</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"></font><code class="literal">NULL</code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#insert-on-duplicate" title="13.2.5.2 INSERT ... ON DUPLICATE KEY UPDATE语法"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>INSERT INTO table (a,b,c) VALUES (1,2,3),(4,5,6)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b);</code></strong>
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="precision-math"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21精度数学</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-numbers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.1数值的类型</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-decimal-characteristics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.2 DECIMAL数据类型特征</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-expressions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.3表达式处理</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-rounding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.4舍入行为</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/functions.html#precision-math-examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.5精确数学例子</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528074148928"></a><a class="indexterm" name="idm140528074147856"></a><a class="indexterm" name="idm140528074146784"></a><a class="indexterm" name="idm140528074145712"></a><a class="indexterm" name="idm140528074144640"></a><a class="indexterm" name="idm140528074143568"></a><a class="indexterm" name="idm140528074142496"></a><a class="indexterm" name="idm140528074141008"></a><a class="indexterm" name="idm140528074139520"></a><a class="indexterm" name="idm140528074138448"></a><a class="indexterm" name="idm140528074137360"></a><a class="indexterm" name="idm140528074136288"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    MySQL提供了对精确数学的支持：数值处理可以得到非常准确的结果，并对无效值进行高度控制。</font><font style="vertical-align: inherit;">精确数学基于这两个特征：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        SQL模式控制服务器接受或拒绝无效数据的严格程度。
      </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        用于定点算术的MySQL库。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    这些功能对数字操作有一些含义，并提供对标准SQL的高度遵从性：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精确计算</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：对于精确值数字，计算不会引入浮点错误。</font><font style="vertical-align: inherit;">相反，使用精确的精度。</font><font style="vertical-align: inherit;">例如，MySQL会将数字视为</font></font><code class="literal">.0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        精确值而不是近似值，并将其加总10,000次会得出完全相同的结果
        </font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是仅
        </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> “ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接近</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1的值。
      </font></font></p></li><li class="listitem"><p>
        <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义明确的舍入行为</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：对于精确值数字，其结果
        </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于其参数，而不是环境因素，例如底层C库的工作方式。
      </font></font></p></li><li class="listitem"><p>
        <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平台独立性</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：在不同平台（如Windows和Unix）上，对精确数值的操作是相同的。
      </font></font></p></li><li class="listitem"><p>
        <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制无效值的处理</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：溢出和零除可检测，并可视为错误。</font><font style="vertical-align: inherit;">例如，可以将一个对于列来说太大的值视为错误，而不是将该值截断为位于该列的数据类型的范围内。</font><font style="vertical-align: inherit;">同样，您可以将除零作为错误，而不是作为产生结果的操作
        </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">选择采取哪种方法取决于服务器SQL模式的设置。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    以下讨论涵盖了精确数学如何工作的几个方面，包括与旧应用程序可能的不兼容问题。</font><font style="vertical-align: inherit;">最后，给出了一些示例来演示MySQL如何精确处理数字操作。</font><font style="vertical-align: inherit;">有关控制SQL模式的信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-numbers"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.1数值的类型</font></font></h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140528074116928"></a><a class="indexterm" name="idm140528074115840"></a><a class="indexterm" name="idm140528074114752"></a><a class="indexterm" name="idm140528074113264"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      精确值操作的精确数学范围包括精确值数据类型（整数和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型）和精确值数字文本。</font><font style="vertical-align: inherit;">近似值数据类型和数字文字被作为浮点数处理。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      精确值数字文字具有整数部分或小数部分，或两者兼有。</font><font style="vertical-align: inherit;">他们可能会被签名。</font><font style="vertical-align: inherit;">例如：</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">.2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">3.4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">-5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">-6.78</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">+9.10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      近似值数字文字以科学记数法以尾数和指数表示。</font><font style="vertical-align: inherit;">其中一个或两个部分都可以签名。</font><font style="vertical-align: inherit;">例如：</font></font><code class="literal">1.2E3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">1.2E-3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">-1.2E3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">-1.2E-3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两个看起来相似的数字可能会有所不同。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">2.34</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个精确值（定点）数字，而是</font></font><code class="literal">2.34E0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个近似值（浮点）数字。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型是一个定点类型和计算是精确的。</font><font style="vertical-align: inherit;">在MySQL中，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型有多个同义词：
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">NUMERIC</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DEC</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">FIXED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">整数类型也是精确值类型。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型是浮点类型，其计算是近似的。</font><font style="vertical-align: inherit;">在MySQL中，类型与同义
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">FLOAT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">DOUBLE PRECISION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#floating-point-types" title="11.2.3浮点类型（近似值） -  FLOAT，DOUBLE"><code class="literal">REAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-decimal-characteristics"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.2 DECIMAL数据类型特征</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节讨论
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型（及其同义词）的特征，特别涉及以下主题：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          最大位数
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          存储格式
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          存储要求
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          非标准的MySQL扩展到</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
 </font><font style="vertical-align: inherit;">的上限
          </font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的声明语法
       </font><font style="vertical-align: inherit;">是
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">参数值的范围如下所示：
</font></font><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最大位数（精度）。</font><font style="vertical-align: inherit;">它有1到65的范围。
        </font></font></p></li><li class="listitem"><p>
          <em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是小数点右侧的数字（比例）。</font><font style="vertical-align: inherit;">它的范围是0到30，并且不能大于</font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      最大值为65 </font></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示计算</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值精确到65位。</font><font style="vertical-align: inherit;">65位精度的限制也适用于精确值数字文字，因此这些文字的最大范围与以前不同。
    </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列的</font><font style="vertical-align: inherit;">
      值</font><font style="vertical-align: inherit;">使用二进制格式进行存储，将9位十进制数字打包为4个字节。</font><font style="vertical-align: inherit;">每个值的整数和小数部分的存储要求分别确定。</font><font style="vertical-align: inherit;">九位数的每个倍数需要4个字节，剩下的剩余数字需要4个字节的一部分。</font><font style="vertical-align: inherit;">剩余数字所需的存储空间由下表给出。
</font></font></p>
<div class="informaltable">
<table summary="The number of bytes required for remaining/leftover digits in DECIMAL values."><colgroup><col width="25%"><col width="25%"></colgroup><thead><tr>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">剩余数字</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字节数</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1-2</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3-4</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5-6</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7-9</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      例如，一</font></font><code class="literal">DECIMAL(18,9)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列在小数点的两边都有九个数字，所以整数部分和小数部分每个都需要4个字节。</font><font style="vertical-align: inherit;">一
       </font></font><code class="literal">DECIMAL(20,6)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列有十四个整数和六个小数位。</font><font style="vertical-align: inherit;">整数数字需要9个数字的4个字节和剩余5个数字的3个字节。</font><font style="vertical-align: inherit;">六个小数位需要3个字节。
    </font></font></p><p>
      <a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列不存储前导</font></font><code class="literal">+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符或</font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      字符或前导</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字。</font><font style="vertical-align: inherit;">如果你插入
       </font></font><code class="literal">+0003.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到一</font></font><code class="literal">DECIMAL(5,1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      列中，它被存储为</font></font><code class="literal">3.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于负数，</font></font><code class="literal">-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不存储</font><font style="vertical-align: inherit;">文字</font><font style="vertical-align: inherit;">字符。
    </font></font></p><p>
      <a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列不允许大于列定义所暗示范围的值。</font><font style="vertical-align: inherit;">例如，一</font></font><code class="literal">DECIMAL(3,0)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列支持一系列的</font></font><code class="literal">-999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font></font><code class="literal">999</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一
       </font><font style="vertical-align: inherit;">
      列允许最多</font><font style="vertical-align: inherit;">-
       </font><font style="vertical-align: inherit;">小数点左边的数字。
    </font></font><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><em class="replaceable"><code>D</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      SQL标准要求的精确度
       </font><font style="vertical-align: inherit;">
      是</font><span class="emphasis"><em><font style="vertical-align: inherit;">准确</font></em></span><font style="vertical-align: inherit;"> 
      数字。</font><font style="vertical-align: inherit;">因为
       </font><font style="vertical-align: inherit;">，该标准要求至少</font><font style="vertical-align: inherit;">数字</font><font style="vertical-align: inherit;">的精度，
       </font><font style="vertical-align: inherit;">但允许更多。</font><font style="vertical-align: inherit;">在MySQL中，
       </font><font style="vertical-align: inherit;">
      并且
       </font><font style="vertical-align: inherit;">
      是相同的，并且都有精确的
       </font><font style="vertical-align: inherit;">数字。
    </font></font><code class="literal">NUMERIC(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span> <em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font><code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><code class="literal">NUMERIC(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>M</code></em><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关</font></font><code class="literal">DECIMAL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的内部格式的完整说明
       </font><font style="vertical-align: inherit;">，请参阅</font></font><code class="filename">strings/decimal.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL源代码分发中</font><font style="vertical-align: inherit;">的文件
       </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该格式在</font></font><code class="literal">decimal2bin()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">中进行了解释（举例）
       </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-expressions"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.3表达式处理</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通过精确的数学运算，尽可能使用精确值数字。</font><font style="vertical-align: inherit;">例如，比较中的数字完全按照给定值使用而没有改变。</font><font style="vertical-align: inherit;">在严格的SQL模式下，对于</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有精确数据类型（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或整数）的列，如果数字在列范围内，则会插入一个具有精确值的数字。</font><font style="vertical-align: inherit;">检索时，值应该与插入的值相同。</font><font style="vertical-align: inherit;">（如果严格SQL模式未启用，</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则允许</font><font style="vertical-align: inherit;">截断</font><font style="vertical-align: inherit;">。）
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      处理数字表达式取决于表达式包含的值类型：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果存在任何近似值，则表达式是近似值，并使用浮点算术进行评估。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果不存在近似值，则表达式仅包含精确值。</font><font style="vertical-align: inherit;">如果任何确切值包含小数部分（小数点后的值），则表达式使用</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精确算术计算并具有65位数的精度。</font><font style="vertical-align: inherit;">术语
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确切</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受限于二进制可以表示的范围。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">1.0/3.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可以用十进制表示法近似表示
           </font></font><code class="literal">.333...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但不能用精确数字表示，所以</font></font><code class="literal">(1.0/3.0)*3.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能精确计算</font></font><code class="literal">1.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          否则，表达式只包含整数值。</font><font style="vertical-align: inherit;">该表达式是精确的，并且使用整数算术进行评估并且具有与</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">BIGINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（64位）</font><font style="vertical-align: inherit;">相同的精度
           </font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果数字表达式包含任何字符串，则它们将转换为双精度浮点值，并且表达式为近似值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      插入到数字列中受SQL模式的影响，SQL模式由</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      系统变量</font><font style="vertical-align: inherit;">控制</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）以下讨论提到严格模式（由
       </font><font style="vertical-align: inherit;">模式值</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_strict_all_tables"><code class="literal">STRICT_ALL_TABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_strict_trans_tables"><code class="literal">STRICT_TRANS_TABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式值选择）和</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要打开所有限制，您可以简单地使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_traditional"><code class="literal">TRADITIONAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式，其中包括严格模式值和
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode='TRADITIONAL';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果一个数字被插入到一个确切类型的列（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或整数）中，如果它在列的范围之内，它将以其确切值插入。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果小数部分的数字位数过多，则会发生舍入并产生警告。</font><font style="vertical-align: inherit;">舍入按照</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#precision-math-rounding" title="12.21.4舍入行为"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.21.4节“舍入行为”中的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述完成</font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果整数部分的数值太多，则数值太大，处理过程如下：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果严格模式未启用，则将该值截断为最接近的合法值并生成警告。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果启用了严格模式，则会发生溢出错误。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      未检测到下溢，所以下溢处理未​​定义。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为了将字符串插入到数字列中，如果字符串中包含非数字内容，则按如下方式处理从字符串到数字的转换：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          不以数字开头的字符串不能用作数字，并且会在严格模式下产生错误，否则会产生警告。</font><font style="vertical-align: inherit;">这包括空字符串。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          一个以数字开头的字符串可以被转换，但是后面的非数字部分被截断。</font><font style="vertical-align: inherit;">如果截断部分包含空格以外的任何内容，则会在严格模式下产生错误，否则会产生警告。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      默认情况下，除以零会产生结果
       </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且不会发出警告。</font><font style="vertical-align: inherit;">通过适当地设置SQL模式，可以限制零除。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用S​​QL模式的情况下，MySQL以不同的方式处理除法：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果严格模式未启用，则会发生警告。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果启用了严格模式，则禁止插入和更新除零，并发生错误。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      换句话说，涉及执行零除的表达式的插入和更新可被视为错误，但是这需要
       </font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除严格模式以外。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      假设我们有这样的说法：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INSERT INTO t SET i = 1/0;
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这是严格和</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      模式</font><font style="vertical-align: inherit;">组合的情况
       </font><font style="vertical-align: inherit;">。
</font></font></p>
<div class="informaltable">
<table summary="What happens for combinations of strict and ERROR_FOR_DIVISION_BY_ZERO modes."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
          <th scope="col"><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 值</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><code class="literal">''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （默认）</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有警告，没有错误; </font></font><code class="literal">i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">严格</font></font></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有警告，没有错误; </font></font><code class="literal">i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></td>
        </tr><tr>
          <td scope="row"><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告，没有错误; </font></font><code class="literal">i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为
             </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></td>
        </tr><tr>
          <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">严格，</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误情况; </font><font style="vertical-align: inherit;">没有行被插入。</font></font></td>
</tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-rounding"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.4舍入行为</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节讨论</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的</font><font style="vertical-align: inherit;">精确数学舍入
       </font><font style="vertical-align: inherit;">和插入到具有精确值类型（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和整数）的列中。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数取决于它的参数是精确还是近似值而有所不同：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于精确值数字，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">半舍起</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则：小数部分为.5或更大的值向上取整为下一个整数，如果为正，则向下取整到下一个整数。</font><font style="vertical-align: inherit;">（换句话说，它是从零开始舍去的。）如果小数部分小于.5，则数值向下取整为下一个整数，如果是负数，则向下取整。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于近似值数字，结果取决于C库。</font><font style="vertical-align: inherit;">在许多系统上，这意味着
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舍入到最近的偶数</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则：将任何小数部分的值舍入到最接近的偶数整数。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下示例显示了精确值和近似值的舍入方式不同：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(2.5), ROUND(25E-1);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ROUND（2.5）| </font><font style="vertical-align: inherit;">圆（25E-1）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + -------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于插入到</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数列或整数列中，目标是精确的数据类型，因此舍入使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从零开始</font></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舍入
       </font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">一半</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”，</font></span><font style="vertical-align: inherit;">而不管要插入的值是精确还是近似值：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (d DECIMAL(10,0));</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t VALUES(2.5),(2.5E0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询确定，2行受影响，2个警告（0.00秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：2重复：0警告：2</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT d FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">d |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-examples"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.21.5精确数学例子</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节提供了一些在MySQL中显示精确数学查询结果的示例。</font><font style="vertical-align: inherit;">这些示例演示了</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#precision-math-expressions" title="12.21.3表达式处理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.21.3节“表达式处理”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
       </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#precision-math-rounding" title="12.21.4舍入行为"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.21.4节“舍入行为”中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述的原理</font><font style="vertical-align: inherit;">。
    </font></font></p><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例1</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在可能的情况下，数字与它们的确切值一起使用：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT (.1 + .2) = .3;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">（.1 + .2）= .3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于浮点值，结果是不准确的：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT (.1E0 + .2E0) = .3E0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">（.1E0 + .2E0）= .3E0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      查看准确和近似值处理的差异的另一种方法是多次添加一个小数来求和。</font><font style="vertical-align: inherit;">考虑下面的存储过程，它将</font></font><code class="literal">.0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量</font><font style="vertical-align: inherit;">添加
       </font><font style="vertical-align: inherit;">到1,000次。
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE PROCEDURE p（）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开始</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  DECLARE INT DEFAULT 0;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  DECLARE d DECIMAL（10,4）DEFAULT 0;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  DECLARE f FLOAT DEFAULT 0;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  而我&lt;10000 DO</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    SET d = d + .0001;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    SET f = f + .0001E0;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    SET i = i + 1;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  END WHILE;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  SELECT d，f;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结束;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      两者</font></font><code class="literal">d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      逻辑上</font><font style="vertical-align: inherit;">的总和</font><font style="vertical-align: inherit;">应该是1，但只有在十进制计算中才是正确的。</font><font style="vertical-align: inherit;">浮点计算引入了小错误：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ -------- + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">d | </font><font style="vertical-align: inherit;">f |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1.0000 | </font><font style="vertical-align: inherit;">0.99999999999991 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------------ +</font></font><font></font>
</pre><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例2</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">乘法是通过标准SQL所需的比例来执行的。</font><font style="vertical-align: inherit;">也就是说，对于两个数字</font></font><em class="replaceable"><code>X1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并
      </font></font><em class="replaceable"><code>X2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有规模
      </font></font><em class="replaceable"><code>S1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em class="replaceable"><code>S2</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果的比例为</font><font style="vertical-align: inherit;">：
    </font></font><code class="literal"><em class="replaceable"><code>S1</code></em>
      + <em class="replaceable"><code>S2</code></em></code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT .01 * .01;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">.01 * .01 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0.0001 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- +</font></font><font></font>
</pre><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例3</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">精确值数字的舍入行为是明确定义的：
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      舍入行为（例如，使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_round"><code class="literal">ROUND()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数）独立于底层C库的实现，这意味着从平台到平台的结果是一致的。
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          精确值列（</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和整数）和精确值数字的</font><font style="vertical-align: inherit;">舍入</font><font style="vertical-align: inherit;">使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">距离零的</font></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">舍入半舍弃</font><span class="quote"><font style="vertical-align: inherit;">”</font></span><font style="vertical-align: inherit;">规则。</font><font style="vertical-align: inherit;">小数部分为.5或更大的值从零圆整到最接近的整数，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(2.5), ROUND(-2.5);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ROUND（2.5）| </font><font style="vertical-align: inherit;">圆（-2.5）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + ------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">-3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ + ------------- +</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          四舍五入为浮点值使用C库，在许多系统上使用</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">round to nearest even</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          规则。</font><font style="vertical-align: inherit;">这些系统上任何小数部分的值都舍入到最接近的偶数整数：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT ROUND(2.5E0), ROUND(-2.5E0);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">ROUND（2.5E0）| </font><font style="vertical-align: inherit;">圆（-2.5E0）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">-2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- + --------------- +</font></font><font></font>
</pre></li></ul>
</div>
<p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例4</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在严格模式下，插入列超出范围的值会导致错误，而不是截断为合法值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当MySQL没有以严格模式运行时，会截断为合法值：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode='';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t SET i = 128;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响，1警告（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">127 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      但是，如果严格模式有效，则会发生错误：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode='STRICT_ALL_TABLES';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t SET i = 128;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1264（22003）：在行1处为列“i”调整超出范围值</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空集（0.00秒）</font></font><font></font>
</pre><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例5</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：在严格模式和</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      设置下，除以零会导致错误，而不是结果
      </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在非严格模式下，除以零的结果是
       </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode='';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.01秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t SET i = 1 / 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">我|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.03秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      但是，如果适当的SQL模式有效，则除以零是错误的：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode='STRICT_ALL_TABLES,ERROR_FOR_DIVISION_BY_ZERO';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>INSERT INTO t SET i = 1 / 0;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1365（22012）：除以0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT i FROM t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空集（0.01秒）</font></font><font></font>
</pre><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例6</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">精确值文字被评估为精确值。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      近似值文字使用浮点进行评估，但精确值文字的处理方式如下
       </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#fixed-point-types" title="11.2.2定点类型（准确值） -  DECIMAL，NUMERIC"><code class="literal">DECIMAL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE TABLE t SELECT 2.5 AS a, 25E-1 AS b;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，1行受影响（0.01秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
记录：1重复：0警告：0</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>DESCRIBE t;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ + ------ + ----- + ---- ----- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">字段| </font><font style="vertical-align: inherit;">类型| </font><font style="vertical-align: inherit;">空| </font><font style="vertical-align: inherit;">Key | </font><font style="vertical-align: inherit;">默认| </font><font style="vertical-align: inherit;">额外|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ + ------ + ----- + ---- ----- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">a | </font><font style="vertical-align: inherit;">十进制（2,1）无符号| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">0.0 | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">b | </font><font style="vertical-align: inherit;">双| </font><font style="vertical-align: inherit;">NO | </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ + ------ + ----- + ---- ----- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置2行（0.01秒）</font></font><font></font>
</pre><p>
      <span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子7</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果聚合函数的参数是一个确切的数字类型，那么结果也是一个确切的数字类型，其比例至少是参数。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      考虑这些陈述：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>CREATE TABLE t (i INT, d DECIMAL, f FLOAT);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>INSERT INTO t VALUES(1,1,1);</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>CREATE TABLE y SELECT AVG(i), AVG(d), AVG(f) FROM t;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      结果是只有浮点参数的一倍。</font><font style="vertical-align: inherit;">对于确切的类型参数，结果也是一个确切的类型：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>DESCRIBE y;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + ------ + ------ + --------- +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">字段| </font><font style="vertical-align: inherit;">类型| </font><font style="vertical-align: inherit;">空| </font><font style="vertical-align: inherit;">Key | </font><font style="vertical-align: inherit;">默认| </font><font style="vertical-align: inherit;">额外|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + ------ + ------ + --------- +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">AVG（i）| </font><font style="vertical-align: inherit;">十进制（14,4）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">AVG（d）| </font><font style="vertical-align: inherit;">十进制（14,4）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">AVG（f）| </font><font style="vertical-align: inherit;">双| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + ------ + ------ + --------- +  - ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      结果是只有浮点参数的一倍。</font><font style="vertical-align: inherit;">对于确切的类型参数，结果也是一个确切的类型。
</font></font></p>
</div>

</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tbody><tr>
<td width="40%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/data-types.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a></td>
<td width="20%" align="center"><a accesskey="u" href="/mysql-5.7-google-zh/functions.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向上</font></font></a></td>
<td width="40%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/sql-syntax.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11章数据类型</font></font></td>
<td width="20%" align="center"><a accesskey="h" href="/mysql-5.7-google-zh/index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">家</font></font></a></td>
<td width="40%" align="right" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13章SQL语句语法</font></font></td>
</tr>
</tbody></table>
</div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./images/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>