<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>第3章教程</title>
<link rel="stylesheet" href="./images/mvl.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2">
<link rel="start" href="/mysql-5.7-google-zh/index.html" title="{书名}">
<link rel="up" href="/mysql-5.7-google-zh/tutorial.html" title="">
<link rel="prev" href="/mysql-5.7-google-zh/installing.html" title="第2章安装和升级MySQL">
<link rel="next" href="/mysql-5.7-google-zh/programs.html" title="第4章MySQL程序">
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./images/translateelement.css"></head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tbody><tr>
<th colspan="3" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3章教程</font></font></th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/installing.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a>&nbsp;</td>
<th width="60%" align="center"></th>
<td width="20%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/programs.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
</tbody></table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="tutorial"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3章教程</font></font></h1>

</div>

</div>

</div>
<div class="toc">
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></b></p><dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#connecting-disconnecting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1连接到服务器并断开连接</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#entering-queries"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2输入查询</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#database-use"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3创建和使用数据库</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#creating-database"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.1创建和选择数据库</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#creating-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.2创建表格</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#loading-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.3将数据加载到表中</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#retrieving-data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4从表中检索信息</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#getting-information"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4获取有关数据库和表格的信息</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#batch-mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.5在批处理模式下使用mysql</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6常见查询的例子</font></font></a></span></dt><dd><dl><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-column"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.1列的最大值</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.2保持某列的最大值的行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-column-group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.3每个组的最大列数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-column-group-row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.4列保持某一列的最大分组数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-user-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.5使用用户定义的变量</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-foreign-keys"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.6使用外键</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#searching-on-two-keys"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.7在两个键上搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#calculating-days"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.8每天计算访问次数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-auto-increment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.9使用AUTO_INCREMENT</font></font></a></span></dt></dl></dd><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#apache"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.7在Apache中使用MySQL</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528180251984"></a><a class="indexterm" name="idm140528180250912"></a><a class="indexterm" name="idm140528180249424"></a><a class="indexterm" name="idm140528180247936"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本章通过展示如何使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端程序来创建和使用简单的数据库，</font><font style="vertical-align: inherit;">提供了MySQL的教程介绍</font><font style="vertical-align: inherit;">。</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（有时称为</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">终端监视器</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
     </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">监视器</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是一种交互式程序，可让您连接到MySQL服务器，运行查询并查看结果。
    </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以用于批处理模式：事先将查询放入文件中，然后告诉
     </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行文件的内容。</font><font style="vertical-align: inherit;">这里介绍</font><font style="vertical-align: inherit;">了使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql的</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两种方式</font><font style="vertical-align: inherit;">。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    要查看由</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供的选项列表，请</font><font style="vertical-align: inherit;">使用以下</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysql_help"><code class="option">--help</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">调用它</font><font style="vertical-align: inherit;">：
  </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysql --help</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本章假设</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装在您的机器上，以及一个MySQL服务器是提供给你可以连接。</font><font style="vertical-align: inherit;">如果不是这样，请联系您的MySQL管理员。</font><font style="vertical-align: inherit;">（如果
     </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是管理员，您需要查阅本手册的相关部分，例如
     </font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html" title="第5章MySQL服务器管理"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5章</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL服务器管理</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    本章介绍了设置和使用数据库的整个过程。</font><font style="vertical-align: inherit;">如果您只想访问现有数据库，则可能需要跳过描述如何创建数据库及其包含的表的章节。
  </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    因为这一章本质上是教程，所以必须省略许多细节。</font><font style="vertical-align: inherit;">有关此处所述主题的更多信息，请参阅手册的相关部分。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="connecting-disconnecting"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1连接到服务器并断开连接</font></font></h2>
</div>
</div>
</div>
<a class="indexterm" name="idm140528180228688"></a><a class="indexterm" name="idm140528180227200"></a><a class="indexterm" name="idm140528180225712"></a><a class="indexterm" name="idm140528180224224"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要连接到服务器，通常需要在调用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时提供一个MySQL用户名</font><font style="vertical-align: inherit;">，最有可能的是密码。</font><font style="vertical-align: inherit;">如果服务器在登录的计算机以外的计算机上运行，​​则还需要指定主机名。</font><font style="vertical-align: inherit;">请联系您的管理员以了解您应该使用哪些连接参数进行连接（即，要使用哪个主机，用户名和密码）。</font><font style="vertical-align: inherit;">一旦你知道了正确的参数，你应该能够像这样连接：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell&gt; </font><font style="vertical-align: inherit;">
输入密码：</font></font><strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>********</code></strong>
</pre><p>
      <em class="replaceable"><code>host</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并
       </font></font><em class="replaceable"><code>user</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表您的MySQL服务器正在运行的主机名和您的MySQL帐户的用户名。</font><font style="vertical-align: inherit;">替换适当的值进行设置。</font><font style="vertical-align: inherit;">该
       </font></font><code class="literal">********</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表你的密码; </font><font style="vertical-align: inherit;">当</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示</font></font><code class="literal">Enter
      password:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示</font><font style="vertical-align: inherit;">时输入它</font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果有效，您应该看到一些介绍性信息，然后</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell&gt; </font><font style="vertical-align: inherit;">
输入密码：</font></font><strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>********</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
欢迎来到MySQL监视器。</font><font style="vertical-align: inherit;">命令结束于; </font><font style="vertical-align: inherit;">或\ g。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
你的MySQL连接ID是25338到服务器版本：5.7.23标准</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
键入'help' </font><font style="vertical-align: inherit;">或'\ h'寻求帮助。</font><font style="vertical-align: inherit;">输入'\ c'清除缓冲区。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示告诉你
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">准备为你输入SQL语句。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您在运行MySQL的同一台计算机上登录，则可以省略主机，并简单地使用以下命令：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysql -u <em class="replaceable"><code>user</code></em> -p</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果在尝试登录时收到错误消息，如
       </font></font><span class="errortext"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ERROR 2002（HY000）：无法通过套接字'/tmp/mysql.sock'连接到本地MySQL服务器（2）</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这意味着MySQL服务器守护进程（Unix）或服务（Windows）未运行。</font><font style="vertical-align: inherit;">请咨询管理员或参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/installing.html" title="第2章安装和升级MySQL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2章“ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装和升级</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于您的操作系统的</font><a class="xref" href="/mysql-5.7-google-zh/installing.html" title="第2章安装和升级MySQL"><i><font style="vertical-align: inherit;">MySQL</font></i></a><font style="vertical-align: inherit;"> ”一节
       </font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关尝试登录时经常遇到的其他问题的帮助，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#common-errors" title="B.5.2使用MySQL程序时的常见错误"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.5.2节“使用MySQL程序时的常见错误”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一些MySQL安装允许用户作为匿名（未命名）用户连接到在本地主机上运行的服务器。</font><font style="vertical-align: inherit;">如果您的计算机出现这种情况，您应该可以通过调用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不使用任何选项</font><font style="vertical-align: inherit;">来连接到该服务器</font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysql</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      连接成功后，您可以通过</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">提示符</font><font style="vertical-align: inherit;">处</font><font style="vertical-align: inherit;">键入</font></font><code class="literal">QUIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或</font></font><code class="literal">\q</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">来断开连接</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>QUIT</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再见</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在Unix上，您也可以通过按Control + D来断开连接。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下各节中的大多数示例假定您已连接到服务器。</font><font style="vertical-align: inherit;">他们通过</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示</font><font style="vertical-align: inherit;">表明了这一点
       </font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="entering-queries"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2输入查询</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528180189392"></a><a class="indexterm" name="idm140528180187904"></a><a class="indexterm" name="idm140528180186416"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      确保您已连接到服务器，如前一节所述。</font><font style="vertical-align: inherit;">这样做本身并不会选择任何数据库来处理，但这没关系。</font><font style="vertical-align: inherit;">在这一点上，找出一些关于如何发出查询的问题比创建表格，将数据加载到表格以及从中检索数据更重要。</font><font style="vertical-align: inherit;">本节介绍输入查询的基本原则，使用几个查询可以尝试熟悉</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何</font><font style="vertical-align: inherit;">
      工作。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这是一个简单的查询，要求服务器告诉你它的版本号和当前日期。</font><font style="vertical-align: inherit;">按照</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示输入</font><font style="vertical-align: inherit;">，如下所示</font><font style="vertical-align: inherit;">，然后按Enter键：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT VERSION(), CURRENT_DATE;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">VERSION（）| </font><font style="vertical-align: inherit;">CURRENT_DATE |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5.7.1-m4-log | </font><font style="vertical-align: inherit;">2012-12-25 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------------- -------------- + +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.01秒）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这个查询说明了有关</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql的</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几件事情
       </font><font style="vertical-align: inherit;">：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          查询通常由一个SQL语句和一个分号组成。</font><font style="vertical-align: inherit;">（有些例外可以省略分号</font></font><code class="literal">QUIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，前面提到的是其中的一个，稍后我们会找到其他的。）
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当您发出查询时，</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会将其发送到服务器以供执行并显示结果，然后打印另一个</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示以指示它已准备好进行其他查询。
        </font></font></p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以表格形式（行和列）显示查询输出。</font><font style="vertical-align: inherit;">第一行包含列的标签。</font><font style="vertical-align: inherit;">以下行是查询结果。</font><font style="vertical-align: inherit;">通常，列标签是您从数据库表中获取的列的名称。</font><font style="vertical-align: inherit;">如果您正在检索表达式的值而不是表格列（如上例所示），</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mysql会</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用表达式本身标记列。
        </font></font></p></li><li class="listitem"><p>
          <a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql会</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示返回的行数和查询执行的时间，这会让您大致了解服务器的性能。</font><font style="vertical-align: inherit;">这些值是不精确的，因为它们代表挂钟时间（而不是CPU或机器时间），并且因为它们受到服务器负载和网络延迟等因素的影响。</font><font style="vertical-align: inherit;">（为了简洁起见，</font><font style="vertical-align: inherit;">
          本章其余示例中有时不会显示</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行中</font></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">行</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">）。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      关键字可以输入任何信箱。</font><font style="vertical-align: inherit;">以下查询是等效的：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT VERSION(), CURRENT_DATE;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt; </font></font><strong class="userinput"><code>select version(), current_date;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SeLeCt vErSiOn(), current_DATE;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这是另一个查询。</font><font style="vertical-align: inherit;">它演示了你可以使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为一个简单的计算器：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT SIN(PI()/4), (4+1)*5;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">SIN（PI（）/ 4）| </font><font style="vertical-align: inherit;">（4 + 1）* 5 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0.70710678118655 | </font><font style="vertical-align: inherit;">25 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.02秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      迄今为止显示的查询是相对较短的单行语句。</font><font style="vertical-align: inherit;">你甚至可以在一行中输入多个语句。</font><font style="vertical-align: inherit;">只需用分号结尾：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT VERSION(); SELECT NOW();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">VERSION（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5.7.10-ndb-7.5.1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NOW（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2016-01-29 18:02:55 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      查询不需要在一行中全部提供，因此需要多行的冗长查询不成问题。
      </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过查找终止分号来确定语句的结束位置，而不是查找输入行的结尾。</font><font style="vertical-align: inherit;">（换句话说，</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      接受自由格式的输入：它收集输入行，但直到看到分号时才执行它们。）
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这是一个简单的多行声明：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>USER()</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>CURRENT_DATE;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">USER（）| </font><font style="vertical-align: inherit;">CURRENT_DATE |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">jon @ localhost | </font><font style="vertical-align: inherit;">2010-08-06 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- + -------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在这个例子中，请注意提示符从
       </font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对</font></font><code class="literal">-&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您输入一个多行查询的第一行后。</font><font style="vertical-align: inherit;">这就是</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何
       </font><font style="vertical-align: inherit;">表示它尚未看到完整的声明并正在等待其余部分。</font><font style="vertical-align: inherit;">提示是你的朋友，因为它提供了有价值的反馈。</font><font style="vertical-align: inherit;">如果你使用这个反馈，你总是可以知道</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      正在等待</font><font style="vertical-align: inherit;">什么</font><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您决定不想执行正在输入的查询，请键入</font></font><code class="literal">\c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下</font><font style="vertical-align: inherit;">内容以取消它
       </font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>USER()</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>\c</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在这里，请注意提示。</font><font style="vertical-align: inherit;">它会</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在您键入之后</font><font style="vertical-align: inherit;">切换回来
       </font></font><code class="literal">\c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，提供反馈以指示</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已准备好进行新的查询。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      下表显示了您可能会看到的每个提示，并总结了它们对于</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所处状态的含义
       </font><font style="vertical-align: inherit;">。
</font></font></p><a class="indexterm" name="idm140528180135008"></a>
<div class="informaltable">
<table summary="MySQL prompts and the meaning of each prompt."><colgroup><col width="10%"><col width="80%"></colgroup><thead><tr>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示</font></font></th>
          <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
        </tr></thead><tbody><tr>
          <td scope="row"><code class="literal">mysql&gt;</code></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">准备好新的查询</font></font></td>
        </tr><tr>
          <td scope="row"><code class="literal">-&gt;</code></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待多行查询的下一行</font></font></td>
        </tr><tr>
          <td scope="row"><code class="literal">'&gt;</code></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待下一行，等待完成以单引号（</font></font><code class="literal">'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">开头的字符串</font></font></td>
        </tr><tr>
          <td scope="row"><code class="literal">"&gt;</code></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待下一行，等待以双引号开头的字符串完成（</font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
        </tr><tr>
          <td scope="row"><code class="literal">`&gt;</code></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待下一行，等待完成以反引号开头的标识符（</font></font><code class="literal">`</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></td>
        </tr><tr>
          <td scope="row"><code class="literal">/*&gt;</code></td>
          <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待下一行，等待完成以开始的评论 </font></font><code class="literal">/*</code></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当您打算在单行上发出查询时，多行语句通常会意外发生，但忘记了终止分号。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      等待更多的输入：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT USER()</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果这发生在你身上（你认为你已经输入了一个声明，但唯一的回应是</font></font><code class="literal">-&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示），很可能</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在等待分号。</font><font style="vertical-align: inherit;">如果你没有注意到提示告诉你什么，你可能会在那里呆一会儿，然后才意识到你需要做什么。</font><font style="vertical-align: inherit;">输入一个分号来完成语句，然后</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      执行它：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT USER()</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">USER（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">jon @ localhost |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在</font></font><code class="literal">'&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串集合（说，MySQL是在等待一个字符串完成的另一种方式）中的提示信息出现。</font><font style="vertical-align: inherit;">在MySQL中，你可以编写包含字符</font></font><code class="literal">'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符的</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">（例如
       </font></font><code class="literal">'hello'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">"goodbye"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），并且
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许你输入跨越多行的字符串。</font><font style="vertical-align: inherit;">当您看到</font></font><code class="literal">'&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
       </font></font><code class="literal">"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示时，这意味着您输入的行中包含以一个</font></font><code class="literal">'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      或</font></font><code class="literal">"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引号字符</font><font style="vertical-align: inherit;">开头的字符串</font><font style="vertical-align: inherit;">，但尚未输入用于终止该字符串的匹配引号。</font><font style="vertical-align: inherit;">这通常表示您无意中遗漏了一个引号字符。</font><font style="vertical-align: inherit;">例如：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM my_table WHERE name = 'Smith AND age &lt; 30;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    “&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您输入此</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，然后按</font></font><span class="keycap"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enter</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并等待结果，则不会发生任何情况。</font><font style="vertical-align: inherit;">不要想知道为什么这个查询需要这么长时间，注意</font></font><code class="literal">'&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示</font><font style="vertical-align: inherit;">提供的线索</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它告诉你，</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">希望看到未终止的字符串的其余部分。</font><font style="vertical-align: inherit;">（您是否在语句中看到错误？该字符串</font></font><code class="literal">'Smith</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺少第二个单引号。）
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在这一点上，你做什么？</font><font style="vertical-align: inherit;">最简单的事情就是取消查询。</font><font style="vertical-align: inherit;">然而，你不能只输入</font></font><code class="literal">\c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这种情况，因为</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将它解释为它正在收集的字符串的一部分。</font><font style="vertical-align: inherit;">相反，输入结束引号字符（所以</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知道你已经完成了字符串），然后键入</font></font><code class="literal">\c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT * FROM my_table WHERE name = 'Smith AND age &lt; 30;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '&gt;</font></font><strong class="userinput"><code>'\c</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      提示变回</font></font><code class="literal">mysql&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，表示</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已准备好进行新的查询。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><code class="literal">`&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示类似于
       </font></font><code class="literal">'&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示，但表示你已经开始但尚未完成反引号引用的标识符。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      重要的是要知道什么是重要的</font></font><code class="literal">'&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">`&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示表示，因为如果你错误地输入一个未终止的字符串，你输入的任何进一步线似乎被忽视
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -包括含线
       </font></font><code class="literal">QUIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这可能会令人困惑，特别是如果您不知道在取消当前查询之前需要提供终止报价。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="database-use"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3创建和使用数据库</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#creating-database"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.1创建和选择数据库</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#creating-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.2创建表格</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#loading-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.3将数据加载到表中</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#retrieving-data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4从表中检索信息</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528180063760"></a><a class="indexterm" name="idm140528180062304"></a><a class="indexterm" name="idm140528180060816"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一旦你知道如何输入SQL语句，你就可以访问数据库了。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      假设你家里有几只宠物（你的动物园），并且你想跟踪各种关于它们的信息。</font><font style="vertical-align: inherit;">您可以通过创建表来保存数据并加载所需的信息。</font><font style="vertical-align: inherit;">然后，您可以通过从表格中检索数据来回答关于动物的各种问题。</font><font style="vertical-align: inherit;">本节介绍如何执行以下操作：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          创建一个数据库
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          创建一个表
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          将数据加载到表格中
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以各种方式从表中检索数据
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用多个表
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      动物园数据库很简单（故意），但想到可能使用类似数据库的现实情况并不难。</font><font style="vertical-align: inherit;">例如，像这样的数据库可以被农民用来跟踪牲畜，或由兽医来跟踪病人记录。</font><font style="vertical-align: inherit;">包含以下部分中使用的一些查询和示例数据的动画分发可以从MySQL网站获得。</font><font style="vertical-align: inherit;">它可以在</font><a class="ulink" href="http://dev.mysql.com/doc/" target="_top"><font style="vertical-align: inherit;">http://dev.mysql.com/doc/</font></a><font style="vertical-align: inherit;">以压缩</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tar</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件和Zip格式</font></font><a class="ulink" href="http://dev.mysql.com/doc/" target="_top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show" title="13.7.5 SHOW语法"><code class="literal">SHOW</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句查找服务器上当前存在的数据库：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW DATABASES;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">数据库|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">mysql |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">测试|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">tmp |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      该</font></font><code class="literal">mysql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库描述了用户访问权限。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库通常可作为用户工作区尝试的事情了。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      声明中显示的数据库列表在您的计算机上可能会有所不同; </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-databases" title="13.7.5.14 SHOW DATABASES语法"><code class="literal">SHOW DATABASES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您没有权限，则不显示您没有权限的数据库</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-databases" title="13.7.5.14 SHOW DATABASES语法"><code class="literal">SHOW DATABASES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-databases" title="13.7.5.14 SHOW DATABASES语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.7.5.14节“SHOW DATABASES语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果</font></font><code class="literal">test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库存在，请尝试访问它：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>USE test</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数据库改变</font></font><font></font>
</pre><p>
      <a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#use" title="13.8.4 USE语法"><code class="literal">USE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，就像</font></font><code class="literal">QUIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不需要分号。</font><font style="vertical-align: inherit;">（如果你喜欢，你可以用分号来终止这样的语句;这没有害处。）这个
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#use" title="13.8.4 USE语法"><code class="literal">USE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句也是另一种特殊的方式：它必须在一行中给出。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      对于后面</font></font><code class="literal">test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的示例，</font><font style="vertical-align: inherit;">您可以使用</font><font style="vertical-align: inherit;">数据库（如果您有权访问它），但您在该数据库中创建的任何内容都可以被其他访问该数据库的人删除。</font><font style="vertical-align: inherit;">出于这个原因，你应该问你的MySQL管理员是否有权使用你自己的数据库。</font><font style="vertical-align: inherit;">假设你想打电话给你</font></font><code class="literal">menagerie</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">管理员需要执行如下所示的语句：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>GRANT ALL ON menagerie.* TO 'your_mysql_name'@'your_client_host';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这里</font></font><code class="literal">your_mysql_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是分配给你的MySQL用户名和</font></font><code class="literal">your_client_host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为您连接到服务器的主机。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="creating-database"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.1创建和选择数据库</font></font></h3>
</div>
</div>
</div>
<a class="indexterm" name="idm140528180028464"></a><a class="indexterm" name="idm140528180027008"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果管理员在设置权限时为您创建数据库，则可以开始使用它。</font><font style="vertical-align: inherit;">否则，你需要自己创建它：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>CREATE DATABASE menagerie;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在Unix下，数据库名称是区分大小写的（不像SQL关键字），所以你必须总是指到你的数据库
         </font></font><code class="literal">menagerie</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是
         </font></font><code class="literal">Menagerie</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">MENAGERIE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或一些其他变种。</font><font style="vertical-align: inherit;">表名也是如此。</font><font style="vertical-align: inherit;">（在Windows下，这个限制不适用，尽管你必须在整个给定的查询中使用相同的字母表来引用数据库和表。但是，由于各种原因，推荐的最佳做法总是使用当使用相同的字母表时该数据库已创建。）
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您</font><font style="vertical-align: inherit;">在尝试创建数据库时</font><font style="vertical-align: inherit;">遇到错误（如</font></font><span class="errortext"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ERROR 1044（42000）：拒绝用户'micah'@'localhost'到数据库'menagerie'）</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这意味着您的用户帐户没有必要的权限来执行所以。</font><font style="vertical-align: inherit;">与管理员讨论，或参阅</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#privilege-system" title="6.2 MySQL访问权限系统"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.2节“MySQL访问权限系统”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        创建数据库不会选择使用它; </font><font style="vertical-align: inherit;">你必须明确地做到这一点。</font><font style="vertical-align: inherit;">要制作</font></font><code class="literal">menagerie</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前数据库，请使用以下语句：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>USE menagerie</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数据库改变</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您的数据库只需要创建一次，但您必须在每次开始</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        会话</font><font style="vertical-align: inherit;">时选择它</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以通过发布</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#use" title="13.8.4 USE语法"><code class="literal">USE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如示例中所示</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">来完成此操作
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">或者，您可以在调用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时在命令行上选择数据库</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">只需在您可能需要提供的任何连接参数之后指定其名称即可。</font><font style="vertical-align: inherit;">例如：
      </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell&gt; </font><font style="vertical-align: inherit;">
输入密码：</font></font><strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p menagerie</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>********</code></strong>
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要
</font></font></div>
<p>
          <code class="literal">menagerie</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在刚刚显示的命令中
           </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你的密码。</font><font style="vertical-align: inherit;">如果您希望在</font></font><code class="literal">-p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">后在命令行上提供密码，则
           </font><font style="vertical-align: inherit;">必须在没有中间空间的情况下（例如
           </font><font style="vertical-align: inherit;">，不是</font><font style="vertical-align: inherit;">）来执行此操作。</font><font style="vertical-align: inherit;">但是，建议不要将密码放在命令行上，因为这样会使其被登录到计算机上的其他用户窥探。
</font></font><code class="literal">-p<em class="replaceable"><code>password</code></em></code><font style="vertical-align: inherit;"></font><code class="literal">-p <em class="replaceable"><code>password</code></em></code><font style="vertical-align: inherit;"></font></p>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您随时可以看到当前选择使用哪个数据库</font><font style="vertical-align: inherit;">。
</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a><font style="vertical-align: inherit;"></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="creating-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.2创建表格</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179997536"></a><a class="indexterm" name="idm140528179996048"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        创建数据库是非常简单的部分，但在这一点上它是空的，因为</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-tables" title="13.7.5.37 SHOW TABLES语法"><code class="literal">SHOW TABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">告诉你：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW TABLES;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空集（0.00秒）</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        更难的部分是决定数据库的结构应该是什么：你需要哪些表以及每个表中应该包含哪些列。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        你想要一个包含每个宠物记录的表格。</font><font style="vertical-align: inherit;">这可以称为</font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，它应该至少包含每个动物的名字。</font><font style="vertical-align: inherit;">由于名称本身并不十分有趣，因此表格中应包含其他信息。</font><font style="vertical-align: inherit;">例如，如果你家中有多个人养宠物，你可能想列出每个动物的主人。</font><font style="vertical-align: inherit;">您可能还需要记录一些基本的描述性信息，如物种和性别。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        年龄怎么样？</font><font style="vertical-align: inherit;">这可能是有趣的，但将其存储在数据库中并不是一件好事。</font><font style="vertical-align: inherit;">随着时间的推移，年龄会发生变化，这意味着您必须经常更新您的记录。</font><font style="vertical-align: inherit;">相反，最好存储一个固定值，比如出生日期。</font><font style="vertical-align: inherit;">然后，无论何时您需要年龄，您都可以将其计算为当前日期和出生日期之间的差异。</font><font style="vertical-align: inherit;">MySQL提供了进行日期算术的功能，所以这并不困难。</font><font style="vertical-align: inherit;">存储出生日期而不是年龄也有其他优点：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            您可以使用数据库执行任务，例如为即将到来的宠物生日生成提醒。</font><font style="vertical-align: inherit;">（如果您认为此类查询有些愚蠢，请注意，您可能会在业务数据库的上下文中询问相同的问题，以确定您需要在当前的一周或一个月内发送生日问候的客户，因为电脑辅助的个人接触。）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            您可以计算与当前日期以外的日期相关的年龄。</font><font style="vertical-align: inherit;">例如，如果您将死亡日期存储在数据库中，则可以轻松计算宠物死亡时的年龄。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        你也许可以考虑其他类型的信息，这些信息在</font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中</font><font style="vertical-align: inherit;">很有用</font><font style="vertical-align: inherit;">，但到目前为止已确定的信息是足够的：姓名，所有者，物种，性别，出生和死亡。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句来指定表格的布局：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>CREATE TABLE pet (name VARCHAR(20), owner VARCHAR(20),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>species VARCHAR(20), sex CHAR(1), birth DATE, death DATE);</code></strong>
</pre><p>
        <a class="link" href="/mysql-5.7-google-zh/data-types.html#char" title="11.4.1 CHAR和VARCHAR类型"><code class="literal">VARCHAR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于</font><font style="vertical-align: inherit;">，和
         </font><font style="vertical-align: inherit;">列来说</font><font style="vertical-align: inherit;">是个不错的选择
         </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">因为列值的长度是不同的。</font><font style="vertical-align: inherit;">那些列定义中的长度不一定全部相同，并且不一定是</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通常，您可以选择从任何长度</font><font style="vertical-align: inherit;">到
         </font><font style="vertical-align: inherit;">，无论似乎是最合理的给你。</font><font style="vertical-align: inherit;">如果你做出了糟糕的选择，事后证明你需要更长的字段，MySQL提供了一个</font><font style="vertical-align: inherit;">声明。
      </font></font><code class="literal">owner</code><font style="vertical-align: inherit;"></font><code class="literal">species</code><font style="vertical-align: inherit;"></font><code class="literal">20</code><font style="vertical-align: inherit;"></font><code class="literal">1</code><font style="vertical-align: inherit;"></font><code class="literal">65535</code><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER
        TABLE</code></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以选择几种类型的值来表示动物记录中的性别，例如</font></font><code class="literal">'m'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">'f'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者可能</font></font><code class="literal">'male'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><code class="literal">'female'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用单个字符</font></font><code class="literal">'m'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">最简单</font></font><code class="literal">'f'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用的</font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#datetime" title="11.3.1 DATE，DATETIME和TIMESTAMP类型"><code class="literal">DATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为数据类型</font></font><code class="literal">birth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">death</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列是一个相当明智的选择。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一旦你创建了一个表，</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-tables" title="13.7.5.37 SHOW TABLES语法"><code class="literal">SHOW
        TABLES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该产生一些输出：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW TABLES;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">menagerie中的表格|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">宠物|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要验证您的表是否按照您的预期创建，请使用以下</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#describe" title="13.8.1 DESCRIBE语法"><code class="literal">DESCRIBE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>DESCRIBE pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------------- + ------ + ------ + --------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">字段| </font><font style="vertical-align: inherit;">类型| </font><font style="vertical-align: inherit;">空| </font><font style="vertical-align: inherit;">Key | </font><font style="vertical-align: inherit;">默认| </font><font style="vertical-align: inherit;">额外|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------------- + ------ + ------ + --------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">varchar（20）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">varchar（20）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">varchar（20）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">char（1）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">日期| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">死亡| </font><font style="vertical-align: inherit;">日期| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------------- + ------ + ------ + --------- +  - ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#describe" title="13.8.1 DESCRIBE语法"><code class="literal">DESCRIBE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果您忘记了表格中列的名称或它们具有的类型，</font><font style="vertical-align: inherit;">
        您可以随时使用</font><font style="vertical-align: inherit;">它。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关MySQL数据类型的更多信息，请参阅
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html" title="第11章数据类型"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11章</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="loading-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.3将数据加载到表中</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179952752"></a><a class="indexterm" name="idm140528179951296"></a><a class="indexterm" name="idm140528179949808"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        创建表后，您需要填充它。</font><font style="vertical-align: inherit;">该
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句是这个有用的。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        假设你的宠物记录可以描述如下。</font><font style="vertical-align: inherit;">（请注意，MySQL需要</font></font><code class="literal">'YYYY-MM-DD'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化</font><font style="vertical-align: inherit;">日期</font><font style="vertical-align: inherit;">;这可能与您习惯的</font><font style="vertical-align: inherit;">日期
         </font><font style="vertical-align: inherit;">不同）。
</font></font></p>
<div class="informaltable">
<table summary="Example of pet records mentioned in the preceding text."><colgroup><col width="10%"><col width="10%"><col width="10%"><col width="05%"><col width="20%"><col width="20%"></colgroup><thead><tr>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有者</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">种类</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性别</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分娩</font></font></th>
            <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">死亡</font></font></th>
          </tr></thead><tbody><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蓬松</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哈罗德</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">猫</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1993年2月4日</font></font></td>
            <td></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">爪</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格温</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">猫</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1994年3月17日</font></font></td>
            <td></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">巴菲</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哈罗德</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">狗</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1989年5月13日</font></font></td>
            <td></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">班尼</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">狗</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1990年8月27日</font></font></td>
            <td></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鲍泽</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">黛安</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">狗</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1979年8月31日</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1995年7月29日</font></font></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扢</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格温</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鸟</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1998年9月11日</font></font></td>
            <td></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">惠斯勒</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格温</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鸟</font></font></td>
            <td></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1997年12月9日</font></font></td>
            <td></td>
          </tr><tr>
            <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瘦</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">班尼</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蛇</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米</font></font></td>
            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1996年4月29日</font></font></td>
            <td></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        因为你是从一个空表开始的，所以填充它的一个简单方法是创建一个包含每个动物行的文本文件，然后用一条语句将文件内容加载到表中。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以创建一个文本文件</font></font><code class="filename">pet.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ，每行包含一条记录，其值由制表符分隔，并按照列中列出的顺序给出
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于缺失的值（例如未知性别或仍然存活的动物的死亡日期），您可以使用</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        值。</font><font style="vertical-align: inherit;">要在文本文件中表示这些，请使用
         </font></font><code class="literal">\N</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（反斜杠，大写N）。</font><font style="vertical-align: inherit;">例如，惠斯勒鸟的记录看起来像这样（值之间的空格是单个制表符）：
      </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Whistler Gwen bird \ N 1997-12-09 \ N
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要将文本文件加载</font></font><code class="filename">pet.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到
         </font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中，请使用以下语句：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>LOAD DATA LOCAL INFILE '/path/pet.txt' INTO TABLE pet;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您使用</font></font><code class="literal">\r\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用作行终止符</font><font style="vertical-align: inherit;">的编辑器在Windows上创建了该文件
         </font><font style="vertical-align: inherit;">，则应该使用以下语句：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>LOAD DATA LOCAL INFILE '/path/pet.txt' INTO TABLE pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>LINES TERMINATED BY '\r\n';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        （在运行OS X的Apple机器上，您可能会想要使用它
         </font></font><code class="literal">LINES TERMINATED BY '\r'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
      </font></font></p><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD
        DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您愿意，</font><font style="vertical-align: inherit;">
        您可以在</font><font style="vertical-align: inherit;">声明中</font><font style="vertical-align: inherit;">明确指定列值分隔符和行结束符</font><font style="vertical-align: inherit;">，但默认值是制表符和换行符。</font><font style="vertical-align: inherit;">这些足以让语句</font></font><code class="filename">pet.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正确</font><font style="vertical-align: inherit;">读取文件</font><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果语句失败，那么默认情况下，您的MySQL安装可能没有启用本地文件功能。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">如何更改此信息，</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/security.html#load-data-local" title="6.1.6 LOAD DATA LOCAL的安全问题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6.1.6节“LOAD DATA LOCAL的安全问题”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果您想一次添加一条新记录，则该
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明很有用。</font><font style="vertical-align: inherit;">最简单的形式是，按照列中列出的顺序为每列提供值
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">假设黛安得到一个名叫</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puffball</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的新仓鼠</font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">。</font></span></span><span class="quote"><font style="vertical-align: inherit;">“</font></span><font style="vertical-align: inherit;">你可以用这样的</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">添加一条新记录
         </font><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>INSERT INTO pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>VALUES ('Puffball','Diane','hamster','f','1999-03-30',NULL);</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        字符串和日期值在这里被指定为带引号的字符串。</font><font style="vertical-align: inherit;">另外，</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接</font><font style="vertical-align: inherit;">插入
         </font><font style="vertical-align: inherit;">以表示缺少的值。</font><font style="vertical-align: inherit;">你不会</font></font><code class="literal">\N</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像你一样使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        从这个例子中，你应该能够看到，最初使用多个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#insert" title="13.2.5 INSERT语法"><code class="literal">INSERT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句而不是单个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        语句</font><font style="vertical-align: inherit;">来加载记录需要更多的打字</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="retrieving-data"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4从表中检索信息</font></font></h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#selecting-all"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.1选择所有数据</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#selecting-rows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.2选择特定的行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#selecting-columns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.3选择特定的列</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#sorting-rows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.4排序行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#date-calculations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.5日期计算</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#working-with-null"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.6使用NULL值</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#pattern-matching"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.7模式匹配</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#counting-rows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.8计数行数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#multiple-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.9使用多个表</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528179850304"></a><a class="indexterm" name="idm140528179848848"></a><a class="indexterm" name="idm140528179847360"></a><a class="indexterm" name="idm140528179845872"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明用于从表格中提取信息。</font><font style="vertical-align: inherit;">声明的一般形式是：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"></font><em class="replaceable"><code>what_to_select</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从</font></font><em class="replaceable"><code>which_table</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
哪里</font><font style="vertical-align: inherit;">选择</font></font><em class="replaceable"><code>conditions_to_satisfy</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
</font></font></pre><p>
        <em class="replaceable"><code>what_to_select</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表明你想看到什么。</font><font style="vertical-align: inherit;">这可能是列的列表，或
         </font></font><code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的所有列。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span>
        <em class="replaceable"><code>which_table</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示您要从中检索数据的表格。</font><font style="vertical-align: inherit;">该</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        条款是可选的。</font><font style="vertical-align: inherit;">如果存在，则
         </font></font><em class="replaceable"><code>conditions_to_satisfy</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定行必须满足以符合检索条件的一个或多个条件。
</font></font></p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="selecting-all"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.1选择所有数据</font></font></h4>
</div>
</div>
</div>
<p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          从表</font><font style="vertical-align: inherit;">
          中</font><font style="vertical-align: inherit;">检索所有内容</font><font style="vertical-align: inherit;">的最简单形式</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + -------- + --------- + ------ + ------------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + -------- + --------- + ------ + ------------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1993-02-04 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">Benny | </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1990-08-27 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1979-08-31 | </font><font style="vertical-align: inherit;">1995-07-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1998-09-11 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">Benny | </font><font style="vertical-align: inherit;">蛇| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1996-04-29 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">仓鼠| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1999-03-30 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + -------- + --------- + ------ + ------------ + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您想要查看整个表格，例如，在刚刚装入初始数据集之后，</font><font style="vertical-align: inherit;">
          这种形式</font><font style="vertical-align: inherit;">非常有用。</font><font style="vertical-align: inherit;">例如，你可能会认为Bowser的出生日期看起来不太正确。</font><font style="vertical-align: inherit;">咨询你的原始系谱文件，你发现正确的出生年份应该是1989年，而不是1979年。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          至少有两种方法可以解决这个问题：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              编辑文件</font></font><code class="filename">pet.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以纠正错误，然后清空表格并使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#delete" title="13.2.2 DELETE语法"><code class="literal">DELETE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
               </font><font style="vertical-align: inherit;">重新加载
               </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE语法"><code class="literal">LOAD DATA</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>DELETE FROM pet;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>LOAD DATA LOCAL INFILE '/path/pet.txt' INTO TABLE pet;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              但是，如果您这样做，您还必须重新输入马勃球记录。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用一个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明</font><font style="vertical-align: inherit;">只修正错误的记录
               </font><font style="vertical-align: inherit;">：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>UPDATE pet SET birth = '1989-08-31' WHERE name = 'Bowser';</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#update" title="13.2.11更新语法"><code class="literal">UPDATE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变化只在讨论记录，并不需要您重新加载表。
</font></font></p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="selecting-rows"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.2选择特定的行</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179814704"></a><a class="indexterm" name="idm140528179813248"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如前一节所示，很容易检索整个表格。</font><font style="vertical-align: inherit;">只要省略</font><font style="vertical-align: inherit;">声明中</font><font style="vertical-align: inherit;">的</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条款即可</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但通常你不想看到整个表格，特别是当它变大时。</font><font style="vertical-align: inherit;">相反，您通常对回答特定问题更感兴趣，在这种情况下，您需要对所需信息指定一些限制。</font><font style="vertical-align: inherit;">让我们看看有关您的宠物回答的问题。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您只能从表中选择特定的行。</font><font style="vertical-align: inherit;">例如，如果您想验证您对Bowser出生日期所做的更改，请选择Bowser的记录，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name = 'Bowser';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------- + --------- + ------ + ------------ +  - ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------- + --------- + ------ + ------------ +  - ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">1995-07-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------- + --------- + ------ + ------------ +  - ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          结果证实，这一年的记录正确的是1989年，而不是1979年。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          字符串比较通常不区分大小写，因此您可以将名称指定为</font></font><code class="literal">'bowser'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><code class="literal">'BOWSER'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等等。</font><font style="vertical-align: inherit;">查询结果是一样的。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以在任何列上指定条件，而不仅仅是
           </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，如果你想知道哪些动物是在1998年或之后出生的，那么测试一下这个
           </font></font><code class="literal">birth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE birth &gt;= '1998-1-1';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1998-09-11 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">仓鼠| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1999-03-30 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          例如，你可以结合条件来定位雌性狗：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE species = 'dog' AND sex = 'f';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          前面的查询使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          逻辑运算符。</font><font style="vertical-align: inherit;">还有一个
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE species = 'snake' OR species = 'bird';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1998-09-11 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">Benny | </font><font style="vertical-align: inherit;">蛇| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1996-04-29 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------- +</font></font><font></font>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以混合在一起，虽然
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有较高的优先权
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您同时使用两个运算符，则最好使用括号来明确说明条件应该如何分组：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE (species = 'cat' AND sex = 'm')</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>OR (species = 'dog' AND sex = 'f');</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="selecting-columns"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.3选择特定的列</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179782960"></a><a class="indexterm" name="idm140528179781504"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您不想看到表中的整个行，只需命名您感兴趣的列，并用逗号分隔。</font><font style="vertical-align: inherit;">例如，如果你想知道你的动物何时出生，请选择</font><font style="vertical-align: inherit;">列</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><code class="literal">birth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, birth FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">1993-02-04 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">1994-03-17 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">1990-08-27 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">1998-09-11 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">1997-12-09 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">1996-04-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">1999-03-30 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要找出谁拥有宠物，请使用以下查询：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT owner FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">所有者|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哈罗德|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">格温|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哈罗德|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Benny |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">黛安娜|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">格温|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">格温|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Benny |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">黛安娜|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font>
</pre><a class="indexterm" name="idm140528179773712"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          请注意，查询只是</font></font><code class="literal">owner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从每条记录中</font><font style="vertical-align: inherit;">检索
           </font><font style="vertical-align: inherit;">列，并且其中一些不止一次出现。</font><font style="vertical-align: inherit;">为了最小化输出，请通过添加关键字来检索每个唯一输出记录一次
           </font></font><code class="literal">DISTINCT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DISTINCT owner FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">所有者|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Benny |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">黛安娜|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">格温|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哈罗德|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以使用</font></font><code class="literal">WHERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句将行选择与列选择组合在一起。</font><font style="vertical-align: inherit;">例如，要仅为狗和猫获取出生日期，请使用以下查询：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, species, birth FROM pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>WHERE species = 'dog' OR species = 'cat';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + --------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">出生|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + --------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">1993-02-04 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">1994-03-17 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">1989-05-13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">1990-08-27 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">1989-08-31 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + --------- + ------------ +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="sorting-rows"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.4排序行</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179763536"></a><a class="indexterm" name="idm140528179762464"></a><a class="indexterm" name="idm140528179760976"></a><a class="indexterm" name="idm140528179759488"></a><a class="indexterm" name="idm140528179758000"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在前面的例子中，您可能已经注意到结果行以特定顺序显示。</font><font style="vertical-align: inherit;">当行以某种有意义的方式排序时，检查查询输出通常更容易。</font><font style="vertical-align: inherit;">要对结果进行排序，请使用</font></font><code class="literal">ORDER
          BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这里是动物的生日，按日期排序：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, birth FROM pet ORDER BY birth;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">1990-08-27 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">1993-02-04 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">1994-03-17 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">1996-04-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">1997-12-09 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">1998-09-11 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">1999-03-30 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在字符类型列上，排序与所有其他比较操作一样，通常以不区分大小写的方式执行。</font><font style="vertical-align: inherit;">这意味着对于除了大小写之外相同的列，订单是未定义的。</font><font style="vertical-align: inherit;">您可以使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像这样</font><font style="vertical-align: inherit;">强制对列进行区分大小写排序</font><font style="vertical-align: inherit;">：
           </font><font style="vertical-align: inherit;">。
        </font></font><code class="literal">ORDER BY BINARY
          <em class="replaceable"><code>col_name</code></em></code><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          默认排序顺序是升序排列，最小值排在第一位。</font><font style="vertical-align: inherit;">要按反向（降序）顺序排序，请将</font></font><code class="literal">DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">添加到要排序
           </font><font style="vertical-align: inherit;">的列的名称中：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, birth FROM pet ORDER BY birth DESC;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">1999-03-30 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">1998-09-11 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">1997-12-09 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">1996-04-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">1994-03-17 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">1993-02-04 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">1990-08-27 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以对多个列进行排序，并且可以按不同方向排序不同的列。</font><font style="vertical-align: inherit;">例如，要按照升序排列动物类型，然后按降序排列动物类型中的出生日期（最早的动物优先），请使用以下查询：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, species, birth FROM pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>ORDER BY species, birth DESC;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + --------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">出生|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + --------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">1998-09-11 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">1997-12-09 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">1994-03-17 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">1993-02-04 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">1990-08-27 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">1989-08-31 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">1989-05-13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">仓鼠| </font><font style="vertical-align: inherit;">1999-03-30 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">蛇| </font><font style="vertical-align: inherit;">1996-04-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + --------- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字仅适用于紧接在它之前的列名（</font></font><code class="literal">birth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）; </font><font style="vertical-align: inherit;">它不影响</font></font><code class="literal">species</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列排序顺序。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="date-calculations"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.5日期计算</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179738512"></a><a class="indexterm" name="idm140528179737440"></a><a class="indexterm" name="idm140528179735952"></a><a class="indexterm" name="idm140528179734464"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL提供了几个函数，您可以使用它们来计算日期，例如计算年龄或提取日期的部分。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要确定每只宠物有多少岁，请使用该
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。</font><font style="vertical-align: inherit;">它的论点是你想要表达结果的单位，以及两个取得差异的日期。</font><font style="vertical-align: inherit;">以下查询显示了每个宠物的出生日期，当前日期和年数。</font><font style="vertical-align: inherit;">一个
           </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">别名</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code class="literal">age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是用来制造最终输出列标签更有意义。
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, birth, CURDATE(),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,CURDATE()) AS age</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">CURDATE（）| </font><font style="vertical-align: inherit;">年龄|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">1993-02-04 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">9 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">14 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">1990-08-27 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">12 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">1998-09-11 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">5 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">1996-04-29 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">7 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">1999-03-30 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          查询起作用，但如果行以某种顺序呈现，则可以更轻松地扫描结果。</font><font style="vertical-align: inherit;">这可以通过添加一个</font></font><code class="literal">ORDER BY name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句按名称对输出进行排序</font><font style="vertical-align: inherit;">来完成</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, birth, CURDATE(),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,CURDATE()) AS age</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM pet ORDER BY name;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">CURDATE（）| </font><font style="vertical-align: inherit;">年龄|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">14 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">1998-09-11 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">9 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">1990-08-27 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">12 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">1993-02-04 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">1999-03-30 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">1996-04-29 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">7 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">5 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要对输出进行排序</font></font><code class="literal">age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是
           </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用不同的</font></font><code class="literal">ORDER
          BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, birth, CURDATE(),</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,CURDATE()) AS age</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM pet ORDER BY age;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">CURDATE（）| </font><font style="vertical-align: inherit;">年龄|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">1998-09-11 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">1999-03-30 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">5 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">1996-04-29 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">7 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">9 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">1993-02-04 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">10 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">1990-08-27 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">12 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">2003-08-19 | </font><font style="vertical-align: inherit;">14 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + ------------ + ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          类似的查询可用于确定死亡动物的死亡年龄。</font><font style="vertical-align: inherit;">你可以通过检查这些</font></font><code class="literal">death</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
           </font><font style="vertical-align: inherit;">是否确定哪些动物</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然后，对于那些不具有</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的人，计算</font></font><code class="literal">death</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与
           </font></font><code class="literal">birth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">之间的差异</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, birth, death,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,death) AS age</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>FROM pet WHERE death IS NOT NULL ORDER BY age;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡| </font><font style="vertical-align: inherit;">年龄|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------ + ------------ + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">1995-07-29 | </font><font style="vertical-align: inherit;">5 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------------ + ------------ + ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          查询使用</font></font><code class="literal">death IS NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是</font></font><code class="literal">death &lt;&gt; NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是使用通常的比较运算符无法比较的特殊值。</font><font style="vertical-align: inherit;">这将在稍后讨论。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/tutorial.html#working-with-null" title="3.3.4.6使用NULL值"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3.3.4.6节“使用NULL值”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果你想知道下个月哪些动物有生日，该怎么办？</font><font style="vertical-align: inherit;">对于这种计算，年和日是无关紧要的; </font><font style="vertical-align: inherit;">你只是想提取</font></font><code class="literal">birth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的月份部分
           </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">MySQL提供了用于提取日期的部分，如一些功能
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_year"><code class="literal">YEAR()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里是合适的功能。</font><font style="vertical-align: inherit;">要查看它的工作原理，请运行一个简单的查询，以显示两者的值</font></font><code class="literal">birth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH(birth)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, birth, MONTH(birth) FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">月（出生）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + -------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">1993-02-04 | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">5 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">1990-08-27 | </font><font style="vertical-align: inherit;">8 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">8 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Chirpy | </font><font style="vertical-align: inherit;">1998-09-11 | </font><font style="vertical-align: inherit;">9 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">12 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Slim | </font><font style="vertical-align: inherit;">1996-04-29 | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Puffball | </font><font style="vertical-align: inherit;">1999-03-30 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------------ + -------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在即将到来的月份里寻找动物与生日也很简单。</font><font style="vertical-align: inherit;">假设当前月份是四月份。</font><font style="vertical-align: inherit;">那么月份值就是</font></font><code class="literal">4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，你可以</font></font><code class="literal">5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像这样</font><font style="vertical-align: inherit;">寻找5月（月</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">出生的动物</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT name, birth FROM pet WHERE MONTH(birth) = 5;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">出生|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">1989-05-13 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果当前月份是十二月份，则会有一个小小的并发症。</font><font style="vertical-align: inherit;">你不能仅仅在月份中添加一个数字（</font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）并寻找月份出生的动物
           </font></font><code class="literal">13</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为没有这个月份。</font><font style="vertical-align: inherit;">相反，你寻找一月（月</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">出生的动物
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以编写查询，使其无论当前月份是什么，都能正常工作，以便您不必在特定月份中使用该号码。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使您可以将时间间隔添加到给定的日期。</font><font style="vertical-align: inherit;">如果您添加一个月的值</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_curdate"><code class="literal">CURDATE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后提取月份部分</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，结果会生成查找生日的月份：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, birth FROM pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>WHERE MONTH(birth) = MONTH(DATE_ADD(CURDATE(),INTERVAL 1 MONTH));</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          完成相同任务的另一种方式是</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在使用模函数（</font></font><code class="literal">MOD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）将月值包装</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为当前</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">之后</font><font style="vertical-align: inherit;">添加
           </font><font style="vertical-align: inherit;">以获取当前月份后</font><font style="vertical-align: inherit;">的下个月</font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT name, birth FROM pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>WHERE MONTH(birth) = MOD(MONTH(CURDATE()), 12) + 1;</code></strong>
</pre><p>
          <a class="link" href="/mysql-5.7-google-zh/functions.html#function_month"><code class="literal">MONTH()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">之间的数字</font></font><code class="literal">12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">并
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD(something,12)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">之间的数字</font></font><code class="literal">11</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所以增加必须在之后
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_mod"><code class="literal">MOD()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则我们会从11月（</font></font><code class="literal">11</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）到1月（</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="working-with-null"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.6使用NULL值</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179663008"></a><a class="indexterm" name="idm140528179661968"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您习惯之前，</font><font style="vertical-align: inherit;">这个</font><font style="vertical-align: inherit;">值可能会令人惊讶。</font><font style="vertical-align: inherit;">从概念上来说，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意思是
           </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺少一个未知的价值</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它与其他价值观有所不同。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要进行测试</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-null"><code class="literal">IS NULL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_is-not-null"><code class="literal">IS
          NOT NULL</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商，如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 IS NULL, 1 IS NOT NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 IS NULL | </font><font style="vertical-align: inherit;">1不是NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + --------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + --------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          你不能使用算术比较操作符，如
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_equal"><code class="literal">=</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_less-than"><code class="literal">&lt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以测试</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了证明这一点，请尝试以下查询：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 1 = NULL, 1 &lt;&gt; NULL, 1 &lt; NULL, 1 &gt; NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ----------- + ---------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 = NULL | </font><font style="vertical-align: inherit;">1 &lt;&gt; NULL | </font><font style="vertical-align: inherit;">1 &lt;NULL | </font><font style="vertical-align: inherit;">1&gt; NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ----------- + ---------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ----------- + ---------- + ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因为任何算术比较的结果
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也是</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所以你不能从这种比较中获得任何有意义的结果。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在MySQL中，</font></font><code class="literal">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          意味着false和其他任何事情都意味着真实。</font><font style="vertical-align: inherit;">布尔操作的默认真值是</font></font><code class="literal">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这种特殊的处理方式</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就是为什么在上一节中，有必要确定哪些动物不再活着，</font></font><code class="literal">death IS NOT
          NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是</font><font style="vertical-align: inherit;">使用</font></font><code class="literal">death &lt;&gt;
          NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          a中的两个</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值被认为是相等的
           </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在做时</font></font><code class="literal">ORDER BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你这样</font><font style="vertical-align: inherit;">做</font><font style="vertical-align: inherit;">，
           </font><font style="vertical-align: inherit;">价值观首先被呈现，如果你这样做</font></font><code class="literal">ORDER BY ... ASC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则
           </font><font style="vertical-align: inherit;">首先呈现值
           </font></font><code class="literal">ORDER BY ... DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          处理时的一个常见错误</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是假设不可能将零或空字符串插入定义为的列中</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但事实并非如此。</font><font style="vertical-align: inherit;">这些实际上是价值，而
           </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有价值。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你可以使用</font></font><code class="literal">IS [NOT] NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下所示的方式</font><font style="vertical-align: inherit;">轻松测试
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT 0 IS NULL, 0 IS NOT NULL, '' IS NULL, '' IS NOT NULL;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + -------- + ------------ + -------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 IS NULL | </font><font style="vertical-align: inherit;">0不是NULL | </font><font style="vertical-align: inherit;">''IS NULL | </font><font style="vertical-align: inherit;">''不是NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + -------- + ------------ + -------- -------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">0 | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ----------- + -------- + ------------ + -------- -------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因此，完全可以在列中插入一个零或空字符串</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为实际上这些</font><font style="vertical-align: inherit;">字符串是可能的</font></font><code class="literal">NOT NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见
           </font></font><a class="xref" href="/mysql-5.7-google-zh/error-handling.html#problems-with-null" title="B.5.4.3 NULL值的问题"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第B.5.4.3节“空值问题”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="pattern-matching"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.7模式匹配</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179623024"></a><a class="indexterm" name="idm140528179621952"></a><a class="indexterm" name="idm140528179620464"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL提供标准的SQL模式匹配以及基于扩展正则表达式的模式匹配形式，类似于Unix实用程序（如</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vi</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed）</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所使用的正则表达式
           </font><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          SQL模式匹配使您可以使用</font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          匹配任何单个字符并</font></font><code class="literal">%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配任意数量的字符（包括零字符）。</font><font style="vertical-align: inherit;">在MySQL中，默认情况下，SQL模式不区分大小写。</font><font style="vertical-align: inherit;">这里显示了一些示例。</font><font style="vertical-align: inherit;">不要使用
           </font></font><code class="literal">=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">&lt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当你使用SQL模式。</font><font style="vertical-align: inherit;">改为</font><font style="vertical-align: inherit;">使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比较运算符。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了找到名字开头</font></font><code class="literal">b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE 'b%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">1995-07-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ----------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查找以下列结尾的名字</font></font><code class="literal">fy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE '%fy';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1993-02-04 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          查找包含以下内容的名称</font></font><code class="literal">w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE '%w%';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">1995-07-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查找包含正好包含五个字符的名称，请使用</font></font><code class="literal">_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式字符的</font><font style="vertical-align: inherit;">五个实例</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE '_____';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          MySQL提供的另一种模式匹配使用扩展正则表达式。</font><font style="vertical-align: inherit;">当你测试这种类型的模式匹配时，使用
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT
          REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符（或
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">RLIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_not-regexp"><code class="literal">NOT RLIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它们是同义词）。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          以下列表描述了扩展正则表达式的一些特征：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 匹配任何单个字符。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              一个字符类</font></font><code class="literal">[...]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配括号内的任何字符。</font><font style="vertical-align: inherit;">例如，
               </font></font><code class="literal">[abc]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配</font></font><code class="literal">a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
               </font></font><code class="literal">b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要命名一系列字符，请使用短划线。</font></font><code class="literal">[a-z]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配任何字母，而</font></font><code class="literal">[0-9]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配任何数字。
            </font></font></p></li><li class="listitem"><p>
              <code class="literal">*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配零个或多个前面的事物的实例。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">x*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              匹配任意数量的</font></font><code class="literal">x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符，
               </font></font><code class="literal">[0-9]*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配任意数量的数字，并</font></font><code class="literal">.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配任意数量的任何数字。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果模式匹配正在测试的值中的任何位置，则正则表达式模式匹配会成功。</font><font style="vertical-align: inherit;">（这与</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式匹配</font><font style="vertical-align: inherit;">不同</font><font style="vertical-align: inherit;">，只有模式匹配整个值才能成功。）
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              要锚定一个模式，以便它必须匹配被测试值</font></font><code class="literal">^</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的开始或</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结束，请在模式</font><font style="vertical-align: inherit;">的开始或</font><font style="vertical-align: inherit;">结尾使用。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          为了演示扩展正则表达式的工作原理，</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_like"><code class="literal">LIKE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先前显示</font><font style="vertical-align: inherit;">的
           </font><font style="vertical-align: inherit;">查询在这里被重写以供使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查找以名字开头的名字</font></font><code class="literal">b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用
           </font></font><code class="literal">^</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以匹配名称的开头：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP '^b';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ----------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">1995-07-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ----------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要强制</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_regexp"><code class="literal">REGEXP</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比较区分大小写，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_binary"><code class="literal">BINARY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          关键字使其中一个字符串成为二进制字符串。</font><font style="vertical-align: inherit;">该查询仅</font></font><code class="literal">b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在名称的开头</font><font style="vertical-align: inherit;">匹配小写字母</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM pet WHERE name REGEXP BINARY'^ b';
</font></font></pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查找以结尾的名字</font></font><code class="literal">fy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用
           </font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以匹配</font><font style="vertical-align: inherit;">名称的结尾</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP 'fy$';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1993-02-04 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + -------- + --------- + ------ + ------------ +  - ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查找包含a的名称</font></font><code class="literal">w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用以下查询：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP 'w';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1989-08-31 | </font><font style="vertical-align: inherit;">1995-07-29 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">惠斯勒| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1997-12-09 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- + ------- + --------- + ------ + ------------ + ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          因为如果正则表达式模式在值的任何位置发生匹配，所以在前面的查询中不需要在模式的任何一边放置通配符，以使其匹配整个值，就像SQL模式中的情况一样。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          要查找包含正好包含五个字符的名称，请使用
           </font></font><code class="literal">^</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code class="literal">$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配名称的开头和结尾以及</font></font><code class="literal">.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中间的</font><font style="vertical-align: inherit;">五个实例
           </font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP '^.....$';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您还可以使用</font><font style="vertical-align: inherit;">
          （</font><span class="quote"><font style="vertical-align: inherit;">“ </font></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">repeat- </font></span></span><span class="quote"><span class="quote"><font style="vertical-align: inherit;">times</font></span></span><span class="quote"><font style="vertical-align: inherit;"> ”</font></span><font style="vertical-align: inherit;">）运算符</font><font style="vertical-align: inherit;">来编写以前的查询
           </font><font style="vertical-align: inherit;">：
        </font></font><code class="literal">{<em class="replaceable"><code>n</code></em>}</code><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font><span class="quote"><font style="vertical-align: inherit;"></font><em class="replaceable"><code>n</code></em><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP '^.{5}$';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">死亡|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1994-03-17 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1989-05-13 | </font><font style="vertical-align: inherit;">NULL |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------- + -------- + --------- + ------ + ------------ +  - ----- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关正则表达式语法的更多信息，请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#regexp" title="12.5.2正则表达式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.5.2节“正则表达式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="counting-rows"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.8计数行数</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179543232"></a><a class="indexterm" name="idm140528179541744"></a><a class="indexterm" name="idm140528179540256"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          数据库通常用于回答这样的问题：</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中某种类型的数据多久出现一次？</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          例如，你可能想知道你有多少宠物，或每个拥有者有多少宠物，或者你可能想要对你的动物进行各种普查操作。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          计算您拥有的动物总数与</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font><span class="quote"><font style="vertical-align: inherit;">表中</font></span></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有多少行是
          </font></font><code class="literal">pet</code><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同的问题</font><span class="quote"><span class="quote"><font style="vertical-align: inherit;">？</font></span></span><span class="quote"><font style="vertical-align: inherit;">“</font></span><font style="vertical-align: inherit;">因为每只宠物有一个记录。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(*)</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">统计行数，所以用于计算动物数量的查询如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT COUNT(*) FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">9 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          此前，您检索了拥有宠物的人的姓名。</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你想找出每个拥有者有多少宠物，</font><font style="vertical-align: inherit;">你可以使用</font><font style="vertical-align: inherit;">：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT owner, COUNT(*) FROM pet GROUP BY owner;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Benny | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">黛安娜| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">格温| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          前面的查询用于</font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将每个记录分组</font></font><code class="literal">owner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用的
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结合
           </font></font><code class="literal">GROUP BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是在各种分组表征您的数据非常有用。</font><font style="vertical-align: inherit;">以下示例显示了进行动物普查操作的不同方法。
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每种动物的数量：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT species, COUNT(*) FROM pet GROUP BY species;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">仓鼠| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蛇| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每个性别的动物数量：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT sex, COUNT(*) FROM pet GROUP BY sex;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          （在这个输出中，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表明性别是未知的。）
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          每种物种和性别组合的动物数量：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT species, sex, COUNT(*) FROM pet GROUP BY species, sex;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">仓鼠| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蛇| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用时无需检索整个表格
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，以前的查询只在狗和猫上执行，看起来像这样：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT species, sex, COUNT(*) FROM pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>WHERE species = 'dog' OR species = 'cat'</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>GROUP BY species, sex;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或者，如果你只想知道每个性别的动物数量：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT species, sex, COUNT(*) FROM pet</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>WHERE sex IS NOT NULL</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>GROUP BY species, sex;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">仓鼠| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蛇| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------ + ---------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果除了</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">之外还指定要选择的列
           </font><font style="vertical-align: inherit;">，则</font></font><code class="literal">GROUP
          BY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该存在一个用于命名相同列</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">子句。</font><font style="vertical-align: inherit;">否则，会发生以下情况：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">了
               </font><font style="vertical-align: inherit;">SQL模式，则会发生错误：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode = 'ONLY_FULL_GROUP_BY';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT owner, COUNT(*) FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
错误1140（42000）：在没有GROUP BY表达式的聚合查询中</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT列表＃1包含非聚集列'menagerie.pet.owner';</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这与sql_mode = only_full_group_by不兼容</font></font><font></font>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              如果</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未启用，则通过将所有行视为单个组来处理查询，但为每个命名列选择的值不具有确定性。</font><font style="vertical-align: inherit;">服务器可以自由选择任意行的值：
            </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SET sql_mode = '';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询OK，0行受影响（0.00秒）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL的&gt; </font></font><strong class="userinput"><code>SELECT owner, COUNT(*) FROM pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">COUNT（*）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哈罗德| </font><font style="vertical-align: inherit;">8 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一排（0.00秒）</font></font><font></font>
</pre></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          另请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-handling" title="12.19.3 MySQL处理GROUP BY"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.19.3节“MySQL处理GROUP BY”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">
          行为和相关优化的</font><font style="vertical-align: inherit;">信息
           </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-functions" title="12.19.1聚合（GROUP BY）功能描述"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/functions.html#group-by-functions" title="12.19.1聚合（GROUP BY）功能描述"><font style="vertical-align: inherit;">第12.19.1节“聚合（GROUP BY）函数描述”</font></a><font style="vertical-align: inherit;">。
</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_count"><code class="literal">COUNT(<em class="replaceable"><code>expr</code></em>)</code></a><font style="vertical-align: inherit;"></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="multiple-tables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.4.9使用多个表</font></font></h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179490352"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          该</font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表跟踪该宠物的你。</font><font style="vertical-align: inherit;">如果你想记录关于他们的其他信息，比如他们生活中的事件，比如访问兽医或者怀胎出生时，你需要另一张桌子。</font><font style="vertical-align: inherit;">这张桌子应该是什么样子？</font><font style="vertical-align: inherit;">它需要包含以下信息：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              宠物名称，以便您知道每个事件所属的动物。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              日期以便您知道事件何时发生。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              用于描述事件的字段。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              事件类型字段，如果您希望能够对事件进行分类。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          鉴于这些考虑，</font><font style="vertical-align: inherit;">
          表格</font><font style="vertical-align: inherit;">的</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE
          TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明</font></font><code class="literal">event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能如下所示：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>CREATE TABLE event (name VARCHAR(20), date DATE,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>type VARCHAR(15), remark VARCHAR(255));</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          与</font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表一样，通过创建包含以下信息的制表符分隔的文本文件来加载最初的记录是最容易的。
</font></font></p>
<div class="informaltable">
<table summary="pet record data that will appear in a tab delimited text file, as described in the preceding text."><colgroup><col width="15%"><col width="15%"><col width="15%"><col width="35%"></colgroup><thead><tr>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></th>
              <th scope="col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备注</font></font></th>
            </tr></thead><tbody><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蓬松</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1995年5月15日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窝</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4只小猫，3名女性，1名男性</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">巴菲</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1993-06-23</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窝</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5只小狗，2只雌性，3只雄性</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">巴菲</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1994年6月19日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窝</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3只小狗，3只女性</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扢</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1999年3月21日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兽医</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要的喙伸直</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瘦</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1997年8月3日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兽医</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">断肋</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鲍泽</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1991年10月12日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">狗窝</font></font></td>
              <td></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1991年10月12日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">狗窝</font></font></td>
              <td></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1998年8月28日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给他一个新的咀嚼玩具</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">爪</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1998年3月17日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给他一个新的跳蚤项圈</font></font></td>
            </tr><tr>
              <td scope="row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">惠斯勒</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1998年12月9日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日</font></font></td>
              <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个生日</font></font></td>
</tr></tbody></table>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          像这样加载记录：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>LOAD DATA LOCAL INFILE 'event.txt' INTO TABLE event;</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          根据您从</font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">运行的查询获知的内容</font><font style="vertical-align: inherit;">，您应该能够对</font></font><code class="literal">event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中</font><font style="vertical-align: inherit;">的记录执行检索
           </font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">原则是一样的。</font><font style="vertical-align: inherit;">但是，</font></font><code class="literal">event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">桌子本身</font><font style="vertical-align: inherit;">何时</font><font style="vertical-align: inherit;">不足以回答您可能会问的问题？
        </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          假设你想知道每只宠物都有它的窝的年龄。</font><font style="vertical-align: inherit;">我们之前看到如何计算两个日期的年龄。</font><font style="vertical-align: inherit;">母亲的垃圾日期在
           </font></font><code class="literal">event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中，但为了计算她在该日期的年龄，您需要她的出生日期，该日期存储在
           </font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格中。</font><font style="vertical-align: inherit;">这意味着查询需要两个表：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT pet.name,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,date) AS age,</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>remark</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>FROM pet INNER JOIN event</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>  ON pet.name = event.name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>WHERE event.type = 'litter';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------ + ----------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">年龄| </font><font style="vertical-align: inherit;">评论|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------ + ----------------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">4只小猫，3名女性，1名男性|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">5只小狗，2只雌性，3只雄性|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">3只小狗，3只女性|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------ + ----------------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          这个查询有几点需要注意：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该</font></font><code class="literal">FROM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句加入两个表，因为查询需要从两者中提取信息。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              从多个表合并（加入）信息时，您需要指定一个表中的记录如何与另一个表中的记录相匹配。</font><font style="vertical-align: inherit;">这很容易，因为他们都有</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专栏。</font><font style="vertical-align: inherit;">该查询使用一个</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句根据这些</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">匹配两个表中的记录</font><font style="vertical-align: inherit;">。
            </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              该查询使用一个</font></font><code class="literal">INNER JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来组合这些表。</font><font style="vertical-align: inherit;">一个</font></font><code class="literal">INNER JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者从表许可证行当且仅当两个表满足所规定的条件，以显示在结果
               </font></font><code class="option">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句。</font><font style="vertical-align: inherit;">在这个例子中，
               </font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句指定
               </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中的
               </font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表必须的匹配
               </font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列
               </font></font><code class="literal">event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。</font><font style="vertical-align: inherit;">如果一个名称出现在一个表中，而另一个不出现，则该行不会出现在结果中，因为该</font></font><code class="literal">ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              子句中</font><font style="vertical-align: inherit;">的条件</font><font style="vertical-align: inherit;">失败。
            </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              由于该</font></font><code class="literal">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出现在两个表中，因此您必须具体说明在引用列时您的意思。</font><font style="vertical-align: inherit;">这是通过将表名添加到列名中来完成的。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您不需要有两个不同的表来执行连接。</font><font style="vertical-align: inherit;">如果要将表中的记录与同一表中的其他记录进行比较，有时候将表连接到它自己是有用的。</font><font style="vertical-align: inherit;">例如，要在您的宠物中找到育种配对，您可以将其</font></font><code class="literal">pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与自己一起</font><font style="vertical-align: inherit;">加入</font><font style="vertical-align: inherit;">表以生成候选对的类似物种的男性和女性：
        </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT p1.name, p1.sex, p2.name, p2.sex, p1.species</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt; </font></font><strong class="userinput"><code>FROM pet AS p1 INNER JOIN pet AS p2</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    - &gt;</font></font><strong class="userinput"><code>  ON p1.species = p2.species AND p1.sex = 'f' AND p2.sex = 'm';</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------ + -------- + ------ + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">物种|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------ + -------- + ------ + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蓬松| </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">爪子| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">猫|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">芳| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">狗|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Buffy | </font><font style="vertical-align: inherit;">f | </font><font style="vertical-align: inherit;">鲍泽| </font><font style="vertical-align: inherit;">m | </font><font style="vertical-align: inherit;">狗|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ------ + -------- + ------ + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在这个查询中，我们指定表名的别名来引用列，并保持每个列引用与表关联的表的哪个实例。
</font></font></p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="getting-information"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4获取有关数据库和表格的信息</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179392080"></a><a class="indexterm" name="idm140528179390624"></a><a class="indexterm" name="idm140528179389136"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您忘记了数据库或表的名称或给定表的结构（例如，它的列被称为什么），该怎么办？</font><font style="vertical-align: inherit;">MySQL通过几个提供有关它所支持的数据库和表的信息来解决这个问题。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      你以前看过</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-databases" title="13.7.5.14 SHOW DATABASES语法"><code class="literal">SHOW
      DATABASES</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，列出了服务器管理的数据库。</font><font style="vertical-align: inherit;">要找出当前选择哪个数据库，请使用以下
       </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_database"><code class="literal">DATABASE()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SELECT DATABASE();</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">DATABASE（）|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">menagerie |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果你还没有选择任何数据库，结果是
       </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要找出默认数据库包含哪些表（例如，当您不确定表的名称时），请使用以下语句：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>SHOW TABLES;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">Tables_in_menagerie |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">事件|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">宠物|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------------------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      此语句生成的输出中的列的名称始终是
       </font><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">是数据库的名称。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-tables" title="13.7.5.37 SHOW TABLES语法"><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-tables" title="13.7.5.37 SHOW TABLES语法"><font style="vertical-align: inherit;">第13.7.5.37节“SHOW TABLES语法”</font></a><font style="vertical-align: inherit;">。
    </font></font><code class="literal">Tables_in_<em class="replaceable"><code>db_name</code></em></code><font style="vertical-align: inherit;"></font><em class="replaceable"><code>db_name</code></em><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-tables" title="13.7.5.37 SHOW TABLES语法"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果你想了解一张表的结构，这个
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#describe" title="13.8.1 DESCRIBE语法"><code class="literal">DESCRIBE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">陈述是有用的; </font><font style="vertical-align: inherit;">它显示有关每个表格列的信息：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>DESCRIBE pet;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------------- + ------ + ------ + --------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">字段| </font><font style="vertical-align: inherit;">类型| </font><font style="vertical-align: inherit;">空| </font><font style="vertical-align: inherit;">Key | </font><font style="vertical-align: inherit;">默认| </font><font style="vertical-align: inherit;">额外|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------------- + ------ + ------ + --------- +  - ----- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">名称| </font><font style="vertical-align: inherit;">varchar（20）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">所有者| </font><font style="vertical-align: inherit;">varchar（20）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">物种| </font><font style="vertical-align: inherit;">varchar（20）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">性别| </font><font style="vertical-align: inherit;">char（1）| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">出生| </font><font style="vertical-align: inherit;">日期| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">死亡| </font><font style="vertical-align: inherit;">日期| </font><font style="vertical-align: inherit;">是| </font><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NULL | </font><font style="vertical-align: inherit;">|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------------- + ------ + ------ + --------- +  - ----- +</font></font><font></font>
</pre><p>
      <code class="literal">Field</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示列名称，</font></font><code class="literal">Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font><font style="vertical-align: inherit;">列
       </font><font style="vertical-align: inherit;">的数据类型，</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示</font><font style="vertical-align: inherit;">列
       </font><font style="vertical-align: inherit;">是否可以包含
       </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，</font></font><code class="literal">Key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示列是否被索引，并</font></font><code class="literal">Default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      指定列的默认值。</font></font><code class="literal">Extra</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      显示有关列的特殊信息：如果使用该</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">创建列</font><font style="vertical-align: inherit;">，则该值将</font></font><code class="literal">auto_increment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是空的。
    </font></font></p><p>
      <code class="literal">DESC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种简短的形式
       </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#describe" title="13.8.1 DESCRIBE语法"><code class="literal">DESCRIBE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#describe" title="13.8.1 DESCRIBE语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
       </font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#describe" title="13.8.1 DESCRIBE语法"><font style="vertical-align: inherit;">第13.8.1节“DESCRIBE语法”</font></a><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您可以</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      使用该</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-create-table" title="13.7.5.10 SHOW CREATE TABLE语法"><code class="literal">SHOW CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">获取</font><font style="vertical-align: inherit;">创建现有表所需的
       </font><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">请参见
       </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-create-table" title="13.7.5.10 SHOW CREATE TABLE语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.7.5.10节“SHOW CREATE TABLE Syntax”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您在表格上有索引，则会</font><font style="vertical-align: inherit;">生成关于它们的信息。</font><font style="vertical-align: inherit;">有关此语句的更多信息</font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-index" title="13.7.5.22 SHOW INDEX语法"><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-index" title="13.7.5.22 SHOW INDEX语法"><font style="vertical-align: inherit;">第13.7.5.22节“SHOW INDEX语法”</font></a><font style="vertical-align: inherit;">。
</font></font><code class="literal">SHOW INDEX FROM
      <em class="replaceable"><code>tbl_name</code></em></code><font style="vertical-align: inherit;"></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#show-index" title="13.7.5.22 SHOW INDEX语法"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="batch-mode"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.5在批处理模式下使用mysql</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179354480"></a><a class="indexterm" name="idm140528179353024"></a><a class="indexterm" name="idm140528179351952"></a><a class="indexterm" name="idm140528179350464"></a><a class="indexterm" name="idm140528179349392"></a><a class="indexterm" name="idm140528179347904"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在前面的章节中，您使用</font><font style="vertical-align: inherit;">
      交互式</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来输入语句并查看结果。</font><font style="vertical-align: inherit;">你也可以</font><font style="vertical-align: inherit;">在批处理模式下</font><font style="vertical-align: inherit;">运行</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为此，将要运行的语句放在一个文件中，然后告诉
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从文件读取其输入：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysql &lt; <em class="replaceable"><code>batch-file</code></em></code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果你</font><font style="vertical-align: inherit;">在Windows下</font><font style="vertical-align: inherit;">运行</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并在文件中有一些导致问题的特殊字符，你可以这样做：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C：\&gt; </font></font><strong class="userinput"><code>mysql -e "source <em class="replaceable"><code>batch-file</code></em>"</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您需要在命令行中指定连接参数，则该命令可能如下所示：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell&gt; </font><font style="vertical-align: inherit;">
输入密码：</font></font><strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p &lt; <em class="replaceable"><code>batch-file</code></em></code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>********</code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      当你以</font><font style="vertical-align: inherit;">这种方式</font><font style="vertical-align: inherit;">使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql时</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，你正在创建一个脚本文件，然后执行脚本。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您希望脚本继续运行，即使其中的某些语句出现错误，您也应该使用
       </font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#option_mysql_force"><code class="option">--force</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行选项。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      为什么要使用脚本？</font><font style="vertical-align: inherit;">这有几个原因：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您反复运行查询（例如每天或每周），将其作为脚本可以避免每次执行时重新输入查询。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以通过复制和编辑脚本文件从现有的查询生成新的查询。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          在开发查询时，批处理模式也很有用，特别是对于多行语句或多语句序列。</font><font style="vertical-align: inherit;">如果你犯了一个错误，你不必重新键入所有内容。</font><font style="vertical-align: inherit;">只需编辑你的脚本来纠正错误，然后告诉</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再次执行它。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果您的查询产生大量输出，则可以通过传呼机运行输出，而不是通过滚动屏幕的顶部来滚动输出：
        </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysql &lt; <em class="replaceable"><code>batch-file</code></em> | more</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以捕获文件中的输出进行进一步处理：
        </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysql &lt; <em class="replaceable"><code>batch-file</code></em> &gt; mysql.out</code></strong>
</pre></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          您可以将脚本分发给其他人，以便他们也可以运行这些语句。
        </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有些情况下不允许交互式使用，例如，当您从</font></font><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cron</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作业</font><font style="vertical-align: inherit;">运行查询时</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，您必须使用批处理模式。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在批处理模式下</font><font style="vertical-align: inherit;">
      运行</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时，默认输出格式不同（更简洁），而
       </font><font style="vertical-align: inherit;">不是交互式使用它。</font><font style="vertical-align: inherit;">例如，</font></font><code class="literal">SELECT DISTINCT
      species FROM pet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以交互方式运行</font><font style="vertical-align: inherit;">时</font><font style="vertical-align: inherit;">，输出</font><font style="vertical-align: inherit;">如下所示
       </font><font style="vertical-align: inherit;">：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">物种|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鸟|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">猫|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">狗|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">仓鼠|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">蛇|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      在批处理模式下，输出如下所示：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">种类</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
鸟</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
猫</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
狗</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仓鼠</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
蛇</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      如果您想以批处理模式获得交互式输出格式，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql -t</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要向输出回显执行的语句，请使用</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql -v</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p><a class="indexterm" name="idm140528179306416"></a><a class="indexterm" name="idm140528179305328"></a><a class="indexterm" name="idm140528179304240"></a><a class="indexterm" name="idm140528179303136"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您还可以使用</font><font style="vertical-align: inherit;">命令或
       </font><font style="vertical-align: inherit;">命令</font><font style="vertical-align: inherit;">从</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示符</font><font style="vertical-align: inherit;">使用脚本</font><font style="vertical-align: inherit;">：
    </font></font><code class="literal">source</code><font style="vertical-align: inherit;"></font><code class="literal">\.</code><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>source <em class="replaceable"><code>filename</code></em>;</code></strong><font style="vertical-align: inherit;"></font><strong class="userinput"><code>\. <em class="replaceable"><code>filename</code></em></code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysql-batch-commands" title="4.5.1.5从文本文件执行SQL语句"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见</font><a class="xref" href="/mysql-5.7-google-zh/programs.html#mysql-batch-commands" title="4.5.1.5从文本文件执行SQL语句"><font style="vertical-align: inherit;">第4.5.1.5节“从文本文件执行SQL语句”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="examples"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6常见查询的例子</font></font></h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-column"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.1列的最大值</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.2保持某列的最大值的行</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-column-group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.3每个组的最大列数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-maximum-column-group-row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.4列保持某一列的最大分组数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-user-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.5使用用户定义的变量</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-foreign-keys"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.6使用外键</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#searching-on-two-keys"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.7在两个键上搜索</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#calculating-days"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.8每天计算访问次数</font></font></a></span></dt><dt><span class="section"><a href="/mysql-5.7-google-zh/tutorial.html#example-auto-increment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.9使用AUTO_INCREMENT</font></font></a></span></dt></dl>
</div>
<a class="indexterm" name="idm140528179293280"></a><a class="indexterm" name="idm140528179291824"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      以下是如何解决MySQL的一些常见问题的示例。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      一些示例使用该表</font></font><code class="literal">shop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来保存某些贸易商（经销商）的每件商品的价格（商品编号）。</font><font style="vertical-align: inherit;">假设每个交易者每篇文章都有一个固定价格，那么（</font></font><code class="literal">article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
       </font></font><code class="literal">dealer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是记录的主键。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      启动命令行工具</font></font><a class="link" href="/mysql-5.7-google-zh/programs.html#mysql" title="4.5.1 mysql  -  MySQL命令行工具"><span class="command"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql</font></font></strong></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择一个数据库：
    </font></font></p><pre data-lang="terminal" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳&gt; </font></font><strong class="userinput"><code>mysql <em class="replaceable"><code>your-database-name</code></em></code></strong>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      （在大多数MySQL安装中，您可以使用名为的数据库
       </font></font><code class="literal">test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您可以使用以下语句创建并填充示例表：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE shop（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    文章INT（4）UNSIGNED ZEROFILL DEFAULT'0000'NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    经销商CHAR（20）DEFAULT''NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    价格DOUBLE（16,2）DEFAULT'0.00'NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    PRIMARY KEY（物品，经销商））;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入商店VALUES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （1， 'A'，3.45），（1， 'B'，3.99），（2， 'A'，10.99），（3， 'B'，1.45），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （3， 'C'，1.69），（3， 'd'，1.25），（4， 'd'，19.95）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      发表声明后，表格应具有以下内容：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT * FROM shop;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文章| </font><font style="vertical-align: inherit;">经销商| </font><font style="vertical-align: inherit;">价格|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0001 | </font><font style="vertical-align: inherit;">A | </font><font style="vertical-align: inherit;">3.45 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0001 | </font><font style="vertical-align: inherit;">B | </font><font style="vertical-align: inherit;">3.99 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0002 | </font><font style="vertical-align: inherit;">A | </font><font style="vertical-align: inherit;">10.99 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0003 | </font><font style="vertical-align: inherit;">B | </font><font style="vertical-align: inherit;">1.45 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0003 | </font><font style="vertical-align: inherit;">C | </font><font style="vertical-align: inherit;">1.69 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0003 | </font><font style="vertical-align: inherit;">D | </font><font style="vertical-align: inherit;">1.25 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0004 | </font><font style="vertical-align: inherit;">D | </font><font style="vertical-align: inherit;">19.95 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font>
</pre>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="example-maximum-column"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.1列的最大值</font></font></h3>
</div>
</div>
</div>
<p>
        <span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么是最高的物品编号？</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></span>
      </p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT MAX（article）AS article FROM shop;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文章|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="example-maximum-row"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.2保持某列的最大值的行</font></font></h3>

</div>

</div>

</div>
<p>
        <span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务：查找最昂贵文章的编号，经销商和价格。</font></font></em></span>
      </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这很容易通过子查询完成：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择文章，经销商，价格</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从商店</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE price =（SELECT MAX（price）FROM shop）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文章| </font><font style="vertical-align: inherit;">经销商| </font><font style="vertical-align: inherit;">价格|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0004 | </font><font style="vertical-align: inherit;">D | </font><font style="vertical-align: inherit;">19.95 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        其他解决方案是使用a </font></font><code class="literal">LEFT JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或按照价格降序对所有行进行排序，并使用MySQL特定的</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">仅获得第一行</font><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT s1.article，s1.dealer，s1.price</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM shop s1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
左加入商店s2 ON s1.price &lt;s2.price</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE s2.article IS NULL;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择文章，经销商，价格</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从商店</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDER BY价格DESC</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
限制1;</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          如果有几个最昂贵的文章，每个文章的价格是19.95，那么</font></font><code class="literal">LIMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决方案将只显示其中的一个。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="example-maximum-column-group"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.3每个组的最大列数</font></font></h3>

</div>

</div>

</div>
<p>
        <span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务：查找每篇文章的最高价格。</font></font></em></span>
      </p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择文章，MAX（价格）AS价格</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从商店</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY文章;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文章| </font><font style="vertical-align: inherit;">价格|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0001 | </font><font style="vertical-align: inherit;">3.99 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0002 | </font><font style="vertical-align: inherit;">10.99 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0003 | </font><font style="vertical-align: inherit;">1.69 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0004 | </font><font style="vertical-align: inherit;">19.95 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + ------- +</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="example-maximum-column-group-row"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.4列保持某一列的最大分组数</font></font></h3>

</div>

</div>

</div>
<p>
        <span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务：对于每篇文章，找到价格最昂贵的经销商或经销商。</font></font></em></span>
      </p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这个问题可以通过像这样的子查询来解决：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择文章，经销商，价格</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM shop s1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE价格=（SELECT MAX（s2.price）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              FROM shop s2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              WHERE s1.article = s2.article）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文章| </font><font style="vertical-align: inherit;">经销商| </font><font style="vertical-align: inherit;">价格|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0001 | </font><font style="vertical-align: inherit;">B | </font><font style="vertical-align: inherit;">3.99 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0002 | </font><font style="vertical-align: inherit;">A | </font><font style="vertical-align: inherit;">10.99 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0003 | </font><font style="vertical-align: inherit;">C | </font><font style="vertical-align: inherit;">1.69 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0004 | </font><font style="vertical-align: inherit;">D | </font><font style="vertical-align: inherit;">19.95 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        前面的示例使用相关子查询，这可能效率低下（请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#correlated-subqueries" title="13.2.10.7相关子查询"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.2.10.7节“相关子查询”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">解决这个问题的其他可能性是在</font></font><code class="literal">FROM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句中
         </font><font style="vertical-align: inherit;">使用一个不相关的子查询</font></font><code class="literal">LEFT JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        不相关的子查询：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT s1.article，经销商，s1.price</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM shop s1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JOIN（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  选择文章，MAX（价格）AS价格</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  从商店</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  GROUP BY文章）AS s2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ON s1.article = s2.article AND s1.price = s2.price;</font></font><font></font>
</pre><p>
        <code class="literal">LEFT JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT s1.article，s1.dealer，s1.price</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FROM shop s1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LEFT JOIN shop s2 ON s1.article = s2.article AND s1.price &lt;s2.price</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE s2.article IS NULL;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        的</font></font><code class="literal">LEFT JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基础上的作品，当
         </font></font><code class="literal">s1.price</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是在其最大价值，没有
         </font></font><code class="literal">s2.price</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个更大的价值和该
         </font></font><code class="literal">s2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行的值会
         </font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#join" title="13.2.9.2 JOIN语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.2.9.2节“JOIN语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="example-user-variables"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.5使用用户定义的变量</font></font></h3>

</div>

</div>

</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以使用MySQL用户变量记住结果，而不必将它们存储在客户端的临时变量中。</font><font style="vertical-align: inherit;">（请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/language-structure.html#user-variables" title="9.4用户定义的变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第9.4节“用户定义的变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        例如，要查找价格最高和最低的商品，可以这样做：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql&gt; </font></font><strong class="userinput"><code>SELECT @min_price:=MIN(price),@max_price:=MAX(price) FROM shop;</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql&gt;</font></font><strong class="userinput"><code>SELECT * FROM shop WHERE price=@min_price OR price=@max_price;</code></strong><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">文章| </font><font style="vertical-align: inherit;">经销商| </font><font style="vertical-align: inherit;">价格|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0003 | </font><font style="vertical-align: inherit;">D | </font><font style="vertical-align: inherit;">1.25 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">0004 | </font><font style="vertical-align: inherit;">D | </font><font style="vertical-align: inherit;">19.95 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ --------- + -------- + ------- +</font></font><font></font>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          也可以将数据库对象的名称（如表或列）存储在用户变量中，然后在SQL语句中使用此变量; </font><font style="vertical-align: inherit;">但是，这需要使用准备好的声明。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多信息</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#sql-syntax-prepared-statements" title="13.5准备的SQL语句语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参见
           </font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#sql-syntax-prepared-statements" title="13.5准备的SQL语句语法"><font style="vertical-align: inherit;">第13.5节“准备好的SQL语句语法”</font></a><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="example-foreign-keys"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.6使用外键</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179239216"></a><a class="indexterm" name="idm140528179238144"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在MySQL中，</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格支持检查外键约束。</font><font style="vertical-align: inherit;">请参阅
         </font></font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html" title="第14章InnoDB存储引擎"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第14章</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB存储引擎</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
         </font></font><a class="xref" href="/mysql-5.7-google-zh/introduction.html#ansi-diff-foreign-keys" title="1.8.2.3外键差异"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1.8.2.3节“外键差异”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        外键约束不仅仅需要连接两个表。</font><font style="vertical-align: inherit;">对于除以外的存储引擎
         </font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，定义列以使用一个</font><font style="vertical-align: inherit;">
        没有实际影响</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">是可能的</font><font style="vertical-align: inherit;">，并且</font><span class="emphasis"><em><font style="vertical-align: inherit;">仅作为备忘录或评论给您，您当前定义的列旨在引用列中的列另一张桌子</font></em></span><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当使用这种语法时，意识到这一点非常重要：
</font></font><code class="literal">REFERENCES
        <em class="replaceable"><code>tbl_name</code></em>(<em class="replaceable"><code>col_name</code></em>)</code><font style="vertical-align: inherit;"></font><span class="emphasis"><em><font style="vertical-align: inherit;"></font></em></span><font style="vertical-align: inherit;"></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL不会执行任何操作</font></font><code class="literal">CHECK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            来确保</font></font><em class="replaceable"><code>col_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            实际存在</font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（甚至它</font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身存在）。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            MySQL不会执行任何类型的操作，</font></font><em class="replaceable"><code>tbl_name</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如响应在您定义的表中的行</font><font style="vertical-align: inherit;">上执行的操作
             </font><font style="vertical-align: inherit;">而删除行; </font><font style="vertical-align: inherit;">换句话说，这种语法无论如何</font><font style="vertical-align: inherit;">都不会</font><font style="vertical-align: inherit;">引起任何</font><font style="vertical-align: inherit;">行为</font></font><code class="literal">ON
            DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code class="literal">ON UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行为。</font><font style="vertical-align: inherit;">（虽然可以将一个</font></font><code class="literal">ON
            DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">一个</font></font><code class="literal">ON UPDATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句作为子句的一部分</font><font style="vertical-align: inherit;">写入</font></font><code class="literal">REFERENCES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但它也被忽略。）
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            该语法创建一个</font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">它并
             </font></font><span class="bold"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会</font></font></strong></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建任何类型的索引或关键的。
</font></font></p></li></ul>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以使用如此创建的列作为连接列，如下所示：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE人（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ID SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    名称CHAR（60）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    PRIMARY KEY（id）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CREATE TABLE衬衫（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ID SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    样式ENUM（'t恤'，'polo'，'礼服'）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    颜色ENUM（'红'，'蓝'，'橙'，'白'，'黑'）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    所有者SMALLINT UNSIGNED NOT NULL REFERENCES person（id），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    PRIMARY KEY（id）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO person VALUES（NULL，'Antonio Paz'）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT @last：= LAST_INSERT_ID（）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入衬衫值</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（NULL，'polo'，'blue'，@last），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（NULL，'dress'，'white'，@last），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（NULL，'t-shirt'，'blue'，@last）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO person VALUES（NULL，'Lilliana Angelovska'）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT @last：= LAST_INSERT_ID（）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入衬衫值</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（NULL，'dress'，'orange'，@last），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（NULL，'polo'，'red'，@last），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（NULL，'dress'，'blue'，@last），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（NULL，'t-shirt'，'white'，@last）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT * FROM person;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------------------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">安东尼奥帕兹|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">Lilliana Angelovska |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------------------- +</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择*从衬衫;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">风格| </font><font style="vertical-align: inherit;">颜色| </font><font style="vertical-align: inherit;">所有者|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">polo | </font><font style="vertical-align: inherit;">蓝色| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">礼服| </font><font style="vertical-align: inherit;">白色| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">T恤| </font><font style="vertical-align: inherit;">蓝色| </font><font style="vertical-align: inherit;">1 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">礼服| </font><font style="vertical-align: inherit;">橙色| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">polo | </font><font style="vertical-align: inherit;">红色| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">礼服| </font><font style="vertical-align: inherit;">蓝色| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">7 | </font><font style="vertical-align: inherit;">T恤| </font><font style="vertical-align: inherit;">白色| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------- + -------- + ------- +</font></font><font></font>
<font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT s。* FROM person p INNER JOIN shirt s</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   ON s.owner = p.id</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 在哪里p.name LIKE'Lilliana％'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
   AND s.color &lt;&gt;'white';</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">风格| </font><font style="vertical-align: inherit;">颜色| </font><font style="vertical-align: inherit;">所有者|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------- + -------- + ------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">礼服| </font><font style="vertical-align: inherit;">橙色| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">polo | </font><font style="vertical-align: inherit;">红色| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">礼服| </font><font style="vertical-align: inherit;">蓝色| </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + ------- + -------- + ------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当以这种方式使用时，该</font></font><code class="literal">REFERENCES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        子句不显示在</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#show-create-table" title="13.7.5.10 SHOW CREATE TABLE语法"><code class="literal">SHOW CREATE TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
         </font><font style="vertical-align: inherit;">的输出中
         </font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#describe" title="13.8.1 DESCRIBE语法"><code class="literal">DESCRIBE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHOW CREATE TABLE衬衫\ G</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*************************** 1. row ******************** *******</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表：衬衫</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建表：CREATE TABLE`shirt`（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
`id` smallint（5）unsigned NOT NULL auto_increment，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
`style` enum（'t-shirt'，'polo'，'dress'）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
`color` enum（'red'，'blue'，'orange'，'white'，'black'）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
`owner` smallint（5）unsigned NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PRIMARY KEY（`id`）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = MyISAM DEFAULT CHARSET = latin1</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        采用</font></font><code class="literal">REFERENCES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这种方式作为注释或</font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><span class="quote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列定义与工作</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="searching-on-two-keys"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.7在两个键上搜索</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179206928"></a><a class="indexterm" name="idm140528179205888"></a><a class="indexterm" name="idm140528179204816"></a><a class="indexterm" name="idm140528179203328"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一个</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用单个密钥被很好地优化，因为是的处理
         </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_and"><code class="literal">AND</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        一个棘手的情况是搜索两个不同的键，并结合</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#operator_or"><code class="literal">OR</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT field1_index，field2_index FROM test_table</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WHERE field1_index ='1'OR field2_index ='1'</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这种情况已经过优化。</font><font style="vertical-align: inherit;">请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/optimization.html#index-merge-optimization" title="8.2.1.3索引合并优化"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第8.2.1.3节“索引合并优化”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您还可以通过使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><code class="literal">UNION</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将两个单独</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">的输出组合起来</font><font style="vertical-align: inherit;">的方法来高效地解决问题
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参见</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#union" title="13.2.9.3 UNION语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.2.9.3节“UNION语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        每个</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#select" title="13.2.9 SELECT语法"><code class="literal">SELECT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索只有一个密钥，可以优化：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT field1_index，field2_index</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FROM test_table WHERE field1_index ='1'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
联盟</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT field1_index，field2_index</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FROM test_table WHERE field2_index ='1';</font></font><font></font>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="calculating-days"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.8每天计算访问次数</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179187296"></a><a class="indexterm" name="idm140528179186256"></a><a class="indexterm" name="idm140528179185184"></a><a class="indexterm" name="idm140528179184096"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        以下示例显示了如何使用位组函数来计算用户访问网页每月的天数。
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE t1（year YEAR（4），month INT（2）UNSIGNED ZEROFILL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
             INT INT（2）UNSIGNED ZEROFILL）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO t1 VALUES（2000,1,1），（2000,1,20），（2000,1,30），（2000,2,2），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （2000,2,23），（2000,2,23）;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        示例表格包含表示用户访问该页面的年 - 月 - 日值。</font><font style="vertical-align: inherit;">要确定这些访问在每个月中有多少天不同，请使用以下查询：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT年，月，BIT_COUNT（BIT_OR（1 &lt;&lt;天））AS天t1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
       GROUP BY年，月;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        其中返回：
      </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ ------ + ------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">年| | </font><font style="vertical-align: inherit;">月| </font><font style="vertical-align: inherit;">天|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------- + ------ +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">01 | </font><font style="vertical-align: inherit;">3 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2000 | </font><font style="vertical-align: inherit;">02 | </font><font style="vertical-align: inherit;">2 |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ------ + ------- + ------ +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        查询会计算每个年/月组合中表的出现次数，并自动删除重复条目。
</font></font></p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="example-auto-increment"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.9使用AUTO_INCREMENT</font></font></h3>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179174960"></a><a class="indexterm" name="idm140528179173888"></a><a class="indexterm" name="idm140528179172816"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        该</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性可用于为新行生成唯一标识：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE动物（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     id MEDIUMINT NOT NULL AUTO_INCREMENT，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     名称CHAR（30）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
     PRIMARY KEY（id）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO动物（名称）VALUES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ '狗'），（ '猫'），（ '企鹅'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ '松懈'），（ '鲸'），（ '鸵鸟'）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT * FROM动物;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        其中返回：
      </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ ---- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">狗|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">猫|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">企鹅|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">4 | </font><font style="vertical-align: inherit;">lax |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">5 | </font><font style="vertical-align: inherit;">鲸鱼|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">6 | </font><font style="vertical-align: inherit;">鸵鸟|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ ---- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        没有为</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        列</font><font style="vertical-align: inherit;">指定值</font><font style="vertical-align: inherit;">，所以MySQL自动分配序列号。</font><font style="vertical-align: inherit;">除非</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用S​​QL模式</font><font style="vertical-align: inherit;">，否则您还可以显式地将0赋给列以生成序列号
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果该列已声明</font></font><code class="literal">NOT
        NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则也可以将该</font></font><code class="literal">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">分配
         </font><font style="vertical-align: inherit;">给该列以生成序列号。</font><font style="vertical-align: inherit;">当您向</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列中</font><font style="vertical-align: inherit;">插入任何其他值时
         </font><font style="vertical-align: inherit;">，列将被设置为该值，并且序列被重置，以便下一个自动生成的值从最大列值开始依次跟随。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您可以</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL函数或</font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-insert-id" title="27.8.7.38 mysql_insert_id（）"><code class="literal">mysql_insert_id()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C API函数</font><font style="vertical-align: inherit;">检索最近自动生成的
         </font><font style="vertical-align: inherit;">值
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些函数是特定于连接的，所以它们的返回值不受另一个也在执行插入的连接的影响。
      </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">足够大</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的最小整数数据类型
         </font><font style="vertical-align: inherit;">来保存您将需要的最大序列值。</font><font style="vertical-align: inherit;">当列达到数据类型的上限时，下一次生成序列号的尝试失败。</font></font><code class="literal">UNSIGNED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果可能，</font><font style="vertical-align: inherit;">请使用该
         </font><font style="vertical-align: inherit;">属性以允许更大的范围。</font><font style="vertical-align: inherit;">例如，如果你使用
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，允许的最大序列号为127的
         </font></font><a class="link" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><code class="literal">TINYINT
        UNSIGNED</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，最大值为255见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/data-types.html#integer-types" title="11.2.1整型（精确值） -  INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11.2.1节“整型（精确值） - INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为所有整数类型的范围。
</font></font></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意
</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          对于多行插入，
           </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而
           </font></font><a class="link" href="/mysql-5.7-google-zh/connectors-apis.html#mysql-insert-id" title="27.8.7.38 mysql_insert_id（）"><code class="literal">mysql_insert_id()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际返回</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从钥匙
           </font></font><span class="emphasis"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一</font></font></em></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入行的。</font><font style="vertical-align: inherit;">这使复制设置中的多行插入可以在其他服务器上正确复制。
</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要以</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1以外</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">开始，请</font><font style="vertical-align: inherit;">使用</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><code class="literal">CREATE
        TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or来</font><font style="vertical-align: inherit;">设置该值</font></font><a class="link" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><code class="literal">ALTER TABLE</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示：
      </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL的&gt; </font></font><strong class="userinput"><code>ALTER TABLE tbl AUTO_INCREMENT = 100;</code></strong>
</pre>
<h4><a name="idm140528179140144"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InnoDB Notes</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定使用情况的</font><font style="vertical-align: inherit;">信息</font></font><code class="literal">InnoDB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请参见
         </font></font><a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-auto-increment-handling" title="14.8.1.5在InnoDB中处理AUTO_INCREMENT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第14.8.1.5节“InnoDB中的AUTO_INCREMENT处理”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<h4><a name="idm140528179136752"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MyISAM笔记</font></font></h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            对于</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格，您可以</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在多列索引中的辅助列上</font><font style="vertical-align: inherit;">指定
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，该</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">的生成值</font><font style="vertical-align: inherit;">计算为
             </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当您想要将数据放入有序组时，这非常有用。
          </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_max"><code class="literal">MAX(<em class="replaceable"><code>auto_increment_column</code></em>)
            + 1 WHERE
            prefix=<em class="replaceable"><code>given-prefix</code></em></code></a><font style="vertical-align: inherit;"></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CREATE TABLE动物（</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    grp ENUM（'fish'，'mammal'，'bird'）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    id MEDIUMINT NOT NULL AUTO_INCREMENT，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    名称CHAR（30）NOT NULL，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    PRIMARY KEY（grp，id）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）ENGINE = MyISAM;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
INSERT INTO动物（grp，name）VALUES</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ '哺乳动物'， '狗'），（ '哺乳动物'， '猫'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ '鸟'， '企鹅'），（ '鱼'， '宽松'），（ '哺乳动物'， '鲸鱼'），</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    （ '鸟'， '鸵鸟'）;</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECT * FROM animals ORDER BY grp，id;</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            其中返回：
          </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ -------- + ---- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">grp | </font><font style="vertical-align: inherit;">id | </font><font style="vertical-align: inherit;">名称|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---- + --------- +</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鱼| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">lax |</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哺乳动物| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">狗|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哺乳动物| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">猫|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">哺乳动物| </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">鲸鱼|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">企鹅|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">鸟| </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">鸵鸟|</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ -------- + ---- + --------- +</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            在这种情况下（当</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列是多列索引的一部分时），
             </font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果删除</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何组中</font><font style="vertical-align: inherit;">具有</font><font style="vertical-align: inherit;">最大值</font><font style="vertical-align: inherit;">的行，则会重新使用这些
             </font><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">即使对于</font><font style="vertical-align: inherit;">通常不会重复使用值的</font></font><code class="literal">MyISAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表
             </font><font style="vertical-align: inherit;">也会发生这种情况</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如果该</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列是多个索引的一部分，则MySQL会使用以该</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            列</font><font style="vertical-align: inherit;">开头的索引</font><font style="vertical-align: inherit;">（如果有的话）</font><font style="vertical-align: inherit;">生成序列值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，如果
             </font></font><code class="literal">animals</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中包含索引，
             </font></font><code class="literal">PRIMARY KEY (grp, id)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code class="literal">INDEX
            (id)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL将忽略</font></font><code class="literal">PRIMARY
            KEY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成序列值。</font><font style="vertical-align: inherit;">结果，表格将包含单个序列，而不是每个</font></font><code class="literal">grp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的序列</font><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>
<h4><a name="idm140528179117232"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进一步阅读</font></font></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关更多信息，</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请点击此处：
</font></font></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如何将</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            属性</font><font style="vertical-align: inherit;">分配给</font><font style="vertical-align: inherit;">列：</font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#create-table" title="13.1.18 CREATE TABLE语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.1.18节“CREATE TABLE语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
             </font></font><a class="xref" href="/mysql-5.7-google-zh/sql-syntax.html#alter-table" title="13.1.8 ALTER TABLE语法"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第13.1.8节“ALTER TABLE语法”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如何</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据</font></font><a class="link" href="/mysql-5.7-google-zh/server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            SQL模式</font><font style="vertical-align: inherit;">行为</font><font style="vertical-align: inherit;">：</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#sql-mode" title="5.1.8服务器SQL模式"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.8节“服务器SQL模式”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            如何使用该
             </font></font><a class="link" href="/mysql-5.7-google-zh/functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数查找包含最新</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">的行
             </font><font style="vertical-align: inherit;">：
             </font></font><a class="xref" href="/mysql-5.7-google-zh/functions.html#information-functions" title="12.14信息功能"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第12.14节“信息函数”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            设置</font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">值：</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p>
            <a class="xref" href="/mysql-5.7-google-zh/innodb-storage-engine.html#innodb-auto-increment-handling" title="14.8.1.5在InnoDB中处理AUTO_INCREMENT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第14.8.1.5节“InnoDB中的AUTO_INCREMENT处理”</font></font></a>
          </p></li><li class="listitem"><p>
            <code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和复制：
             </font></font><a class="xref" href="/mysql-5.7-google-zh/replication.html#replication-features-auto-increment" title="16.4.1.1复制和AUTO_INCREMENT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第16.4.1.1节“复制和AUTO_INCREMENT”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
          </font></font></p></li><li class="listitem"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            与
             </font></font><code class="literal">AUTO_INCREMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            （</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            和</font></font><a class="link" href="/mysql-5.7-google-zh/replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）可用于复制的</font></font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器系统变量</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：
             </font><a class="xref" href="/mysql-5.7-google-zh/server-administration.html#server-system-variables" title="5.1.5服务器系统变量"><font style="vertical-align: inherit;">第5.1.5节“服务器系统变量”</font></a><font style="vertical-align: inherit;">。
</font></font></p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="apache"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.7在Apache中使用MySQL</font></font></h2>

</div>

</div>

</div>
<a class="indexterm" name="idm140528179092640"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有些程序可以让你从MySQL数据库验证你的用户，还可以让你将日志文件写入MySQL表。
    </font></font></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通过将以下内容放入Apache配置文件中，您可以将Apache日志记录格式更改为易于被MySQL读取：
    </font></font></p><pre data-lang="none" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LogFormat \</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        “\”％h \“，％{％Y％m％d％H％M％S} t，％&gt; s，\”％b \“，\”％{Content-Type} o \</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        \ “％U \”，\ “％{Referer的} I \”，\ “％{用户代理} I \””</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      要将这种格式的日志文件加载到MySQL中，可以使用如下所示的语句：
    </font></font></p><pre data-lang="sql" class="programlisting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LOAD DATA INFILE''INTO </font></font><em class="replaceable"><code>/local/access_log</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TABLE</font></font><em class="replaceable"><code>tbl_name</code></em><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FIELDS TERMINATED BY'，'可选''''ESCAPED BY'\''</font></font><font></font>
</pre><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      命名表应创建为具有与</font></font><code class="literal">LogFormat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行写入日志文件的</font><font style="vertical-align: inherit;">列相对应的列</font><font style="vertical-align: inherit;">。
</font></font></p>
</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tbody><tr>
<td width="40%" align="left"><a accesskey="p" href="/mysql-5.7-google-zh/installing.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a></td>
<td width="20%" align="center"><a accesskey="u" href="/mysql-5.7-google-zh/tutorial.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向上</font></font></a></td>
<td width="40%" align="right">&nbsp;<a accesskey="n" href="/mysql-5.7-google-zh/programs.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2章安装和升级MySQL</font></font></td>
<td width="20%" align="center"><a accesskey="h" href="/mysql-5.7-google-zh/index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">家</font></font></a></td>
<td width="40%" align="right" valign="top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4章MySQL程序</font></font></td>
</tr>
</tbody></table>
</div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./images/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>